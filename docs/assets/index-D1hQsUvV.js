(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ql(t,o){const e=new Set(t.split(","));return o?n=>e.has(n.toLowerCase()):n=>e.has(n)}const Ht={},Ci=[],Tn=()=>{},py=()=>!1,Gs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xl=t=>t.startsWith("onUpdate:"),Qt=Object.assign,Zl=(t,o)=>{const e=t.indexOf(o);e>-1&&t.splice(e,1)},my=Object.prototype.hasOwnProperty,Pt=(t,o)=>my.call(t,o),it=Array.isArray,Ai=t=>Do(t)==="[object Map]",Fi=t=>Do(t)==="[object Set]",yh=t=>Do(t)==="[object Date]",dt=t=>typeof t=="function",Wt=t=>typeof t=="string",xr=t=>typeof t=="symbol",Nt=t=>t!==null&&typeof t=="object",gd=t=>(Nt(t)||dt(t))&&dt(t.then)&&dt(t.catch),yd=Object.prototype.toString,Do=t=>yd.call(t),gy=t=>Do(t).slice(8,-1),vd=t=>Do(t)==="[object Object]",Yl=t=>Wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yo=ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qs=t=>{const o=Object.create(null);return e=>o[e]||(o[e]=t(e))},yy=/-(\w)/g,Vn=qs(t=>t.replace(yy,(o,e)=>e?e.toUpperCase():"")),vy=/\B([A-Z])/g,zi=qs(t=>t.replace(vy,"-$1").toLowerCase()),Xs=qs(t=>t.charAt(0).toUpperCase()+t.slice(1)),gl=qs(t=>t?`on${Xs(t)}`:""),Er=(t,o)=>!Object.is(t,o),Ds=(t,o)=>{for(let e=0;e<t.length;e++)t[e](o)},Ls=(t,o,e)=>{Object.defineProperty(t,o,{configurable:!0,enumerable:!1,value:e})},Kl=t=>{const o=parseFloat(t);return isNaN(o)?t:o};let vh;const bd=()=>vh||(vh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jl(t){if(it(t)){const o={};for(let e=0;e<t.length;e++){const n=t[e],i=Wt(n)?_y(n):Jl(n);if(i)for(const a in i)o[a]=i[a]}return o}else if(Wt(t)||Nt(t))return t}const by=/;(?![^(]*\))/g,wy=/:([^]+)/,Sy=/\/\*[^]*?\*\//g;function _y(t){const o={};return t.replace(Sy,"").split(by).forEach(e=>{if(e){const n=e.split(wy);n.length>1&&(o[n[0].trim()]=n[1].trim())}}),o}function ko(t){let o="";if(Wt(t))o=t;else if(it(t))for(let e=0;e<t.length;e++){const n=ko(t[e]);n&&(o+=n+" ")}else if(Nt(t))for(const e in t)t[e]&&(o+=e+" ");return o.trim()}const xy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ey=ql(xy);function wd(t){return!!t||t===""}function Ty(t,o){if(t.length!==o.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=Mo(t[n],o[n]);return e}function Mo(t,o){if(t===o)return!0;let e=yh(t),n=yh(o);if(e||n)return e&&n?t.getTime()===o.getTime():!1;if(e=xr(t),n=xr(o),e||n)return t===o;if(e=it(t),n=it(o),e||n)return e&&n?Ty(t,o):!1;if(e=Nt(t),n=Nt(o),e||n){if(!e||!n)return!1;const i=Object.keys(t).length,a=Object.keys(o).length;if(i!==a)return!1;for(const d in t){const l=t.hasOwnProperty(d),c=o.hasOwnProperty(d);if(l&&!c||!l&&c||!Mo(t[d],o[d]))return!1}}return String(t)===String(o)}function Ql(t,o){return t.findIndex(e=>Mo(e,o))}const zr=t=>Wt(t)?t:t==null?"":it(t)||Nt(t)&&(t.toString===yd||!dt(t.toString))?JSON.stringify(t,Sd,2):String(t),Sd=(t,o)=>o&&o.__v_isRef?Sd(t,o.value):Ai(o)?{[`Map(${o.size})`]:[...o.entries()].reduce((e,[n,i],a)=>(e[yl(n,a)+" =>"]=i,e),{})}:Fi(o)?{[`Set(${o.size})`]:[...o.values()].map(e=>yl(e))}:xr(o)?yl(o):Nt(o)&&!it(o)&&!vd(o)?String(o):o,yl=(t,o="")=>{var e;return xr(t)?`Symbol(${(e=t.description)!=null?e:o})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class Py{constructor(o=!1){this.detached=o,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Cn,!o&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}run(o){if(this._active){const e=Cn;try{return Cn=this,o()}finally{Cn=e}}}on(){Cn=this}off(){Cn=this.parent}stop(o){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!o){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Oy(t,o=Cn){o&&o.active&&o.effects.push(t)}function Cy(){return Cn}let Vr;class $l{constructor(o,e,n,i){this.fn=o,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Oy(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Gr();for(let o=0;o<this._depsLength;o++){const e=this.deps[o];if(e.computed&&(Ay(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),qr()}return this._dirtyLevel>=4}set dirty(o){this._dirtyLevel=o?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let o=wr,e=Vr;try{return wr=!0,Vr=this,this._runnings++,bh(this),this.fn()}finally{wh(this),this._runnings--,Vr=e,wr=o}}stop(){var o;this.active&&(bh(this),wh(this),(o=this.onStop)==null||o.call(this),this.active=!1)}}function Ay(t){return t.value}function bh(t){t._trackId++,t._depsLength=0}function wh(t){if(t.deps.length>t._depsLength){for(let o=t._depsLength;o<t.deps.length;o++)_d(t.deps[o],t);t.deps.length=t._depsLength}}function _d(t,o){const e=t.get(o);e!==void 0&&o._trackId!==e&&(t.delete(o),t.size===0&&t.cleanup())}let wr=!0,Al=0;const xd=[];function Gr(){xd.push(wr),wr=!1}function qr(){const t=xd.pop();wr=t===void 0?!0:t}function eu(){Al++}function tu(){for(Al--;!Al&&Rl.length;)Rl.shift()()}function Ed(t,o,e){if(o.get(t)!==t._trackId){o.set(t,t._trackId);const n=t.deps[t._depsLength];n!==o?(n&&_d(n,t),t.deps[t._depsLength++]=o):t._depsLength++}}const Rl=[];function Td(t,o,e){eu();for(const n of t.keys()){let i;n._dirtyLevel<o&&(i??(i=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=o),n._shouldSchedule&&(i??(i=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&Rl.push(n.scheduler)))}tu()}const Pd=(t,o)=>{const e=new Map;return e.cleanup=t,e.computed=o,e},Dl=new WeakMap,Wr=Symbol(""),kl=Symbol("");function dn(t,o,e){if(wr&&Vr){let n=Dl.get(t);n||Dl.set(t,n=new Map);let i=n.get(e);i||n.set(e,i=Pd(()=>n.delete(e))),Ed(Vr,i)}}function nr(t,o,e,n,i,a){const d=Dl.get(t);if(!d)return;let l=[];if(o==="clear")l=[...d.values()];else if(e==="length"&&it(t)){const c=Number(n);d.forEach((p,g)=>{(g==="length"||!xr(g)&&g>=c)&&l.push(p)})}else switch(e!==void 0&&l.push(d.get(e)),o){case"add":it(t)?Yl(e)&&l.push(d.get("length")):(l.push(d.get(Wr)),Ai(t)&&l.push(d.get(kl)));break;case"delete":it(t)||(l.push(d.get(Wr)),Ai(t)&&l.push(d.get(kl)));break;case"set":Ai(t)&&l.push(d.get(Wr));break}eu();for(const c of l)c&&Td(c,4);tu()}const Ry=ql("__proto__,__v_isRef,__isVue"),Od=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xr)),Sh=Dy();function Dy(){const t={};return["includes","indexOf","lastIndexOf"].forEach(o=>{t[o]=function(...e){const n=Ct(this);for(let a=0,d=this.length;a<d;a++)dn(n,"get",a+"");const i=n[o](...e);return i===-1||i===!1?n[o](...e.map(Ct)):i}}),["push","pop","shift","unshift","splice"].forEach(o=>{t[o]=function(...e){Gr(),eu();const n=Ct(this)[o].apply(this,e);return tu(),qr(),n}}),t}function ky(t){const o=Ct(this);return dn(o,"has",t),o.hasOwnProperty(t)}class Cd{constructor(o=!1,e=!1){this._isReadonly=o,this._isShallow=e}get(o,e,n){const i=this._isReadonly,a=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return a;if(e==="__v_raw")return n===(i?a?Gy:kd:a?Dd:Rd).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(n)?o:void 0;const d=it(o);if(!i){if(d&&Pt(Sh,e))return Reflect.get(Sh,e,n);if(e==="hasOwnProperty")return ky}const l=Reflect.get(o,e,n);return(xr(e)?Od.has(e):Ry(e))||(i||dn(o,"get",e),a)?l:pn(l)?d&&Yl(e)?l:l.value:Nt(l)?i?jd(l):jo(l):l}}class Ad extends Cd{constructor(o=!1){super(!1,o)}set(o,e,n,i){let a=o[e];if(!this._isShallow){const c=ji(a);if(!Ns(n)&&!ji(n)&&(a=Ct(a),n=Ct(n)),!it(o)&&pn(a)&&!pn(n))return c?!1:(a.value=n,!0)}const d=it(o)&&Yl(e)?Number(e)<o.length:Pt(o,e),l=Reflect.set(o,e,n,i);return o===Ct(i)&&(d?Er(n,a)&&nr(o,"set",e,n):nr(o,"add",e,n)),l}deleteProperty(o,e){const n=Pt(o,e);o[e];const i=Reflect.deleteProperty(o,e);return i&&n&&nr(o,"delete",e,void 0),i}has(o,e){const n=Reflect.has(o,e);return(!xr(e)||!Od.has(e))&&dn(o,"has",e),n}ownKeys(o){return dn(o,"iterate",it(o)?"length":Wr),Reflect.ownKeys(o)}}class My extends Cd{constructor(o=!1){super(!0,o)}set(o,e){return!0}deleteProperty(o,e){return!0}}const jy=new Ad,Iy=new My,Ly=new Ad(!0),nu=t=>t,Zs=t=>Reflect.getPrototypeOf(t);function Es(t,o,e=!1,n=!1){t=t.__v_raw;const i=Ct(t),a=Ct(o);e||(Er(o,a)&&dn(i,"get",o),dn(i,"get",a));const{has:d}=Zs(i),l=n?nu:e?ou:Eo;if(d.call(i,o))return l(t.get(o));if(d.call(i,a))return l(t.get(a));t!==i&&t.get(o)}function Ts(t,o=!1){const e=this.__v_raw,n=Ct(e),i=Ct(t);return o||(Er(t,i)&&dn(n,"has",t),dn(n,"has",i)),t===i?e.has(t):e.has(t)||e.has(i)}function Ps(t,o=!1){return t=t.__v_raw,!o&&dn(Ct(t),"iterate",Wr),Reflect.get(t,"size",t)}function _h(t){t=Ct(t);const o=Ct(this);return Zs(o).has.call(o,t)||(o.add(t),nr(o,"add",t,t)),this}function xh(t,o){o=Ct(o);const e=Ct(this),{has:n,get:i}=Zs(e);let a=n.call(e,t);a||(t=Ct(t),a=n.call(e,t));const d=i.call(e,t);return e.set(t,o),a?Er(o,d)&&nr(e,"set",t,o):nr(e,"add",t,o),this}function Eh(t){const o=Ct(this),{has:e,get:n}=Zs(o);let i=e.call(o,t);i||(t=Ct(t),i=e.call(o,t)),n&&n.call(o,t);const a=o.delete(t);return i&&nr(o,"delete",t,void 0),a}function Th(){const t=Ct(this),o=t.size!==0,e=t.clear();return o&&nr(t,"clear",void 0,void 0),e}function Os(t,o){return function(n,i){const a=this,d=a.__v_raw,l=Ct(d),c=o?nu:t?ou:Eo;return!t&&dn(l,"iterate",Wr),d.forEach((p,g)=>n.call(i,c(p),c(g),a))}}function Cs(t,o,e){return function(...n){const i=this.__v_raw,a=Ct(i),d=Ai(a),l=t==="entries"||t===Symbol.iterator&&d,c=t==="keys"&&d,p=i[t](...n),g=e?nu:o?ou:Eo;return!o&&dn(a,"iterate",c?kl:Wr),{next(){const{value:w,done:S}=p.next();return S?{value:w,done:S}:{value:l?[g(w[0]),g(w[1])]:g(w),done:S}},[Symbol.iterator](){return this}}}}function pr(t){return function(...o){return t==="delete"?!1:t==="clear"?void 0:this}}function Ny(){const t={get(a){return Es(this,a)},get size(){return Ps(this)},has:Ts,add:_h,set:xh,delete:Eh,clear:Th,forEach:Os(!1,!1)},o={get(a){return Es(this,a,!1,!0)},get size(){return Ps(this)},has:Ts,add:_h,set:xh,delete:Eh,clear:Th,forEach:Os(!1,!0)},e={get(a){return Es(this,a,!0)},get size(){return Ps(this,!0)},has(a){return Ts.call(this,a,!0)},add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear"),forEach:Os(!0,!1)},n={get(a){return Es(this,a,!0,!0)},get size(){return Ps(this,!0)},has(a){return Ts.call(this,a,!0)},add:pr("add"),set:pr("set"),delete:pr("delete"),clear:pr("clear"),forEach:Os(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Cs(a,!1,!1),e[a]=Cs(a,!0,!1),o[a]=Cs(a,!1,!0),n[a]=Cs(a,!0,!0)}),[t,e,o,n]}const[By,Hy,Fy,zy]=Ny();function ru(t,o){const e=o?t?zy:Fy:t?Hy:By;return(n,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Pt(e,i)&&i in n?e:n,i,a)}const Uy={get:ru(!1,!1)},Vy={get:ru(!1,!0)},Wy={get:ru(!0,!1)},Rd=new WeakMap,Dd=new WeakMap,kd=new WeakMap,Gy=new WeakMap;function qy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xy(t){return t.__v_skip||!Object.isExtensible(t)?0:qy(gy(t))}function jo(t){return ji(t)?t:iu(t,!1,jy,Uy,Rd)}function Md(t){return iu(t,!1,Ly,Vy,Dd)}function jd(t){return iu(t,!0,Iy,Wy,kd)}function iu(t,o,e,n,i){if(!Nt(t)||t.__v_raw&&!(o&&t.__v_isReactive))return t;const a=i.get(t);if(a)return a;const d=Xy(t);if(d===0)return t;const l=new Proxy(t,d===2?n:e);return i.set(t,l),l}function Ri(t){return ji(t)?Ri(t.__v_raw):!!(t&&t.__v_isReactive)}function ji(t){return!!(t&&t.__v_isReadonly)}function Ns(t){return!!(t&&t.__v_isShallow)}function Id(t){return Ri(t)||ji(t)}function Ct(t){const o=t&&t.__v_raw;return o?Ct(o):t}function Ld(t){return Object.isExtensible(t)&&Ls(t,"__v_skip",!0),t}const Eo=t=>Nt(t)?jo(t):t,ou=t=>Nt(t)?jd(t):t;class Nd{constructor(o,e,n,i){this.getter=o,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new $l(()=>o(this._value),()=>ks(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const o=Ct(this);return(!o._cacheable||o.effect.dirty)&&Er(o._value,o._value=o.effect.run())&&ks(o,4),Bd(o),o.effect._dirtyLevel>=2&&ks(o,2),o._value}set value(o){this._setter(o)}get _dirty(){return this.effect.dirty}set _dirty(o){this.effect.dirty=o}}function Zy(t,o,e=!1){let n,i;const a=dt(t);return a?(n=t,i=Tn):(n=t.get,i=t.set),new Nd(n,i,a||!i,e)}function Bd(t){var o;wr&&Vr&&(t=Ct(t),Ed(Vr,(o=t.dep)!=null?o:t.dep=Pd(()=>t.dep=void 0,t instanceof Nd?t:void 0)))}function ks(t,o=4,e){t=Ct(t);const n=t.dep;n&&Td(n,o)}function pn(t){return!!(t&&t.__v_isRef===!0)}function Hd(t){return Fd(t,!1)}function Yy(t){return Fd(t,!0)}function Fd(t,o){return pn(t)?t:new Ky(t,o)}class Ky{constructor(o,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?o:Ct(o),this._value=e?o:Eo(o)}get value(){return Bd(this),this._value}set value(o){const e=this.__v_isShallow||Ns(o)||ji(o);o=e?o:Ct(o),Er(o,this._rawValue)&&(this._rawValue=o,this._value=e?o:Eo(o),ks(this,4))}}function rr(t){return pn(t)?t.value:t}const Jy={get:(t,o,e)=>rr(Reflect.get(t,o,e)),set:(t,o,e,n)=>{const i=t[o];return pn(i)&&!pn(e)?(i.value=e,!0):Reflect.set(t,o,e,n)}};function zd(t){return Ri(t)?t:new Proxy(t,Jy)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sr(t,o,e,n){try{return n?t(...n):t()}catch(i){Ys(i,o,e)}}function Dn(t,o,e,n){if(dt(t)){const a=Sr(t,o,e,n);return a&&gd(a)&&a.catch(d=>{Ys(d,o,e)}),a}const i=[];for(let a=0;a<t.length;a++)i.push(Dn(t[a],o,e,n));return i}function Ys(t,o,e,n=!0){const i=o?o.vnode:null;if(o){let a=o.parent;const d=o.proxy,l=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const p=a.ec;if(p){for(let g=0;g<p.length;g++)if(p[g](t,d,l)===!1)return}a=a.parent}const c=o.appContext.config.errorHandler;if(c){Sr(c,null,10,[t,d,l]);return}}Qy(t,e,i,n)}function Qy(t,o,e,n=!0){console.error(t)}let To=!1,Ml=!1;const rn=[];let zn=0;const Di=[];let gr=null,Fr=0;const Ud=Promise.resolve();let su=null;function au(t){const o=su||Ud;return t?o.then(this?t.bind(this):t):o}function $y(t){let o=zn+1,e=rn.length;for(;o<e;){const n=o+e>>>1,i=rn[n],a=Po(i);a<t||a===t&&i.pre?o=n+1:e=n}return o}function lu(t){(!rn.length||!rn.includes(t,To&&t.allowRecurse?zn+1:zn))&&(t.id==null?rn.push(t):rn.splice($y(t.id),0,t),Vd())}function Vd(){!To&&!Ml&&(Ml=!0,su=Ud.then(Gd))}function ev(t){const o=rn.indexOf(t);o>zn&&rn.splice(o,1)}function tv(t){it(t)?Di.push(...t):(!gr||!gr.includes(t,t.allowRecurse?Fr+1:Fr))&&Di.push(t),Vd()}function Ph(t,o,e=To?zn+1:0){for(;e<rn.length;e++){const n=rn[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;rn.splice(e,1),e--,n()}}}function Wd(t){if(Di.length){const o=[...new Set(Di)].sort((e,n)=>Po(e)-Po(n));if(Di.length=0,gr){gr.push(...o);return}for(gr=o,Fr=0;Fr<gr.length;Fr++)gr[Fr]();gr=null,Fr=0}}const Po=t=>t.id==null?1/0:t.id,nv=(t,o)=>{const e=Po(t)-Po(o);if(e===0){if(t.pre&&!o.pre)return-1;if(o.pre&&!t.pre)return 1}return e};function Gd(t){Ml=!1,To=!0,rn.sort(nv);try{for(zn=0;zn<rn.length;zn++){const o=rn[zn];o&&o.active!==!1&&Sr(o,null,14)}}finally{zn=0,rn.length=0,Wd(),To=!1,su=null,(rn.length||Di.length)&&Gd()}}function rv(t,o,...e){if(t.isUnmounted)return;const n=t.vnode.props||Ht;let i=e;const a=o.startsWith("update:"),d=a&&o.slice(7);if(d&&d in n){const g=`${d==="modelValue"?"model":d}Modifiers`,{number:w,trim:S}=n[g]||Ht;S&&(i=e.map(C=>Wt(C)?C.trim():C)),w&&(i=e.map(Kl))}let l,c=n[l=gl(o)]||n[l=gl(Vn(o))];!c&&a&&(c=n[l=gl(zi(o))]),c&&Dn(c,t,6,i);const p=n[l+"Once"];if(p){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Dn(p,t,6,i)}}function qd(t,o,e=!1){const n=o.emitsCache,i=n.get(t);if(i!==void 0)return i;const a=t.emits;let d={},l=!1;if(!dt(t)){const c=p=>{const g=qd(p,o,!0);g&&(l=!0,Qt(d,g))};!e&&o.mixins.length&&o.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!a&&!l?(Nt(t)&&n.set(t,null),null):(it(a)?a.forEach(c=>d[c]=null):Qt(d,a),Nt(t)&&n.set(t,d),d)}function Ks(t,o){return!t||!Gs(o)?!1:(o=o.slice(2).replace(/Once$/,""),Pt(t,o[0].toLowerCase()+o.slice(1))||Pt(t,zi(o))||Pt(t,o))}let qt=null,Xd=null;function Bs(t){const o=qt;return qt=t,Xd=t&&t.type.__scopeId||null,o}function uu(t,o=qt,e){if(!o||t._n)return t;const n=(...i)=>{n._d&&Nh(-1);const a=Bs(o);let d;try{d=t(...i)}finally{Bs(a),n._d&&Nh(1)}return d};return n._n=!0,n._c=!0,n._d=!0,n}function vl(t){const{type:o,vnode:e,proxy:n,withProxy:i,props:a,propsOptions:[d],slots:l,attrs:c,emit:p,render:g,renderCache:w,data:S,setupState:C,ctx:T,inheritAttrs:P}=t;let A,M;const V=Bs(t);try{if(e.shapeFlag&4){const te=i||n,re=te;A=Fn(g.call(re,te,w,a,C,S,T)),M=c}else{const te=o;A=Fn(te.length>1?te(a,{attrs:c,slots:l,emit:p}):te(a,null)),M=o.props?c:iv(c)}}catch(te){So.length=0,Ys(te,t,1),A=ln(Ii)}let X=A;if(M&&P!==!1){const te=Object.keys(M),{shapeFlag:re}=X;te.length&&re&7&&(d&&te.some(Xl)&&(M=ov(M,d)),X=Li(X,M))}return e.dirs&&(X=Li(X),X.dirs=X.dirs?X.dirs.concat(e.dirs):e.dirs),e.transition&&(X.transition=e.transition),A=X,Bs(V),A}const iv=t=>{let o;for(const e in t)(e==="class"||e==="style"||Gs(e))&&((o||(o={}))[e]=t[e]);return o},ov=(t,o)=>{const e={};for(const n in t)(!Xl(n)||!(n.slice(9)in o))&&(e[n]=t[n]);return e};function sv(t,o,e){const{props:n,children:i,component:a}=t,{props:d,children:l,patchFlag:c}=o,p=a.emitsOptions;if(o.dirs||o.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return n?Oh(n,d,p):!!d;if(c&8){const g=o.dynamicProps;for(let w=0;w<g.length;w++){const S=g[w];if(d[S]!==n[S]&&!Ks(p,S))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===d?!1:n?d?Oh(n,d,p):!0:!!d;return!1}function Oh(t,o,e){const n=Object.keys(o);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(o[a]!==t[a]&&!Ks(e,a))return!0}return!1}function av({vnode:t,parent:o},e){for(;o;){const n=o.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=o.vnode).el=e,o=o.parent;else break}}const Zd="components";function lv(t,o){return cv(Zd,t,!0,o)||t}const uv=Symbol.for("v-ndc");function cv(t,o,e=!0,n=!1){const i=qt||on;if(i){const a=i.type;if(t===Zd){const l=i0(a,!1);if(l&&(l===o||l===Vn(o)||l===Xs(Vn(o))))return a}const d=Ch(i[t]||a[t],o)||Ch(i.appContext[t],o);return!d&&n?a:d}}function Ch(t,o){return t&&(t[o]||t[Vn(o)]||t[Xs(Vn(o))])}const fv=t=>t.__isSuspense;function hv(t,o){o&&o.pendingBranch?it(t)?o.effects.push(...t):o.effects.push(t):tv(t)}const dv=Symbol.for("v-scx"),pv=()=>ir(dv),As={};function ki(t,o,e){return Yd(t,o,e)}function Yd(t,o,{immediate:e,deep:n,flush:i,once:a,onTrack:d,onTrigger:l}=Ht){if(o&&a){const ee=o;o=(...G)=>{ee(...G),re()}}const c=on,p=ee=>n===!0?ee:Ur(ee,n===!1?1:void 0);let g,w=!1,S=!1;if(pn(t)?(g=()=>t.value,w=Ns(t)):Ri(t)?(g=()=>p(t),w=!0):it(t)?(S=!0,w=t.some(ee=>Ri(ee)||Ns(ee)),g=()=>t.map(ee=>{if(pn(ee))return ee.value;if(Ri(ee))return p(ee);if(dt(ee))return Sr(ee,c,2)})):dt(t)?o?g=()=>Sr(t,c,2):g=()=>(C&&C(),Dn(t,c,3,[T])):g=Tn,o&&n){const ee=g;g=()=>Ur(ee())}let C,T=ee=>{C=X.onStop=()=>{Sr(ee,c,4),C=X.onStop=void 0}},P;if(ta)if(T=Tn,o?e&&Dn(o,c,3,[g(),S?[]:void 0,T]):g(),i==="sync"){const ee=pv();P=ee.__watcherHandles||(ee.__watcherHandles=[])}else return Tn;let A=S?new Array(t.length).fill(As):As;const M=()=>{if(!(!X.active||!X.dirty))if(o){const ee=X.run();(n||w||(S?ee.some((G,L)=>Er(G,A[L])):Er(ee,A)))&&(C&&C(),Dn(o,c,3,[ee,A===As?void 0:S&&A[0]===As?[]:A,T]),A=ee)}else X.run()};M.allowRecurse=!!o;let V;i==="sync"?V=M:i==="post"?V=()=>fn(M,c&&c.suspense):(M.pre=!0,c&&(M.id=c.uid),V=()=>lu(M));const X=new $l(g,Tn,V),te=Cy(),re=()=>{X.stop(),te&&Zl(te.effects,X)};return o?e?M():A=X.run():i==="post"?fn(X.run.bind(X),c&&c.suspense):X.run(),P&&P.push(re),re}function mv(t,o,e){const n=this.proxy,i=Wt(t)?t.includes(".")?Kd(n,t):()=>n[t]:t.bind(n,n);let a;dt(o)?a=o:(a=o.handler,e=o);const d=Io(this),l=Yd(i,a.bind(n),e);return d(),l}function Kd(t,o){const e=o.split(".");return()=>{let n=t;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function Ur(t,o,e=0,n){if(!Nt(t)||t.__v_skip)return t;if(o&&o>0){if(e>=o)return t;e++}if(n=n||new Set,n.has(t))return t;if(n.add(t),pn(t))Ur(t.value,o,e,n);else if(it(t))for(let i=0;i<t.length;i++)Ur(t[i],o,e,n);else if(Fi(t)||Ai(t))t.forEach(i=>{Ur(i,o,e,n)});else if(vd(t))for(const i in t)Ur(t[i],o,e,n);return t}function jl(t,o){if(qt===null)return t;const e=na(qt)||qt.proxy,n=t.dirs||(t.dirs=[]);for(let i=0;i<o.length;i++){let[a,d,l,c=Ht]=o[i];a&&(dt(a)&&(a={mounted:a,updated:a}),a.deep&&Ur(d),n.push({dir:a,instance:e,value:d,oldValue:void 0,arg:l,modifiers:c}))}return t}function Br(t,o,e,n){const i=t.dirs,a=o&&o.dirs;for(let d=0;d<i.length;d++){const l=i[d];a&&(l.oldValue=a[d].value);let c=l.dir[n];c&&(Gr(),Dn(c,e,8,[t.el,l,t,o]),qr())}}/*! #__NO_SIDE_EFFECTS__ */function Jd(t,o){return dt(t)?Qt({name:t.name},o,{setup:t}):t}const vo=t=>!!t.type.__asyncLoader,Qd=t=>t.type.__isKeepAlive;function gv(t,o){$d(t,"a",o)}function yv(t,o){$d(t,"da",o)}function $d(t,o,e=on){const n=t.__wdc||(t.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Js(o,n,e),e){let i=e.parent;for(;i&&i.parent;)Qd(i.parent.vnode)&&vv(n,o,e,i),i=i.parent}}function vv(t,o,e,n){const i=Js(o,t,n,!0);ep(()=>{Zl(n[o],i)},e)}function Js(t,o,e=on,n=!1){if(e){const i=e[t]||(e[t]=[]),a=o.__weh||(o.__weh=(...d)=>{if(e.isUnmounted)return;Gr();const l=Io(e),c=Dn(o,e,t,d);return l(),qr(),c});return n?i.unshift(a):i.push(a),a}}const or=t=>(o,e=on)=>(!ta||t==="sp")&&Js(t,(...n)=>o(...n),e),bv=or("bm"),wv=or("m"),Sv=or("bu"),_v=or("u"),xv=or("bum"),ep=or("um"),Ev=or("sp"),Tv=or("rtg"),Pv=or("rtc");function Ov(t,o=on){Js("ec",t,o)}function tp(t,o,e,n){let i;const a=e&&e[n];if(it(t)||Wt(t)){i=new Array(t.length);for(let d=0,l=t.length;d<l;d++)i[d]=o(t[d],d,void 0,a&&a[d])}else if(typeof t=="number"){i=new Array(t);for(let d=0;d<t;d++)i[d]=o(d+1,d,void 0,a&&a[d])}else if(Nt(t))if(t[Symbol.iterator])i=Array.from(t,(d,l)=>o(d,l,void 0,a&&a[l]));else{const d=Object.keys(t);i=new Array(d.length);for(let l=0,c=d.length;l<c;l++){const p=d[l];i[l]=o(t[p],p,l,a&&a[l])}}else i=[];return e&&(e[n]=i),i}function Cv(t,o,e={},n,i){if(qt.isCE||qt.parent&&vo(qt.parent)&&qt.parent.isCE)return o!=="default"&&(e.name=o),ln("slot",e,n&&n());let a=t[o];a&&a._c&&(a._d=!1),Un();const d=a&&np(a(e)),l=dp(hn,{key:e.key||d&&d.key||`_${o}`},d||(n?n():[]),d&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function np(t){return t.some(o=>Fs(o)?!(o.type===Ii||o.type===hn&&!np(o.children)):!0)?t:null}const Il=t=>t?mp(t)?na(t)||t.proxy:Il(t.parent):null,bo=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Il(t.parent),$root:t=>Il(t.root),$emit:t=>t.emit,$options:t=>cu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,lu(t.update)}),$nextTick:t=>t.n||(t.n=au.bind(t.proxy)),$watch:t=>mv.bind(t)}),bl=(t,o)=>t!==Ht&&!t.__isScriptSetup&&Pt(t,o),Av={get({_:t},o){const{ctx:e,setupState:n,data:i,props:a,accessCache:d,type:l,appContext:c}=t;let p;if(o[0]!=="$"){const C=d[o];if(C!==void 0)switch(C){case 1:return n[o];case 2:return i[o];case 4:return e[o];case 3:return a[o]}else{if(bl(n,o))return d[o]=1,n[o];if(i!==Ht&&Pt(i,o))return d[o]=2,i[o];if((p=t.propsOptions[0])&&Pt(p,o))return d[o]=3,a[o];if(e!==Ht&&Pt(e,o))return d[o]=4,e[o];Ll&&(d[o]=0)}}const g=bo[o];let w,S;if(g)return o==="$attrs"&&dn(t,"get",o),g(t);if((w=l.__cssModules)&&(w=w[o]))return w;if(e!==Ht&&Pt(e,o))return d[o]=4,e[o];if(S=c.config.globalProperties,Pt(S,o))return S[o]},set({_:t},o,e){const{data:n,setupState:i,ctx:a}=t;return bl(i,o)?(i[o]=e,!0):n!==Ht&&Pt(n,o)?(n[o]=e,!0):Pt(t.props,o)||o[0]==="$"&&o.slice(1)in t?!1:(a[o]=e,!0)},has({_:{data:t,setupState:o,accessCache:e,ctx:n,appContext:i,propsOptions:a}},d){let l;return!!e[d]||t!==Ht&&Pt(t,d)||bl(o,d)||(l=a[0])&&Pt(l,d)||Pt(n,d)||Pt(bo,d)||Pt(i.config.globalProperties,d)},defineProperty(t,o,e){return e.get!=null?t._.accessCache[o]=0:Pt(e,"value")&&this.set(t,o,e.value,null),Reflect.defineProperty(t,o,e)}};function Ah(t){return it(t)?t.reduce((o,e)=>(o[e]=null,o),{}):t}let Ll=!0;function Rv(t){const o=cu(t),e=t.proxy,n=t.ctx;Ll=!1,o.beforeCreate&&Rh(o.beforeCreate,t,"bc");const{data:i,computed:a,methods:d,watch:l,provide:c,inject:p,created:g,beforeMount:w,mounted:S,beforeUpdate:C,updated:T,activated:P,deactivated:A,beforeDestroy:M,beforeUnmount:V,destroyed:X,unmounted:te,render:re,renderTracked:ee,renderTriggered:G,errorCaptured:L,serverPrefetch:J,expose:ie,inheritAttrs:pe,components:ne,directives:ce,filters:ve}=o;if(p&&Dv(p,n,null),d)for(const Se in d){const Ee=d[Se];dt(Ee)&&(n[Se]=Ee.bind(e))}if(i){const Se=i.call(e,e);Nt(Se)&&(t.data=jo(Se))}if(Ll=!0,a)for(const Se in a){const Ee=a[Se],Ie=dt(Ee)?Ee.bind(e,e):dt(Ee.get)?Ee.get.bind(e,e):Tn,Le=!dt(Ee)&&dt(Ee.set)?Ee.set.bind(e):Tn,Te=An({get:Ie,set:Le});Object.defineProperty(n,Se,{enumerable:!0,configurable:!0,get:()=>Te.value,set:We=>Te.value=We})}if(l)for(const Se in l)rp(l[Se],n,e,Se);if(c){const Se=dt(c)?c.call(e):c;Reflect.ownKeys(Se).forEach(Ee=>{Ms(Ee,Se[Ee])})}g&&Rh(g,t,"c");function ae(Se,Ee){it(Ee)?Ee.forEach(Ie=>Se(Ie.bind(e))):Ee&&Se(Ee.bind(e))}if(ae(bv,w),ae(wv,S),ae(Sv,C),ae(_v,T),ae(gv,P),ae(yv,A),ae(Ov,L),ae(Pv,ee),ae(Tv,G),ae(xv,V),ae(ep,te),ae(Ev,J),it(ie))if(ie.length){const Se=t.exposed||(t.exposed={});ie.forEach(Ee=>{Object.defineProperty(Se,Ee,{get:()=>e[Ee],set:Ie=>e[Ee]=Ie})})}else t.exposed||(t.exposed={});re&&t.render===Tn&&(t.render=re),pe!=null&&(t.inheritAttrs=pe),ne&&(t.components=ne),ce&&(t.directives=ce)}function Dv(t,o,e=Tn){it(t)&&(t=Nl(t));for(const n in t){const i=t[n];let a;Nt(i)?"default"in i?a=ir(i.from||n,i.default,!0):a=ir(i.from||n):a=ir(i),pn(a)?Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:d=>a.value=d}):o[n]=a}}function Rh(t,o,e){Dn(it(t)?t.map(n=>n.bind(o.proxy)):t.bind(o.proxy),o,e)}function rp(t,o,e,n){const i=n.includes(".")?Kd(e,n):()=>e[n];if(Wt(t)){const a=o[t];dt(a)&&ki(i,a)}else if(dt(t))ki(i,t.bind(e));else if(Nt(t))if(it(t))t.forEach(a=>rp(a,o,e,n));else{const a=dt(t.handler)?t.handler.bind(e):o[t.handler];dt(a)&&ki(i,a,t)}}function cu(t){const o=t.type,{mixins:e,extends:n}=o,{mixins:i,optionsCache:a,config:{optionMergeStrategies:d}}=t.appContext,l=a.get(o);let c;return l?c=l:!i.length&&!e&&!n?c=o:(c={},i.length&&i.forEach(p=>Hs(c,p,d,!0)),Hs(c,o,d)),Nt(o)&&a.set(o,c),c}function Hs(t,o,e,n=!1){const{mixins:i,extends:a}=o;a&&Hs(t,a,e,!0),i&&i.forEach(d=>Hs(t,d,e,!0));for(const d in o)if(!(n&&d==="expose")){const l=kv[d]||e&&e[d];t[d]=l?l(t[d],o[d]):o[d]}return t}const kv={data:Dh,props:kh,emits:kh,methods:go,computed:go,beforeCreate:an,created:an,beforeMount:an,mounted:an,beforeUpdate:an,updated:an,beforeDestroy:an,beforeUnmount:an,destroyed:an,unmounted:an,activated:an,deactivated:an,errorCaptured:an,serverPrefetch:an,components:go,directives:go,watch:jv,provide:Dh,inject:Mv};function Dh(t,o){return o?t?function(){return Qt(dt(t)?t.call(this,this):t,dt(o)?o.call(this,this):o)}:o:t}function Mv(t,o){return go(Nl(t),Nl(o))}function Nl(t){if(it(t)){const o={};for(let e=0;e<t.length;e++)o[t[e]]=t[e];return o}return t}function an(t,o){return t?[...new Set([].concat(t,o))]:o}function go(t,o){return t?Qt(Object.create(null),t,o):o}function kh(t,o){return t?it(t)&&it(o)?[...new Set([...t,...o])]:Qt(Object.create(null),Ah(t),Ah(o??{})):o}function jv(t,o){if(!t)return o;if(!o)return t;const e=Qt(Object.create(null),t);for(const n in o)e[n]=an(t[n],o[n]);return e}function ip(){return{app:null,config:{isNativeTag:py,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Iv=0;function Lv(t,o){return function(n,i=null){dt(n)||(n=Qt({},n)),i!=null&&!Nt(i)&&(i=null);const a=ip(),d=new WeakSet;let l=!1;const c=a.app={_uid:Iv++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:s0,get config(){return a.config},set config(p){},use(p,...g){return d.has(p)||(p&&dt(p.install)?(d.add(p),p.install(c,...g)):dt(p)&&(d.add(p),p(c,...g))),c},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),c},component(p,g){return g?(a.components[p]=g,c):a.components[p]},directive(p,g){return g?(a.directives[p]=g,c):a.directives[p]},mount(p,g,w){if(!l){const S=ln(n,i);return S.appContext=a,w===!0?w="svg":w===!1&&(w=void 0),g&&o?o(S,p):t(S,p,w),l=!0,c._container=p,p.__vue_app__=c,na(S.component)||S.component.proxy}},unmount(){l&&(t(null,c._container),delete c._container.__vue_app__)},provide(p,g){return a.provides[p]=g,c},runWithContext(p){const g=wo;wo=c;try{return p()}finally{wo=g}}};return c}}let wo=null;function Ms(t,o){if(on){let e=on.provides;const n=on.parent&&on.parent.provides;n===e&&(e=on.provides=Object.create(n)),e[t]=o}}function ir(t,o,e=!1){const n=on||qt;if(n||wo){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:wo._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return e&&dt(o)?o.call(n&&n.proxy):o}}function Nv(t,o,e,n=!1){const i={},a={};Ls(a,$s,1),t.propsDefaults=Object.create(null),op(t,o,i,a);for(const d in t.propsOptions[0])d in i||(i[d]=void 0);e?t.props=n?i:Md(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function Bv(t,o,e,n){const{props:i,attrs:a,vnode:{patchFlag:d}}=t,l=Ct(i),[c]=t.propsOptions;let p=!1;if((n||d>0)&&!(d&16)){if(d&8){const g=t.vnode.dynamicProps;for(let w=0;w<g.length;w++){let S=g[w];if(Ks(t.emitsOptions,S))continue;const C=o[S];if(c)if(Pt(a,S))C!==a[S]&&(a[S]=C,p=!0);else{const T=Vn(S);i[T]=Bl(c,l,T,C,t,!1)}else C!==a[S]&&(a[S]=C,p=!0)}}}else{op(t,o,i,a)&&(p=!0);let g;for(const w in l)(!o||!Pt(o,w)&&((g=zi(w))===w||!Pt(o,g)))&&(c?e&&(e[w]!==void 0||e[g]!==void 0)&&(i[w]=Bl(c,l,w,void 0,t,!0)):delete i[w]);if(a!==l)for(const w in a)(!o||!Pt(o,w))&&(delete a[w],p=!0)}p&&nr(t,"set","$attrs")}function op(t,o,e,n){const[i,a]=t.propsOptions;let d=!1,l;if(o)for(let c in o){if(yo(c))continue;const p=o[c];let g;i&&Pt(i,g=Vn(c))?!a||!a.includes(g)?e[g]=p:(l||(l={}))[g]=p:Ks(t.emitsOptions,c)||(!(c in n)||p!==n[c])&&(n[c]=p,d=!0)}if(a){const c=Ct(e),p=l||Ht;for(let g=0;g<a.length;g++){const w=a[g];e[w]=Bl(i,c,w,p[w],t,!Pt(p,w))}}return d}function Bl(t,o,e,n,i,a){const d=t[e];if(d!=null){const l=Pt(d,"default");if(l&&n===void 0){const c=d.default;if(d.type!==Function&&!d.skipFactory&&dt(c)){const{propsDefaults:p}=i;if(e in p)n=p[e];else{const g=Io(i);n=p[e]=c.call(null,o),g()}}else n=c}d[0]&&(a&&!l?n=!1:d[1]&&(n===""||n===zi(e))&&(n=!0))}return n}function sp(t,o,e=!1){const n=o.propsCache,i=n.get(t);if(i)return i;const a=t.props,d={},l=[];let c=!1;if(!dt(t)){const g=w=>{c=!0;const[S,C]=sp(w,o,!0);Qt(d,S),C&&l.push(...C)};!e&&o.mixins.length&&o.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!c)return Nt(t)&&n.set(t,Ci),Ci;if(it(a))for(let g=0;g<a.length;g++){const w=Vn(a[g]);Mh(w)&&(d[w]=Ht)}else if(a)for(const g in a){const w=Vn(g);if(Mh(w)){const S=a[g],C=d[w]=it(S)||dt(S)?{type:S}:Qt({},S);if(C){const T=Lh(Boolean,C.type),P=Lh(String,C.type);C[0]=T>-1,C[1]=P<0||T<P,(T>-1||Pt(C,"default"))&&l.push(w)}}}const p=[d,l];return Nt(t)&&n.set(t,p),p}function Mh(t){return t[0]!=="$"&&!yo(t)}function jh(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Ih(t,o){return jh(t)===jh(o)}function Lh(t,o){return it(o)?o.findIndex(e=>Ih(e,t)):dt(o)&&Ih(o,t)?0:-1}const ap=t=>t[0]==="_"||t==="$stable",fu=t=>it(t)?t.map(Fn):[Fn(t)],Hv=(t,o,e)=>{if(o._n)return o;const n=uu((...i)=>fu(o(...i)),e);return n._c=!1,n},lp=(t,o,e)=>{const n=t._ctx;for(const i in t){if(ap(i))continue;const a=t[i];if(dt(a))o[i]=Hv(i,a,n);else if(a!=null){const d=fu(a);o[i]=()=>d}}},up=(t,o)=>{const e=fu(o);t.slots.default=()=>e},Fv=(t,o)=>{if(t.vnode.shapeFlag&32){const e=o._;e?(t.slots=Ct(o),Ls(o,"_",e)):lp(o,t.slots={})}else t.slots={},o&&up(t,o);Ls(t.slots,$s,1)},zv=(t,o,e)=>{const{vnode:n,slots:i}=t;let a=!0,d=Ht;if(n.shapeFlag&32){const l=o._;l?e&&l===1?a=!1:(Qt(i,o),!e&&l===1&&delete i._):(a=!o.$stable,lp(o,i)),d=o}else o&&(up(t,o),d={default:1});if(a)for(const l in i)!ap(l)&&d[l]==null&&delete i[l]};function Hl(t,o,e,n,i=!1){if(it(t)){t.forEach((S,C)=>Hl(S,o&&(it(o)?o[C]:o),e,n,i));return}if(vo(n)&&!i)return;const a=n.shapeFlag&4?na(n.component)||n.component.proxy:n.el,d=i?null:a,{i:l,r:c}=t,p=o&&o.r,g=l.refs===Ht?l.refs={}:l.refs,w=l.setupState;if(p!=null&&p!==c&&(Wt(p)?(g[p]=null,Pt(w,p)&&(w[p]=null)):pn(p)&&(p.value=null)),dt(c))Sr(c,l,12,[d,g]);else{const S=Wt(c),C=pn(c);if(S||C){const T=()=>{if(t.f){const P=S?Pt(w,c)?w[c]:g[c]:c.value;i?it(P)&&Zl(P,a):it(P)?P.includes(a)||P.push(a):S?(g[c]=[a],Pt(w,c)&&(w[c]=g[c])):(c.value=[a],t.k&&(g[t.k]=c.value))}else S?(g[c]=d,Pt(w,c)&&(w[c]=d)):C&&(c.value=d,t.k&&(g[t.k]=d))};d?(T.id=-1,fn(T,e)):T()}}}const fn=hv;function Uv(t){return Vv(t)}function Vv(t,o){const e=bd();e.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:d,createText:l,createComment:c,setText:p,setElementText:g,parentNode:w,nextSibling:S,setScopeId:C=Tn,insertStaticContent:T}=t,P=(W,Y,le,ye=null,x=null,j=null,H=void 0,F=null,$=!!Y.dynamicChildren)=>{if(W===Y)return;W&&!ho(W,Y)&&(ye=fe(W),We(W,x,j,!0),W=null),Y.patchFlag===-2&&($=!1,Y.dynamicChildren=null);const{type:se,ref:he,shapeFlag:_e}=Y;switch(se){case Qs:A(W,Y,le,ye);break;case Ii:M(W,Y,le,ye);break;case Sl:W==null&&V(Y,le,ye,H);break;case hn:ne(W,Y,le,ye,x,j,H,F,$);break;default:_e&1?re(W,Y,le,ye,x,j,H,F,$):_e&6?ce(W,Y,le,ye,x,j,H,F,$):(_e&64||_e&128)&&se.process(W,Y,le,ye,x,j,H,F,$,Be)}he!=null&&x&&Hl(he,W&&W.ref,j,Y||W,!Y)},A=(W,Y,le,ye)=>{if(W==null)n(Y.el=l(Y.children),le,ye);else{const x=Y.el=W.el;Y.children!==W.children&&p(x,Y.children)}},M=(W,Y,le,ye)=>{W==null?n(Y.el=c(Y.children||""),le,ye):Y.el=W.el},V=(W,Y,le,ye)=>{[W.el,W.anchor]=T(W.children,Y,le,ye,W.el,W.anchor)},X=({el:W,anchor:Y},le,ye)=>{let x;for(;W&&W!==Y;)x=S(W),n(W,le,ye),W=x;n(Y,le,ye)},te=({el:W,anchor:Y})=>{let le;for(;W&&W!==Y;)le=S(W),i(W),W=le;i(Y)},re=(W,Y,le,ye,x,j,H,F,$)=>{Y.type==="svg"?H="svg":Y.type==="math"&&(H="mathml"),W==null?ee(Y,le,ye,x,j,H,F,$):J(W,Y,x,j,H,F,$)},ee=(W,Y,le,ye,x,j,H,F)=>{let $,se;const{props:he,shapeFlag:_e,transition:Ae,dirs:Fe}=W;if($=W.el=d(W.type,j,he&&he.is,he),_e&8?g($,W.children):_e&16&&L(W.children,$,null,ye,x,wl(W,j),H,F),Fe&&Br(W,null,ye,"created"),G($,W,W.scopeId,H,ye),he){for(const Xe in he)Xe!=="value"&&!yo(Xe)&&a($,Xe,null,he[Xe],j,W.children,ye,x,Ze);"value"in he&&a($,"value",null,he.value,j),(se=he.onVnodeBeforeMount)&&Hn(se,ye,W)}Fe&&Br(W,null,ye,"beforeMount");const Me=Wv(x,Ae);Me&&Ae.beforeEnter($),n($,Y,le),((se=he&&he.onVnodeMounted)||Me||Fe)&&fn(()=>{se&&Hn(se,ye,W),Me&&Ae.enter($),Fe&&Br(W,null,ye,"mounted")},x)},G=(W,Y,le,ye,x)=>{if(le&&C(W,le),ye)for(let j=0;j<ye.length;j++)C(W,ye[j]);if(x){let j=x.subTree;if(Y===j){const H=x.vnode;G(W,H,H.scopeId,H.slotScopeIds,x.parent)}}},L=(W,Y,le,ye,x,j,H,F,$=0)=>{for(let se=$;se<W.length;se++){const he=W[se]=F?yr(W[se]):Fn(W[se]);P(null,he,Y,le,ye,x,j,H,F)}},J=(W,Y,le,ye,x,j,H)=>{const F=Y.el=W.el;let{patchFlag:$,dynamicChildren:se,dirs:he}=Y;$|=W.patchFlag&16;const _e=W.props||Ht,Ae=Y.props||Ht;let Fe;if(le&&Hr(le,!1),(Fe=Ae.onVnodeBeforeUpdate)&&Hn(Fe,le,Y,W),he&&Br(Y,W,le,"beforeUpdate"),le&&Hr(le,!0),se?ie(W.dynamicChildren,se,F,le,ye,wl(Y,x),j):H||Ee(W,Y,F,null,le,ye,wl(Y,x),j,!1),$>0){if($&16)pe(F,Y,_e,Ae,le,ye,x);else if($&2&&_e.class!==Ae.class&&a(F,"class",null,Ae.class,x),$&4&&a(F,"style",_e.style,Ae.style,x),$&8){const Me=Y.dynamicProps;for(let Xe=0;Xe<Me.length;Xe++){const k=Me[Xe],R=_e[k],B=Ae[k];(B!==R||k==="value")&&a(F,k,R,B,x,W.children,le,ye,Ze)}}$&1&&W.children!==Y.children&&g(F,Y.children)}else!H&&se==null&&pe(F,Y,_e,Ae,le,ye,x);((Fe=Ae.onVnodeUpdated)||he)&&fn(()=>{Fe&&Hn(Fe,le,Y,W),he&&Br(Y,W,le,"updated")},ye)},ie=(W,Y,le,ye,x,j,H)=>{for(let F=0;F<Y.length;F++){const $=W[F],se=Y[F],he=$.el&&($.type===hn||!ho($,se)||$.shapeFlag&70)?w($.el):le;P($,se,he,null,ye,x,j,H,!0)}},pe=(W,Y,le,ye,x,j,H)=>{if(le!==ye){if(le!==Ht)for(const F in le)!yo(F)&&!(F in ye)&&a(W,F,le[F],null,H,Y.children,x,j,Ze);for(const F in ye){if(yo(F))continue;const $=ye[F],se=le[F];$!==se&&F!=="value"&&a(W,F,se,$,H,Y.children,x,j,Ze)}"value"in ye&&a(W,"value",le.value,ye.value,H)}},ne=(W,Y,le,ye,x,j,H,F,$)=>{const se=Y.el=W?W.el:l(""),he=Y.anchor=W?W.anchor:l("");let{patchFlag:_e,dynamicChildren:Ae,slotScopeIds:Fe}=Y;Fe&&(F=F?F.concat(Fe):Fe),W==null?(n(se,le,ye),n(he,le,ye),L(Y.children||[],le,he,x,j,H,F,$)):_e>0&&_e&64&&Ae&&W.dynamicChildren?(ie(W.dynamicChildren,Ae,le,x,j,H,F),(Y.key!=null||x&&Y===x.subTree)&&cp(W,Y,!0)):Ee(W,Y,le,he,x,j,H,F,$)},ce=(W,Y,le,ye,x,j,H,F,$)=>{Y.slotScopeIds=F,W==null?Y.shapeFlag&512?x.ctx.activate(Y,le,ye,H,$):ve(Y,le,ye,x,j,H,$):Q(W,Y,$)},ve=(W,Y,le,ye,x,j,H)=>{const F=W.component=$v(W,ye,x);if(Qd(W)&&(F.ctx.renderer=Be),e0(F),F.asyncDep){if(x&&x.registerDep(F,ae),!W.el){const $=F.subTree=ln(Ii);M(null,$,Y,le)}}else ae(F,W,Y,le,x,j,H)},Q=(W,Y,le)=>{const ye=Y.component=W.component;if(sv(W,Y,le))if(ye.asyncDep&&!ye.asyncResolved){Se(ye,Y,le);return}else ye.next=Y,ev(ye.update),ye.effect.dirty=!0,ye.update();else Y.el=W.el,ye.vnode=Y},ae=(W,Y,le,ye,x,j,H)=>{const F=()=>{if(W.isMounted){let{next:he,bu:_e,u:Ae,parent:Fe,vnode:Me}=W;{const U=fp(W);if(U){he&&(he.el=Me.el,Se(W,he,H)),U.asyncDep.then(()=>{W.isUnmounted||F()});return}}let Xe=he,k;Hr(W,!1),he?(he.el=Me.el,Se(W,he,H)):he=Me,_e&&Ds(_e),(k=he.props&&he.props.onVnodeBeforeUpdate)&&Hn(k,Fe,he,Me),Hr(W,!0);const R=vl(W),B=W.subTree;W.subTree=R,P(B,R,w(B.el),fe(B),W,x,j),he.el=R.el,Xe===null&&av(W,R.el),Ae&&fn(Ae,x),(k=he.props&&he.props.onVnodeUpdated)&&fn(()=>Hn(k,Fe,he,Me),x)}else{let he;const{el:_e,props:Ae}=Y,{bm:Fe,m:Me,parent:Xe}=W,k=vo(Y);if(Hr(W,!1),Fe&&Ds(Fe),!k&&(he=Ae&&Ae.onVnodeBeforeMount)&&Hn(he,Xe,Y),Hr(W,!0),_e&&ft){const R=()=>{W.subTree=vl(W),ft(_e,W.subTree,W,x,null)};k?Y.type.__asyncLoader().then(()=>!W.isUnmounted&&R()):R()}else{const R=W.subTree=vl(W);P(null,R,le,ye,W,x,j),Y.el=R.el}if(Me&&fn(Me,x),!k&&(he=Ae&&Ae.onVnodeMounted)){const R=Y;fn(()=>Hn(he,Xe,R),x)}(Y.shapeFlag&256||Xe&&vo(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&W.a&&fn(W.a,x),W.isMounted=!0,Y=le=ye=null}},$=W.effect=new $l(F,Tn,()=>lu(se),W.scope),se=W.update=()=>{$.dirty&&$.run()};se.id=W.uid,Hr(W,!0),se()},Se=(W,Y,le)=>{Y.component=W;const ye=W.vnode.props;W.vnode=Y,W.next=null,Bv(W,Y.props,ye,le),zv(W,Y.children,le),Gr(),Ph(W),qr()},Ee=(W,Y,le,ye,x,j,H,F,$=!1)=>{const se=W&&W.children,he=W?W.shapeFlag:0,_e=Y.children,{patchFlag:Ae,shapeFlag:Fe}=Y;if(Ae>0){if(Ae&128){Le(se,_e,le,ye,x,j,H,F,$);return}else if(Ae&256){Ie(se,_e,le,ye,x,j,H,F,$);return}}Fe&8?(he&16&&Ze(se,x,j),_e!==se&&g(le,_e)):he&16?Fe&16?Le(se,_e,le,ye,x,j,H,F,$):Ze(se,x,j,!0):(he&8&&g(le,""),Fe&16&&L(_e,le,ye,x,j,H,F,$))},Ie=(W,Y,le,ye,x,j,H,F,$)=>{W=W||Ci,Y=Y||Ci;const se=W.length,he=Y.length,_e=Math.min(se,he);let Ae;for(Ae=0;Ae<_e;Ae++){const Fe=Y[Ae]=$?yr(Y[Ae]):Fn(Y[Ae]);P(W[Ae],Fe,le,null,x,j,H,F,$)}se>he?Ze(W,x,j,!0,!1,_e):L(Y,le,ye,x,j,H,F,$,_e)},Le=(W,Y,le,ye,x,j,H,F,$)=>{let se=0;const he=Y.length;let _e=W.length-1,Ae=he-1;for(;se<=_e&&se<=Ae;){const Fe=W[se],Me=Y[se]=$?yr(Y[se]):Fn(Y[se]);if(ho(Fe,Me))P(Fe,Me,le,null,x,j,H,F,$);else break;se++}for(;se<=_e&&se<=Ae;){const Fe=W[_e],Me=Y[Ae]=$?yr(Y[Ae]):Fn(Y[Ae]);if(ho(Fe,Me))P(Fe,Me,le,null,x,j,H,F,$);else break;_e--,Ae--}if(se>_e){if(se<=Ae){const Fe=Ae+1,Me=Fe<he?Y[Fe].el:ye;for(;se<=Ae;)P(null,Y[se]=$?yr(Y[se]):Fn(Y[se]),le,Me,x,j,H,F,$),se++}}else if(se>Ae)for(;se<=_e;)We(W[se],x,j,!0),se++;else{const Fe=se,Me=se,Xe=new Map;for(se=Me;se<=Ae;se++){const Je=Y[se]=$?yr(Y[se]):Fn(Y[se]);Je.key!=null&&Xe.set(Je.key,se)}let k,R=0;const B=Ae-Me+1;let U=!1,me=0;const Oe=new Array(B);for(se=0;se<B;se++)Oe[se]=0;for(se=Fe;se<=_e;se++){const Je=W[se];if(R>=B){We(Je,x,j,!0);continue}let ze;if(Je.key!=null)ze=Xe.get(Je.key);else for(k=Me;k<=Ae;k++)if(Oe[k-Me]===0&&ho(Je,Y[k])){ze=k;break}ze===void 0?We(Je,x,j,!0):(Oe[ze-Me]=se+1,ze>=me?me=ze:U=!0,P(Je,Y[ze],le,null,x,j,H,F,$),R++)}const Ge=U?Gv(Oe):Ci;for(k=Ge.length-1,se=B-1;se>=0;se--){const Je=Me+se,ze=Y[Je],It=Je+1<he?Y[Je+1].el:ye;Oe[se]===0?P(null,ze,le,It,x,j,H,F,$):U&&(k<0||se!==Ge[k]?Te(ze,le,It,2):k--)}}},Te=(W,Y,le,ye,x=null)=>{const{el:j,type:H,transition:F,children:$,shapeFlag:se}=W;if(se&6){Te(W.component.subTree,Y,le,ye);return}if(se&128){W.suspense.move(Y,le,ye);return}if(se&64){H.move(W,Y,le,Be);return}if(H===hn){n(j,Y,le);for(let _e=0;_e<$.length;_e++)Te($[_e],Y,le,ye);n(W.anchor,Y,le);return}if(H===Sl){X(W,Y,le);return}if(ye!==2&&se&1&&F)if(ye===0)F.beforeEnter(j),n(j,Y,le),fn(()=>F.enter(j),x);else{const{leave:_e,delayLeave:Ae,afterLeave:Fe}=F,Me=()=>n(j,Y,le),Xe=()=>{_e(j,()=>{Me(),Fe&&Fe()})};Ae?Ae(j,Me,Xe):Xe()}else n(j,Y,le)},We=(W,Y,le,ye=!1,x=!1)=>{const{type:j,props:H,ref:F,children:$,dynamicChildren:se,shapeFlag:he,patchFlag:_e,dirs:Ae}=W;if(F!=null&&Hl(F,null,le,W,!0),he&256){Y.ctx.deactivate(W);return}const Fe=he&1&&Ae,Me=!vo(W);let Xe;if(Me&&(Xe=H&&H.onVnodeBeforeUnmount)&&Hn(Xe,Y,W),he&6)at(W.component,le,ye);else{if(he&128){W.suspense.unmount(le,ye);return}Fe&&Br(W,null,Y,"beforeUnmount"),he&64?W.type.remove(W,Y,le,x,Be,ye):se&&(j!==hn||_e>0&&_e&64)?Ze(se,Y,le,!1,!0):(j===hn&&_e&384||!x&&he&16)&&Ze($,Y,le),ye&&je(W)}(Me&&(Xe=H&&H.onVnodeUnmounted)||Fe)&&fn(()=>{Xe&&Hn(Xe,Y,W),Fe&&Br(W,null,Y,"unmounted")},le)},je=W=>{const{type:Y,el:le,anchor:ye,transition:x}=W;if(Y===hn){Ke(le,ye);return}if(Y===Sl){te(W);return}const j=()=>{i(le),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(W.shapeFlag&1&&x&&!x.persisted){const{leave:H,delayLeave:F}=x,$=()=>H(le,j);F?F(W.el,j,$):$()}else j()},Ke=(W,Y)=>{let le;for(;W!==Y;)le=S(W),i(W),W=le;i(Y)},at=(W,Y,le)=>{const{bum:ye,scope:x,update:j,subTree:H,um:F}=W;ye&&Ds(ye),x.stop(),j&&(j.active=!1,We(H,W,Y,le)),F&&fn(F,Y),fn(()=>{W.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},Ze=(W,Y,le,ye=!1,x=!1,j=0)=>{for(let H=j;H<W.length;H++)We(W[H],Y,le,ye,x)},fe=W=>W.shapeFlag&6?fe(W.component.subTree):W.shapeFlag&128?W.suspense.next():S(W.anchor||W.el);let Ne=!1;const ke=(W,Y,le)=>{W==null?Y._vnode&&We(Y._vnode,null,null,!0):P(Y._vnode||null,W,Y,null,null,null,le),Ne||(Ne=!0,Ph(),Wd(),Ne=!1),Y._vnode=W},Be={p:P,um:We,m:Te,r:je,mt:ve,mc:L,pc:Ee,pbc:ie,n:fe,o:t};let nt,ft;return o&&([nt,ft]=o(Be)),{render:ke,hydrate:nt,createApp:Lv(ke,nt)}}function wl({type:t,props:o},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&o&&o.encoding&&o.encoding.includes("html")?void 0:e}function Hr({effect:t,update:o},e){t.allowRecurse=o.allowRecurse=e}function Wv(t,o){return(!t||t&&!t.pendingBranch)&&o&&!o.persisted}function cp(t,o,e=!1){const n=t.children,i=o.children;if(it(n)&&it(i))for(let a=0;a<n.length;a++){const d=n[a];let l=i[a];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[a]=yr(i[a]),l.el=d.el),e||cp(d,l)),l.type===Qs&&(l.el=d.el)}}function Gv(t){const o=t.slice(),e=[0];let n,i,a,d,l;const c=t.length;for(n=0;n<c;n++){const p=t[n];if(p!==0){if(i=e[e.length-1],t[i]<p){o[n]=i,e.push(n);continue}for(a=0,d=e.length-1;a<d;)l=a+d>>1,t[e[l]]<p?a=l+1:d=l;p<t[e[a]]&&(a>0&&(o[n]=e[a-1]),e[a]=n)}}for(a=e.length,d=e[a-1];a-- >0;)e[a]=d,d=o[d];return e}function fp(t){const o=t.subTree.component;if(o)return o.asyncDep&&!o.asyncResolved?o:fp(o)}const qv=t=>t.__isTeleport,hn=Symbol.for("v-fgt"),Qs=Symbol.for("v-txt"),Ii=Symbol.for("v-cmt"),Sl=Symbol.for("v-stc"),So=[];let Rn=null;function Un(t=!1){So.push(Rn=t?null:[])}function Xv(){So.pop(),Rn=So[So.length-1]||null}let Oo=1;function Nh(t){Oo+=t}function hp(t){return t.dynamicChildren=Oo>0?Rn||Ci:null,Xv(),Oo>0&&Rn&&Rn.push(t),t}function _r(t,o,e,n,i,a){return hp(pt(t,o,e,n,i,a,!0))}function dp(t,o,e,n,i){return hp(ln(t,o,e,n,i,!0))}function Fs(t){return t?t.__v_isVNode===!0:!1}function ho(t,o){return t.type===o.type&&t.key===o.key}const $s="__vInternal",pp=({key:t})=>t??null,js=({ref:t,ref_key:o,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Wt(t)||pn(t)||dt(t)?{i:qt,r:t,k:o,f:!!e}:t:null);function pt(t,o=null,e=null,n=0,i=null,a=t===hn?0:1,d=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:o,key:o&&pp(o),ref:o&&js(o),scopeId:Xd,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:qt};return l?(hu(c,e),a&128&&t.normalize(c)):e&&(c.shapeFlag|=Wt(e)?8:16),Oo>0&&!d&&Rn&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Rn.push(c),c}const ln=Zv;function Zv(t,o=null,e=null,n=0,i=null,a=!1){if((!t||t===uv)&&(t=Ii),Fs(t)){const l=Li(t,o,!0);return e&&hu(l,e),Oo>0&&!a&&Rn&&(l.shapeFlag&6?Rn[Rn.indexOf(t)]=l:Rn.push(l)),l.patchFlag|=-2,l}if(o0(t)&&(t=t.__vccOpts),o){o=Yv(o);let{class:l,style:c}=o;l&&!Wt(l)&&(o.class=ko(l)),Nt(c)&&(Id(c)&&!it(c)&&(c=Qt({},c)),o.style=Jl(c))}const d=Wt(t)?1:fv(t)?128:qv(t)?64:Nt(t)?4:dt(t)?2:0;return pt(t,o,e,n,i,d,a,!0)}function Yv(t){return t?Id(t)||$s in t?Qt({},t):t:null}function Li(t,o,e=!1){const{props:n,ref:i,patchFlag:a,children:d}=t,l=o?Kv(n||{},o):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&pp(l),ref:o&&o.ref?e&&i?it(i)?i.concat(js(o)):[i,js(o)]:js(o):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:d,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:o&&t.type!==hn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Li(t.ssContent),ssFallback:t.ssFallback&&Li(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ea(t=" ",o=0){return ln(Qs,null,t,o)}function Fn(t){return t==null||typeof t=="boolean"?ln(Ii):it(t)?ln(hn,null,t.slice()):typeof t=="object"?yr(t):ln(Qs,null,String(t))}function yr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Li(t)}function hu(t,o){let e=0;const{shapeFlag:n}=t;if(o==null)o=null;else if(it(o))e=16;else if(typeof o=="object")if(n&65){const i=o.default;i&&(i._c&&(i._d=!1),hu(t,i()),i._c&&(i._d=!0));return}else{e=32;const i=o._;!i&&!($s in o)?o._ctx=qt:i===3&&qt&&(qt.slots._===1?o._=1:(o._=2,t.patchFlag|=1024))}else dt(o)?(o={default:o,_ctx:qt},e=32):(o=String(o),n&64?(e=16,o=[ea(o)]):e=8);t.children=o,t.shapeFlag|=e}function Kv(...t){const o={};for(let e=0;e<t.length;e++){const n=t[e];for(const i in n)if(i==="class")o.class!==n.class&&(o.class=ko([o.class,n.class]));else if(i==="style")o.style=Jl([o.style,n.style]);else if(Gs(i)){const a=o[i],d=n[i];d&&a!==d&&!(it(a)&&a.includes(d))&&(o[i]=a?[].concat(a,d):d)}else i!==""&&(o[i]=n[i])}return o}function Hn(t,o,e,n=null){Dn(t,o,7,[e,n])}const Jv=ip();let Qv=0;function $v(t,o,e){const n=t.type,i=(o?o.appContext:t.appContext)||Jv,a={uid:Qv++,vnode:t,type:n,parent:o,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Py(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sp(n,i),emitsOptions:qd(n,i),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:n.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=o?o.root:a,a.emit=rv.bind(null,a),t.ce&&t.ce(a),a}let on=null,zs,Fl;{const t=bd(),o=(e,n)=>{let i;return(i=t[e])||(i=t[e]=[]),i.push(n),a=>{i.length>1?i.forEach(d=>d(a)):i[0](a)}};zs=o("__VUE_INSTANCE_SETTERS__",e=>on=e),Fl=o("__VUE_SSR_SETTERS__",e=>ta=e)}const Io=t=>{const o=on;return zs(t),t.scope.on(),()=>{t.scope.off(),zs(o)}},Bh=()=>{on&&on.scope.off(),zs(null)};function mp(t){return t.vnode.shapeFlag&4}let ta=!1;function e0(t,o=!1){o&&Fl(o);const{props:e,children:n}=t.vnode,i=mp(t);Nv(t,e,i,o),Fv(t,n);const a=i?t0(t,o):void 0;return o&&Fl(!1),a}function t0(t,o){const e=t.type;t.accessCache=Object.create(null),t.proxy=Ld(new Proxy(t.ctx,Av));const{setup:n}=e;if(n){const i=t.setupContext=n.length>1?r0(t):null,a=Io(t);Gr();const d=Sr(n,t,0,[t.props,i]);if(qr(),a(),gd(d)){if(d.then(Bh,Bh),o)return d.then(l=>{Hh(t,l,o)}).catch(l=>{Ys(l,t,0)});t.asyncDep=d}else Hh(t,d,o)}else gp(t,o)}function Hh(t,o,e){dt(o)?t.type.__ssrInlineRender?t.ssrRender=o:t.render=o:Nt(o)&&(t.setupState=zd(o)),gp(t,e)}let Fh;function gp(t,o,e){const n=t.type;if(!t.render){if(!o&&Fh&&!n.render){const i=n.template||cu(t).template;if(i){const{isCustomElement:a,compilerOptions:d}=t.appContext.config,{delimiters:l,compilerOptions:c}=n,p=Qt(Qt({isCustomElement:a,delimiters:l},d),c);n.render=Fh(i,p)}}t.render=n.render||Tn}{const i=Io(t);Gr();try{Rv(t)}finally{qr(),i()}}}function n0(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(o,e){return dn(t,"get","$attrs"),o[e]}}))}function r0(t){const o=e=>{t.exposed=e||{}};return{get attrs(){return n0(t)},slots:t.slots,emit:t.emit,expose:o}}function na(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(zd(Ld(t.exposed)),{get(o,e){if(e in o)return o[e];if(e in bo)return bo[e](t)},has(o,e){return e in o||e in bo}}))}function i0(t,o=!0){return dt(t)?t.displayName||t.name:t.name||o&&t.__name}function o0(t){return dt(t)&&"__vccOpts"in t}const An=(t,o)=>Zy(t,o,ta);function yp(t,o,e){const n=arguments.length;return n===2?Nt(o)&&!it(o)?Fs(o)?ln(t,null,[o]):ln(t,o):ln(t,null,o):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Fs(e)&&(e=[e]),ln(t,o,e))}const s0="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const a0="http://www.w3.org/2000/svg",l0="http://www.w3.org/1998/Math/MathML",vr=typeof document<"u"?document:null,zh=vr&&vr.createElement("template"),u0={insert:(t,o,e)=>{o.insertBefore(t,e||null)},remove:t=>{const o=t.parentNode;o&&o.removeChild(t)},createElement:(t,o,e,n)=>{const i=o==="svg"?vr.createElementNS(a0,t):o==="mathml"?vr.createElementNS(l0,t):vr.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>vr.createTextNode(t),createComment:t=>vr.createComment(t),setText:(t,o)=>{t.nodeValue=o},setElementText:(t,o)=>{t.textContent=o},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vr.querySelector(t),setScopeId(t,o){t.setAttribute(o,"")},insertStaticContent(t,o,e,n,i,a){const d=e?e.previousSibling:o.lastChild;if(i&&(i===a||i.nextSibling))for(;o.insertBefore(i.cloneNode(!0),e),!(i===a||!(i=i.nextSibling)););else{zh.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const l=zh.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}o.insertBefore(l,e)}return[d?d.nextSibling:o.firstChild,e?e.previousSibling:o.lastChild]}},c0=Symbol("_vtc");function f0(t,o,e){const n=t[c0];n&&(o=(o?[o,...n]:[...n]).join(" ")),o==null?t.removeAttribute("class"):e?t.setAttribute("class",o):t.className=o}const Us=Symbol("_vod"),vp=Symbol("_vsh"),h0={beforeMount(t,{value:o},{transition:e}){t[Us]=t.style.display==="none"?"":t.style.display,e&&o?e.beforeEnter(t):po(t,o)},mounted(t,{value:o},{transition:e}){e&&o&&e.enter(t)},updated(t,{value:o,oldValue:e},{transition:n}){!o!=!e&&(n?o?(n.beforeEnter(t),po(t,!0),n.enter(t)):n.leave(t,()=>{po(t,!1)}):po(t,o))},beforeUnmount(t,{value:o}){po(t,o)}};function po(t,o){t.style.display=o?t[Us]:"none",t[vp]=!o}const d0=Symbol(""),p0=/(^|;)\s*display\s*:/;function m0(t,o,e){const n=t.style,i=Wt(e);let a=!1;if(e&&!i){if(o)if(Wt(o))for(const d of o.split(";")){const l=d.slice(0,d.indexOf(":")).trim();e[l]==null&&Is(n,l,"")}else for(const d in o)e[d]==null&&Is(n,d,"");for(const d in e)d==="display"&&(a=!0),Is(n,d,e[d])}else if(i){if(o!==e){const d=n[d0];d&&(e+=";"+d),n.cssText=e,a=p0.test(e)}}else o&&t.removeAttribute("style");Us in t&&(t[Us]=a?n.display:"",t[vp]&&(n.display="none"))}const Uh=/\s*!important$/;function Is(t,o,e){if(it(e))e.forEach(n=>Is(t,o,n));else if(e==null&&(e=""),o.startsWith("--"))t.setProperty(o,e);else{const n=g0(t,o);Uh.test(e)?t.setProperty(zi(n),e.replace(Uh,""),"important"):t[n]=e}}const Vh=["Webkit","Moz","ms"],_l={};function g0(t,o){const e=_l[o];if(e)return e;let n=Vn(o);if(n!=="filter"&&n in t)return _l[o]=n;n=Xs(n);for(let i=0;i<Vh.length;i++){const a=Vh[i]+n;if(a in t)return _l[o]=a}return o}const Wh="http://www.w3.org/1999/xlink";function y0(t,o,e,n,i){if(n&&o.startsWith("xlink:"))e==null?t.removeAttributeNS(Wh,o.slice(6,o.length)):t.setAttributeNS(Wh,o,e);else{const a=Ey(o);e==null||a&&!wd(e)?t.removeAttribute(o):t.setAttribute(o,a?"":e)}}function v0(t,o,e,n,i,a,d){if(o==="innerHTML"||o==="textContent"){n&&d(n,i,a),t[o]=e??"";return}const l=t.tagName;if(o==="value"&&l!=="PROGRESS"&&!l.includes("-")){const p=l==="OPTION"?t.getAttribute("value")||"":t.value,g=e??"";(p!==g||!("_value"in t))&&(t.value=g),e==null&&t.removeAttribute(o),t._value=e;return}let c=!1;if(e===""||e==null){const p=typeof t[o];p==="boolean"?e=wd(e):e==null&&p==="string"?(e="",c=!0):p==="number"&&(e=0,c=!0)}try{t[o]=e}catch{}c&&t.removeAttribute(o)}function du(t,o,e,n){t.addEventListener(o,e,n)}function b0(t,o,e,n){t.removeEventListener(o,e,n)}const Gh=Symbol("_vei");function w0(t,o,e,n,i=null){const a=t[Gh]||(t[Gh]={}),d=a[o];if(n&&d)d.value=n;else{const[l,c]=S0(o);if(n){const p=a[o]=E0(n,i);du(t,l,p,c)}else d&&(b0(t,l,d,c),a[o]=void 0)}}const qh=/(?:Once|Passive|Capture)$/;function S0(t){let o;if(qh.test(t)){o={};let n;for(;n=t.match(qh);)t=t.slice(0,t.length-n[0].length),o[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zi(t.slice(2)),o]}let xl=0;const _0=Promise.resolve(),x0=()=>xl||(_0.then(()=>xl=0),xl=Date.now());function E0(t,o){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;Dn(T0(n,e.value),o,5,[n])};return e.value=t,e.attached=x0(),e}function T0(t,o){if(it(o)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},o.map(n=>i=>!i._stopped&&n&&n(i))}else return o}const Xh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,P0=(t,o,e,n,i,a,d,l,c)=>{const p=i==="svg";o==="class"?f0(t,n,p):o==="style"?m0(t,e,n):Gs(o)?Xl(o)||w0(t,o,e,n,d):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):O0(t,o,n,p))?v0(t,o,n,a,d,l,c):(o==="true-value"?t._trueValue=n:o==="false-value"&&(t._falseValue=n),y0(t,o,n,p))};function O0(t,o,e,n){if(n)return!!(o==="innerHTML"||o==="textContent"||o in t&&Xh(o)&&dt(e));if(o==="spellcheck"||o==="draggable"||o==="translate"||o==="form"||o==="list"&&t.tagName==="INPUT"||o==="type"&&t.tagName==="TEXTAREA")return!1;if(o==="width"||o==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Xh(o)&&Wt(e)?!1:o in t}const Vs=t=>{const o=t.props["onUpdate:modelValue"]||!1;return it(o)?e=>Ds(o,e):o},Mi=Symbol("_assign"),C0={deep:!0,created(t,o,e){t[Mi]=Vs(e),du(t,"change",()=>{const n=t._modelValue,i=Co(t),a=t.checked,d=t[Mi];if(it(n)){const l=Ql(n,i),c=l!==-1;if(a&&!c)d(n.concat(i));else if(!a&&c){const p=[...n];p.splice(l,1),d(p)}}else if(Fi(n)){const l=new Set(n);a?l.add(i):l.delete(i),d(l)}else d(bp(t,a))})},mounted:Zh,beforeUpdate(t,o,e){t[Mi]=Vs(e),Zh(t,o,e)}};function Zh(t,{value:o,oldValue:e},n){t._modelValue=o,it(o)?t.checked=Ql(o,n.props.value)>-1:Fi(o)?t.checked=o.has(n.props.value):o!==e&&(t.checked=Mo(o,bp(t,!0)))}const A0={deep:!0,created(t,{value:o,modifiers:{number:e}},n){const i=Fi(o);du(t,"change",()=>{const a=Array.prototype.filter.call(t.options,d=>d.selected).map(d=>e?Kl(Co(d)):Co(d));t[Mi](t.multiple?i?new Set(a):a:a[0]),t._assigning=!0,au(()=>{t._assigning=!1})}),t[Mi]=Vs(n)},mounted(t,{value:o,modifiers:{number:e}}){Yh(t,o,e)},beforeUpdate(t,o,e){t[Mi]=Vs(e)},updated(t,{value:o,modifiers:{number:e}}){t._assigning||Yh(t,o,e)}};function Yh(t,o,e){const n=t.multiple,i=it(o);if(!(n&&!i&&!Fi(o))){for(let a=0,d=t.options.length;a<d;a++){const l=t.options[a],c=Co(l);if(n)if(i){const p=typeof c;p==="string"||p==="number"?l.selected=o.includes(e?Kl(c):c):l.selected=Ql(o,c)>-1}else l.selected=o.has(c);else if(Mo(Co(l),o)){t.selectedIndex!==a&&(t.selectedIndex=a);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Co(t){return"_value"in t?t._value:t.value}function bp(t,o){const e=o?"_trueValue":"_falseValue";return e in t?t[e]:o}const R0=Qt({patchProp:P0},u0);let Kh;function D0(){return Kh||(Kh=Uv(R0))}const k0=(...t)=>{const o=D0().createApp(...t),{mount:e}=o;return o.mount=n=>{const i=j0(n);if(!i)return;const a=o._component;!dt(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const d=e(i,!1,M0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),d},o};function M0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function j0(t){return Wt(t)?document.querySelector(t):t}function I0(){return wp().__VUE_DEVTOOLS_GLOBAL_HOOK__}function wp(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const L0=typeof Proxy=="function",N0="devtools-plugin:setup",B0="plugin:settings:set";let Ti,zl;function H0(){var t;return Ti!==void 0||(typeof window<"u"&&window.performance?(Ti=!0,zl=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Ti=!0,zl=globalThis.perf_hooks.performance):Ti=!1),Ti}function F0(){return H0()?zl.now():Date.now()}class z0{constructor(o,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=o,this.hook=e;const n={};if(o.settings)for(const d in o.settings){const l=o.settings[d];n[d]=l.defaultValue}const i=`__vue-devtools-plugin-settings__${o.id}`;let a=Object.assign({},n);try{const d=localStorage.getItem(i),l=JSON.parse(d);Object.assign(a,l)}catch{}this.fallbacks={getSettings(){return a},setSettings(d){try{localStorage.setItem(i,JSON.stringify(d))}catch{}a=d},now(){return F0()}},e&&e.on(B0,(d,l)=>{d===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(d,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(d,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(p=>{this.targetQueue.push({method:l,args:c,resolve:p})})})}async setRealTarget(o){this.target=o;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function U0(t,o){const e=t,n=wp(),i=I0(),a=L0&&e.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))i.emit(N0,t,o);else{const d=a?new z0(e,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:o,proxy:d}),d&&o(d.proxiedTarget)}}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Oi=typeof document<"u";function V0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Dt=Object.assign;function El(t,o){const e={};for(const n in o){const i=o[n];e[n]=kn(i)?i.map(t):t(i)}return e}const _o=()=>{},kn=Array.isArray,Sp=/#/g,W0=/&/g,G0=/\//g,q0=/=/g,X0=/\?/g,_p=/\+/g,Z0=/%5B/g,Y0=/%5D/g,xp=/%5E/g,K0=/%60/g,Ep=/%7B/g,J0=/%7C/g,Tp=/%7D/g,Q0=/%20/g;function pu(t){return encodeURI(""+t).replace(J0,"|").replace(Z0,"[").replace(Y0,"]")}function $0(t){return pu(t).replace(Ep,"{").replace(Tp,"}").replace(xp,"^")}function Ul(t){return pu(t).replace(_p,"%2B").replace(Q0,"+").replace(Sp,"%23").replace(W0,"%26").replace(K0,"`").replace(Ep,"{").replace(Tp,"}").replace(xp,"^")}function eb(t){return Ul(t).replace(q0,"%3D")}function tb(t){return pu(t).replace(Sp,"%23").replace(X0,"%3F")}function nb(t){return t==null?"":tb(t).replace(G0,"%2F")}function Ao(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const rb=/\/$/,ib=t=>t.replace(rb,"");function Tl(t,o,e="/"){let n,i={},a="",d="";const l=o.indexOf("#");let c=o.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(n=o.slice(0,c),a=o.slice(c+1,l>-1?l:o.length),i=t(a)),l>-1&&(n=n||o.slice(0,l),d=o.slice(l,o.length)),n=lb(n??o,e),{fullPath:n+(a&&"?")+a+d,path:n,query:i,hash:Ao(d)}}function ob(t,o){const e=o.query?t(o.query):"";return o.path+(e&&"?")+e+(o.hash||"")}function Jh(t,o){return!o||!t.toLowerCase().startsWith(o.toLowerCase())?t:t.slice(o.length)||"/"}function sb(t,o,e){const n=o.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&Ni(o.matched[n],e.matched[i])&&Pp(o.params,e.params)&&t(o.query)===t(e.query)&&o.hash===e.hash}function Ni(t,o){return(t.aliasOf||t)===(o.aliasOf||o)}function Pp(t,o){if(Object.keys(t).length!==Object.keys(o).length)return!1;for(const e in t)if(!ab(t[e],o[e]))return!1;return!0}function ab(t,o){return kn(t)?Qh(t,o):kn(o)?Qh(o,t):t===o}function Qh(t,o){return kn(o)?t.length===o.length&&t.every((e,n)=>e===o[n]):t.length===1&&t[0]===o}function lb(t,o){if(t.startsWith("/"))return t;if(!t)return o;const e=o.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let a=e.length-1,d,l;for(d=0;d<n.length;d++)if(l=n[d],l!==".")if(l==="..")a>1&&a--;else break;return e.slice(0,a).join("/")+"/"+n.slice(d).join("/")}var Ro;(function(t){t.pop="pop",t.push="push"})(Ro||(Ro={}));var xo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(xo||(xo={}));function ub(t){if(!t)if(Oi){const o=document.querySelector("base");t=o&&o.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ib(t)}const cb=/^[^#]+#/;function fb(t,o){return t.replace(cb,"#")+o}function hb(t,o){const e=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:o.behavior,left:n.left-e.left-(o.left||0),top:n.top-e.top-(o.top||0)}}const ra=()=>({left:window.scrollX,top:window.scrollY});function db(t){let o;if("el"in t){const e=t.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;o=hb(i,t)}else o=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(o):window.scrollTo(o.left!=null?o.left:window.scrollX,o.top!=null?o.top:window.scrollY)}function $h(t,o){return(history.state?history.state.position-o:-1)+t}const Vl=new Map;function pb(t,o){Vl.set(t,o)}function mb(t){const o=Vl.get(t);return Vl.delete(t),o}let gb=()=>location.protocol+"//"+location.host;function Op(t,o){const{pathname:e,search:n,hash:i}=o,a=t.indexOf("#");if(a>-1){let l=i.includes(t.slice(a))?t.slice(a).length:1,c=i.slice(l);return c[0]!=="/"&&(c="/"+c),Jh(c,"")}return Jh(e,t)+n+i}function yb(t,o,e,n){let i=[],a=[],d=null;const l=({state:S})=>{const C=Op(t,location),T=e.value,P=o.value;let A=0;if(S){if(e.value=C,o.value=S,d&&d===T){d=null;return}A=P?S.position-P.position:0}else n(C);i.forEach(M=>{M(e.value,T,{delta:A,type:Ro.pop,direction:A?A>0?xo.forward:xo.back:xo.unknown})})};function c(){d=e.value}function p(S){i.push(S);const C=()=>{const T=i.indexOf(S);T>-1&&i.splice(T,1)};return a.push(C),C}function g(){const{history:S}=window;S.state&&S.replaceState(Dt({},S.state,{scroll:ra()}),"")}function w(){for(const S of a)S();a=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:c,listen:p,destroy:w}}function ed(t,o,e,n=!1,i=!1){return{back:t,current:o,forward:e,replaced:n,position:window.history.length,scroll:i?ra():null}}function vb(t){const{history:o,location:e}=window,n={value:Op(t,e)},i={value:o.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:o.length-1,replaced:!0,scroll:null},!0);function a(c,p,g){const w=t.indexOf("#"),S=w>-1?(e.host&&document.querySelector("base")?t:t.slice(w))+c:gb()+t+c;try{o[g?"replaceState":"pushState"](p,"",S),i.value=p}catch(C){console.error(C),e[g?"replace":"assign"](S)}}function d(c,p){const g=Dt({},o.state,ed(i.value.back,c,i.value.forward,!0),p,{position:i.value.position});a(c,g,!0),n.value=c}function l(c,p){const g=Dt({},i.value,o.state,{forward:c,scroll:ra()});a(g.current,g,!0);const w=Dt({},ed(n.value,c,null),{position:g.position+1},p);a(c,w,!1),n.value=c}return{location:n,state:i,push:l,replace:d}}function bb(t){t=ub(t);const o=vb(t),e=yb(t,o.state,o.location,o.replace);function n(a,d=!0){d||e.pauseListeners(),history.go(a)}const i=Dt({location:"",base:t,go:n,createHref:fb.bind(null,t)},o,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>o.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>o.state.value}),i}function wb(t){return typeof t=="string"||t&&typeof t=="object"}function Cp(t){return typeof t=="string"||typeof t=="symbol"}const mr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ap=Symbol("");var td;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(td||(td={}));function Bi(t,o){return Dt(new Error,{type:t,[Ap]:!0},o)}function tr(t,o){return t instanceof Error&&Ap in t&&(o==null||!!(t.type&o))}const nd="[^/]+?",Sb={sensitive:!1,strict:!1,start:!0,end:!0},_b=/[.+*?^${}()[\]/\\]/g;function xb(t,o){const e=Dt({},Sb,o),n=[];let i=e.start?"^":"";const a=[];for(const p of t){const g=p.length?[]:[90];e.strict&&!p.length&&(i+="/");for(let w=0;w<p.length;w++){const S=p[w];let C=40+(e.sensitive?.25:0);if(S.type===0)w||(i+="/"),i+=S.value.replace(_b,"\\$&"),C+=40;else if(S.type===1){const{value:T,repeatable:P,optional:A,regexp:M}=S;a.push({name:T,repeatable:P,optional:A});const V=M||nd;if(V!==nd){C+=10;try{new RegExp(`(${V})`)}catch(te){throw new Error(`Invalid custom RegExp for param "${T}" (${V}): `+te.message)}}let X=P?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;w||(X=A&&p.length<2?`(?:/${X})`:"/"+X),A&&(X+="?"),i+=X,C+=20,A&&(C+=-8),P&&(C+=-20),V===".*"&&(C+=-50)}g.push(C)}n.push(g)}if(e.strict&&e.end){const p=n.length-1;n[p][n[p].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const d=new RegExp(i,e.sensitive?"":"i");function l(p){const g=p.match(d),w={};if(!g)return null;for(let S=1;S<g.length;S++){const C=g[S]||"",T=a[S-1];w[T.name]=C&&T.repeatable?C.split("/"):C}return w}function c(p){let g="",w=!1;for(const S of t){(!w||!g.endsWith("/"))&&(g+="/"),w=!1;for(const C of S)if(C.type===0)g+=C.value;else if(C.type===1){const{value:T,repeatable:P,optional:A}=C,M=T in p?p[T]:"";if(kn(M)&&!P)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const V=kn(M)?M.join("/"):M;if(!V)if(A)S.length<2&&(g.endsWith("/")?g=g.slice(0,-1):w=!0);else throw new Error(`Missing required param "${T}"`);g+=V}}return g||"/"}return{re:d,score:n,keys:a,parse:l,stringify:c}}function Eb(t,o){let e=0;for(;e<t.length&&e<o.length;){const n=o[e]-t[e];if(n)return n;e++}return t.length<o.length?t.length===1&&t[0]===80?-1:1:t.length>o.length?o.length===1&&o[0]===80?1:-1:0}function Tb(t,o){let e=0;const n=t.score,i=o.score;for(;e<n.length&&e<i.length;){const a=Eb(n[e],i[e]);if(a)return a;e++}if(Math.abs(i.length-n.length)===1){if(rd(n))return 1;if(rd(i))return-1}return i.length-n.length}function rd(t){const o=t[t.length-1];return t.length>0&&o[o.length-1]<0}const Pb={type:0,value:""},Ob=/[a-zA-Z0-9_]/;function Cb(t){if(!t)return[[]];if(t==="/")return[[Pb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function o(C){throw new Error(`ERR (${e})/"${p}": ${C}`)}let e=0,n=e;const i=[];let a;function d(){a&&i.push(a),a=[]}let l=0,c,p="",g="";function w(){p&&(e===0?a.push({type:0,value:p}):e===1||e===2||e===3?(a.length>1&&(c==="*"||c==="+")&&o(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:p,regexp:g,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):o("Invalid state to consume buffer"),p="")}function S(){p+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:c==="/"?(p&&w(),d()):c===":"?(w(),e=1):S();break;case 4:S(),e=n;break;case 1:c==="("?e=2:Ob.test(c)?S():(w(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+c:e=3:g+=c;break;case 3:w(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,g="";break;default:o("Unknown state");break}}return e===2&&o(`Unfinished custom RegExp for param "${p}"`),w(),d(),i}function Ab(t,o,e){const n=xb(Cb(t.path),e),i=Dt(n,{record:t,parent:o,children:[],alias:[]});return o&&!i.record.aliasOf==!o.record.aliasOf&&o.children.push(i),i}function Rb(t,o){const e=[],n=new Map;o=sd({strict:!1,end:!0,sensitive:!1},o);function i(g){return n.get(g)}function a(g,w,S){const C=!S,T=Db(g);T.aliasOf=S&&S.record;const P=sd(o,g),A=[T];if("alias"in g){const X=typeof g.alias=="string"?[g.alias]:g.alias;for(const te of X)A.push(Dt({},T,{components:S?S.record.components:T.components,path:te,aliasOf:S?S.record:T}))}let M,V;for(const X of A){const{path:te}=X;if(w&&te[0]!=="/"){const re=w.record.path,ee=re[re.length-1]==="/"?"":"/";X.path=w.record.path+(te&&ee+te)}if(M=Ab(X,w,P),S?S.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),C&&g.name&&!od(M)&&d(g.name)),T.children){const re=T.children;for(let ee=0;ee<re.length;ee++)a(re[ee],M,S&&S.children[ee])}S=S||M,(M.record.components&&Object.keys(M.record.components).length||M.record.name||M.record.redirect)&&c(M)}return V?()=>{d(V)}:_o}function d(g){if(Cp(g)){const w=n.get(g);w&&(n.delete(g),e.splice(e.indexOf(w),1),w.children.forEach(d),w.alias.forEach(d))}else{const w=e.indexOf(g);w>-1&&(e.splice(w,1),g.record.name&&n.delete(g.record.name),g.children.forEach(d),g.alias.forEach(d))}}function l(){return e}function c(g){let w=0;for(;w<e.length&&Tb(g,e[w])>=0&&(g.record.path!==e[w].record.path||!Rp(g,e[w]));)w++;e.splice(w,0,g),g.record.name&&!od(g)&&n.set(g.record.name,g)}function p(g,w){let S,C={},T,P;if("name"in g&&g.name){if(S=n.get(g.name),!S)throw Bi(1,{location:g});P=S.record.name,C=Dt(id(w.params,S.keys.filter(V=>!V.optional).concat(S.parent?S.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),g.params&&id(g.params,S.keys.map(V=>V.name))),T=S.stringify(C)}else if(g.path!=null)T=g.path,S=e.find(V=>V.re.test(T)),S&&(C=S.parse(T),P=S.record.name);else{if(S=w.name?n.get(w.name):e.find(V=>V.re.test(w.path)),!S)throw Bi(1,{location:g,currentLocation:w});P=S.record.name,C=Dt({},w.params,g.params),T=S.stringify(C)}const A=[];let M=S;for(;M;)A.unshift(M.record),M=M.parent;return{name:P,path:T,params:C,matched:A,meta:Mb(A)}}return t.forEach(g=>a(g)),{addRoute:a,resolve:p,removeRoute:d,getRoutes:l,getRecordMatcher:i}}function id(t,o){const e={};for(const n of o)n in t&&(e[n]=t[n]);return e}function Db(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:kb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function kb(t){const o={},e=t.props||!1;if("component"in t)o.default=e;else for(const n in t.components)o[n]=typeof e=="object"?e[n]:e;return o}function od(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Mb(t){return t.reduce((o,e)=>Dt(o,e.meta),{})}function sd(t,o){const e={};for(const n in t)e[n]=n in o?o[n]:t[n];return e}function Rp(t,o){return o.children.some(e=>e===t||Rp(t,e))}function jb(t){const o={};if(t===""||t==="?")return o;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(_p," "),d=a.indexOf("="),l=Ao(d<0?a:a.slice(0,d)),c=d<0?null:Ao(a.slice(d+1));if(l in o){let p=o[l];kn(p)||(p=o[l]=[p]),p.push(c)}else o[l]=c}return o}function ad(t){let o="";for(let e in t){const n=t[e];if(e=eb(e),n==null){n!==void 0&&(o+=(o.length?"&":"")+e);continue}(kn(n)?n.map(a=>a&&Ul(a)):[n&&Ul(n)]).forEach(a=>{a!==void 0&&(o+=(o.length?"&":"")+e,a!=null&&(o+="="+a))})}return o}function Ib(t){const o={};for(const e in t){const n=t[e];n!==void 0&&(o[e]=kn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return o}const Lb=Symbol(""),ld=Symbol(""),mu=Symbol(""),Dp=Symbol(""),Wl=Symbol("");function mo(){let t=[];function o(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function e(){t=[]}return{add:o,list:()=>t.slice(),reset:e}}function br(t,o,e,n,i,a=d=>d()){const d=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,c)=>{const p=S=>{S===!1?c(Bi(4,{from:e,to:o})):S instanceof Error?c(S):wb(S)?c(Bi(2,{from:o,to:S})):(d&&n.enterCallbacks[i]===d&&typeof S=="function"&&d.push(S),l())},g=a(()=>t.call(n&&n.instances[i],o,e,p));let w=Promise.resolve(g);t.length<3&&(w=w.then(p)),w.catch(S=>c(S))})}function Pl(t,o,e,n,i=a=>a()){const a=[];for(const d of t)for(const l in d.components){let c=d.components[l];if(!(o!=="beforeRouteEnter"&&!d.instances[l]))if(Nb(c)){const g=(c.__vccOpts||c)[o];g&&a.push(br(g,e,n,d,l,i))}else{let p=c();a.push(()=>p.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${d.path}"`));const w=V0(g)?g.default:g;d.components[l]=w;const C=(w.__vccOpts||w)[o];return C&&br(C,e,n,d,l,i)()}))}}return a}function Nb(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ud(t){const o=ir(mu),e=ir(Dp),n=An(()=>o.resolve(rr(t.to))),i=An(()=>{const{matched:c}=n.value,{length:p}=c,g=c[p-1],w=e.matched;if(!g||!w.length)return-1;const S=w.findIndex(Ni.bind(null,g));if(S>-1)return S;const C=cd(c[p-2]);return p>1&&cd(g)===C&&w[w.length-1].path!==C?w.findIndex(Ni.bind(null,c[p-2])):S}),a=An(()=>i.value>-1&&Fb(e.params,n.value.params)),d=An(()=>i.value>-1&&i.value===e.matched.length-1&&Pp(e.params,n.value.params));function l(c={}){return Hb(c)?o[rr(t.replace)?"replace":"push"](rr(t.to)).catch(_o):Promise.resolve()}return{route:n,href:An(()=>n.value.href),isActive:a,isExactActive:d,navigate:l}}const Bb=Jd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ud,setup(t,{slots:o}){const e=jo(ud(t)),{options:n}=ir(mu),i=An(()=>({[fd(t.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[fd(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=o.default&&o.default(e);return t.custom?a:yp("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},a)}}}),kp=Bb;function Hb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const o=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(o))return}return t.preventDefault&&t.preventDefault(),!0}}function Fb(t,o){for(const e in o){const n=o[e],i=t[e];if(typeof n=="string"){if(n!==i)return!1}else if(!kn(i)||i.length!==n.length||n.some((a,d)=>a!==i[d]))return!1}return!0}function cd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const fd=(t,o,e)=>t??o??e,zb=Jd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:o,slots:e}){const n=ir(Wl),i=An(()=>t.route||n.value),a=ir(ld,0),d=An(()=>{let p=rr(a);const{matched:g}=i.value;let w;for(;(w=g[p])&&!w.components;)p++;return p}),l=An(()=>i.value.matched[d.value]);Ms(ld,An(()=>d.value+1)),Ms(Lb,l),Ms(Wl,i);const c=Hd();return ki(()=>[c.value,l.value,t.name],([p,g,w],[S,C,T])=>{g&&(g.instances[w]=p,C&&C!==g&&p&&p===S&&(g.leaveGuards.size||(g.leaveGuards=C.leaveGuards),g.updateGuards.size||(g.updateGuards=C.updateGuards))),p&&g&&(!C||!Ni(g,C)||!S)&&(g.enterCallbacks[w]||[]).forEach(P=>P(p))},{flush:"post"}),()=>{const p=i.value,g=t.name,w=l.value,S=w&&w.components[g];if(!S)return hd(e.default,{Component:S,route:p});const C=w.props[g],T=C?C===!0?p.params:typeof C=="function"?C(p):C:null,A=yp(S,Dt({},T,o,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(w.instances[g]=null)},ref:c}));return hd(e.default,{Component:A,route:p})||A}}});function hd(t,o){if(!t)return null;const e=t(o);return e.length===1?e[0]:e}const Mp=zb;function Ub(t){const o=Rb(t.routes,t),e=t.parseQuery||jb,n=t.stringifyQuery||ad,i=t.history,a=mo(),d=mo(),l=mo(),c=Yy(mr);let p=mr;Oi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=El.bind(null,fe=>""+fe),w=El.bind(null,nb),S=El.bind(null,Ao);function C(fe,Ne){let ke,Be;return Cp(fe)?(ke=o.getRecordMatcher(fe),Be=Ne):Be=fe,o.addRoute(Be,ke)}function T(fe){const Ne=o.getRecordMatcher(fe);Ne&&o.removeRoute(Ne)}function P(){return o.getRoutes().map(fe=>fe.record)}function A(fe){return!!o.getRecordMatcher(fe)}function M(fe,Ne){if(Ne=Dt({},Ne||c.value),typeof fe=="string"){const Y=Tl(e,fe,Ne.path),le=o.resolve({path:Y.path},Ne),ye=i.createHref(Y.fullPath);return Dt(Y,le,{params:S(le.params),hash:Ao(Y.hash),redirectedFrom:void 0,href:ye})}let ke;if(fe.path!=null)ke=Dt({},fe,{path:Tl(e,fe.path,Ne.path).path});else{const Y=Dt({},fe.params);for(const le in Y)Y[le]==null&&delete Y[le];ke=Dt({},fe,{params:w(Y)}),Ne.params=w(Ne.params)}const Be=o.resolve(ke,Ne),nt=fe.hash||"";Be.params=g(S(Be.params));const ft=ob(n,Dt({},fe,{hash:$0(nt),path:Be.path})),W=i.createHref(ft);return Dt({fullPath:ft,hash:nt,query:n===ad?Ib(fe.query):fe.query||{}},Be,{redirectedFrom:void 0,href:W})}function V(fe){return typeof fe=="string"?Tl(e,fe,c.value.path):Dt({},fe)}function X(fe,Ne){if(p!==fe)return Bi(8,{from:Ne,to:fe})}function te(fe){return G(fe)}function re(fe){return te(Dt(V(fe),{replace:!0}))}function ee(fe){const Ne=fe.matched[fe.matched.length-1];if(Ne&&Ne.redirect){const{redirect:ke}=Ne;let Be=typeof ke=="function"?ke(fe):ke;return typeof Be=="string"&&(Be=Be.includes("?")||Be.includes("#")?Be=V(Be):{path:Be},Be.params={}),Dt({query:fe.query,hash:fe.hash,params:Be.path!=null?{}:fe.params},Be)}}function G(fe,Ne){const ke=p=M(fe),Be=c.value,nt=fe.state,ft=fe.force,W=fe.replace===!0,Y=ee(ke);if(Y)return G(Dt(V(Y),{state:typeof Y=="object"?Dt({},nt,Y.state):nt,force:ft,replace:W}),Ne||ke);const le=ke;le.redirectedFrom=Ne;let ye;return!ft&&sb(n,Be,ke)&&(ye=Bi(16,{to:le,from:Be}),Te(Be,Be,!0,!1)),(ye?Promise.resolve(ye):ie(le,Be)).catch(x=>tr(x)?tr(x,2)?x:Le(x):Ee(x,le,Be)).then(x=>{if(x){if(tr(x,2))return G(Dt({replace:W},V(x.to),{state:typeof x.to=="object"?Dt({},nt,x.to.state):nt,force:ft}),Ne||le)}else x=ne(le,Be,!0,W,nt);return pe(le,Be,x),x})}function L(fe,Ne){const ke=X(fe,Ne);return ke?Promise.reject(ke):Promise.resolve()}function J(fe){const Ne=Ke.values().next().value;return Ne&&typeof Ne.runWithContext=="function"?Ne.runWithContext(fe):fe()}function ie(fe,Ne){let ke;const[Be,nt,ft]=Vb(fe,Ne);ke=Pl(Be.reverse(),"beforeRouteLeave",fe,Ne);for(const Y of Be)Y.leaveGuards.forEach(le=>{ke.push(br(le,fe,Ne))});const W=L.bind(null,fe,Ne);return ke.push(W),Ze(ke).then(()=>{ke=[];for(const Y of a.list())ke.push(br(Y,fe,Ne));return ke.push(W),Ze(ke)}).then(()=>{ke=Pl(nt,"beforeRouteUpdate",fe,Ne);for(const Y of nt)Y.updateGuards.forEach(le=>{ke.push(br(le,fe,Ne))});return ke.push(W),Ze(ke)}).then(()=>{ke=[];for(const Y of ft)if(Y.beforeEnter)if(kn(Y.beforeEnter))for(const le of Y.beforeEnter)ke.push(br(le,fe,Ne));else ke.push(br(Y.beforeEnter,fe,Ne));return ke.push(W),Ze(ke)}).then(()=>(fe.matched.forEach(Y=>Y.enterCallbacks={}),ke=Pl(ft,"beforeRouteEnter",fe,Ne,J),ke.push(W),Ze(ke))).then(()=>{ke=[];for(const Y of d.list())ke.push(br(Y,fe,Ne));return ke.push(W),Ze(ke)}).catch(Y=>tr(Y,8)?Y:Promise.reject(Y))}function pe(fe,Ne,ke){l.list().forEach(Be=>J(()=>Be(fe,Ne,ke)))}function ne(fe,Ne,ke,Be,nt){const ft=X(fe,Ne);if(ft)return ft;const W=Ne===mr,Y=Oi?history.state:{};ke&&(Be||W?i.replace(fe.fullPath,Dt({scroll:W&&Y&&Y.scroll},nt)):i.push(fe.fullPath,nt)),c.value=fe,Te(fe,Ne,ke,W),Le()}let ce;function ve(){ce||(ce=i.listen((fe,Ne,ke)=>{if(!at.listening)return;const Be=M(fe),nt=ee(Be);if(nt){G(Dt(nt,{replace:!0}),Be).catch(_o);return}p=Be;const ft=c.value;Oi&&pb($h(ft.fullPath,ke.delta),ra()),ie(Be,ft).catch(W=>tr(W,12)?W:tr(W,2)?(G(W.to,Be).then(Y=>{tr(Y,20)&&!ke.delta&&ke.type===Ro.pop&&i.go(-1,!1)}).catch(_o),Promise.reject()):(ke.delta&&i.go(-ke.delta,!1),Ee(W,Be,ft))).then(W=>{W=W||ne(Be,ft,!1),W&&(ke.delta&&!tr(W,8)?i.go(-ke.delta,!1):ke.type===Ro.pop&&tr(W,20)&&i.go(-1,!1)),pe(Be,ft,W)}).catch(_o)}))}let Q=mo(),ae=mo(),Se;function Ee(fe,Ne,ke){Le(fe);const Be=ae.list();return Be.length?Be.forEach(nt=>nt(fe,Ne,ke)):console.error(fe),Promise.reject(fe)}function Ie(){return Se&&c.value!==mr?Promise.resolve():new Promise((fe,Ne)=>{Q.add([fe,Ne])})}function Le(fe){return Se||(Se=!fe,ve(),Q.list().forEach(([Ne,ke])=>fe?ke(fe):Ne()),Q.reset()),fe}function Te(fe,Ne,ke,Be){const{scrollBehavior:nt}=t;if(!Oi||!nt)return Promise.resolve();const ft=!ke&&mb($h(fe.fullPath,0))||(Be||!ke)&&history.state&&history.state.scroll||null;return au().then(()=>nt(fe,Ne,ft)).then(W=>W&&db(W)).catch(W=>Ee(W,fe,Ne))}const We=fe=>i.go(fe);let je;const Ke=new Set,at={currentRoute:c,listening:!0,addRoute:C,removeRoute:T,hasRoute:A,getRoutes:P,resolve:M,options:t,push:te,replace:re,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:a.add,beforeResolve:d.add,afterEach:l.add,onError:ae.add,isReady:Ie,install(fe){const Ne=this;fe.component("RouterLink",kp),fe.component("RouterView",Mp),fe.config.globalProperties.$router=Ne,Object.defineProperty(fe.config.globalProperties,"$route",{enumerable:!0,get:()=>rr(c)}),Oi&&!je&&c.value===mr&&(je=!0,te(i.location).catch(nt=>{}));const ke={};for(const nt in mr)Object.defineProperty(ke,nt,{get:()=>c.value[nt],enumerable:!0});fe.provide(mu,Ne),fe.provide(Dp,Md(ke)),fe.provide(Wl,c);const Be=fe.unmount;Ke.add(fe),fe.unmount=function(){Ke.delete(fe),Ke.size<1&&(p=mr,ce&&ce(),ce=null,c.value=mr,je=!1,Se=!1),Be()}}};function Ze(fe){return fe.reduce((Ne,ke)=>Ne.then(()=>J(ke)),Promise.resolve())}return at}function Vb(t,o){const e=[],n=[],i=[],a=Math.max(o.matched.length,t.matched.length);for(let d=0;d<a;d++){const l=o.matched[d];l&&(t.matched.find(p=>Ni(p,l))?n.push(l):e.push(l));const c=t.matched[d];c&&(o.matched.find(p=>Ni(p,c))||i.push(c))}return[e,n,i]}const ia=(t,o)=>{const e=t.__vccOpts||t;for(const[n,i]of o)e[n]=i;return e},Wb={__name:"App",setup(t){return(o,e)=>(Un(),dp(rr(Mp)))}},Gb=ia(Wb,[["__scopeId","data-v-51ab9e30"]]),qb="/iike/ii-icon_256.png",Hi={version:"0.0.1",list:[{bookid:"iike-15",title:"井伊家史料　十五",volume:15,identifier:"850/8500/08/0115",pages:["0001","0002","0003","0004","0005","0006","0007","0008","0009","0010","0011","0012","0013","0014","0015","0016","0017","0018","0019","0020","0021","0022","0023","0024","0025","0026","0027","0028","0029","0030","0031","0032","0033","0034","0035","0036","0037","0038","0039","0040","0041","0042","0043","0044","0045","0046","0047","0048","0049","0050","0051","0052","0053","0054","0055","0056","0057","0058","0059","0060","0061","0062","0063","0064","0065","0066","0067","0068","0069","0070","0071","0072","0073","0074","0075","0076","0077","0078","0079","0080","0081","0082","0083","0084","0085","0086","0087","0088","0089","0090","0091","0092","0093","0094","0095","0096","0097","0098","0099","0100","0101","0102","0103","0104","0105","0106","0107","0108","0109","0110","0111","0112","0113","0114","0115","0116","0117","0118","0119","0120","0121","0122","0123","0124","0125","0126","0127","0128","0129","0130","0131","0132","0133","0134","0135","0136","0137","0138","0139","0140","0141","0142","0143","0144","0145","0146","0147","0148","0149","0150","0151","0152","0153","0154","0155","0156","0157","0158","0159","0160","0161","0162","0163","0164","0165","0166","0167","0168","0169","0170","0171","0172","0173","0174","0175","0176","0177","0178","0179","0180","0181","0182","0183","0184","0185","0186","0187","0188","0189","0190","0191","0192","0193","0194","0195","0196","0197","0198","0199","0200","0201","0202","0203","0204","0205","0206","0207","0208","0209","0210","0211","0212","0213","0214","0215","0216","0217","0218","0219","0220","0221","0222","0223","0224","0225","0226","0227","0228","0229","0230","0231","0232","0233","0234","0235","0236","0237","0238","0239","0240","0241","0242","0243","0244","0245","0246","0247","0248","0249","0250","0251","0252","0253","0254","0255","0256","0257","0258","0259","0260","0261","0262","0263","0264","0265","0266","0267","0268","0269","0270","0271","0272","0273","0274","0275","0276","0277","0278","0279","0280","0281","0282","0283","0284","0285","0286","0287","0288","0289","0290","0291","0292","0293","0294","0295","0296","0297","0298","0299","0300","0301","0302","0303","0304","0305","0306","0307","0308","0309","0310","0311","0312","0313","0314","0315","0316","0317","0318","0319","0320","0321","0322","0323","0324","0325","0326","0327","0328","0329","0330","0331","0332","0333","0334","0335","0336","0337","0338","0339","0340","0341","0342","0343","0344","0345","0346","0347","0348","0349","0350","0351","0352","0353","0354","0355","0356","0357","0358","0359","0360","0361","0362","0363","0364","0365","0366","0367","0368","0369","0370"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:2112,height:3200,width_excep:[],height_excep:[]},{bookid:"iike-20",title:"井伊家史料　二十",volume:"20",identifier:"850/8500/08/0120",pages:["0001","0002","0003","0004","0005","0006","0007","0008","0009","0010","0011","0012","0013","0014","0015","0016","0017","0018","0019","0020","0021","0022","0023","0024","0025","0026","0027","0028","0029","0030","0031","0032","0033","0034","0035","0036","0037","0038","0039","0040","0041","0042","0043","0044","0045","0046","0047","0048","0049","0050","0051","0052","0053","0054","0055","0056","0057","0058","0059","0060","0061","0062","0063","0064","0065","0066","0067","0068","0069","0070","0071","0072","0073","0074","0075","0076","0077","0078","0079","0080","0081","0082","0083","0084","0085","0086","0087","0088","0089","0090","0091","0092","0093","0094","0095","0096","0097","0098","0099","0100","0101","0102","0103","0104","0105","0106","0107","0108","0109","0110","0111","0112","0113","0114","0115","0116","0117","0118","0119","0120","0121","0122","0123","0124","0125","0126","0127","0128","0129","0130","0131","0132","0133","0134","0135","0136","0137","0138","0139","0140","0141","0142","0143","0144","0145","0146","0147","0148","0149","0150","0151","0152","0153","0154","0155","0156","0157","0158","0159","0160","0161","0162","0163","0164","0165","0166","0167","0168","0169","0170","0171","0172","0173","0174","0175","0176","0177","0178","0179","0180","0181","0182","0183","0184","0185","0186","0187","0188","0189","0190","0191","0192","0193","0194","0195","0196","0197","0198","0199","0200","0201","0202","0203","0204","0205","0206","0207","0208","0209","0210","0211","0212","0213","0214","0215","0216","0217","0218","0219","0220","0221","0222","0223","0224","0225","0226","0227","0228","0229","0230","0231","0232","0233","0234","0235","0236","0237","0238","0239","0240","0241","0242","0243","0244","0245","0246","0247","0248","0249","0250","0251","0252","0253","0254","0255","0256","0257","0258","0259","0260","0261","0262","0263","0264","0265","0266","0267","0268","0269","0270","0271","0272","0273","0274","0275","0276","0277","0278","0279","0280","0281","0282","0283","0284","0285","0286","0287","0288","0289","0290","0291","0292","0293","0294","0295","0296","0297","0298","0299","0300","0301","0302","0303","0304","0305","0306","0307","0308","0309","0310","0311","0312","0313","0314","0315","0316","0317","0318","0319","0320","0321","0322","0323","0324","0325","0326","0327","0328","0329","0330","0331","0332","0333","0334","0335","0336","0337","0338","0339","0340","0341","0342","0343","0344","0345","0346","0347","0348","0349","0350","0351","0352","0353","0354","0355","0356","0357","0358","0359","0360","0361","0362","0363","0364","0365","0366","0367","0368","0369","0370","0371","0372","0373","0374","0375","0376"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:2112,height:3200,width_excep:[],height_excep:[]},{bookid:"iike-30",title:"井伊家史料　三十",volume:"30",identifier:"850/8500/08/0130",pages:["0001","0002","0003","0004","0005","0006","0007","0008","0009","0010","0011","0012","0013","0014","0015","0016","0017","0018","0019","0020","0021","0022","0023","0024","0025","0026","0027","0028","0029","0030","0031","0032","0033","0034","0035","0036","0037","0038","0039","0040","0041","0042","0043","0044","0045","0046","0047","0048","0049","0050","0051","0052","0053","0054","0055","0056","0057","0058","0059","0060","0061","0062","0063","0064","0065","0066","0067","0068","0069","0070","0071","0072","0073","0074","0075","0076","0077","0078","0079","0080","0081","0082","0083","0084","0085","0086","0087","0088","0089","0090","0091","0092","0093","0094","0095","0096","0097","0098","0099","0100","0101","0102","0103","0104","0105","0106","0107","0108","0109","0110","0111","0112","0113","0114","0115","0116","0117","0118","0119","0120","0121","0122","0123","0124","0125","0126","0127","0128","0129","0130","0131","0132","0133","0134","0135","0136","0137","0138","0139","0140","0141","0142","0143","0144","0145","0146","0147","0148","0149","0150","0151","0152","0153","0154","0155","0156","0157","0158","0159","0160","0161","0162","0163","0164","0165","0166","0167","0168","0169","0170","0171","0172","0173","0174","0175","0176","0177","0178","0179","0180","0181","0182","0183","0184","0185","0186","0187","0188","0189","0190","0191","0192","0193","0194","0195","0196","0197","0198","0199","0200","0201","0202","0203","0204","0205","0206","0207","0208","0209","0210","0211","0212","0213","0214","0215","0216","0217","0218","0219","0220","0221","0222","0223","0224","0225","0226","0227","0228","0229","0230","0231","0232","0233","0234","0235","0236","0237","0238","0239","0240","0241","0242","0243","0244","0245","0246","0247","0248","0249","0250","0251","0252","0253","0254","0255","0256","0257","0258","0259","0260","0261","0262","0263","0264","0265","0266","0267","0268","0269","0270","0271","0272","0273","0274","0275","0276","0277","0278","0279","0280","0281","0282","0283","0284","0285","0286","0287","0288"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/supple/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/supple/",extension:".tif"},width:3492,height:4967,width_excep:[],height_excep:[]},{bookid:"akiyasu-02",title:"松平昭休往復書簡留　第二冊",volume:"2",identifier:"400/4344/1/2",pages:["30000001","30000002","30000003","30000004","30000005","30000006","30000007","30000008","30000009","30000010","30000011","30000012","30000013","30000014","30000015","30000016","30000017","30000018","30000019","30000020","30000021","30000022","30000023","30000024","30000025","30000026","30000027","30000028","30000029","30000030","30000031","30000032","30000033","30000034","30000035"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:8256,height:5504,width_excep:[],height_excep:[]},{bookid:"akiyasu-02-kaitai",title:"松平昭休往復書簡留　第二冊（解体中）",volume:"2",identifier:"400/4344/1/2",pages:["20000001","20000002","20000003","20000004","20000005","20000006","20000007","20000008","20000009","20000010","20000011","20000012","20000013","20000014","20000015","20000016","20000017","20000018","20000019","20000020","20000021","20000022","20000023","20000024","20000025","20000026","20000027","20000028","20000029","20000030","20000031"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:8256,height:5504,width_excep:[],height_excep:[]},{bookid:"akiyasu-02-touka",title:"松平昭休往復書簡留　第二冊（透過光撮影）",volume:"2",identifier:"400/4344/1/2",pages:["10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000009","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:8256,height:5504,width_excep:[],height_excep:[]},{bookid:"akiyasu-02-kaitaimae",title:"松平昭休往復書簡留　第二冊（解体前）",volume:"2",identifier:"400/4344/1/2",pages:["00000001","00000002","00000003","00000004","00000005","00000006","00000007","00000008","00000009","00000010","00000011","00000012","00000013","00000014","00000015","00000016","00000017","00000018","00000019","00000020","00000021","00000022","00000023","00000024","00000025","00000026","00000027","00000028","00000029","00000030","00000031","00000032"],jsonUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/info/idata/",suffix:"/",extension:""},imageUrl:{server:"https://clioimg.hi.u-tokyo.ac.jp/viewer",prefix:"/api/image/idata/",suffix:"/",extension:".tif"},width:5760,height:3840,width_excep:[],height_excep:[]}]},Xb=pt("h1",null,[pt("img",{src:qb,style:{width:"64px",height:"64px","vertical-align":"bottom"}}),ea("Home")],-1),Zb=pt("div",null,[pt("a",{href:"https://c-kikuchi.github.io/iiif/iike-15/manifest.json",target:"_blank"},"Test Manifest")],-1),Yb={__name:"HomeView",setup(t){return(o,e)=>(Un(),_r("main",null,[Xb,pt("nav",null,[(Un(!0),_r(hn,null,tp(rr(Hi).list,n=>(Un(),_r("div",null,[ln(rr(kp),{to:"/viewer/"+n.bookid},{default:uu(()=>[ea(zr(n.title),1)]),_:2},1032,["to"])]))),256)),Zb])]))}};var Kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jp={exports:{}};(function(t){//! openseadragon 4.1.0
//! Built on 2023-05-25
//! Git commit: v4.1.0-0-8849681
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function o(e){return new o.Viewer(e)}(function(e){e.version={versionStr:"4.1.0",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("0",10)};var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.isFunction=function(d){return e.type(d)==="function"},e.isArray=Array.isArray||function(d){return e.type(d)==="array"},e.isWindow=function(d){return d&&typeof d=="object"&&"setInterval"in d},e.type=function(d){return d==null?String(d):n[i.call(d)]||"object"},e.isPlainObject=function(d){if(!d||o.type(d)!=="object"||d.nodeType||e.isWindow(d)||d.constructor&&!a.call(d,"constructor")&&!a.call(d.constructor.prototype,"isPrototypeOf"))return!1;var l;for(var c in d)l=c;return l===void 0||a.call(d,l)},e.isEmptyObject=function(d){for(var l in d)return!1;return!0},e.freezeObject=function(d){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(l){return l},e.freezeObject(d)},e.supportsCanvas=function(){var d=document.createElement("canvas");return!!(e.isFunction(d.getContext)&&d.getContext("2d"))}(),e.isCanvasTainted=function(d){var l=!1;try{d.getContext("2d").getImageData(0,0,1,1)}catch{l=!0}return l},e.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),e.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),e.supportsEventListenerOptions=function(){var d=0;if(e.supportsAddEventListener)try{var l={get capture(){return d++,!1},get once(){return d++,!1},get passive(){return d++,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{d=0}return d>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var d=document.createElement("canvas").getContext("2d"),l=window.devicePixelRatio||1,c=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return Math.max(l,1)/c}else return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()})(o),function(e){e.extend=function(){var c,p,g,w,S,C,T=arguments[0]||{},P=arguments.length,A=!1,M=1;for(typeof T=="boolean"&&(A=T,T=arguments[1]||{},M=2),typeof T!="object"&&!o.isFunction(T)&&(T={}),P===M&&(T=this,--M);M<P;M++)if(c=arguments[M],c!==null||c!==void 0)for(p in c){var V=Object.getOwnPropertyDescriptor(c,p);if(V!==void 0){if(V.get||V.set){Object.defineProperty(T,p,V);continue}w=V.value}else{e.console.warn('Could not copy inherited property "'+p+'".');continue}T!==w&&(A&&w&&(o.isPlainObject(w)||(S=o.isArray(w)))?(g=T[p],S?(S=!1,C=g&&o.isArray(g)?g:[]):C=g&&o.isPlainObject(g)?g:{},T[p]=o.extend(A,C,w)):w!==void 0&&(T[p]=w))}return T};var n=function(){if(typeof navigator!="object")return!1;var c=navigator.userAgent;return typeof c!="string"?!1:c.indexOf("iPhone")!==-1||c.indexOf("iPad")!==-1||c.indexOf("iPod")!==-1};e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:n(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(c,p){return function(){var g=arguments;return g===void 0&&(g=[]),p.apply(c,g)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(c){return e._viewers.get(this.getElement(c))},getElement:function(c){return typeof c=="string"&&(c=document.getElementById(c)),c},getElementPosition:function(c){var p=new e.Point,g,w;for(c=e.getElement(c),g=e.getElementStyle(c).position==="fixed",w=l(c,g);w;)p.x+=c.offsetLeft,p.y+=c.offsetTop,g&&(p=p.plus(e.getPageScroll())),c=w,g=e.getElementStyle(c).position==="fixed",w=l(c,g);return p},getElementOffset:function(c){c=e.getElement(c);var p=c&&c.ownerDocument,g,w,S={top:0,left:0};return p?(g=p.documentElement,typeof c.getBoundingClientRect<"u"&&(S=c.getBoundingClientRect()),w=p===p.window?p:p.nodeType===9?p.defaultView||p.parentWindow:!1,new e.Point(S.left+(w.pageXOffset||g.scrollLeft)-(g.clientLeft||0),S.top+(w.pageYOffset||g.scrollTop)-(g.clientTop||0))):new e.Point},getElementSize:function(c){return c=e.getElement(c),new e.Point(c.clientWidth,c.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(c){return c=e.getElement(c),c.currentStyle}:function(c){return c=e.getElement(c),window.getComputedStyle(c,"")},getCssPropertyWithVendorPrefix:function(c){var p={};return e.getCssPropertyWithVendorPrefix=function(g){if(p[g]!==void 0)return p[g];var w=document.createElement("div").style,S=null;if(w[g]!==void 0)S=g;else for(var C=["Webkit","Moz","MS","O","webkit","moz","ms","o"],T=e.capitalizeFirstLetter(g),P=0;P<C.length;P++){var A=C[P]+T;if(w[A]!==void 0){S=A;break}}return p[g]=S,S},e.getCssPropertyWithVendorPrefix(c)},capitalizeFirstLetter:function(c){return c.charAt(0).toUpperCase()+c.slice(1)},positiveModulo:function(c,p){var g=c%p;return g<0&&(g+=p),g},pointInElement:function(c,p){c=e.getElement(c);var g=e.getElementOffset(c),w=e.getElementSize(c);return p.x>=g.x&&p.x<g.x+w.x&&p.y<g.y+w.y&&p.y>=g.y},getMousePosition:function(c){if(typeof c.pageX=="number")e.getMousePosition=function(p){var g=new e.Point;return g.x=p.pageX,g.y=p.pageY,g};else if(typeof c.clientX=="number")e.getMousePosition=function(p){var g=new e.Point;return g.x=p.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,g.y=p.clientY+document.body.scrollTop+document.documentElement.scrollTop,g};else throw new Error("Unknown event mouse position, no known technique.");return e.getMousePosition(c)},getPageScroll:function(){var c=document.documentElement||{},p=document.body||{};if(typeof window.pageXOffset=="number")e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(p.scrollLeft||p.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else if(c.scrollLeft||c.scrollTop)e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new e.Point(0,0);return e.getPageScroll()},setPageScroll:function(c){if(typeof window.scrollTo<"u")e.setPageScroll=function(w){window.scrollTo(w.x,w.y)};else{var p=e.getPageScroll();if(p.x===c.x&&p.y===c.y)return;document.body.scrollLeft=c.x,document.body.scrollTop=c.y;var g=e.getPageScroll();if(g.x!==p.x&&g.y!==p.y){e.setPageScroll=function(w){document.body.scrollLeft=w.x,document.body.scrollTop=w.y};return}if(document.documentElement.scrollLeft=c.x,document.documentElement.scrollTop=c.y,g=e.getPageScroll(),g.x!==p.x&&g.y!==p.y){e.setPageScroll=function(w){document.documentElement.scrollLeft=w.x,document.documentElement.scrollTop=w.y};return}e.setPageScroll=function(w){}}e.setPageScroll(c)},getWindowSize:function(){var c=document.documentElement||{},p=document.body||{};if(typeof window.innerWidth=="number")e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(c.clientWidth||c.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(p.clientWidth||p.clientHeight)e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return e.getWindowSize()},makeCenteredNode:function(c){c=e.getElement(c);var p=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(p[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(p[1].style,{display:"table-row"}),e.extend(p[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),p[0].appendChild(p[1]),p[1].appendChild(p[2]),p[2].appendChild(c),p[0]},makeNeutralElement:function(c){var p=document.createElement(c),g=p.style;return g.background="transparent none",g.border="none",g.margin="0px",g.padding="0px",g.position="static",p},now:function(){return Date.now?e.now=Date.now:e.now=function(){return new Date().getTime()},e.now()},makeTransparentImage:function(c){var p=e.makeNeutralElement("img");return p.src=c,p},setElementOpacity:function(c,p,g){var w,S;c=e.getElement(c),g&&!e.Browser.alpha&&(p=Math.round(p)),e.Browser.opacity?c.style.opacity=p<1?p:"":p<1?(w=Math.round(100*p),S="alpha(opacity="+w+")",c.style.filter=S):c.style.filter=""},setElementTouchActionNone:function(c){c=e.getElement(c),typeof c.style.touchAction<"u"?c.style.touchAction="none":typeof c.style.msTouchAction<"u"&&(c.style.msTouchAction="none")},setElementPointerEvents:function(c,p){c=e.getElement(c),typeof c.style<"u"&&typeof c.style.pointerEvents<"u"&&(c.style.pointerEvents=p)},setElementPointerEventsNone:function(c){e.setElementPointerEvents(c,"none")},addClass:function(c,p){c=e.getElement(c),c.className?(" "+c.className+" ").indexOf(" "+p+" ")===-1&&(c.className+=" "+p):c.className=p},indexOf:function(c,p,g){return Array.prototype.indexOf?this.indexOf=function(w,S,C){return w.indexOf(S,C)}:this.indexOf=function(w,S,C){var T,P=C||0,A;if(!w)throw new TypeError;if(A=w.length,A===0||P>=A)return-1;for(P<0&&(P=A-Math.abs(P)),T=P;T<A;T++)if(w[T]===S)return T;return-1},this.indexOf(c,p,g)},removeClass:function(c,p){var g,w=[],S;for(c=e.getElement(c),g=c.className.split(/\s+/),S=0;S<g.length;S++)g[S]&&g[S]!==p&&w.push(g[S]);c.className=w.join(" ")},normalizeEventListenerOptions:function(c){var p;return typeof c<"u"?typeof c=="boolean"?p=e.supportsEventListenerOptions?{capture:c}:c:p=e.supportsEventListenerOptions?c:typeof c.capture<"u"?c.capture:!1:p=e.supportsEventListenerOptions?{capture:!1}:!1,p},addEvent:function(){if(e.supportsAddEventListener)return function(c,p,g,w){w=e.normalizeEventListenerOptions(w),c=e.getElement(c),c.addEventListener(p,g,w)};if(document.documentElement.attachEvent&&document.attachEvent)return function(c,p,g){c=e.getElement(c),c.attachEvent("on"+p,g)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(c,p,g,w){w=e.normalizeEventListenerOptions(w),c=e.getElement(c),c.removeEventListener(p,g,w)};if(document.documentElement.detachEvent&&document.detachEvent)return function(c,p,g){c=e.getElement(c),c.detachEvent("on"+p,g)};throw new Error("No known event model.")}(),cancelEvent:function(c){c.preventDefault()},eventIsCanceled:function(c){return c.defaultPrevented},stopEvent:function(c){c.stopPropagation()},createCallback:function(c,p){var g=[],w;for(w=2;w<arguments.length;w++)g.push(arguments[w]);return function(){var S=g.concat([]),C;for(C=0;C<arguments.length;C++)S.push(arguments[C]);return p.apply(c,S)}},getUrlParameter:function(c){var p=d[c];return p||null},getUrlProtocol:function(c){var p=c.match(/^([a-z]+:)\/\//i);return p===null?window.location.protocol:p[1].toLowerCase()},createAjaxRequest:function(c){var p;try{p=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{p=!1}if(p)window.XMLHttpRequest?e.createAjaxRequest=function(g){return g?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:e.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)e.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return e.createAjaxRequest(c)},makeAjaxRequest:function(c,p,g){var w,S,C,T;e.isPlainObject(c)&&(p=c.success,g=c.error,w=c.withCredentials,S=c.headers,C=c.responseType||null,T=c.postData||null,c=c.url);var P=e.getUrlProtocol(c),A=e.createAjaxRequest(P==="file:");if(!e.isFunction(p))throw new Error("makeAjaxRequest requires a success callback");A.onreadystatechange=function(){A.readyState===4&&(A.onreadystatechange=function(){},A.status>=200&&A.status<300||A.status===0&&P!=="http:"&&P!=="https:"?p(A):e.isFunction(g)?g(A):e.console.error("AJAX request returned %d: %s",A.status,c))};var M=T?"POST":"GET";try{if(A.open(M,c,!0),C&&(A.responseType=C),S)for(var V in S)Object.prototype.hasOwnProperty.call(S,V)&&S[V]&&A.setRequestHeader(V,S[V]);w&&(A.withCredentials=!0),A.send(T)}catch(X){e.console.error("%s while making AJAX request: %s",X.name,X.message),A.onreadystatechange=function(){},e.isFunction(g)&&g(A,X)}return A},jsonp:function(c){var p,g=c.url,w=document.head||document.getElementsByTagName("head")[0]||document.documentElement,S=c.callbackName||"openseadragon"+e.now(),C=window[S],T="$1"+S+"$2",P=c.param||"callback",A=c.callback;g=g.replace(/(=)\?(&|$)|\?\?/i,T),g+=(/\?/.test(g)?"&":"?")+P+"="+S,window[S]=function(M){if(C)window[S]=C;else try{delete window[S]}catch{}A&&e.isFunction(A)&&A(M)},p=document.createElement("script"),(c.async!==void 0||c.async!==!1)&&(p.async="async"),c.scriptCharset&&(p.charset=c.scriptCharset),p.src=g,p.onload=p.onreadystatechange=function(M,V){(V||!p.readyState||/loaded|complete/.test(p.readyState))&&(p.onload=p.onreadystatechange=null,w&&p.parentNode&&w.removeChild(p),p=void 0)},w.insertBefore(p,w.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(c){if(window.DOMParser)e.parseXml=function(p){var g=null,w;return w=new DOMParser,g=w.parseFromString(p,"text/xml"),g};else if(window.ActiveXObject)e.parseXml=function(p){var g=null;return g=new ActiveXObject("Microsoft.XMLDOM"),g.async=!1,g.loadXML(p),g};else throw new Error("Browser doesn't support XML DOM.");return e.parseXml(c)},parseJSON:function(c){return e.parseJSON=window.JSON.parse,e.parseJSON(c)},imageFormatSupported:function(c){return c=c||"",!!a[c.toLowerCase()]},setImageFormatsSupported:function(c){e.extend(a,c)}});var i=function(c){};e.console=window.console||{log:i,debug:i,info:i,warn:i,error:i,assert:i},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var a={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},d={};(function(){var c=navigator.appVersion,p=navigator.userAgent,g;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(p.substring(p.indexOf("MSIE")+5,p.indexOf(";",p.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(p.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(p.substring(p.indexOf("Edge")+5))):p.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(p.substring(p.indexOf("Edg")+4))):p.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(p.substring(p.indexOf("Firefox")+8))):p.indexOf("Safari")>=0?(e.Browser.vendor=p.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(p.substring(p.substring(0,p.indexOf("Safari")).lastIndexOf("/")+1,p.indexOf("Safari")))):(g=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),g.exec(p)!==null&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(c);break}var w=window.location.search.substring(1),S=w.split("&"),C,T,P;for(P=0;P<S.length;P++)if(C=S[P],T=C.indexOf("="),T>0){var A=C.substring(0,T),M=C.substring(T+1);try{d[A]=decodeURIComponent(M)}catch{e.console.error("Ignoring malformed URL parameter: %s=%s",A,M)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(c){var p=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame,g=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame;if(p&&g)e.requestAnimationFrame=function(){return p.apply(c,arguments)},e.cancelAnimationFrame=function(){return g.apply(c,arguments)};else{var w=[],S=[],C=0,T;e.requestAnimationFrame=function(P){return w.push([++C,P]),T||(T=setInterval(function(){if(w.length){var A=e.now(),M=S;for(S=w,w=M;S.length;)S.shift()[1](A)}else clearInterval(T),T=void 0},1e3/50)),C},e.cancelAnimationFrame=function(P){var A,M;for(A=0,M=w.length;A<M;A+=1)if(w[A][0]===P){w.splice(A,1);return}for(A=0,M=S.length;A<M;A+=1)if(S[A][0]===P){S.splice(A,1);return}}}}(window);function l(c,p){return p&&c!==document.body?document.body:c.offsetParent}}(o),function(e,n){t.exports?t.exports=n():e.OpenSeadragon=n()}(Kb,function(){return o}),function(e){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.fullscreenElement},n.requestFullScreen=function(i){return i.requestFullscreen()},n.exitFullScreen=function(){document.exitFullscreen()},n.fullScreenEventName="fullscreenchange",n.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.msFullscreenElement},n.requestFullScreen=function(i){return i.msRequestFullscreen()},n.exitFullScreen=function(){document.msExitFullscreen()},n.fullScreenEventName="MSFullscreenChange",n.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitFullscreenElement},n.requestFullScreen=function(i){return i.webkitRequestFullscreen()},n.exitFullScreen=function(){document.webkitExitFullscreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},n.requestFullScreen=function(i){return i.webkitRequestFullScreen()},n.exitFullScreen=function(){document.webkitCancelFullScreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.mozFullScreenElement},n.requestFullScreen=function(i){return i.mozRequestFullScreen()},n.exitFullScreen=function(){document.mozCancelFullScreen()},n.fullScreenEventName="mozfullscreenchange",n.fullScreenErrorEventName="mozfullscreenerror"),n.isFullScreen=function(){return n.getFullScreenElement()!==null},n.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),n.exitFullScreen()},e.extend(e,n)}(o),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(n,i,a,d,l){var c=this;d=d||1;var p=0,g=function(w){return p++,p===d&&c.removeHandler(n,g),i(w)};this.addHandler(n,g,a,l)},addHandler:function(n,i,a,d){var l=this.events[n];if(l||(this.events[n]=l=[]),i&&e.isFunction(i)){var c=l.length,p={handler:i,userData:a||null,priority:d||0};for(l[c]=p;c>0&&l[c-1].priority<l[c].priority;)l[c]=l[c-1],l[c-1]=p,c--}},removeHandler:function(n,i){var a=this.events[n],d=[],l;if(a&&e.isArray(a)){for(l=0;l<a.length;l++)a[l].handler!==i&&d.push(a[l]);this.events[n]=d}},numberOfHandlers:function(n){var i=this.events[n];return i?i.length:0},removeAllHandlers:function(n){if(n)this.events[n]=[];else for(var i in this.events)this.events[i]=[]},getHandler:function(n){var i=this.events[n];return!i||!i.length?null:(i=i.length===1?[i[0]]:Array.apply(null,i),function(a,d){var l,c=i.length;for(l=0;l<c;l++)i[l]&&(d.eventSource=a,d.userData=i[l].userData,i[l].handler(d))})},raiseEvent:function(n,i){var a=this.getHandler(n);if(a)return a(this,i||{})}}}(o),function(e){var n={};e.MouseTracker=function(k){var R=arguments;e.isPlainObject(k)||(k={element:R[0],clickTimeThreshold:R[1],clickDistThreshold:R[2]}),this.hash=Math.random(),this.element=e.getElement(k.element),this.clickTimeThreshold=k.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=k.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=k.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=k.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=k.userData||null,this.stopDelay=k.stopDelay||50,this.preProcessEventHandler=k.preProcessEventHandler||null,this.contextMenuHandler=k.contextMenuHandler||null,this.enterHandler=k.enterHandler||null,this.leaveHandler=k.leaveHandler||null,this.exitHandler=k.exitHandler||null,this.overHandler=k.overHandler||null,this.outHandler=k.outHandler||null,this.pressHandler=k.pressHandler||null,this.nonPrimaryPressHandler=k.nonPrimaryPressHandler||null,this.releaseHandler=k.releaseHandler||null,this.nonPrimaryReleaseHandler=k.nonPrimaryReleaseHandler||null,this.moveHandler=k.moveHandler||null,this.scrollHandler=k.scrollHandler||null,this.clickHandler=k.clickHandler||null,this.dblClickHandler=k.dblClickHandler||null,this.dragHandler=k.dragHandler||null,this.dragEndHandler=k.dragEndHandler||null,this.pinchHandler=k.pinchHandler||null,this.stopHandler=k.stopHandler||null,this.keyDownHandler=k.keyDownHandler||null,this.keyUpHandler=k.keyUpHandler||null,this.keyHandler=k.keyHandler||null,this.focusHandler=k.focusHandler||null,this.blurHandler=k.blurHandler||null;var B=this;n[this.hash]={click:function(U){X(B,U)},dblclick:function(U){te(B,U)},keydown:function(U){re(B,U)},keyup:function(U){ee(B,U)},keypress:function(U){G(B,U)},focus:function(U){L(B,U)},blur:function(U){J(B,U)},contextmenu:function(U){ie(B,U)},wheel:function(U){pe(B,U)},mousewheel:function(U){ne(B,U)},DOMMouseScroll:function(U){ne(B,U)},MozMousePixelScroll:function(U){ne(B,U)},losecapture:function(U){ve(B,U)},mouseenter:function(U){je(B,U)},mouseleave:function(U){Ke(B,U)},mouseover:function(U){at(B,U)},mouseout:function(U){Ze(B,U)},mousedown:function(U){fe(B,U)},mouseup:function(U){Ne(B,U)},mousemove:function(U){nt(B,U)},touchstart:function(U){Q(B,U)},touchend:function(U){ae(B,U)},touchmove:function(U){Se(B,U)},touchcancel:function(U){Ee(B,U)},gesturestart:function(U){Ie(B,U)},gesturechange:function(U){Le(B,U)},gotpointercapture:function(U){Te(B,U)},lostpointercapture:function(U){We(B,U)},pointerenter:function(U){je(B,U)},pointerleave:function(U){Ke(B,U)},pointerover:function(U){at(B,U)},pointerout:function(U){Ze(B,U)},pointerdown:function(U){fe(B,U)},pointerup:function(U){Ne(B,U)},pointermove:function(U){nt(B,U)},pointercancel:function(U){Y(B,U)},pointerupcaptured:function(U){ke(B,U)},pointermovecaptured:function(U){ft(B,U)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),k.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){c(this),this.element=null,n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(k){return k?l(this):c(this),this},getActivePointersListByType:function(k){var R=n[this.hash],B,U=R.activePointersLists.length,me;for(B=0;B<U;B++)if(R.activePointersLists[B].type===k)return R.activePointersLists[B];return me=new e.MouseTracker.GesturePointList(k),R.activePointersLists.push(me),me},getActivePointerCount:function(){var k=n[this.hash],R,B=k.activePointersLists.length,U=0;for(R=0;R<B;R++)U+=k.activePointersLists[R].getLength();return U},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var i=function(){try{return window.self!==window.top}catch{return!0}}();function a(k){try{return k.addEventListener&&k.removeEventListener}catch{return!1}}e.MouseTracker.gesturePointVelocityTracker=function(){var k=[],R=0,B=0,U=function(Je,ze){return Je.hash.toString()+ze.type+ze.id.toString()},me=function(){var Je,ze=k.length,It,_t,Lt=e.now(),jn,In,$t;for(jn=Lt-B,B=Lt,Je=0;Je<ze;Je++)It=k[Je],_t=It.gPoint,_t.direction=Math.atan2(_t.currentPos.y-It.lastPos.y,_t.currentPos.x-It.lastPos.x),In=It.lastPos.distanceTo(_t.currentPos),It.lastPos=_t.currentPos,$t=1e3*In/(jn+1),_t.speed=.75*$t+.25*_t.speed},Oe=function(Je,ze){var It=U(Je,ze);k.push({guid:It,gPoint:ze,lastPos:ze.currentPos}),k.length===1&&(B=e.now(),R=window.setInterval(me,50))},Ge=function(Je,ze){var It=U(Je,ze),_t,Lt=k.length;for(_t=0;_t<Lt;_t++)if(k[_t].guid===It){k.splice(_t,1),Lt--,Lt===0&&window.clearInterval(R);break}};return{addPoint:Oe,removePoint:Ge}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],e.MouseTracker.wheelEventName==="DOMMouseScroll"&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var k=document.createElement("div");return e.isFunction(k.setPointerCapture)&&e.isFunction(k.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var k=document.createElement("div");return e.isFunction(k.setCapture)&&e.isFunction(k.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(k){this._gPoints=[],this.type=k,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(k){return this._gPoints.push(k)},removeById:function(k){var R,B=this._gPoints.length;for(R=0;R<B;R++)if(this._gPoints[R].id===k){this._gPoints.splice(R,1);break}return this._gPoints.length},getByIndex:function(k){return k<this._gPoints.length?this._gPoints[k]:null},getById:function(k){var R,B=this._gPoints.length;for(R=0;R<B;R++)if(this._gPoints[R].id===k)return this._gPoints[R];return null},getPrimary:function(k){var R,B=this._gPoints.length;for(R=0;R<B;R++)if(this._gPoints[R].isPrimary)return this._gPoints[R];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function d(k){var R=n[k.hash],B,U,me,Oe,Ge,Je=R.activePointersLists.length;for(B=0;B<Je;B++)if(me=R.activePointersLists[B],me.getLength()>0){for(Ge=[],Oe=me.asArray(),U=0;U<Oe.length;U++)Ge.push(Oe[U]);for(U=0;U<Ge.length;U++)ye(k,me,Ge[U])}for(B=0;B<Je;B++)R.activePointersLists.pop();R.sentDragEvent=!1}function l(k){var R=n[k.hash],B,U;if(!R.tracking){for(U=0;U<e.MouseTracker.subscribeEvents.length;U++)B=e.MouseTracker.subscribeEvents[U],e.addEvent(k.element,B,R[B],B===e.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);d(k),R.tracking=!0}}function c(k){var R=n[k.hash],B,U;if(R.tracking){for(U=0;U<e.MouseTracker.subscribeEvents.length;U++)B=e.MouseTracker.subscribeEvents[U],e.removeEvent(k.element,B,R[B],!1);d(k),R.tracking=!1}}function p(k,R){var B=n[k.hash];if(R==="pointerevent")return{upName:"pointerup",upHandler:B.pointerupcaptured,moveName:"pointermove",moveHandler:B.pointermovecaptured};if(R==="mouse")return{upName:"pointerup",upHandler:B.pointerupcaptured,moveName:"pointermove",moveHandler:B.pointermovecaptured};if(R==="touch")return{upName:"touchend",upHandler:B.touchendcaptured,moveName:"touchmove",moveHandler:B.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function g(k,R){var B;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{k.element.setPointerCapture(R.id)}catch{e.console.warn("setPointerCapture() called on invalid pointer ID");return}else k.element.setCapture(!0);else B=p(k,e.MouseTracker.havePointerEvents?"pointerevent":R.type),i&&a(window.top)&&e.addEvent(window.top,B.upName,B.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,B.upName,B.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,B.moveName,B.moveHandler,!0);H(k,R,!0)}function w(k,R){var B,U,me;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(U=k.getActivePointersListByType(R.type),me=U.getById(R.id),!me||!me.captured)return;try{k.element.releasePointerCapture(R.id)}catch{}}else k.element.releaseCapture();else B=p(k,e.MouseTracker.havePointerEvents?"pointerevent":R.type),i&&a(window.top)&&e.removeEvent(window.top,B.upName,B.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,B.moveName,B.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,B.upName,B.upHandler,!0);H(k,R,!1)}function S(k){return e.MouseTracker.havePointerEvents?k.pointerId:e.MouseTracker.mousePointerId}function C(k){return e.MouseTracker.havePointerEvents?k.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function T(k){return e.MouseTracker.havePointerEvents?k.isPrimary:!0}function P(k){return e.getMousePosition(k)}function A(k,R){return M(P(k),R)}function M(k,R){var B=e.getElementOffset(R);return k.minus(B)}function V(k,R){return new e.Point((k.x+R.x)/2,(k.y+R.y)/2)}function X(k,R){var B={originalEvent:R,eventType:"click",pointerType:"mouse",isEmulated:!1};j(k,B),B.preventDefault&&!B.defaultPrevented&&e.cancelEvent(R),B.stopPropagation&&e.stopEvent(R)}function te(k,R){var B={originalEvent:R,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};j(k,B),B.preventDefault&&!B.defaultPrevented&&e.cancelEvent(R),B.stopPropagation&&e.stopEvent(R)}function re(k,R){var B=null,U={originalEvent:R,eventType:"keydown",pointerType:"",isEmulated:!1};j(k,U),k.keyDownHandler&&!U.preventGesture&&!U.defaultPrevented&&(B={eventSource:k,keyCode:R.keyCode?R.keyCode:R.charCode,ctrl:R.ctrlKey,shift:R.shiftKey,alt:R.altKey,meta:R.metaKey,originalEvent:R,preventDefault:U.preventDefault||U.defaultPrevented,userData:k.userData},k.keyDownHandler(B)),(B&&B.preventDefault||U.preventDefault&&!U.defaultPrevented)&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function ee(k,R){var B=null,U={originalEvent:R,eventType:"keyup",pointerType:"",isEmulated:!1};j(k,U),k.keyUpHandler&&!U.preventGesture&&!U.defaultPrevented&&(B={eventSource:k,keyCode:R.keyCode?R.keyCode:R.charCode,ctrl:R.ctrlKey,shift:R.shiftKey,alt:R.altKey,meta:R.metaKey,originalEvent:R,preventDefault:U.preventDefault||U.defaultPrevented,userData:k.userData},k.keyUpHandler(B)),(B&&B.preventDefault||U.preventDefault&&!U.defaultPrevented)&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function G(k,R){var B=null,U={originalEvent:R,eventType:"keypress",pointerType:"",isEmulated:!1};j(k,U),k.keyHandler&&!U.preventGesture&&!U.defaultPrevented&&(B={eventSource:k,keyCode:R.keyCode?R.keyCode:R.charCode,ctrl:R.ctrlKey,shift:R.shiftKey,alt:R.altKey,meta:R.metaKey,originalEvent:R,preventDefault:U.preventDefault||U.defaultPrevented,userData:k.userData},k.keyHandler(B)),(B&&B.preventDefault||U.preventDefault&&!U.defaultPrevented)&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function L(k,R){var B={originalEvent:R,eventType:"focus",pointerType:"",isEmulated:!1};j(k,B),k.focusHandler&&!B.preventGesture&&k.focusHandler({eventSource:k,originalEvent:R,userData:k.userData})}function J(k,R){var B={originalEvent:R,eventType:"blur",pointerType:"",isEmulated:!1};j(k,B),k.blurHandler&&!B.preventGesture&&k.blurHandler({eventSource:k,originalEvent:R,userData:k.userData})}function ie(k,R){var B=null,U={originalEvent:R,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};j(k,U),k.contextMenuHandler&&!U.preventGesture&&!U.defaultPrevented&&(B={eventSource:k,position:M(P(R),k.element),originalEvent:U.originalEvent,preventDefault:U.preventDefault||U.defaultPrevented,userData:k.userData},k.contextMenuHandler(B)),(B&&B.preventDefault||U.preventDefault&&!U.defaultPrevented)&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function pe(k,R){ce(k,R,R)}function ne(k,R){var B={target:R.target||R.srcElement,type:"wheel",shiftKey:R.shiftKey||!1,clientX:R.clientX,clientY:R.clientY,pageX:R.pageX?R.pageX:R.clientX,pageY:R.pageY?R.pageY:R.clientY,deltaMode:R.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};e.MouseTracker.wheelEventName==="mousewheel"?B.deltaY=-R.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:B.deltaY=R.detail,ce(k,B,R)}function ce(k,R,B){var U=0,me,Oe=null;U=R.deltaY<0?1:-1,me={originalEvent:R,eventType:"wheel",pointerType:"mouse",isEmulated:R!==B},j(k,me),k.scrollHandler&&!me.preventGesture&&!me.defaultPrevented&&(Oe={eventSource:k,pointerType:"mouse",position:A(R,k.element),scroll:U,shift:R.shiftKey,isTouchEvent:!1,originalEvent:B,preventDefault:me.preventDefault||me.defaultPrevented,userData:k.userData},k.scrollHandler(Oe)),me.stopPropagation&&e.stopEvent(B),(Oe&&Oe.preventDefault||me.preventDefault&&!me.defaultPrevented)&&e.cancelEvent(B)}function ve(k,R){var B={id:e.MouseTracker.mousePointerId,type:"mouse"},U={originalEvent:R,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};j(k,U),R.target===k.element&&H(k,B,!1),U.stopPropagation&&e.stopEvent(R)}function Q(k,R){var B,U,me=R.changedTouches.length,Oe,Ge=k.getActivePointersListByType("touch");B=e.now(),Ge.getLength()>R.touches.length-me&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var Je={originalEvent:R,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(j(k,Je),U=0;U<me;U++)Oe={id:R.changedTouches[U].identifier,type:"touch",isPrimary:Ge.getLength()===0,currentPos:P(R.changedTouches[U]),currentTime:B},F(k,Je,Oe),_e(k,Je,Oe,0),H(k,Oe,!0);Je.preventDefault&&!Je.defaultPrevented&&e.cancelEvent(R),Je.stopPropagation&&e.stopEvent(R)}function ae(k,R){var B,U,me=R.changedTouches.length,Oe;B=e.now();var Ge={originalEvent:R,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(j(k,Ge),U=0;U<me;U++)Oe={id:R.changedTouches[U].identifier,type:"touch",currentPos:P(R.changedTouches[U]),currentTime:B},Ae(k,Ge,Oe,0),H(k,Oe,!1),$(k,Ge,Oe);Ge.preventDefault&&!Ge.defaultPrevented&&e.cancelEvent(R),Ge.stopPropagation&&e.stopEvent(R)}function Se(k,R){var B,U,me=R.changedTouches.length,Oe;B=e.now();var Ge={originalEvent:R,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(j(k,Ge),U=0;U<me;U++)Oe={id:R.changedTouches[U].identifier,type:"touch",currentPos:P(R.changedTouches[U]),currentTime:B},Fe(k,Ge,Oe);Ge.preventDefault&&!Ge.defaultPrevented&&e.cancelEvent(R),Ge.stopPropagation&&e.stopEvent(R)}function Ee(k,R){var B=R.changedTouches.length,U,me,Oe={originalEvent:R,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(j(k,Oe),U=0;U<B;U++)me={id:R.changedTouches[U].identifier,type:"touch"},Me(k,Oe,me);Oe.stopPropagation&&e.stopEvent(R)}function Ie(k,R){return e.eventIsCanceled(R)||R.preventDefault(),!1}function Le(k,R){return e.eventIsCanceled(R)||R.preventDefault(),!1}function Te(k,R){var B={originalEvent:R,eventType:"gotpointercapture",pointerType:C(R),isEmulated:!1};j(k,B),R.target===k.element&&H(k,{id:R.pointerId,type:C(R)},!0),B.stopPropagation&&e.stopEvent(R)}function We(k,R){var B={originalEvent:R,eventType:"lostpointercapture",pointerType:C(R),isEmulated:!1};j(k,B),R.target===k.element&&H(k,{id:R.pointerId,type:C(R)},!1),B.stopPropagation&&e.stopEvent(R)}function je(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U={originalEvent:R,eventType:"pointerenter",pointerType:B.type,isEmulated:!1};j(k,U),F(k,U,B)}function Ke(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U={originalEvent:R,eventType:"pointerleave",pointerType:B.type,isEmulated:!1};j(k,U),$(k,U,B)}function at(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U={originalEvent:R,eventType:"pointerover",pointerType:B.type,isEmulated:!1};j(k,U),se(k,U,B),U.preventDefault&&!U.defaultPrevented&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function Ze(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U={originalEvent:R,eventType:"pointerout",pointerType:B.type,isEmulated:!1};j(k,U),he(k,U,B),U.preventDefault&&!U.defaultPrevented&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function fe(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U=e.MouseTracker.havePointerEvents&&B.type==="touch"&&e.Browser.vendor!==e.BROWSERS.IE,me={originalEvent:R,eventType:"pointerdown",pointerType:B.type,isEmulated:!1};j(k,me),_e(k,me,B,R.button),me.preventDefault&&!me.defaultPrevented&&e.cancelEvent(R),me.stopPropagation&&e.stopEvent(R),me.shouldCapture&&(U?H(k,B,!0):g(k,B))}function Ne(k,R){Be(k,R)}function ke(k,R){var B=k.getActivePointersListByType(C(R));B.getById(R.pointerId)&&Be(k,R),e.stopEvent(R)}function Be(k,R){var B;B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()};var U={originalEvent:R,eventType:"pointerup",pointerType:B.type,isEmulated:!1};j(k,U),Ae(k,U,B,R.button),U.preventDefault&&!U.defaultPrevented&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R),U.shouldReleaseCapture&&(R.target===k.element?w(k,B):H(k,B,!1))}function nt(k,R){W(k,R)}function ft(k,R){var B=k.getActivePointersListByType(C(R));B.getById(R.pointerId)&&W(k,R),e.stopEvent(R)}function W(k,R){var B={id:S(R),type:C(R),isPrimary:T(R),currentPos:P(R),currentTime:e.now()},U={originalEvent:R,eventType:"pointermove",pointerType:B.type,isEmulated:!1};j(k,U),Fe(k,U,B),U.preventDefault&&!U.defaultPrevented&&e.cancelEvent(R),U.stopPropagation&&e.stopEvent(R)}function Y(k,R){var B={id:R.pointerId,type:C(R)},U={originalEvent:R,eventType:"pointercancel",pointerType:B.type,isEmulated:!1};j(k,U),Me(k,U,B),U.stopPropagation&&e.stopEvent(R)}function le(k,R){return R.speed=0,R.direction=0,R.contactPos=R.currentPos,R.contactTime=R.currentTime,R.lastPos=R.currentPos,R.lastTime=R.currentTime,k.add(R)}function ye(k,R,B){var U,me=R.getById(B.id);return me?(me.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),w(k,me)),R.removeContact(),U=R.removeById(B.id)):U=R.getLength(),U}function x(k,R){switch(R.eventType){case"pointermove":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!1,R.preventGesture=!k.hasGestureHandlers,R.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!1,R.preventGesture=!1,R.stopPropagation=!1;break;case"pointerdown":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!1,R.preventGesture=!k.hasGestureHandlers,R.stopPropagation=!1;break;case"pointerup":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!1,R.preventGesture=!k.hasGestureHandlers,R.stopPropagation=!1;break;case"wheel":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!1,R.preventGesture=!k.hasScrollHandler,R.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":R.isStoppable=!0,R.isCancelable=!1,R.preventDefault=!1,R.preventGesture=!1,R.stopPropagation=!1;break;case"click":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!!k.clickHandler,R.preventGesture=!1,R.stopPropagation=!1;break;case"dblclick":R.isStoppable=!0,R.isCancelable=!0,R.preventDefault=!!k.dblClickHandler,R.preventGesture=!1,R.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:R.isStoppable=!1,R.isCancelable=!1,R.preventDefault=!1,R.preventGesture=!1,R.stopPropagation=!1;break}}function j(k,R){R.eventSource=k,R.eventPhase=R.originalEvent&&typeof R.originalEvent.eventPhase<"u"?R.originalEvent.eventPhase:0,R.defaultPrevented=e.eventIsCanceled(R.originalEvent),R.shouldCapture=!1,R.shouldReleaseCapture=!1,R.userData=k.userData,x(k,R),k.preProcessEventHandler&&k.preProcessEventHandler(R)}function H(k,R,B){var U=k.getActivePointersListByType(R.type),me=U.getById(R.id);me?B&&!me.captured?(me.captured=!0,U.captureCount++):!B&&me.captured&&(me.captured=!1,U.captureCount--,U.captureCount<0&&(U.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function F(k,R,B){var U=k.getActivePointersListByType(B.type),me;me=U.getById(B.id),me?(me.insideElement=!0,me.lastPos=me.currentPos,me.lastTime=me.currentTime,me.currentPos=B.currentPos,me.currentTime=B.currentTime,B=me):(B.captured=!1,B.insideElementPressed=!1,B.insideElement=!0,le(U,B)),k.enterHandler&&k.enterHandler({eventSource:k,pointerType:B.type,position:M(B.currentPos,k.element),buttons:U.buttons,pointers:k.getActivePointerCount(),insideElementPressed:B.insideElementPressed,buttonDownAny:U.buttons!==0,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData})}function $(k,R,B){var U=k.getActivePointersListByType(B.type),me,Oe;me=U.getById(B.id),me?(me.captured?(me.insideElement=!1,me.lastPos=me.currentPos,me.lastTime=me.currentTime,me.currentPos=B.currentPos,me.currentTime=B.currentTime):ye(k,U,me),B=me):(B.captured=!1,B.insideElementPressed=!1),(k.leaveHandler||k.exitHandler)&&(Oe={eventSource:k,pointerType:B.type,position:B.currentPos&&M(B.currentPos,k.element),buttons:U.buttons,pointers:k.getActivePointerCount(),insideElementPressed:B.insideElementPressed,buttonDownAny:U.buttons!==0,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData},k.leaveHandler&&k.leaveHandler(Oe),k.exitHandler&&k.exitHandler(Oe))}function se(k,R,B){var U,me;U=k.getActivePointersListByType(B.type),me=U.getById(B.id),me?B=me:(B.captured=!1,B.insideElementPressed=!1),k.overHandler&&k.overHandler({eventSource:k,pointerType:B.type,position:M(B.currentPos,k.element),buttons:U.buttons,pointers:k.getActivePointerCount(),insideElementPressed:B.insideElementPressed,buttonDownAny:U.buttons!==0,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData})}function he(k,R,B){var U,me;U=k.getActivePointersListByType(B.type),me=U.getById(B.id),me?B=me:(B.captured=!1,B.insideElementPressed=!1),k.outHandler&&k.outHandler({eventSource:k,pointerType:B.type,position:B.currentPos&&M(B.currentPos,k.element),buttons:U.buttons,pointers:k.getActivePointerCount(),insideElementPressed:B.insideElementPressed,buttonDownAny:U.buttons!==0,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData})}function _e(k,R,B,U){var me=n[k.hash],Oe=k.getActivePointersListByType(B.type),Ge;if(typeof R.originalEvent.buttons<"u"?Oe.buttons=R.originalEvent.buttons:U===0?Oe.buttons|=1:U===1?Oe.buttons|=4:U===2?Oe.buttons|=2:U===3?Oe.buttons|=8:U===4?Oe.buttons|=16:U===5&&(Oe.buttons|=32),U!==0){R.shouldCapture=!1,R.shouldReleaseCapture=!1,k.nonPrimaryPressHandler&&!R.preventGesture&&!R.defaultPrevented&&(R.preventDefault=!0,k.nonPrimaryPressHandler({eventSource:k,pointerType:B.type,position:M(B.currentPos,k.element),button:U,buttons:Oe.buttons,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData}));return}Ge=Oe.getById(B.id),Ge?(Ge.insideElementPressed=!0,Ge.insideElement=!0,Ge.originalTarget=R.originalEvent.target,Ge.contactPos=B.currentPos,Ge.contactTime=B.currentTime,Ge.lastPos=Ge.currentPos,Ge.lastTime=Ge.currentTime,Ge.currentPos=B.currentPos,Ge.currentTime=B.currentTime,B=Ge):(B.captured=!1,B.insideElementPressed=!0,B.insideElement=!0,B.originalTarget=R.originalEvent.target,le(Oe,B)),Oe.addContact(),!R.preventGesture&&!R.defaultPrevented?(R.shouldCapture=!0,R.shouldReleaseCapture=!1,R.preventDefault=!0,(k.dragHandler||k.dragEndHandler||k.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(k,B),Oe.contacts===1?k.pressHandler&&!R.preventGesture&&k.pressHandler({eventSource:k,pointerType:B.type,position:M(B.contactPos,k.element),buttons:Oe.buttons,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData}):Oe.contacts===2&&k.pinchHandler&&B.type==="touch"&&(me.pinchGPoints=Oe.asArray(),me.lastPinchDist=me.currentPinchDist=me.pinchGPoints[0].currentPos.distanceTo(me.pinchGPoints[1].currentPos),me.lastPinchCenter=me.currentPinchCenter=V(me.pinchGPoints[0].currentPos,me.pinchGPoints[1].currentPos))):(R.shouldCapture=!1,R.shouldReleaseCapture=!1)}function Ae(k,R,B,U){var me=n[k.hash],Oe=k.getActivePointersListByType(B.type),Ge,Je,ze,It=!1,_t;if(typeof R.originalEvent.buttons<"u"?Oe.buttons=R.originalEvent.buttons:U===0?Oe.buttons^=-2:U===1?Oe.buttons^=-5:U===2?Oe.buttons^=-3:U===3?Oe.buttons^=-9:U===4?Oe.buttons^=-17:U===5&&(Oe.buttons^=-33),R.shouldCapture=!1,U!==0){R.shouldReleaseCapture=!1,k.nonPrimaryReleaseHandler&&!R.preventGesture&&!R.defaultPrevented&&(R.preventDefault=!0,k.nonPrimaryReleaseHandler({eventSource:k,pointerType:B.type,position:M(B.currentPos,k.element),button:U,buttons:Oe.buttons,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData}));return}ze=Oe.getById(B.id),ze?(Oe.removeContact(),ze.captured&&(It=!0),ze.lastPos=ze.currentPos,ze.lastTime=ze.currentTime,ze.currentPos=B.currentPos,ze.currentTime=B.currentTime,ze.insideElement||ye(k,Oe,ze),Ge=ze.currentPos,Je=ze.currentTime):(B.captured=!1,B.insideElementPressed=!1,B.insideElement=!0,le(Oe,B),ze=B),!R.preventGesture&&!R.defaultPrevented&&(It?(R.shouldReleaseCapture=!0,R.preventDefault=!0,(k.dragHandler||k.dragEndHandler||k.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(k,ze),Oe.contacts===0?(k.releaseHandler&&Ge&&k.releaseHandler({eventSource:k,pointerType:ze.type,position:M(Ge,k.element),buttons:Oe.buttons,insideElementPressed:ze.insideElementPressed,insideElementReleased:ze.insideElement,isTouchEvent:ze.type==="touch",originalEvent:R.originalEvent,userData:k.userData}),k.dragEndHandler&&me.sentDragEvent&&k.dragEndHandler({eventSource:k,pointerType:ze.type,position:M(ze.currentPos,k.element),speed:ze.speed,direction:ze.direction,shift:R.originalEvent.shiftKey,isTouchEvent:ze.type==="touch",originalEvent:R.originalEvent,userData:k.userData}),me.sentDragEvent=!1,(k.clickHandler||k.dblClickHandler)&&ze.insideElement&&(_t=Je-ze.contactTime<=k.clickTimeThreshold&&ze.contactPos.distanceTo(Ge)<=k.clickDistThreshold,k.clickHandler&&k.clickHandler({eventSource:k,pointerType:ze.type,position:M(ze.currentPos,k.element),quick:_t,shift:R.originalEvent.shiftKey,isTouchEvent:ze.type==="touch",originalEvent:R.originalEvent,originalTarget:ze.originalTarget,userData:k.userData}),k.dblClickHandler&&_t&&(Oe.clicks++,Oe.clicks===1?(me.lastClickPos=Ge,me.dblClickTimeOut=setTimeout(function(){Oe.clicks=0},k.dblClickTimeThreshold)):Oe.clicks===2&&(clearTimeout(me.dblClickTimeOut),Oe.clicks=0,me.lastClickPos.distanceTo(Ge)<=k.dblClickDistThreshold&&k.dblClickHandler({eventSource:k,pointerType:ze.type,position:M(ze.currentPos,k.element),shift:R.originalEvent.shiftKey,isTouchEvent:ze.type==="touch",originalEvent:R.originalEvent,userData:k.userData}),me.lastClickPos=null)))):Oe.contacts===2&&k.pinchHandler&&ze.type==="touch"&&(me.pinchGPoints=Oe.asArray(),me.lastPinchDist=me.currentPinchDist=me.pinchGPoints[0].currentPos.distanceTo(me.pinchGPoints[1].currentPos),me.lastPinchCenter=me.currentPinchCenter=V(me.pinchGPoints[0].currentPos,me.pinchGPoints[1].currentPos))):(R.shouldReleaseCapture=!1,k.releaseHandler&&Ge&&(k.releaseHandler({eventSource:k,pointerType:ze.type,position:M(Ge,k.element),buttons:Oe.buttons,insideElementPressed:ze.insideElementPressed,insideElementReleased:ze.insideElement,isTouchEvent:ze.type==="touch",originalEvent:R.originalEvent,userData:k.userData}),R.preventDefault=!0)))}function Fe(k,R,B){var U=n[k.hash],me=k.getActivePointersListByType(B.type),Oe,Ge,Je;if(typeof R.originalEvent.buttons<"u"&&(me.buttons=R.originalEvent.buttons),Oe=me.getById(B.id),Oe)Oe.lastPos=Oe.currentPos,Oe.lastTime=Oe.currentTime,Oe.currentPos=B.currentPos,Oe.currentTime=B.currentTime;else return;R.shouldCapture=!1,R.shouldReleaseCapture=!1,k.stopHandler&&B.type==="mouse"&&(clearTimeout(k.stopTimeOut),k.stopTimeOut=setTimeout(function(){Xe(k,R.originalEvent,B.type)},k.stopDelay)),me.contacts===0?k.moveHandler&&k.moveHandler({eventSource:k,pointerType:B.type,position:M(B.currentPos,k.element),buttons:me.buttons,isTouchEvent:B.type==="touch",originalEvent:R.originalEvent,userData:k.userData}):me.contacts===1?(k.moveHandler&&(Oe=me.asArray()[0],k.moveHandler({eventSource:k,pointerType:Oe.type,position:M(Oe.currentPos,k.element),buttons:me.buttons,isTouchEvent:Oe.type==="touch",originalEvent:R.originalEvent,userData:k.userData})),k.dragHandler&&!R.preventGesture&&!R.defaultPrevented&&(Oe=me.asArray()[0],Je=Oe.currentPos.minus(Oe.lastPos),k.dragHandler({eventSource:k,pointerType:Oe.type,position:M(Oe.currentPos,k.element),buttons:me.buttons,delta:Je,speed:Oe.speed,direction:Oe.direction,shift:R.originalEvent.shiftKey,isTouchEvent:Oe.type==="touch",originalEvent:R.originalEvent,userData:k.userData}),R.preventDefault=!0,U.sentDragEvent=!0)):me.contacts===2&&(k.moveHandler&&(Ge=me.asArray(),k.moveHandler({eventSource:k,pointerType:Ge[0].type,position:M(V(Ge[0].currentPos,Ge[1].currentPos),k.element),buttons:me.buttons,isTouchEvent:Ge[0].type==="touch",originalEvent:R.originalEvent,userData:k.userData})),k.pinchHandler&&B.type==="touch"&&!R.preventGesture&&!R.defaultPrevented&&(Je=U.pinchGPoints[0].currentPos.distanceTo(U.pinchGPoints[1].currentPos),Je!==U.currentPinchDist&&(U.lastPinchDist=U.currentPinchDist,U.currentPinchDist=Je,U.lastPinchCenter=U.currentPinchCenter,U.currentPinchCenter=V(U.pinchGPoints[0].currentPos,U.pinchGPoints[1].currentPos),k.pinchHandler({eventSource:k,pointerType:"touch",gesturePoints:U.pinchGPoints,lastCenter:M(U.lastPinchCenter,k.element),center:M(U.currentPinchCenter,k.element),lastDistance:U.lastPinchDist,distance:U.currentPinchDist,shift:R.originalEvent.shiftKey,originalEvent:R.originalEvent,userData:k.userData}),R.preventDefault=!0)))}function Me(k,R,B){var U=k.getActivePointersListByType(B.type),me;me=U.getById(B.id),me&&ye(k,U,me)}function Xe(k,R,B){k.stopHandler&&k.stopHandler({eventSource:k,pointerType:B,position:A(R,k.element),buttons:k.getActivePointersListByType(B).buttons,isTouchEvent:B==="touch",originalEvent:R,userData:k.userData})}}(o),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(n,i,a){var d=n.parentNode;typeof i=="number"&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=typeof i.attachToViewer>"u"?!0:i.attachToViewer,this.autoFade=typeof i.autoFade>"u"?!0:i.autoFade,this.element=n,this.anchor=i.anchor,this.container=a,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof i.top=="number"?i.top+"px":i.top,this.wrapper.style.left=typeof i.left=="number"?i.left+"px":i.left,this.wrapper.style.height=typeof i.height=="number"?i.height+"px":i.height,this.wrapper.style.width=typeof i.width=="number"?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):d.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(n){this.wrapper.style.display=n?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(n){this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?e.setElementOpacity(this.element,n,!0):e.setElementOpacity(this.wrapper,n,!0)}}}(o),function(e){e.ControlDock=function(i){var a=["topleft","topright","bottomright","bottomleft"],d,l;for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(Math.random()*1e6),container:e.makeNeutralElement("div"),controls:[]},i),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),l=0;l<a.length;l++)d=a[l],this.controls[d]=e.makeNeutralElement("div"),this.controls[d].style.position="absolute",d.match("left")&&(this.controls[d].style.left="0px"),d.match("right")&&(this.controls[d].style.right="0px"),d.match("top")&&(this.controls[d].style.top="0px"),d.match("bottom")&&(this.controls[d].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(i,a){i=e.getElement(i);var d=null;if(!(n(this,i)>=0)){switch(a.anchor){case e.ControlAnchor.TOP_RIGHT:d=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:d=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:d=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:d=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:d=this.container,i.style.margin="0px",i.style.padding="0px";break;default:case e.ControlAnchor.NONE:d=this.container,i.style.margin="0px",i.style.padding="0px";break}this.controls.push(new e.Control(i,a,d)),i.style.display="inline-block"}},removeControl:function(i){i=e.getElement(i);var a=n(this,i);return a>=0&&(this.controls[a].destroy(),this.controls.splice(a,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var i;for(i=this.controls.length-1;i>=0;i--)if(this.controls[i].isVisible())return!0;return!1},setControlsEnabled:function(i){var a;for(a=this.controls.length-1;a>=0;a--)this.controls[a].setVisible(i);return this}};function n(i,a){var d=i.controls,l;for(l=d.length-1;l>=0;l--)if(d[l].element===a)return l;return-1}}(o),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(o),function(e){var n={},i=1;e.Viewer=function(x){var j=arguments,H=this,F;if(e.isPlainObject(x)||(x={id:j[0],xmlPath:j.length>1?j[1]:void 0,prefixUrl:j.length>2?j[2]:void 0,controls:j.length>3?j[3]:void 0,overlays:j.length>4?j[4]:void 0}),x.config&&(e.extend(!0,x,x.config),delete x.config),e.extend(!0,this,{id:x.id,hash:x.hash||i++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,x),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof n[this.hash]<"u"&&e.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function($){var se=e.getString("Errors.OpenFailed",$.eventSource,$.message);H._showMessage(se)}),e.ControlDock.call(this,x),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function($){$.width="100%",$.height="100%",$.overflow="hidden",$.position="absolute",$.top="0px",$.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),x.tabIndex!==""&&(this.canvas.tabIndex=x.tabIndex===void 0?0:x.tabIndex),this.container.className="openseadragon-container",function($){$.width="100%",$.height="100%",$.position="relative",$.overflow="hidden",$.left="0px",$.top="0px",$.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,A),keyDownHandler:e.delegate(this,M),keyHandler:e.delegate(this,V),clickHandler:e.delegate(this,X),dblClickHandler:e.delegate(this,te),dragHandler:e.delegate(this,re),dragEndHandler:e.delegate(this,ee),enterHandler:e.delegate(this,G),leaveHandler:e.delegate(this,L),pressHandler:e.delegate(this,J),releaseHandler:e.delegate(this,ie),nonPrimaryPressHandler:e.delegate(this,pe),nonPrimaryReleaseHandler:e.delegate(this,ne),scrollHandler:e.delegate(this,ae),pinchHandler:e.delegate(this,ce),focusHandler:e.delegate(this,ve),blurHandler:e.delegate(this,Q)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,Se),leaveHandler:e.delegate(this,Ee)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=a(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[H.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function($){H.source=H.world.getItemAt(0).source,n[H.hash].forceRedraw=!0,H._updateRequestId||(H._updateRequestId=p(H,Ie))}),this.world.addHandler("remove-item",function($){H.world.getItemCount()?H.source=H.world.getItemAt(0).source:H.source=null,n[H.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function($){H.viewport&&H.viewport._setContentBounds(H.world.getHomeBounds(),H.world.getContentFactor())}),this.world.addHandler("item-index-change",function($){H.source=H.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:x.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(F=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(F,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(F=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(F,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),F=0;F<this.customControls.length;F++)this.addControl(this.customControls[F].id,{anchor:this.customControls[F].anchor});e.requestAnimationFrame(function(){w(H)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(x){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(x)},openTileSource:function(x){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(x)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(x,j){var H=this;if(this.close(),!x)return this;if(this.sequenceMode&&e.isArray(x))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof j<"u"&&!isNaN(j)&&(this.initialPage=j),this.tileSources=x,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(x)||(x=[x]),!x.length)return this;this._opening=!0;for(var F=x.length,$=0,se=0,he,_e=function(){if($+se===F)if($){(H._firstOpen||!H.preserveViewport)&&(H.viewport.goHome(!0),H.viewport.update()),H._firstOpen=!1;var Me=x[0];if(Me.tileSource&&(Me=Me.tileSource),H.overlays&&!H.preserveOverlays)for(var Xe=0;Xe<H.overlays.length;Xe++)H.currentOverlays[Xe]=l(H,H.overlays[Xe]);H._drawOverlays(),H._opening=!1,H.raiseEvent("open",{source:Me})}else H._opening=!1,H.raiseEvent("open-failed",he)},Ae=function(Me){(!e.isPlainObject(Me)||!Me.tileSource)&&(Me={tileSource:Me}),Me.index!==void 0&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Me.index),Me.collectionImmediately===void 0&&(Me.collectionImmediately=!0);var Xe=Me.success;Me.success=function(R){if($++,Me.tileSource.overlays)for(var B=0;B<Me.tileSource.overlays.length;B++)H.addOverlay(Me.tileSource.overlays[B]);Xe&&Xe(R),_e()};var k=Me.error;Me.error=function(R){se++,he||(he=R),k&&k(R),_e()},H.addTiledImage(Me)},Fe=0;Fe<x.length;Fe++)Ae(x[Fe]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(x){return this.innerTracker.setTracking(x),this.outerTracker.setTracking(x),this.raiseEvent("mouse-enabled",{enabled:x}),this},areControlsEnabled:function(){var x=this.controls.length,j;for(j=0;j<this.controls.length;j++)x=x&&this.controls[j].isVisible();return x},setControlsEnabled:function(x){return x?C(this):w(this),this.raiseEvent("controls-enabled",{enabled:x}),this},setDebugMode:function(x){for(var j=0;j<this.world.getItemCount();j++)this.world.getItemAt(j).debugMode=x;this.debugMode=x,this.forceRedraw()},setAjaxHeaders:function(x,j){if(x===null&&(x={}),!e.isPlainObject(x)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(j===void 0&&(j=!0),this.ajaxHeaders=x,j){for(var H=0;H<this.world.getItemCount();H++)this.world.getItemAt(H)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var F in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[F].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(x){this.buttonGroup.addButton(x)},isFullPage:function(){return n[this.hash].fullPage},setFullPage:function(x){var j=document.body,H=j.style,F=document.documentElement.style,$=this,se,he;if(x===this.isFullPage())return this;var _e={fullPage:x,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",_e),_e.preventDefaultAction)return this;if(x){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=H.margin,this.docMargin=F.margin,H.margin="0",F.margin="0",this.bodyPadding=H.padding,this.docPadding=F.padding,H.padding="0",F.padding="0",this.bodyWidth=H.width,this.docWidth=F.width,H.width="100%",F.width="100%",this.bodyHeight=H.height,this.docHeight=F.height,H.height="100%",F.height="100%",this.bodyDisplay=H.display,H.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,se=j.childNodes.length,he=0;he<se;he++)this.previousBody.push(j.childNodes[0]),j.removeChild(j.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,j.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),j.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,e.delegate(this,Se)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,H.margin=this.bodyMargin,F.margin=this.docMargin,H.padding=this.bodyPadding,F.padding=this.docPadding,H.width=this.bodyWidth,F.width=this.docWidth,H.height=this.bodyHeight,F.height=this.docHeight,H.display=this.bodyDisplay,j.removeChild(this.element),se=this.previousBody.length,he=0;he<se;he++)j.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(j.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight;var Ae=0,Fe=function(){e.setPageScroll($.pageScroll);var Me=e.getPageScroll();Ae++,Ae<10&&(Me.x!==$.pageScroll.x||Me.y!==$.pageScroll.y)&&e.requestAnimationFrame(Fe)};e.requestAnimationFrame(Fe),n[this.hash].fullPage=!1,e.delegate(this,Ee)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:x}),this},setFullScreen:function(x){var j=this;if(!e.supportsFullScreen)return this.setFullPage(x);if(e.isFullScreen()===x)return this;var H={fullScreen:x,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",H),H.preventDefaultAction)return this;if(x){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var F=function(){var $=e.isFullScreen();$||(e.removeEvent(document,e.fullScreenEventName,F),e.removeEvent(document,e.fullScreenErrorEventName,F),j.setFullPage(!1),j.isFullPage()&&(j.element.style.width=j.fullPageStyleWidth,j.element.style.height=j.fullPageStyleHeight)),j.navigator&&j.viewport&&setTimeout(function(){j.navigator.update(j.viewport)}),j.raiseEvent("full-screen",{fullScreen:$})};e.addEvent(document,e.fullScreenEventName,F),e.addEvent(document,e.fullScreenErrorEventName,F),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(x){return this.container.style.visibility=x?"":"hidden",this.raiseEvent("visible",{visible:x}),this},addTiledImage:function(x){e.console.assert(x,"[Viewer.addTiledImage] options is required"),e.console.assert(x.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!x.replace||x.index>-1&&x.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var j=this;x.replace&&(x.replaceItem=j.world.getItemAt(x.index)),this._hideMessage(),x.placeholderFillStyle===void 0&&(x.placeholderFillStyle=this.placeholderFillStyle),x.opacity===void 0&&(x.opacity=this.opacity),x.preload===void 0&&(x.preload=this.preload),x.compositeOperation===void 0&&(x.compositeOperation=this.compositeOperation),x.crossOriginPolicy===void 0&&(x.crossOriginPolicy=x.tileSource.crossOriginPolicy!==void 0?x.tileSource.crossOriginPolicy:this.crossOriginPolicy),x.ajaxWithCredentials===void 0&&(x.ajaxWithCredentials=this.ajaxWithCredentials),x.loadTilesWithAjax===void 0&&(x.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(x.ajaxHeaders)||(x.ajaxHeaders={});var H={options:x};function F(he){for(var _e=0;_e<j._loadQueue.length;_e++)if(j._loadQueue[_e]===H){j._loadQueue.splice(_e,1);break}j._loadQueue.length===0&&$(H),j.raiseEvent("add-item-failed",he),x.error&&x.error(he)}function $(he){j.collectionMode&&(j.world.arrange({immediately:he.options.collectionImmediately,rows:j.collectionRows,columns:j.collectionColumns,layout:j.collectionLayout,tileSize:j.collectionTileSize,tileMargin:j.collectionTileMargin}),j.world.setAutoRefigureSizes(!0))}if(e.isArray(x.tileSource)){setTimeout(function(){F({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:x.tileSource,options:x})});return}this._loadQueue.push(H);function se(){for(var he,_e,Ae;j._loadQueue.length&&(he=j._loadQueue[0],!!he.tileSource);){if(j._loadQueue.splice(0,1),he.options.replace){var Fe=j.world.getIndexOfItem(he.options.replaceItem);Fe!==-1&&(he.options.index=Fe),j.world.removeItem(he.options.replaceItem)}_e=new e.TiledImage({viewer:j,source:he.tileSource,viewport:j.viewport,drawer:j.drawer,tileCache:j.tileCache,imageLoader:j.imageLoader,x:he.options.x,y:he.options.y,width:he.options.width,height:he.options.height,fitBounds:he.options.fitBounds,fitBoundsPlacement:he.options.fitBoundsPlacement,clip:he.options.clip,placeholderFillStyle:he.options.placeholderFillStyle,opacity:he.options.opacity,preload:he.options.preload,degrees:he.options.degrees,flipped:he.options.flipped,compositeOperation:he.options.compositeOperation,springStiffness:j.springStiffness,animationTime:j.animationTime,minZoomImageRatio:j.minZoomImageRatio,wrapHorizontal:j.wrapHorizontal,wrapVertical:j.wrapVertical,immediateRender:j.immediateRender,blendTime:j.blendTime,alwaysBlend:j.alwaysBlend,minPixelRatio:j.minPixelRatio,smoothTileEdgesMinZoom:j.smoothTileEdgesMinZoom,iOSDevice:j.iOSDevice,crossOriginPolicy:he.options.crossOriginPolicy,ajaxWithCredentials:he.options.ajaxWithCredentials,loadTilesWithAjax:he.options.loadTilesWithAjax,ajaxHeaders:he.options.ajaxHeaders,debugMode:j.debugMode,subPixelRoundingForTransparency:j.subPixelRoundingForTransparency}),j.collectionMode&&j.world.setAutoRefigureSizes(!1),j.navigator&&(Ae=e.extend({},he.options,{replace:!1,originalTiledImage:_e,tileSource:he.tileSource}),j.navigator.addTiledImage(Ae)),j.world.addItem(_e,{index:he.options.index}),j._loadQueue.length===0&&$(he),j.world.getItemCount()===1&&!j.preserveViewport&&j.viewport.goHome(!0),he.options.success&&he.options.success({item:_e})}}d(this,x.tileSource,x,function(he){H.tileSource=he,se()},function(he){he.options=x,F(he),se()})},addSimpleImage:function(x){e.console.assert(x,"[Viewer.addSimpleImage] options is required"),e.console.assert(x.url,"[Viewer.addSimpleImage] options.url is required");var j=e.extend({},x,{tileSource:{type:"image",url:x.url}});delete j.url,this.addTiledImage(j)},addLayer:function(x){var j=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var H=e.extend({},x,{success:function(F){j.raiseEvent("add-layer",{options:x,drawer:F.item})},error:function(F){j.raiseEvent("add-layer-failed",F)}});return this.addTiledImage(H),this},getLayerAtLevel:function(x){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(x)},getLevelOfLayer:function(x){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(x)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(x,j){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(x,j)},removeLayer:function(x){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(x)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var x=e.delegate(this,T),j=e.delegate(this,P),H=e.delegate(this,this.goToNextPage),F=e.delegate(this,this.goToPreviousPage),$=this.navImages,se=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(se=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:je(this.prefixUrl,$.previous.REST),srcGroup:je(this.prefixUrl,$.previous.GROUP),srcHover:je(this.prefixUrl,$.previous.HOVER),srcDown:je(this.prefixUrl,$.previous.DOWN),onRelease:F,onFocus:x,onBlur:j}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:je(this.prefixUrl,$.next.REST),srcGroup:je(this.prefixUrl,$.next.GROUP),srcHover:je(this.prefixUrl,$.next.HOVER),srcDown:je(this.prefixUrl,$.next.DOWN),onRelease:H,onFocus:x,onBlur:j}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),se&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var x=e.delegate(this,Ke),j=e.delegate(this,Ze),H=e.delegate(this,ke),F=e.delegate(this,at),$=e.delegate(this,Be),se=e.delegate(this,ft),he=e.delegate(this,W),_e=e.delegate(this,Y),Ae=e.delegate(this,le),Fe=e.delegate(this,ye),Me=e.delegate(this,T),Xe=e.delegate(this,P),k=this.navImages,R=[],B=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(B=!1),this.showZoomControl&&(R.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:je(this.prefixUrl,k.zoomIn.REST),srcGroup:je(this.prefixUrl,k.zoomIn.GROUP),srcHover:je(this.prefixUrl,k.zoomIn.HOVER),srcDown:je(this.prefixUrl,k.zoomIn.DOWN),onPress:x,onRelease:j,onClick:H,onEnter:x,onExit:j,onFocus:Me,onBlur:Xe})),R.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:je(this.prefixUrl,k.zoomOut.REST),srcGroup:je(this.prefixUrl,k.zoomOut.GROUP),srcHover:je(this.prefixUrl,k.zoomOut.HOVER),srcDown:je(this.prefixUrl,k.zoomOut.DOWN),onPress:F,onRelease:j,onClick:$,onEnter:F,onExit:j,onFocus:Me,onBlur:Xe}))),this.showHomeControl&&R.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:je(this.prefixUrl,k.home.REST),srcGroup:je(this.prefixUrl,k.home.GROUP),srcHover:je(this.prefixUrl,k.home.HOVER),srcDown:je(this.prefixUrl,k.home.DOWN),onRelease:se,onFocus:Me,onBlur:Xe})),this.showFullPageControl&&R.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:je(this.prefixUrl,k.fullpage.REST),srcGroup:je(this.prefixUrl,k.fullpage.GROUP),srcHover:je(this.prefixUrl,k.fullpage.HOVER),srcDown:je(this.prefixUrl,k.fullpage.DOWN),onRelease:he,onFocus:Me,onBlur:Xe})),this.showRotationControl&&(R.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:je(this.prefixUrl,k.rotateleft.REST),srcGroup:je(this.prefixUrl,k.rotateleft.GROUP),srcHover:je(this.prefixUrl,k.rotateleft.HOVER),srcDown:je(this.prefixUrl,k.rotateleft.DOWN),onRelease:_e,onFocus:Me,onBlur:Xe})),R.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:je(this.prefixUrl,k.rotateright.REST),srcGroup:je(this.prefixUrl,k.rotateright.GROUP),srcHover:je(this.prefixUrl,k.rotateright.HOVER),srcDown:je(this.prefixUrl,k.rotateright.DOWN),onRelease:Ae,onFocus:Me,onBlur:Xe}))),this.showFlipControl&&R.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:je(this.prefixUrl,k.flip.REST),srcGroup:je(this.prefixUrl,k.flip.GROUP),srcHover:je(this.prefixUrl,k.flip.HOVER),srcDown:je(this.prefixUrl,k.flip.DOWN),onRelease:Fe,onFocus:Me,onBlur:Xe})),B?(this.buttonGroup=new e.ButtonGroup({buttons:R,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,nt)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=R),this},currentPage:function(){return this._sequenceIndex},goToPage:function(x){return this.tileSources&&x>=0&&x<this.tileSources.length&&(this._sequenceIndex=x,this._updateSequenceButtons(x),this.open(this.tileSources[x]),this.referenceStrip&&this.referenceStrip.setFocus(x),this.raiseEvent("page",{page:x})),this},addOverlay:function(x,j,H,F){var $;if(e.isPlainObject(x)?$=x:$={element:x,location:j,placement:H,onDraw:F},x=e.getElement($.element),c(this.currentOverlays,x)>=0)return this;var se=l(this,$);return this.currentOverlays.push(se),se.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:x,location:$.location,placement:$.placement}),this},updateOverlay:function(x,j,H){var F;return x=e.getElement(x),F=c(this.currentOverlays,x),F>=0&&(this.currentOverlays[F].update(j,H),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:x,location:j,placement:H})),this},removeOverlay:function(x){var j;return x=e.getElement(x),j=c(this.currentOverlays,x),j>=0&&(this.currentOverlays[j].destroy(),this.currentOverlays.splice(j,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:x})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(x){var j;return x=e.getElement(x),j=c(this.currentOverlays,x),j>=0?this.currentOverlays[j]:null},_updateSequenceButtons:function(x){this.nextButton&&(!this.tileSources||this.tileSources.length-1===x?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(x>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(x){this._hideMessage();var j=e.makeNeutralElement("div");j.appendChild(document.createTextNode(x)),this.messageDiv=e.makeCenteredNode(j),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var x=this.messageDiv;x&&(x.parentNode.removeChild(x),delete this.messageDiv)},gestureSettingsByDeviceType:function(x){switch(x){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var x,j=this.currentOverlays.length;for(x=0;x<j;x++)this.currentOverlays[x].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var x=e.pixelDensityRatio,j=e.getCurrentPixelDensityRatio();x!==j&&(e.pixelDensityRatio=j,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var x=this._sequenceIndex-1;this.navPrevNextWrap&&x<0&&(x+=this.tileSources.length),this.goToPage(x)},goToNextPage:function(){var x=this._sequenceIndex+1;this.navPrevNextWrap&&x>=this.tileSources.length&&(x=0),this.goToPage(x)},isAnimating:function(){return n[this.hash].animating}});function a(x){return x=e.getElement(x),new e.Point(x.clientWidth===0?1:x.clientWidth,x.clientHeight===0?1:x.clientHeight)}function d(x,j,H,F,$){var se=x;if(e.type(j)==="string"){if(j.match(/^\s*<.*>\s*$/))j=e.parseXml(j);else if(j.match(/^\s*[{[].*[}\]]\s*$/))try{var he=e.parseJSON(j);j=he}catch{}}function _e(Ae,Fe){Ae.ready?F(Ae):(Ae.addHandler("ready",function(){F(Ae)}),Ae.addHandler("open-failed",function(Me){$({message:Me.message,source:Fe})}))}setTimeout(function(){if(e.type(j)==="string")j=new e.TileSource({url:j,crossOriginPolicy:H.crossOriginPolicy!==void 0?H.crossOriginPolicy:x.crossOriginPolicy,ajaxWithCredentials:x.ajaxWithCredentials,ajaxHeaders:H.ajaxHeaders?H.ajaxHeaders:x.ajaxHeaders,splitHashDataForPost:x.splitHashDataForPost,useCanvas:x.useCanvas,success:function(Xe){F(Xe.tileSource)}}),j.addHandler("open-failed",function(Xe){$(Xe)});else if(e.isPlainObject(j)||j.nodeType)if(j.crossOriginPolicy===void 0&&(H.crossOriginPolicy!==void 0||x.crossOriginPolicy!==void 0)&&(j.crossOriginPolicy=H.crossOriginPolicy!==void 0?H.crossOriginPolicy:x.crossOriginPolicy),j.ajaxWithCredentials===void 0&&(j.ajaxWithCredentials=x.ajaxWithCredentials),j.useCanvas===void 0&&(j.useCanvas=x.useCanvas),e.isFunction(j.getTileUrl)){var Ae=new e.TileSource(j);Ae.getTileUrl=j.getTileUrl,F(Ae)}else{var Fe=e.TileSource.determineType(se,j);if(!Fe){$({message:"Unable to load TileSource",source:j});return}var Me=Fe.prototype.configure.apply(se,[j]);_e(new Fe(Me),j)}else _e(j,j)})}function l(x,j){if(j instanceof e.Overlay)return j;var H=null;if(j.element)H=e.getElement(j.element);else{var F=j.id?j.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);H=e.getElement(j.id),H||(H=document.createElement("a"),H.href="#/overlay/"+F),H.id=F,e.addClass(H,j.className?j.className:"openseadragon-overlay")}var $=j.location,se=j.width,he=j.height;if(!$){var _e=j.x,Ae=j.y;if(j.px!==void 0){var Fe=x.viewport.imageToViewportRectangle(new e.Rect(j.px,j.py,se||0,he||0));_e=Fe.x,Ae=Fe.y,se=se!==void 0?Fe.width:void 0,he=he!==void 0?Fe.height:void 0}$=new e.Point(_e,Ae)}var Me=j.placement;return Me&&e.type(Me)==="string"&&(Me=e.Placement[j.placement.toUpperCase()]),new e.Overlay({element:H,location:$,placement:Me,onDraw:j.onDraw,checkResize:j.checkResize,width:se,height:he,rotationMode:j.rotationMode})}function c(x,j){var H;for(H=x.length-1;H>=0;H--)if(x[H].element===j)return H;return-1}function p(x,j){return e.requestAnimationFrame(function(){j(x)})}function g(x){e.requestAnimationFrame(function(){S(x)})}function w(x){x.autoHideControls&&(x.controlsShouldFade=!0,x.controlsFadeBeginTime=e.now()+x.controlsFadeDelay,window.setTimeout(function(){g(x)},x.controlsFadeDelay))}function S(x){var j,H,F,$;if(x.controlsShouldFade){for(j=e.now(),H=j-x.controlsFadeBeginTime,F=1-H/x.controlsFadeLength,F=Math.min(1,F),F=Math.max(0,F),$=x.controls.length-1;$>=0;$--)x.controls[$].autoFade&&x.controls[$].setOpacity(F);F>0&&g(x)}}function C(x){var j;for(x.controlsShouldFade=!1,j=x.controls.length-1;j>=0;j--)x.controls[j].setOpacity(1)}function T(){C(this)}function P(){w(this)}function A(x){var j={tracker:x.eventSource,position:x.position,originalEvent:x.originalEvent,preventDefault:x.preventDefault};this.raiseEvent("canvas-contextmenu",j),x.preventDefault=j.preventDefault}function M(x){var j={originalEvent:x.originalEvent,preventDefaultAction:!1,preventVerticalPan:x.preventVerticalPan||!this.panVertical,preventHorizontalPan:x.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",j),!j.preventDefaultAction&&!x.ctrl&&!x.alt&&!x.meta)switch(x.keyCode){case 38:j.preventVerticalPan||(x.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 40:j.preventVerticalPan||(x.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 37:j.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 39:j.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),x.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),x.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),x.preventDefault=!0;break;case 87:j.preventVerticalPan||(x.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 83:j.preventVerticalPan||(x.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 65:j.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 68:j.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),x.preventDefault=!0;break;case 82:x.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),x.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),x.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:x.preventDefault=!1;break}else x.preventDefault=!1}function V(x){var j={originalEvent:x.originalEvent};this.raiseEvent("canvas-key-press",j)}function X(x){var j,H=document.activeElement===this.canvas;H||this.canvas.focus(),this.viewport.flipped&&(x.position.x=this.viewport.getContainerSize().x-x.position.x);var F={tracker:x.eventSource,position:x.position,quick:x.quick,shift:x.shift,originalEvent:x.originalEvent,originalTarget:x.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",F),!F.preventDefaultAction&&this.viewport&&x.quick&&(j=this.gestureSettingsByDeviceType(x.pointerType),j.clickToZoom===!0&&(this.viewport.zoomBy(x.shift?1/this.zoomPerClick:this.zoomPerClick,j.zoomToRefPoint?this.viewport.pointFromPixel(x.position,!0):null),this.viewport.applyConstraints()),j.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=e.now()))}function te(x){var j,H={tracker:x.eventSource,position:x.position,shift:x.shift,originalEvent:x.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",H),!H.preventDefaultAction&&this.viewport&&(j=this.gestureSettingsByDeviceType(x.pointerType),j.dblClickToZoom&&(this.viewport.zoomBy(x.shift?1/this.zoomPerClick:this.zoomPerClick,j.zoomToRefPoint?this.viewport.pointFromPixel(x.position,!0):null),this.viewport.applyConstraints()))}function re(x){var j,H={tracker:x.eventSource,pointerType:x.pointerType,position:x.position,delta:x.delta,speed:x.speed,direction:x.direction,shift:x.shift,originalEvent:x.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",H),j=this.gestureSettingsByDeviceType(x.pointerType),!H.preventDefaultAction&&this.viewport){if(j.dblClickDragToZoom&&n[this.hash].draggingToZoom){var F=Math.pow(this.zoomPerDblClickDrag,x.delta.y/50);this.viewport.zoomBy(F)}else if(j.dragToPan&&!n[this.hash].draggingToZoom){if(this.panHorizontal||(x.delta.x=0),this.panVertical||(x.delta.y=0),this.viewport.flipped&&(x.delta.x=-x.delta.x),this.constrainDuringPan){var $=this.viewport.deltaPointsFromPixels(x.delta.negate());this.viewport.centerSpringX.target.value+=$.x,this.viewport.centerSpringY.target.value+=$.y;var se=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=$.x,this.viewport.centerSpringY.target.value-=$.y,se.xConstrained&&(x.delta.x=0),se.yConstrained&&(x.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(x.delta.negate()),j.flickEnabled&&!this.constrainDuringPan)}}}function ee(x){var j,H={tracker:x.eventSource,pointerType:x.pointerType,position:x.position,speed:x.speed,direction:x.direction,shift:x.shift,originalEvent:x.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",H),j=this.gestureSettingsByDeviceType(x.pointerType),!H.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&j.flickEnabled&&x.speed>=j.flickMinSpeed){var F=0;this.panHorizontal&&(F=j.flickMomentum*x.speed*Math.cos(x.direction));var $=0;this.panVertical&&($=j.flickMomentum*x.speed*Math.sin(x.direction));var se=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),he=this.viewport.pointFromPixel(new e.Point(se.x-F,se.y-$));this.viewport.panTo(he,!1)}this.viewport.applyConstraints()}j.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function G(x){this.raiseEvent("canvas-enter",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,buttons:x.buttons,pointers:x.pointers,insideElementPressed:x.insideElementPressed,buttonDownAny:x.buttonDownAny,originalEvent:x.originalEvent})}function L(x){this.raiseEvent("canvas-exit",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,buttons:x.buttons,pointers:x.pointers,insideElementPressed:x.insideElementPressed,buttonDownAny:x.buttonDownAny,originalEvent:x.originalEvent})}function J(x){var j;if(this.raiseEvent("canvas-press",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,insideElementPressed:x.insideElementPressed,insideElementReleased:x.insideElementReleased,originalEvent:x.originalEvent}),j=this.gestureSettingsByDeviceType(x.pointerType),j.dblClickDragToZoom){var H=n[this.hash].lastClickTime,F=e.now();if(H===null)return;F-H<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function ie(x){this.raiseEvent("canvas-release",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,insideElementPressed:x.insideElementPressed,insideElementReleased:x.insideElementReleased,originalEvent:x.originalEvent})}function pe(x){this.raiseEvent("canvas-nonprimary-press",{tracker:x.eventSource,position:x.position,pointerType:x.pointerType,button:x.button,buttons:x.buttons,originalEvent:x.originalEvent})}function ne(x){this.raiseEvent("canvas-nonprimary-release",{tracker:x.eventSource,position:x.position,pointerType:x.pointerType,button:x.button,buttons:x.buttons,originalEvent:x.originalEvent})}function ce(x){var j,H,F,$,se={tracker:x.eventSource,pointerType:x.pointerType,gesturePoints:x.gesturePoints,lastCenter:x.lastCenter,center:x.center,lastDistance:x.lastDistance,distance:x.distance,shift:x.shift,originalEvent:x.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",se),this.viewport&&(j=this.gestureSettingsByDeviceType(x.pointerType),j.pinchToZoom&&(!se.preventDefaultPanAction||!se.preventDefaultZoomAction)&&(H=this.viewport.pointFromPixel(x.center,!0),j.zoomToRefPoint&&!se.preventDefaultPanAction&&(F=this.viewport.pointFromPixel(x.lastCenter,!0),$=F.minus(H),this.panHorizontal||($.x=0),this.panVertical||($.y=0),this.viewport.panBy($,!0)),se.preventDefaultZoomAction||this.viewport.zoomBy(x.distance/x.lastDistance,H,!0),this.viewport.applyConstraints()),j.pinchRotate&&!se.preventDefaultRotateAction)){var he=Math.atan2(x.gesturePoints[0].currentPos.y-x.gesturePoints[1].currentPos.y,x.gesturePoints[0].currentPos.x-x.gesturePoints[1].currentPos.x),_e=Math.atan2(x.gesturePoints[0].lastPos.y-x.gesturePoints[1].lastPos.y,x.gesturePoints[0].lastPos.x-x.gesturePoints[1].lastPos.x);H=this.viewport.pointFromPixel(x.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(he-_e)*(180/Math.PI),H,!0)}}function ve(x){this.raiseEvent("canvas-focus",{tracker:x.eventSource,originalEvent:x.originalEvent})}function Q(x){this.raiseEvent("canvas-blur",{tracker:x.eventSource,originalEvent:x.originalEvent})}function ae(x){var j,H,F,$,se;$=e.now(),se=$-this._lastScrollTime,se>this.minScrollDeltaTime?(this._lastScrollTime=$,j={tracker:x.eventSource,position:x.position,scroll:x.scroll,shift:x.shift,originalEvent:x.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",j),!j.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(x.position.x=this.viewport.getContainerSize().x-x.position.x),H=this.gestureSettingsByDeviceType(x.pointerType),H.scrollToZoom&&(F=Math.pow(this.zoomPerScroll,x.scroll),this.viewport.zoomBy(F,H.zoomToRefPoint?this.viewport.pointFromPixel(x.position,!0):null),this.viewport.applyConstraints())),x.preventDefault=j.preventDefault):x.preventDefault=!0}function Se(x){n[this.hash].mouseInside=!0,C(this),this.raiseEvent("container-enter",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,buttons:x.buttons,pointers:x.pointers,insideElementPressed:x.insideElementPressed,buttonDownAny:x.buttonDownAny,originalEvent:x.originalEvent})}function Ee(x){x.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||w(this)),this.raiseEvent("container-exit",{tracker:x.eventSource,pointerType:x.pointerType,position:x.position,buttons:x.buttons,pointers:x.pointers,insideElementPressed:x.insideElementPressed,buttonDownAny:x.buttonDownAny,originalEvent:x.originalEvent})}function Ie(x){Te(x),x.isOpen()?x._updateRequestId=p(x,Ie):x._updateRequestId=!1}function Le(x,j){var H=x.viewport,F=H.getZoom(),$=H.getCenter();H.resize(j,x.preserveImageSizeOnResize),H.panTo($,!0);var se;if(x.preserveImageSizeOnResize)se=n[x.hash].prevContainerSize.x/j.x;else{var he=new e.Point(0,0),_e=new e.Point(n[x.hash].prevContainerSize.x,n[x.hash].prevContainerSize.y).distanceTo(he),Ae=new e.Point(j.x,j.y).distanceTo(he);se=Ae/_e*n[x.hash].prevContainerSize.x/j.x}H.zoomTo(F*se,null,!0),n[x.hash].prevContainerSize=j,n[x.hash].forceRedraw=!0,n[x.hash].needsResize=!1,n[x.hash].forceResize=!1}function Te(x){if(!(x._opening||!n[x.hash])){if(x.autoResize||n[x.hash].forceResize){var j;if(x._autoResizePolling){j=a(x.container);var H=n[x.hash].prevContainerSize;j.equals(H)||(n[x.hash].needsResize=!0)}n[x.hash].needsResize&&Le(x,j||a(x.container))}var F=x.viewport.update(),$=x.world.update()||F;F&&x.raiseEvent("viewport-change"),x.referenceStrip&&($=x.referenceStrip.update(x.viewport)||$);var se=n[x.hash].animating;!se&&$&&(x.raiseEvent("animation-start"),C(x));var he=se&&!$;he&&(n[x.hash].animating=!1),($||he||n[x.hash].forceRedraw||x.world.needsDraw())&&(We(x),x._drawOverlays(),x.navigator&&x.navigator.update(x.viewport),n[x.hash].forceRedraw=!1,$&&x.raiseEvent("animation")),he&&(x.raiseEvent("animation-finish"),n[x.hash].mouseInside||w(x)),n[x.hash].animating=$}}function We(x){x.imageLoader.clear(),x.drawer.clear(),x.world.draw(),x.raiseEvent("update-viewport",{})}function je(x,j){return x?x+j:j}function Ke(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,fe(this)}function at(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,fe(this)}function Ze(){n[this.hash].zooming=!1}function fe(x){e.requestAnimationFrame(e.delegate(x,Ne))}function Ne(){var x,j,H;n[this.hash].zooming&&this.viewport&&(x=e.now(),j=x-n[this.hash].lastZoomTime,H=Math.pow(n[this.hash].zoomFactor,j/1e3),this.viewport.zoomBy(H),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=x,fe(this))}function ke(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Be(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function nt(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function ft(){this.viewport&&this.viewport.goHome()}function W(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Y(){if(this.viewport){var x=this.viewport.getRotation();this.viewport.flipped?x+=this.rotationIncrement:x-=this.rotationIncrement,this.viewport.setRotation(x)}}function le(){if(this.viewport){var x=this.viewport.getRotation();this.viewport.flipped?x-=this.rotationIncrement:x+=this.rotationIncrement,this.viewport.setRotation(x)}}function ye(){this.viewport.toggleFlip()}}(o),function(e){e.Navigator=function(p){var g=p.viewer,w=this,S,C;p.element||p.id?(p.element?(p.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),p.element.id?p.id=p.element.id:p.id="navigator-"+e.now(),this.element=p.element):this.element=document.getElementById(p.id),p.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(p.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),p.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:p.autoFade},p.position&&(p.position==="BOTTOM_RIGHT"?p.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:p.position==="BOTTOM_LEFT"?p.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:p.position==="TOP_RIGHT"?p.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:p.position==="TOP_LEFT"?p.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:p.position==="ABSOLUTE"&&(p.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,p.controlOptions.top=p.top,p.controlOptions.left=p.left,p.controlOptions.height=p.height,p.controlOptions.width=p.width))),this.element.id=p.id,this.element.className+=" navigator",p=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},p,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:p.animationTime,autoResize:!1,minZoomImageRatio:1,background:p.background,opacity:p.opacity,borderColor:p.borderColor,displayRegionColor:p.displayRegionColor}),p.minPixelRatio=this.minPixelRatio=g.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),p.controlOptions.anchor!==e.ControlAnchor.NONE&&function(A,M){A.margin="0px",A.border=M+"px solid "+p.borderColor,A.padding="0px",A.background=p.background,A.opacity=p.opacity,A.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(A,M){A.position="relative",A.top="0px",A.left="0px",A.fontSize="0px",A.overflow="hidden",A.border=M+"px solid "+p.displayRegionColor,A.margin="0px",A.padding="0px",A.background="transparent",A.float="left",A.cssFloat="left",A.styleFloat="left",A.zIndex=999999999,A.cursor="default",A.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),g.addControl(this.element,p.controlOptions),this._resizeWithViewer=p.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&p.controlOptions.anchor!==e.ControlAnchor.NONE,p.width&&p.height?(this.setWidth(p.width),this.setHeight(p.height)):this._resizeWithViewer&&(S=e.getElementSize(g.element),this.element.style.height=Math.round(S.y*p.sizeRatio)+"px",this.element.style.width=Math.round(S.x*p.sizeRatio)+"px",this.oldViewerSize=S,C=e.getElementSize(this.element),this.elementArea=C.x*C.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[p]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function T(A,M){l(w.displayRegionContainer,A),l(w.displayRegion,-A),w.viewport.setRotation(A,M)}if(p.navigatorRotate){var P=p.viewer.viewport?p.viewer.viewport.getRotation():p.viewer.degrees||0;T(P,!0),p.viewer.addHandler("rotate",function(A){T(A.degrees,A.immediately)})}this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,i),clickHandler:e.delegate(this,n),releaseHandler:e.delegate(this,a),scrollHandler:e.delegate(this,d),preProcessEventHandler:function(A){A.eventType==="wheel"&&(A.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){w.viewport&&w.viewport.goHome(!0)}),g.world.addHandler("item-index-change",function(A){window.setTimeout(function(){var M=w.world.getItemAt(A.previousIndex);w.world.setItemIndex(M,A.newIndex)},1)}),g.world.addHandler("remove-item",function(A){var M=A.item,V=w._getMatchingItem(M);V&&w.world.removeItem(V)}),this.update(g.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var p=new e.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);p.equals(this.oldContainerSize)||(this.viewport.resize(p,!0),this.viewport.goHome(!0),this.oldContainerSize=p,this.drawer.clear(),this.world.draw())}},setWidth:function(p){this.width=p,this.element.style.width=typeof p=="number"?p+"px":p,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(p){this.height=p,this.element.style.height=typeof p=="number"?p+"px":p,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(p){return this.viewport.setFlip(p),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(p){c(this.displayRegion,p),c(this.canvas,p),c(this.element,p)},update:function(p){var g,w,S,C,T,P;if(g=e.getElementSize(this.viewer.element),this._resizeWithViewer&&g.x&&g.y&&!g.equals(this.oldViewerSize)&&(this.oldViewerSize=g,this.maintainSizeRatio||!this.elementArea?(w=g.x*this.sizeRatio,S=g.y*this.sizeRatio):(w=Math.sqrt(this.elementArea*(g.x/g.y)),S=this.elementArea/w),this.element.style.width=Math.round(w)+"px",this.element.style.height=Math.round(S)+"px",this.elementArea||(this.elementArea=w*S),this.updateSize()),p&&this.viewport){if(C=p.getBoundsNoRotate(!0),T=this.viewport.pixelFromPointNoRotate(C.getTopLeft(),!1),P=this.viewport.pixelFromPointNoRotate(C.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var A=p.getRotation(!0);l(this.displayRegion,-A)}var M=this.displayRegion.style;M.display=this.world.getItemCount()?"block":"none",M.top=T.y.toFixed(2)+"px",M.left=T.x.toFixed(2)+"px";var V=P.x-T.x,X=P.y-T.y;M.width=Math.round(Math.max(V,0))+"px",M.height=Math.round(Math.max(X,0))+"px"}},addTiledImage:function(p){var g=this,w=p.originalTiledImage;delete p.original;var S=e.extend({},p,{success:function(C){var T=C.item;T._originalForNavigator=w,g._matchBounds(T,w,!0),g._matchOpacity(T,w),g._matchCompositeOperation(T,w);function P(){g._matchBounds(T,w)}function A(){g._matchOpacity(T,w)}function M(){g._matchCompositeOperation(T,w)}w.addHandler("bounds-change",P),w.addHandler("clip-change",P),w.addHandler("opacity-change",A),w.addHandler("composite-operation-change",M)}});return e.Viewer.prototype.addTiledImage.apply(this,[S])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(p){for(var g=this.world.getItemCount(),w,S=0;S<g;S++)if(w=this.world.getItemAt(S),w._originalForNavigator===p)return w;return null},_matchBounds:function(p,g,w){var S=g.getBoundsNoRotate();p.setPosition(S.getTopLeft(),w),p.setWidth(S.width,w),p.setRotation(g.getRotation(),w),p.setClip(g.getClip()),p.setFlip(g.getFlip())},_matchOpacity:function(p,g){p.setOpacity(g.opacity)},_matchCompositeOperation:function(p,g){p.setCompositeOperation(g.compositeOperation)}});function n(p){var g={tracker:p.eventSource,position:p.position,quick:p.quick,shift:p.shift,originalEvent:p.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",g),!g.preventDefaultAction&&p.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(p.position.x=this.viewport.getContainerSize().x-p.position.x);var w=this.viewport.pointFromPixel(p.position);this.panVertical?this.panHorizontal||(w.x=this.viewer.viewport.getCenter(!0).x):w.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(w),this.viewer.viewport.applyConstraints()}}function i(p){var g={tracker:p.eventSource,position:p.position,delta:p.delta,speed:p.speed,direction:p.direction,shift:p.shift,originalEvent:p.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",g),!g.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(p.delta.x=0),this.panVertical||(p.delta.y=0),this.viewer.viewport.flipped&&(p.delta.x=-p.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(p.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function a(p){p.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function d(p){var g={tracker:p.eventSource,position:p.position,scroll:p.scroll,shift:p.shift,originalEvent:p.originalEvent,preventDefault:p.preventDefault};this.viewer.raiseEvent("navigator-scroll",g),p.preventDefault=g.preventDefault}function l(p,g){c(p,"rotate("+g+"deg)")}function c(p,g){p.style.webkitTransform=g,p.style.mozTransform=g,p.style.msTransform=g,p.style.oTransform=g,p.style.transform=g}}(o),function(e){var n={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(i){var a=i.split("."),d=null,l=arguments,c=n,p;for(p=0;p<a.length-1;p++)c=c[a[p]]||{};return d=c[a[p]],typeof d!="string"&&(e.console.error("Untranslated source string:",i),d=""),d.replace(/\{\d+\}/g,function(g){var w=parseInt(g.match(/\d+/),10)+1;return w<l.length?l[w]:""})},setString:function(i,a){var d=i.split("."),l=n,c;for(c=0;c<d.length-1;c++)l[d[c]]||(l[d[c]]={}),l=l[d[c]];l[d[c]]=a}})}(o),function(e){e.Point=function(n,i){this.x=typeof n=="number"?n:0,this.y=typeof i=="number"?i:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(n){return new e.Point(this.x+n.x,this.y+n.y)},minus:function(n){return new e.Point(this.x-n.x,this.y-n.y)},times:function(n){return new e.Point(this.x*n,this.y*n)},divide:function(n){return new e.Point(this.x/n,this.y/n)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},squaredDistanceTo:function(n){return Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2)},apply:function(n){return new e.Point(n(this.x),n(this.y))},equals:function(n){return n instanceof e.Point&&this.x===n.x&&this.y===n.y},rotate:function(n,i){i=i||new e.Point(0,0);var a,d;if(n%90===0){var l=e.positiveModulo(n,360);switch(l){case 0:a=1,d=0;break;case 90:a=0,d=1;break;case 180:a=-1,d=0;break;case 270:a=0,d=-1;break}}else{var c=n*Math.PI/180;a=Math.cos(c),d=Math.sin(c)}var p=a*(this.x-i.x)-d*(this.y-i.y)+i.x,g=d*(this.x-i.x)+a*(this.y-i.y)+i.y;return new e.Point(p,g)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(o),function(e){e.TileSource=function(i,a,d,l,c,p){var g=this,w=arguments,S,C;if(e.isPlainObject(i)?S=i:S={width:w[0],height:w[1],tileSize:w[2],tileOverlap:w[3],minLevel:w[4],maxLevel:w[5]},e.EventSource.call(this),e.extend(!0,this,S),!this.success){for(C=0;C<arguments.length;C++)if(e.isFunction(arguments[C])){this.success=arguments[C];break}}this.success&&this.addHandler("ready",function(T){g.success(T)}),e.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=S.width&&S.height?S.width/S.height:1,this.dimensions=new e.Point(S.width,S.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=S.tileOverlap?S.tileOverlap:0,this.minLevel=S.minLevel?S.minLevel:0,this.maxLevel=S.maxLevel!==void 0&&S.maxLevel!==null?S.maxLevel:S.width&&S.height?Math.ceil(Math.log(Math.max(S.width,S.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(i){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(i){return this._tileWidth?this._tileWidth:this.getTileSize(i)},getTileHeight:function(i){return this._tileHeight?this._tileHeight:this.getTileSize(i)},setMaxLevel:function(i){this.maxLevel=i,this._memoizeLevelScale()},getLevelScale:function(i){return this._memoizeLevelScale(),this.getLevelScale(i)},_memoizeLevelScale:function(){var i={},a;for(a=0;a<=this.maxLevel;a++)i[a]=1/Math.pow(2,this.maxLevel-a);this.getLevelScale=function(d){return i[d]}},getNumTiles:function(i){var a=this.getLevelScale(i),d=Math.ceil(a*this.dimensions.x/this.getTileWidth(i)),l=Math.ceil(a*this.dimensions.y/this.getTileHeight(i));return new e.Point(d,l)},getPixelRatio:function(i){var a=this.dimensions.times(this.getLevelScale(i)),d=1/a.x*e.pixelDensityRatio,l=1/a.y*e.pixelDensityRatio;return new e.Point(d,l)},getClosestLevel:function(){var i,a;for(i=this.minLevel+1;i<=this.maxLevel&&(a=this.getNumTiles(i),!(a.x>1||a.y>1));i++);return i-1},getTileAtPoint:function(i,a){var d=a.x>=0&&a.x<=1&&a.y>=0&&a.y<=1/this.aspectRatio;e.console.assert(d,"[TileSource.getTileAtPoint] must be called with a valid point.");var l=this.dimensions.x*this.getLevelScale(i),c=a.x*l,p=a.y*l,g=Math.floor(c/this.getTileWidth(i)),w=Math.floor(p/this.getTileHeight(i));a.x>=1&&(g=this.getNumTiles(i).x-1);var S=1e-15;return a.y>=1/this.aspectRatio-S&&(w=this.getNumTiles(i).y-1),new e.Point(g,w)},getTileBounds:function(i,a,d,l){var c=this.dimensions.times(this.getLevelScale(i)),p=this.getTileWidth(i),g=this.getTileHeight(i),w=a===0?0:p*a-this.tileOverlap,S=d===0?0:g*d-this.tileOverlap,C=p+(a===0?1:2)*this.tileOverlap,T=g+(d===0?1:2)*this.tileOverlap,P=1/c.x;return C=Math.min(C,c.x-w),T=Math.min(T,c.y-S),l?new e.Rect(0,0,C,T):new e.Rect(w*P,S*P,C*P,T*P)},getImageInfo:function(i){var a=this,d,l,c,p,g,w,S;i&&(g=i.split("/"),w=g[g.length-1],S=w.lastIndexOf("."),S>-1&&(g[g.length-1]=w.slice(0,S)));var C=null;if(this.splitHashDataForPost){var T=i.indexOf("#");T!==-1&&(C=i.substring(T+1),i=i.substr(0,T))}l=function(P){typeof P=="string"&&(P=e.parseXml(P));var A=e.TileSource.determineType(a,P,i);if(!A){a.raiseEvent("open-failed",{message:"Unable to load TileSource",source:i});return}p=A.prototype.configure.apply(a,[P,i,C]),p.ajaxWithCredentials===void 0&&(p.ajaxWithCredentials=a.ajaxWithCredentials),c=new A(p),a.ready=!0,a.raiseEvent("ready",{tileSource:c})},i.match(/\.js$/)?(d=i.split("/").pop().replace(".js",""),e.jsonp({url:i,async:!1,callbackName:d,callback:l})):e.makeAjaxRequest({url:i,postData:C,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(P){var A=n(P);l(A)},error:function(P,A){var M;try{M="HTTP "+P.status+" attempting to load TileSource: "+i}catch{var V;typeof A>"u"||!A.toString?V="Unknown error":V=A.toString(),M=V+" attempting to load TileSource: "+i}e.console.error(M),a.raiseEvent("open-failed",{message:M,source:i,postData:C})}})},supports:function(i,a){return!1},configure:function(i,a,d){throw new Error("Method not implemented.")},getTileUrl:function(i,a,d){throw new Error("Method not implemented.")},getTilePostData:function(i,a,d){return null},getTileAjaxHeaders:function(i,a,d){return{}},getTileHashKey:function(i,a,d,l,c,p){function g(w){return c?w+"+"+JSON.stringify(c):w}return g(typeof l!="string"?i+"/"+a+"_"+d:l)},tileExists:function(i,a,d){var l=this.getNumTiles(i);return i>=this.minLevel&&i<=this.maxLevel&&a>=0&&d>=0&&a<l.x&&d<l.y},hasTransparency:function(i,a,d,l){return!!i||a.match(".png")},downloadTileStart:function(i){var a=i.userData,d=new Image;a.image=d,a.request=null;var l=function(c){if(!d){i.finish(null,a.request,"Image load failed: undefined Image instance.");return}d.onload=d.onerror=d.onabort=null,i.finish(c?null:d,a.request,c)};d.onload=function(){l()},d.onabort=d.onerror=function(){l("Image load aborted.")},i.loadWithAjax?a.request=e.makeAjaxRequest({url:i.src,withCredentials:i.ajaxWithCredentials,headers:i.ajaxHeaders,responseType:"arraybuffer",postData:i.postData,success:function(c){var p;try{p=new window.Blob([c.response])}catch(S){var g=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(S.name==="TypeError"&&g){var w=new g;w.append(c.response),p=w.getBlob()}}p.size===0?l("Empty image response."):d.src=(window.URL||window.webkitURL).createObjectURL(p)},error:function(c){l("Image load aborted - XHR error")}}):(i.crossOriginPolicy!==!1&&(d.crossOrigin=i.crossOriginPolicy),d.src=i.src)},downloadTileAbort:function(i){i.userData.request&&i.userData.request.abort();var a=i.userData.image;i.userData.image&&(a.onload=a.onerror=a.onabort=null)},createTileCache:function(i,a,d){i._data=a},destroyTileCache:function(i){i._data=null,i._renderedContext=null},getTileCacheData:function(i){return i._data},getTileCacheDataAsImage:function(i){return i._data},getTileCacheDataAsContext2D:function(i){if(!i._renderedContext){var a=document.createElement("canvas");a.width=i._data.width,a.height=i._data.height,i._renderedContext=a.getContext("2d"),i._renderedContext.drawImage(i._data,0,0),i._data=null}return i._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype);function n(i){var a=i.responseText,d=i.status,l,c;if(i){if(i.status!==200&&i.status!==0)throw d=i.status,l=d===404?"Not Found":i.statusText,new Error(e.getString("Errors.Status",d,l))}else throw new Error(e.getString("Errors.Security"));if(a.match(/^\s*<.*/))try{c=i.responseXML&&i.responseXML.documentElement?i.responseXML:e.parseXml(a)}catch{c=i.responseText}else if(a.match(/\s*[{[].*/))try{c=e.parseJSON(a)}catch{c=a}else c=a;return c}e.TileSource.determineType=function(i,a,d){var l;for(l in o)if(l.match(/.+TileSource$/)&&e.isFunction(o[l])&&e.isFunction(o[l].prototype.supports)&&o[l].prototype.supports.call(i,a,d))return o[l];return e.console.error("No TileSource was able to open %s %s",d,a),null}}(o),function(e){e.DziTileSource=function(a,d,l,c,p,g,w,S,C){var T,P,A,M;if(e.isPlainObject(a)?M=a:M={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=M.tilesUrl,this.fileFormat=M.fileFormat,this.displayRects=M.displayRects,this.displayRects)for(T=this.displayRects.length-1;T>=0;T--)for(P=this.displayRects[T],A=P.minLevel;A<=P.maxLevel;A++)this._levelRects[A]||(this._levelRects[A]=[]),this._levelRects[A].push(P);e.TileSource.apply(this,[M])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(a,d){var l;return a.Image?l=a.Image.xmlns:a.documentElement&&(a.documentElement.localName==="Image"||a.documentElement.tagName==="Image")&&(l=a.documentElement.namespaceURI),l=(l||"").toLowerCase(),l.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||l.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(a,d,l){var c;return e.isPlainObject(a)?c=i(this,a):c=n(this,a),d&&!c.tilesUrl&&(c.tilesUrl=d.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),d.search(/\.(dzi|xml|js)\?/)!==-1?c.queryParams=d.match(/\?.*/):c.queryParams=""),c},getTileUrl:function(a,d,l){return[this.tilesUrl,a,"/",d,"_",l,".",this.fileFormat,this.queryParams].join("")},tileExists:function(a,d,l){var c=this._levelRects[a],p,g,w,S,C,T,P;if(this.minLevel&&a<this.minLevel||this.maxLevel&&a>this.maxLevel)return!1;if(!c||!c.length)return!0;for(P=c.length-1;P>=0;P--)if(p=c[P],!(a<p.minLevel||a>p.maxLevel)&&(g=this.getLevelScale(a),w=p.x*g,S=p.y*g,C=w+p.width*g,T=S+p.height*g,w=Math.floor(w/this._tileWidth),S=Math.floor(S/this._tileWidth),C=Math.ceil(C/this._tileWidth),T=Math.ceil(T/this._tileWidth),w<=d&&d<C&&S<=l&&l<T))return!0;return!1}});function n(a,d){if(!d||!d.documentElement)throw new Error(e.getString("Errors.Xml"));var l=d.documentElement,c=l.localName||l.tagName,p=d.documentElement.namespaceURI,g=null,w=[],S,C,T,P,A;if(c==="Image")try{if(P=l.getElementsByTagName("Size")[0],P===void 0&&(P=l.getElementsByTagNameNS(p,"Size")[0]),g={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(P.getAttribute("Height"),10),Width:parseInt(P.getAttribute("Width"),10)}}},!e.imageFormatSupported(g.Image.Format))throw new Error(e.getString("Errors.ImageFormat",g.Image.Format.toUpperCase()));for(S=l.getElementsByTagName("DisplayRect"),S===void 0&&(S=l.getElementsByTagNameNS(p,"DisplayRect")[0]),A=0;A<S.length;A++)C=S[A],T=C.getElementsByTagName("Rect")[0],T===void 0&&(T=C.getElementsByTagNameNS(p,"Rect")[0]),w.push({Rect:{X:parseInt(T.getAttribute("X"),10),Y:parseInt(T.getAttribute("Y"),10),Width:parseInt(T.getAttribute("Width"),10),Height:parseInt(T.getAttribute("Height"),10),MinLevel:parseInt(C.getAttribute("MinLevel"),10),MaxLevel:parseInt(C.getAttribute("MaxLevel"),10)}});return w.length&&(g.Image.DisplayRect=w),i(a,g)}catch(X){throw X instanceof Error?X:new Error(e.getString("Errors.Dzi"))}else{if(c==="Collection")throw new Error(e.getString("Errors.Dzc"));if(c==="Error"){var M=l.getElementsByTagName("Message")[0],V=M.firstChild.nodeValue;throw new Error(V)}}throw new Error(e.getString("Errors.Dzi"))}function i(a,d){var l=d.Image,c=l.Url,p=l.Format,g=l.Size,w=l.DisplayRect||[],S=parseInt(g.Width,10),C=parseInt(g.Height,10),T=parseInt(l.TileSize,10),P=parseInt(l.Overlap,10),A=[],M,V;for(V=0;V<w.length;V++)M=w[V].Rect,A.push(new e.DisplayRect(parseInt(M.X,10),parseInt(M.Y,10),parseInt(M.Width,10),parseInt(M.Height,10),parseInt(M.MinLevel,10),parseInt(M.MaxLevel,10)));return e.extend(!0,{width:S,height:C,tileSize:T,tileOverlap:P,minLevel:null,maxLevel:null,tilesUrl:c,fileFormat:p,displayRects:A},d)}}(o),function(e){e.IIIFTileSource=function(l){if(e.extend(!0,this,l),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(l.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=l.version,this.tile_width&&this.tile_height)l.tileWidth=this.tile_width,l.tileHeight=this.tile_height;else if(this.tile_width)l.tileSize=this.tile_width;else if(this.tile_height)l.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)l.tileWidth=this.tiles[0].width,l.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var c=0;c<this.tiles.length;c++)for(var p=0;p<this.tiles[c].scaleFactors.length;p++){var g=this.tiles[c].scaleFactors[p];this.scale_factors.push(g),l.tileSizePerScaleFactor[g]={width:this.tiles[c].width,height:this.tiles[c].height||this.tiles[c].width}}}else if(n(l)){for(var w=Math.min(this.height,this.width),S=[256,512,1024],C=[],T=0;T<S.length;T++)S[T]<=w&&C.push(S[T]);C.length>0?l.tileSize=Math.max.apply(null,C):l.tileSize=w}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,l.levels=i(this),e.extend(!0,l,{width:l.levels[l.levels.length-1].width,height:l.levels[l.levels.length-1].height,tileSize:Math.max(l.height,l.width),tileOverlap:0,minLevel:0,maxLevel:l.levels.length-1}),this.levels=l.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!l.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)l.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var P=Math.max.apply(null,this.scale_factors);l.maxLevel=Math.round(Math.log(P)*Math.LOG2E)}if(this.sizes){var A=this.sizes.length;(A===l.maxLevel||A===l.maxLevel+1)&&(this.levelSizes=this.sizes,A===l.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[l])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(l,c){return l.protocol&&l.protocol==="http://iiif.io/api/image"||l["@context"]&&(l["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||l["@context"]==="http://iiif.io/api/image/1/context.json")||l.profile&&l.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||l.identifier&&l.width&&l.height?!0:!!(l.documentElement&&l.documentElement.tagName==="info"&&l.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(l,c,p){if(e.isPlainObject(l)){if(!l["@context"])l["@context"]="http://iiif.io/api/image/1.0/context.json",l["@id"]=c.replace("/info.json",""),l.version=1;else{var w=l["@context"];if(Array.isArray(w)){for(var S=0;S<w.length;S++)if(typeof w[S]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(w[S])||w[S]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){w=w[S];break}}switch(w){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":l.version=1;break;case"http://iiif.io/api/image/2/context.json":l.version=2;break;case"http://iiif.io/api/image/3/context.json":l.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(l.preferredFormats){for(var C=0;C<l.preferredFormats.length;C++)if(o.imageFormatSupported(l.preferredFormats[C])){l.tileFormat=l.preferredFormats[C];break}}return l}else{var g=a(l);return g["@context"]="http://iiif.io/api/image/1.0/context.json",g["@id"]=c.replace("/info.xml",""),g.version=1,g}},getTileWidth:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,l);var c=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[c]?this.tileSizePerScaleFactor[c].width:this._tileWidth},getTileHeight:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,l);var c=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[c]?this.tileSizePerScaleFactor[c].height:this._tileHeight},getLevelScale:function(l){if(this.emulateLegacyImagePyramid){var c=NaN;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(c=this.levels[l].width/this.levels[this.maxLevel].width),c}return e.TileSource.prototype.getLevelScale.call(this,l)},getNumTiles:function(l){if(this.emulateLegacyImagePyramid){var c=this.getLevelScale(l);return c?new e.Point(1,1):new e.Point(0,0)}if(this.levelSizes){var p=this.levelSizes[l],g=Math.ceil(p.width/this.getTileWidth(l)),w=Math.ceil(p.height/this.getTileHeight(l));return new e.Point(g,w)}else return e.TileSource.prototype.getNumTiles.call(this,l)},getTileAtPoint:function(l,c){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){var p=c.x>=0&&c.x<=1&&c.y>=0&&c.y<=1/this.aspectRatio;e.console.assert(p,"[TileSource.getTileAtPoint] must be called with a valid point.");var g=this.levelSizes[l].width,w=c.x*g,S=c.y*g,C=Math.floor(w/this.getTileWidth(l)),T=Math.floor(S/this.getTileHeight(l));c.x>=1&&(C=this.getNumTiles(l).x-1);var P=1e-15;return c.y>=1/this.aspectRatio-P&&(T=this.getNumTiles(l).y-1),new e.Point(C,T)}return e.TileSource.prototype.getTileAtPoint.call(this,l,c)},getTileUrl:function(l,c,p){if(this.emulateLegacyImagePyramid){var g=null;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(g=this.levels[l].url),g}var w="0",S=Math.pow(.5,this.maxLevel-l),C,T,P,A,M,V,X,te,re,ee,G,L,J,ie,pe,ne;return this.levelSizes?(C=this.levelSizes[l].width,T=this.levelSizes[l].height):(C=Math.ceil(this.width*S),T=Math.ceil(this.height*S)),P=this.getTileWidth(l),A=this.getTileHeight(l),M=Math.round(P/S),V=Math.round(A/S),this.version===1?pe="native."+this.tileFormat:pe="default."+this.tileFormat,C<P&&T<A?(this.version===2&&C===this.width?L="full":this.version===3&&C===this.width&&T===this.height?L="max":this.version===3?L=C+","+T:L=C+",",X="full"):(te=c*M,re=p*V,ee=Math.min(M,this.width-te),G=Math.min(V,this.height-re),c===0&&p===0&&ee===this.width&&G===this.height?X="full":X=[te,re,ee,G].join(","),J=Math.min(P,C-c*P),ie=Math.min(A,T-p*A),this.version===2&&J===this.width?L="full":this.version===3&&J===this.width&&ie===this.height?L="max":this.version===3?L=J+","+ie:L=J+","),ne=[this._id,X,L,w,pe].join("/"),ne},__testonly__:{canBeTiled:n,constructLevels:i}});function n(l){var c=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],p=Array.isArray(l.profile)?l.profile[0]:l.profile,g=c.indexOf(p)!==-1,w=!1;return l.version===2&&l.profile.length>1&&l.profile[1].supports&&(w=l.profile[1].supports.indexOf("sizeByW")!==-1),l.version===3&&l.extraFeatures&&(w=l.extraFeatures.indexOf("sizeByWh")!==-1),!g||w}function i(l){for(var c=[],p=0;p<l.sizes.length;p++)c.push({url:l._id+"/full/"+l.sizes[p].width+","+(l.version===3?l.sizes[p].height:"")+"/0/default."+l.tileFormat,width:l.sizes[p].width,height:l.sizes[p].height});return c.sort(function(g,w){return g.width-w.width})}function a(l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var c=l.documentElement,p=c.tagName,g=null;if(p==="info")try{return g={},d(c,g),g}catch(w){throw w instanceof Error?w:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function d(l,c,p){var g,w;if(l.nodeType===3&&p)w=l.nodeValue.trim(),w.match(/^\d*$/)&&(w=Number(w)),c[p]?(e.isArray(c[p])||(c[p]=[c[p]]),c[p].push(w)):c[p]=w;else if(l.nodeType===1)for(g=0;g<l.childNodes.length;g++)d(l.childNodes[g],c,l.nodeName)}}(o),function(e){e.OsmTileSource=function(n,i,a,d,l){var c;e.isPlainObject(n)?c=n:c={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!c.width||!c.height)&&(c.width=65572864,c.height=65572864),c.tileSize||(c.tileSize=256,c.tileOverlap=0),c.tilesUrl||(c.tilesUrl="http://tile.openstreetmap.org/"),c.minLevel=8,e.TileSource.apply(this,[c])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="openstreetmaps"},configure:function(n,i,a){return n},getTileUrl:function(n,i,a){return this.tilesUrl+(n-8)+"/"+i+"/"+a+".png"}})}(o),function(e){e.TmsTileSource=function(n,i,a,d,l){var c;e.isPlainObject(n)?c=n:c={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var p=Math.ceil(c.width/256)*256,g=Math.ceil(c.height/256)*256,w;p>g?w=p/256:w=g/256,c.maxLevel=Math.ceil(Math.log(w)/Math.log(2))-1,c.tileSize=256,c.width=p,c.height=g,e.TileSource.apply(this,[c])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="tiledmapservice"},configure:function(n,i,a){return n},getTileUrl:function(n,i,a){var d=this.getNumTiles(n).y-1;return this.tilesUrl+n+"/"+i+"/"+(d-a)+".png"}})}(o),function(e){e.ZoomifyTileSource=function(n){typeof n.tileSize>"u"&&(n.tileSize=256),typeof n.fileFormat>"u"&&(n.fileFormat="jpg",this.fileFormat=n.fileFormat);var i={x:n.width,y:n.height};for(n.imageSizes=[{x:n.width,y:n.height}],n.gridSize=[this._getGridSize(n.width,n.height,n.tileSize)];parseInt(i.x,10)>n.tileSize||parseInt(i.y,10)>n.tileSize;)i.x=Math.floor(i.x/2),i.y=Math.floor(i.y/2),n.imageSizes.push({x:i.x,y:i.y}),n.gridSize.push(this._getGridSize(i.x,i.y,n.tileSize));n.imageSizes.reverse(),n.gridSize.reverse(),n.minLevel=0,n.maxLevel=n.gridSize.length-1,o.TileSource.apply(this,[n])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(n,i,a){return{x:Math.ceil(n/a),y:Math.ceil(i/a)}},_calculateAbsoluteTileNumber:function(n,i,a){for(var d=0,l={},c=0;c<n;c++)l=this.gridSize[c],d+=l.x*l.y;return l=this.gridSize[n],d+=l.x*a+i,d},supports:function(n,i){return n.type&&n.type==="zoomifytileservice"},configure:function(n,i,a){return n},getTileUrl:function(n,i,a){var d=0,l=this._calculateAbsoluteTileNumber(n,i,a);return d=Math.floor(l/256),this.tilesUrl+"TileGroup"+d+"/"+n+"-"+i+"-"+a+"."+this.fileFormat}})}(o),function(e){e.LegacyTileSource=function(d){var l,c,p;e.isArray(d)&&(l={type:"legacy-image-pyramid",levels:d}),l.levels=n(l.levels),l.levels.length>0?(c=l.levels[l.levels.length-1].width,p=l.levels[l.levels.length-1].height):(c=0,p=0,e.console.error("No supported image formats found")),e.extend(!0,l,{width:c,height:p,tileSize:Math.max(p,c),tileOverlap:0,minLevel:0,maxLevel:l.levels.length>0?l.levels.length-1:0}),e.TileSource.apply(this,[l]),this.levels=l.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(d,l){return d.type&&d.type==="legacy-image-pyramid"||d.documentElement&&d.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(d,l,c){var p;return e.isPlainObject(d)?p=a(this,d):p=i(this,d),p},getLevelScale:function(d){var l=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(l=this.levels[d].width/this.levels[this.maxLevel].width),l},getNumTiles:function(d){var l=this.getLevelScale(d);return l?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(d,l,c){var p=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(p=this.levels[d].url),p}});function n(d){var l=[],c,p;for(p=0;p<d.length;p++)c=d[p],c.height&&c.width&&c.url?l.push({url:c.url,width:Number(c.width),height:Number(c.height)}):e.console.error("Unsupported image format: %s",c.url?c.url:"<no URL>");return l.sort(function(g,w){return g.height-w.height})}function i(d,l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var c=l.documentElement,p=c.tagName,g=null,w=[],S,C;if(p==="image")try{for(g={type:c.getAttribute("type"),levels:[]},w=c.getElementsByTagName("level"),C=0;C<w.length;C++)S=w[C],g.levels.push({url:S.getAttribute("url"),width:parseInt(S.getAttribute("width"),10),height:parseInt(S.getAttribute("height"),10)});return a(d,g)}catch(T){throw T instanceof Error?T:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(p==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(p==="error")throw new Error("Error: "+l)}throw new Error("Unknown element "+p)}function a(d,l){return l.levels}}(o),function(e){e.ImageTileSource=function(n){n=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},n),e.TileSource.apply(this,[n])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="image"},configure:function(n,i,a){return n},getImageInfo:function(n){var i=this._image=new Image,a=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),e.addEvent(i,"load",function(){a.width=i.naturalWidth,a.height=i.naturalHeight,a.aspectRatio=a.width/a.height,a.dimensions=new e.Point(a.width,a.height),a._tileWidth=a.width,a._tileHeight=a.height,a.tileOverlap=0,a.minLevel=0,a.levels=a._buildLevels(),a.maxLevel=a.levels.length-1,a.ready=!0,a.raiseEvent("ready",{tileSource:a})}),e.addEvent(i,"error",function(){a.raiseEvent("open-failed",{message:"Error loading image at "+n,source:n})}),i.src=n},getLevelScale:function(n){var i=NaN;return n>=this.minLevel&&n<=this.maxLevel&&(i=this.levels[n].width/this.levels[this.maxLevel].width),i},getNumTiles:function(n){var i=this.getLevelScale(n);return i?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(n,i,a){var d=null;return n>=this.minLevel&&n<=this.maxLevel&&(d=this.levels[n].url),d},getContext2D:function(n,i,a){var d=null;return n>=this.minLevel&&n<=this.maxLevel&&(d=this.levels[n].context2D),d},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var n=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,n;var i=this._image.naturalWidth,a=this._image.naturalHeight,d=document.createElement("canvas"),l=d.getContext("2d");if(d.width=i,d.height=a,l.drawImage(this._image,0,0,i,a),n[0].context2D=l,delete this._image,e.isCanvasTainted(d))return n;for(;i>=2&&a>=2;){i=Math.floor(i/2),a=Math.floor(a/2);var c=document.createElement("canvas"),p=c.getContext("2d");c.width=i,c.height=a,p.drawImage(d,0,0,i,a),n.splice(0,0,{context2D:p,width:i,height:a}),d=c,l=p}return n},_freeupCanvasMemory:function(){for(var n=0;n<this.levels.length;n++)this.levels[n].context2D&&(this.levels[n].context2D.canvas.height=0,this.levels[n].context2D.canvas.width=0)}})}(o),function(e){e.TileSourceCollection=function(n,i,a,d){e.console.error("TileSourceCollection is deprecated; use World instead")}}(o),function(e){e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(p){var g=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},p),this.element=p.element||e.makeNeutralElement("div"),p.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(w){w.insideElementPressed?(l(g,e.ButtonState.DOWN),g.raiseEvent("enter",{originalEvent:w.originalEvent})):w.buttonDownAny||l(g,e.ButtonState.HOVER)},focusHandler:function(w){g.tracker.enterHandler(w),g.raiseEvent("focus",{originalEvent:w.originalEvent})},leaveHandler:function(w){c(g,e.ButtonState.GROUP),w.insideElementPressed&&g.raiseEvent("exit",{originalEvent:w.originalEvent})},blurHandler:function(w){g.tracker.leaveHandler(w),g.raiseEvent("blur",{originalEvent:w.originalEvent})},pressHandler:function(w){l(g,e.ButtonState.DOWN),g.raiseEvent("press",{originalEvent:w.originalEvent})},releaseHandler:function(w){w.insideElementPressed&&w.insideElementReleased?(c(g,e.ButtonState.HOVER),g.raiseEvent("release",{originalEvent:w.originalEvent})):w.insideElementPressed?c(g,e.ButtonState.GROUP):l(g,e.ButtonState.HOVER)},clickHandler:function(w){w.quick&&g.raiseEvent("click",{originalEvent:w.originalEvent})},keyHandler:function(w){w.keyCode===13?(g.raiseEvent("click",{originalEvent:w.originalEvent}),g.raiseEvent("release",{originalEvent:w.originalEvent}),w.preventDefault=!0):w.preventDefault=!1}}),c(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){l(this,e.ButtonState.GROUP)},notifyGroupExit:function(){c(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function n(p){e.requestAnimationFrame(function(){i(p)})}function i(p){var g,w,S;p.shouldFade&&(g=e.now(),w=g-p.fadeBeginTime,S=1-w/p.fadeLength,S=Math.min(1,S),S=Math.max(0,S),p.imgGroup&&e.setElementOpacity(p.imgGroup,S,!0),S>0&&n(p))}function a(p){p.shouldFade=!0,p.fadeBeginTime=e.now()+p.fadeDelay,window.setTimeout(function(){n(p)},p.fadeDelay)}function d(p){p.shouldFade=!1,p.imgGroup&&e.setElementOpacity(p.imgGroup,1,!0)}function l(p,g){p.element.disabled||(g>=e.ButtonState.GROUP&&p.currentState===e.ButtonState.REST&&(d(p),p.currentState=e.ButtonState.GROUP),g>=e.ButtonState.HOVER&&p.currentState===e.ButtonState.GROUP&&(p.imgHover&&(p.imgHover.style.visibility=""),p.currentState=e.ButtonState.HOVER),g>=e.ButtonState.DOWN&&p.currentState===e.ButtonState.HOVER&&(p.imgDown&&(p.imgDown.style.visibility=""),p.currentState=e.ButtonState.DOWN))}function c(p,g){p.element.disabled||(g<=e.ButtonState.HOVER&&p.currentState===e.ButtonState.DOWN&&(p.imgDown&&(p.imgDown.style.visibility="hidden"),p.currentState=e.ButtonState.HOVER),g<=e.ButtonState.GROUP&&p.currentState===e.ButtonState.HOVER&&(p.imgHover&&(p.imgHover.style.visibility="hidden"),p.currentState=e.ButtonState.GROUP),g<=e.ButtonState.REST&&p.currentState===e.ButtonState.GROUP&&(a(p),p.currentState=e.ButtonState.REST))}}(o),function(e){e.ButtonGroup=function(n){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},n);var i=this.buttons.concat([]),a=this,d;if(this.element=n.element||e.makeNeutralElement("div"),!n.group)for(this.element.style.display="inline-block",d=0;d<i.length;d++)this.element.appendChild(i[d].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(l){var c;for(c=0;c<a.buttons.length;c++)a.buttons[c].notifyGroupEnter()},leaveHandler:function(l){var c;if(!l.insideElementPressed)for(c=0;c<a.buttons.length;c++)a.buttons[c].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(n){this.buttons.push(n),this.element.appendChild(n.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var n=this.buttons.pop();this.element.removeChild(n.element),n.destroy()}this.tracker.destroy(),this.element=null}}}(o),function(e){e.Rect=function(n,i,a,d,l){this.x=typeof n=="number"?n:0,this.y=typeof i=="number"?i:0,this.width=typeof a=="number"?a:0,this.height=typeof d=="number"?d:0,this.degrees=typeof l=="number"?l:0,this.degrees=e.positiveModulo(this.degrees,360);var c,p;this.degrees>=270?(c=this.getTopRight(),this.x=c.x,this.y=c.y,p=this.height,this.height=this.width,this.width=p,this.degrees-=270):this.degrees>=180?(c=this.getBottomRight(),this.x=c.x,this.y=c.y,this.degrees-=180):this.degrees>=90&&(c=this.getBottomLeft(),this.x=c.x,this.y=c.y,p=this.height,this.height=this.width,this.width=p,this.degrees-=90)},e.Rect.fromSummits=function(n,i,a){var d=n.distanceTo(i),l=n.distanceTo(a),c=i.minus(n),p=Math.atan(c.y/c.x);return c.x<0?p+=Math.PI:c.y<0&&(p+=2*Math.PI),new e.Rect(n.x,n.y,d,l,p/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(n){return n instanceof e.Rect&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height&&this.degrees===n.degrees},times:function(n){return new e.Rect(this.x*n,this.y*n,this.width*n,this.height*n,this.degrees)},translate:function(n){return new e.Rect(this.x+n.x,this.y+n.y,this.width,this.height,this.degrees)},union:function(n){var i=this.getBoundingBox(),a=n.getBoundingBox(),d=Math.min(i.x,a.x),l=Math.min(i.y,a.y),c=Math.max(i.x+i.width,a.x+a.width),p=Math.max(i.y+i.height,a.y+a.height);return new e.Rect(d,l,c-d,p-l)},intersection:function(n){var i=1e-10,a=[],d=this.getTopLeft();n.containsPoint(d,i)&&a.push(d);var l=this.getTopRight();n.containsPoint(l,i)&&a.push(l);var c=this.getBottomLeft();n.containsPoint(c,i)&&a.push(c);var p=this.getBottomRight();n.containsPoint(p,i)&&a.push(p);var g=n.getTopLeft();this.containsPoint(g,i)&&a.push(g);var w=n.getTopRight();this.containsPoint(w,i)&&a.push(w);var S=n.getBottomLeft();this.containsPoint(S,i)&&a.push(S);var C=n.getBottomRight();this.containsPoint(C,i)&&a.push(C);for(var T=this._getSegments(),P=n._getSegments(),A=0;A<T.length;A++)for(var M=T[A],V=0;V<P.length;V++){var X=P[V],te=re(M[0],M[1],X[0],X[1]);te&&a.push(te)}function re(ne,ce,ve,Q){var ae=ce.minus(ne),Se=Q.minus(ve),Ee=-Se.x*ae.y+ae.x*Se.y;if(Ee===0)return null;var Ie=(ae.x*(ne.y-ve.y)-ae.y*(ne.x-ve.x))/Ee,Le=(Se.x*(ne.y-ve.y)-Se.y*(ne.x-ve.x))/Ee;return-i<=Ie&&Ie<=1-i&&-i<=Le&&Le<=1-i?new e.Point(ne.x+Le*ae.x,ne.y+Le*ae.y):null}if(a.length===0)return null;for(var ee=a[0].x,G=a[0].x,L=a[0].y,J=a[0].y,ie=1;ie<a.length;ie++){var pe=a[ie];pe.x<ee&&(ee=pe.x),pe.x>G&&(G=pe.x),pe.y<L&&(L=pe.y),pe.y>J&&(J=pe.y)}return new e.Rect(ee,L,G-ee,J-L)},_getSegments:function(){var n=this.getTopLeft(),i=this.getTopRight(),a=this.getBottomLeft(),d=this.getBottomRight();return[[n,i],[i,d],[d,a],[a,n]]},rotate:function(n,i){if(n=e.positiveModulo(n,360),n===0)return this.clone();i=i||this.getCenter();var a=this.getTopLeft().rotate(n,i),d=this.getTopRight().rotate(n,i),l=d.minus(a);l=l.apply(function(p){var g=1e-15;return Math.abs(p)<g?0:p});var c=Math.atan(l.y/l.x);return l.x<0?c+=Math.PI:l.y<0&&(c+=2*Math.PI),new e.Rect(a.x,a.y,this.width,this.height,c/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var n=this.getTopLeft(),i=this.getTopRight(),a=this.getBottomLeft(),d=this.getBottomRight(),l=Math.min(n.x,i.x,a.x,d.x),c=Math.max(n.x,i.x,a.x,d.x),p=Math.min(n.y,i.y,a.y,d.y),g=Math.max(n.y,i.y,a.y,d.y);return new e.Rect(l,p,c-l,g-p)},getIntegerBoundingBox:function(){var n=this.getBoundingBox(),i=Math.floor(n.x),a=Math.floor(n.y),d=Math.ceil(n.width+n.x-i),l=Math.ceil(n.height+n.y-a);return new e.Rect(i,a,d,l)},containsPoint:function(n,i){i=i||0;var a=this.getTopLeft(),d=this.getTopRight(),l=this.getBottomLeft(),c=d.minus(a),p=l.minus(a);return(n.x-a.x)*c.x+(n.y-a.y)*c.y>=-i&&(n.x-d.x)*c.x+(n.y-d.y)*c.y<=i&&(n.x-a.x)*p.x+(n.y-a.y)*p.y>=-i&&(n.x-l.x)*p.x+(n.y-l.y)*p.y<=i},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(o),function(e){var n={};e.ReferenceStrip=function(S){var C=this,T=S.viewer,P=e.getElementSize(T.element),A,M,V;for(S.id||(S.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=S.id,this.element.className="referencestrip"),S=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},S,{element:this.element}),e.extend(this,S),n[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,M=this.element.style,M.marginTop="0px",M.marginRight="0px",M.marginBottom="0px",M.marginLeft="0px",M.left="0px",M.bottom="0px",M.border="0px",M.background="#000",M.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=T,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,i),dragHandler:e.delegate(this,a),scrollHandler:e.delegate(this,d),enterHandler:e.delegate(this,c),leaveHandler:e.delegate(this,p),keyDownHandler:e.delegate(this,g),keyHandler:e.delegate(this,w),preProcessEventHandler:function(X){X.eventType==="wheel"&&(X.preventDefault=!0)}}),S.width&&S.height?(this.element.style.width=S.width+"px",this.element.style.height=S.height+"px",T.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):S.scroll==="horizontal"?(this.element.style.width=P.x*S.sizeRatio*T.tileSources.length+12*T.tileSources.length+"px",this.element.style.height=P.y*S.sizeRatio+"px",T.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=P.y*S.sizeRatio*T.tileSources.length+12*T.tileSources.length+"px",this.element.style.width=P.x*S.sizeRatio+"px",T.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=P.x*this.sizeRatio+8,this.panelHeight=P.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},V=0;V<T.tileSources.length;V++)A=e.makeNeutralElement("div"),A.id=this.element.id+"-"+V,A.style.width=C.panelWidth+"px",A.style.height=C.panelHeight+"px",A.style.display="inline",A.style.float="left",A.style.cssFloat="left",A.style.styleFloat="left",A.style.padding="2px",e.setElementTouchActionNone(A),e.setElementPointerEventsNone(A),this.element.appendChild(A),A.activePanel=!1,this.panels.push(A);l(this,this.scroll==="vertical"?P.y:P.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(S){var C=this.element.querySelector("#"+this.element.id+"-"+S),T=e.getElementSize(this.viewer.canvas),P=Number(this.element.style.width.replace("px","")),A=Number(this.element.style.height.replace("px","")),M=-Number(this.element.style.marginLeft.replace("px","")),V=-Number(this.element.style.marginTop.replace("px","")),X;this.currentSelected!==C&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=C,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(X=Number(S)*(this.panelWidth+3),X>M+T.x-this.panelWidth?(X=Math.min(X,P-T.x),this.element.style.marginLeft=-X+"px",l(this,T.x,-X)):X<M&&(X=Math.max(0,X-T.x/2),this.element.style.marginLeft=-X+"px",l(this,T.x,-X))):(X=Number(S)*(this.panelHeight+3),X>V+T.y-this.panelHeight?(X=Math.min(X,A-T.y),this.element.style.marginTop=-X+"px",l(this,T.y,-X)):X<V&&(X=Math.max(0,X-T.y/2),this.element.style.marginTop=-X+"px",l(this,T.y,-X))),this.currentPage=S,c.call(this,{eventSource:this.tracker}))},update:function(){return!!n[this.id].animating},destroy:function(){if(this.miniViewers)for(var S in this.miniViewers)this.miniViewers[S].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function i(S){if(S.quick){var C;this.scroll==="horizontal"?C=Math.floor(S.position.x/(this.panelWidth+4)):C=Math.floor(S.position.y/this.panelHeight),this.viewer.goToPage(C)}this.element.focus()}function a(S){if(this.dragging=!0,this.element){var C=Number(this.element.style.marginLeft.replace("px","")),T=Number(this.element.style.marginTop.replace("px","")),P=Number(this.element.style.width.replace("px","")),A=Number(this.element.style.height.replace("px","")),M=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-S.delta.x>0?C>-(P-M.x)&&(this.element.style.marginLeft=C+S.delta.x*2+"px",l(this,M.x,C+S.delta.x*2)):-S.delta.x<0&&C<0&&(this.element.style.marginLeft=C+S.delta.x*2+"px",l(this,M.x,C+S.delta.x*2)):-S.delta.y>0?T>-(A-M.y)&&(this.element.style.marginTop=T+S.delta.y*2+"px",l(this,M.y,T+S.delta.y*2)):-S.delta.y<0&&T<0&&(this.element.style.marginTop=T+S.delta.y*2+"px",l(this,M.y,T+S.delta.y*2))}}function d(S){if(this.element){var C=Number(this.element.style.marginLeft.replace("px","")),T=Number(this.element.style.marginTop.replace("px","")),P=Number(this.element.style.width.replace("px","")),A=Number(this.element.style.height.replace("px","")),M=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?S.scroll>0?C>-(P-M.x)&&(this.element.style.marginLeft=C-S.scroll*60+"px",l(this,M.x,C-S.scroll*60)):S.scroll<0&&C<0&&(this.element.style.marginLeft=C-S.scroll*60+"px",l(this,M.x,C-S.scroll*60)):S.scroll<0?T>M.y-A&&(this.element.style.marginTop=T+S.scroll*60+"px",l(this,M.y,T+S.scroll*60)):S.scroll>0&&T<0&&(this.element.style.marginTop=T+S.scroll*60+"px",l(this,M.y,T+S.scroll*60)),S.preventDefault=!0}}function l(S,C,T){var P,A,M,V,X,te;for(S.scroll==="horizontal"?P=S.panelWidth:P=S.panelHeight,A=Math.ceil(C/P)+5,M=Math.ceil((Math.abs(T)+C)/P)+1,A=M-A,A=A<0?0:A,X=A;X<M&&X<S.panels.length;X++)if(te=S.panels[X],!te.activePanel){var re,ee=S.viewer.tileSources[X];ee.referenceStripThumbnailUrl?re={type:"image",url:ee.referenceStripThumbnailUrl}:re=ee,V=new e.Viewer({id:te.id,tileSources:[re],element:te,navigatorSizeRatio:S.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:S.viewer.loadTilesWithAjax,ajaxHeaders:S.viewer.ajaxHeaders,useCanvas:S.useCanvas}),e.setElementPointerEventsNone(V.canvas),e.setElementPointerEventsNone(V.container),V.innerTracker.setTracking(!1),V.outerTracker.setTracking(!1),S.miniViewers[te.id]=V,te.activePanel=!0}}function c(S){var C=S.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="0px":C.style.marginLeft="0px"}function p(S){var C=S.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="-"+e.getElementSize(C).y/2+"px":C.style.marginLeft="-"+e.getElementSize(C).x/2+"px"}function g(S){if(!S.ctrl&&!S.alt&&!S.meta)switch(S.keyCode){case 38:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 40:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 37:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 39:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;default:S.preventDefault=!1;break}else S.preventDefault=!1}function w(S){if(!S.ctrl&&!S.alt&&!S.meta)switch(S.keyCode){case 61:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 45:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 48:case 119:case 87:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;case 115:case 83:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 97:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),S.preventDefault=!0;break;case 100:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),S.preventDefault=!0;break;default:S.preventDefault=!1;break}else S.preventDefault=!1}}(o),function(e){e.DisplayRect=function(n,i,a,d,l,c){e.Rect.apply(this,[n,i,a,d]),this.minLevel=l,this.maxLevel=c},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(o),function(e){e.Spring=function(i){var a=arguments;typeof i!="object"&&(i={initial:a.length&&typeof a[0]=="number"?a[0]:void 0,springStiffness:a.length>1?a[1].springStiffness:5,animationTime:a.length>1?a[1].animationTime:1.5}),e.console.assert(typeof i.springStiffness=="number"&&i.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert(typeof i.animationTime=="number"&&i.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),i.exponential&&(this._exponential=!0,delete i.exponential),e.extend(!0,this,i),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(i){e.console.assert(!this._exponential||i!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=i,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(i){e.console.assert(!this._exponential||i!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=i,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(i){this.start.value+=i,this.target.value+=i,this._exponential&&(e.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(i){this._exponential=i,this._exponential&&(e.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();var i,a;this._exponential?(i=this.start._logValue,a=this.target._logValue):(i=this.start.value,a=this.target.value);var d=this.current.time>=this.target.time?a:i+(a-i)*n(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),l=this.current.value;return this._exponential?this.current.value=Math.exp(d):this.current.value=d,l!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function n(i,a){return(1-Math.exp(i*-a))/(1-Math.exp(-i))}}(o),function(e){e.ImageJob=function(i){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},i),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var i=this,a=this.abort;this.jobId=window.setTimeout(function(){i.finish(null,null,"Image load exceeded timeout ("+i.timeout+" ms)")},this.timeout),this.abort=function(){i.source.downloadTileAbort(i),typeof a=="function"&&a()},this.source.downloadTileStart(this)},finish:function(i,a,d){this.data=i,this.request=a,this.errorMsg=d,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(i){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},i)},e.ImageLoader.prototype={addJob:function(i){if(!i.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var a=e.TileSource.prototype;i.source={downloadTileStart:a.downloadTileStart,downloadTileAbort:a.downloadTileAbort}}var d=this,l=function(g){n(d,g,i.callback)},c={src:i.src,tile:i.tile||{},source:i.source,loadWithAjax:i.loadWithAjax,ajaxHeaders:i.loadWithAjax?i.ajaxHeaders:null,crossOriginPolicy:i.crossOriginPolicy,ajaxWithCredentials:i.ajaxWithCredentials,postData:i.postData,callback:l,abort:i.abort,timeout:this.timeout},p=new e.ImageJob(c);!this.jobLimit||this.jobsInProgress<this.jobLimit?(p.start(),this.jobsInProgress++):this.jobQueue.push(p)},clear:function(){for(var i=0;i<this.jobQueue.length;i++){var a=this.jobQueue[i];typeof a.abort=="function"&&a.abort()}this.jobQueue=[]}};function n(i,a,d){a.errorMsg!==""&&(a.data===null||a.data===void 0)&&a.tries<1+i.tileRetryMax&&i.failedTiles.push(a);var l;i.jobsInProgress--,(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.jobQueue.length>0&&(l=i.jobQueue.shift(),l.start(),i.jobsInProgress++),i.tileRetryMax>0&&i.jobQueue.length===0&&(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.failedTiles.length>0&&(l=i.failedTiles.shift(),setTimeout(function(){l.start()},i.tileRetryDelay),i.jobsInProgress++),d(a.data,a.errorMsg,a.request)}}(o),function(e){e.Tile=function(n,i,a,d,l,c,p,g,w,S,C,T){this.level=n,this.x=i,this.y=a,this.bounds=d,this.sourceBounds=S,this.exists=l,this._url=c,this.postData=C,this.context2D=p,this.loadWithAjax=g,this.ajaxHeaders=w,T===void 0&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),T=e.TileSource.prototype.getTileHashKey(n,i,a,c,w,C)),this.cacheKey=T,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(n){if(!this.cacheImageRecord){e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}if(!this.element){var i=this.getImage();if(!i)return;this.element=e.makeNeutralElement("div"),this.imgElement=i.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==n&&n.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(n,i,a,d,l,c){var p=this.position.times(e.pixelDensityRatio),g=this.size.times(e.pixelDensityRatio),w;if(!this.context2D&&!this.cacheImageRecord){e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(w=this.getCanvasContext(),!this.loaded||!w){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}n.save(),n.globalAlpha=this.opacity,typeof a=="number"&&a!==1&&(p=p.times(a),g=g.times(a)),d instanceof e.Point&&(p=p.plus(d)),n.globalAlpha===1&&this.hasTransparency&&(l&&(p.x=Math.round(p.x),p.y=Math.round(p.y),g.x=Math.round(g.x),g.y=Math.round(g.y)),n.clearRect(p.x,p.y,g.x,g.y)),i({context:n,tile:this,rendered:w});var S,C;this.sourceBounds?(S=Math.min(this.sourceBounds.width,w.canvas.width),C=Math.min(this.sourceBounds.height,w.canvas.height)):(S=w.canvas.width,C=w.canvas.height),n.translate(p.x+g.x/2,0),this.flipped&&n.scale(-1,1),n.drawImage(w.canvas,0,0,S,C,-g.x/2,p.y,g.x,g.y),n.restore()},getScaleForEdgeSmoothing:function(){var n;if(this.cacheImageRecord)n=this.cacheImageRecord.getRenderedContext();else if(this.context2D)n=this.context2D;else return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return n.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(n,i,a){var d=Math.max(1,Math.ceil((a.x-i.x)/2)),l=Math.max(1,Math.ceil((a.y-i.y)/2));return new e.Point(d,l).minus(this.position.times(e.pixelDensityRatio).times(n||1).apply(function(c){return c%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(o),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(n,i,a){var d;e.isPlainObject(n)?d=n:d={element:n,location:i,placement:a},this.element=d.element,this.style=d.element.style,this._init(d)},e.Overlay.prototype={_init:function(n){this.location=n.location,this.placement=n.placement===void 0?e.Placement.TOP_LEFT:n.placement,this.onDraw=n.onDraw,this.checkResize=n.checkResize===void 0?!0:n.checkResize,this.width=n.width===void 0?null:n.width,this.height=n.height===void 0?null:n.height,this.rotationMode=n.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(n,i){var a=e.Placement.properties[this.placement];a&&(a.isHorizontallyCentered?n.x-=i.x/2:a.isRight&&(n.x-=i.x),a.isVerticallyCentered?n.y-=i.y/2:a.isBottom&&(n.y-=i.y))},destroy:function(){var n=this.element,i=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(i.display="none",document.body.appendChild(n))),this.onDraw=null,i.top="",i.left="",i.position="",this.width!==null&&(i.width=""),this.height!==null&&(i.height="");var a=e.getCssPropertyWithVendorPrefix("transformOrigin"),d=e.getCssPropertyWithVendorPrefix("transform");a&&d&&(i[a]="",i[d]="")},drawHTML:function(n,i){var a=this.element;a.parentNode!==n&&(a.prevElementParent=a.parentNode,a.prevNextSibling=a.nextSibling,n.appendChild(a),this.style.position="absolute",this.size=e.getElementSize(a));var d=this._getOverlayPositionAndSize(i),l=d.position,c=this.size=d.size,p=d.rotate;if(this.onDraw)this.onDraw(l,c,this.element);else{var g=this.style;g.left=l.x+"px",g.top=l.y+"px",this.width!==null&&(g.width=c.x+"px"),this.height!==null&&(g.height=c.y+"px");var w=e.getCssPropertyWithVendorPrefix("transformOrigin"),S=e.getCssPropertyWithVendorPrefix("transform");w&&S&&(p?(g[w]=this._getTransformOrigin(),g[S]="rotate("+p+"deg)"):(g[w]="",g[S]="")),g.display="block"}},_getOverlayPositionAndSize:function(n){var i=n.pixelFromPoint(this.location,!0),a=this._getSizeInPixels(n);this.adjust(i,a);var d=0;if(n.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var l=new e.Rect(i.x,i.y,a.x,a.y),c=this._getBoundingBox(l,n.getRotation(!0));i=c.getTopLeft(),a=c.getSize()}else d=n.getRotation(!0);return{position:i,size:a,rotate:d}},_getSizeInPixels:function(n){var i=this.size.x,a=this.size.y;if(this.width!==null||this.height!==null){var d=n.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);this.width!==null&&(i=d.x),this.height!==null&&(a=d.y)}if(this.checkResize&&(this.width===null||this.height===null)){var l=this.size=e.getElementSize(this.element);this.width===null&&(i=l.x),this.height===null&&(a=l.y)}return new e.Point(i,a)},_getBoundingBox:function(n,i){var a=this._getPlacementPoint(n);return n.rotate(i,a).getBoundingBox()},_getPlacementPoint:function(n){var i=new e.Point(n.x,n.y),a=e.Placement.properties[this.placement];return a&&(a.isHorizontallyCentered?i.x+=n.width/2:a.isRight&&(i.x+=n.width),a.isVerticallyCentered?i.y+=n.height/2:a.isBottom&&(i.y+=n.height)),i},_getTransformOrigin:function(){var n="",i=e.Placement.properties[this.placement];return i&&(i.isLeft?n="left":i.isRight&&(n="right"),i.isTop?n+=" top":i.isBottom&&(n+=" bottom")),n},update:function(n,i){var a=e.isPlainObject(n)?n:{location:n,placement:i};this._init({location:a.location||this.location,placement:a.placement!==void 0?a.placement:this.placement,onDraw:a.onDraw||this.onDraw,checkResize:a.checkResize||this.checkResize,width:a.width!==void 0?a.width:this.width,height:a.height!==void 0?a.height:this.height,rotationMode:a.rotationMode||this.rotationMode})},getBounds:function(n){e.console.assert(n,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,a=this.height;if(i===null||a===null){var d=n.deltaPointsFromPixelsNoRotate(this.size,!0);i===null&&(i=d.x),a===null&&(a=d.y)}var l=this.location.clone();return this.adjust(l,new e.Point(i,a)),this._adjustBoundsForRotation(n,new e.Rect(l.x,l.y,i,a))},_adjustBoundsForRotation:function(n,i){if(!n||n.getRotation(!0)===0||this.rotationMode===e.OverlayRotationMode.EXACT)return i;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return i;var a=this._getOverlayPositionAndSize(n);return n.viewerElementToViewportRectangle(new e.Rect(a.position.x,a.position.y,a.size.x,a.size.y))}return i.rotate(-n.getRotation(!0),this._getPlacementPoint(i))}}}(o),function(e){e.Drawer=function(n){e.console.assert(n.viewer,"[Drawer] options.viewer is required");var i=arguments;if(e.isPlainObject(n)||(n={source:i[0],viewport:i[1],element:i[2]}),e.console.assert(n.viewport,"[Drawer] options.viewport is required"),e.console.assert(n.element,"[Drawer] options.element is required"),n.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=n.viewer,this.viewport=n.viewport,this.debugGridColor=typeof n.debugGridColor=="string"?[n.debugGridColor]:n.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,n.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=e.getElement(n.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var a=this._calculateCanvasSize();this.canvas.width=a.x,this.canvas.height=a.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(n,i,a,d){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(n,i,a,d),this},updateOverlay:function(n,i,a){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(n,i,a),this},removeOverlay:function(n){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(n),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(n){var i=this.viewport.pixelFromPointNoRotate(n,!0);return new e.Point(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},clipWithPolygons:function(n,i){if(this.useCanvas){var a=this._getContext(i);a.beginPath(),n.forEach(function(d){d.forEach(function(l,c){a[c===0?"moveTo":"lineTo"](l.x,l.y)})}),a.clip()}},setOpacity:function(n){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var i=this.viewer.world,a=0;a<i.getItemCount();a++)i.getItemAt(a).setOpacity(n);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var n=this.viewer.world,i=0,a=0;a<n.getItemCount();a++){var d=n.getItemAt(a).getOpacity();d>i&&(i=d)}return i},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var n=this._calculateCanvasSize();if((this.canvas.width!==n.x||this.canvas.height!==n.y)&&(this.canvas.width=n.x,this.canvas.height=n.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var i=this._calculateSketchCanvasSize();this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(n,i){if(this.useCanvas){var a=this._getContext(n);if(i)a.clearRect(i.x,i.y,i.width,i.height);else{var d=a.canvas;a.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(n){var i=this.viewport.pixelFromPointNoRotate(n.getTopLeft(),!0),a=this.viewport.deltaPixelsFromPointsNoRotate(n.getSize(),!0);return new e.Rect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,a.x*e.pixelDensityRatio,a.y*e.pixelDensityRatio)},drawTile:function(n,i,a,d,l,c,p){if(e.console.assert(n,"[Drawer.drawTile] tile is required"),e.console.assert(i,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var g=this._getContext(a);d=d||1,n.drawCanvas(g,i,d,l,c,p)}else n.drawHTML(this.canvas)},_getContext:function(n){var i=this.context;if(n){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var a=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=a.x,this.sketchCanvas.height=a.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var d=this;this.viewer.addHandler("rotate",function l(){if(d.viewport.getRotation()!==0){d.viewer.removeHandler("rotate",l);var c=d._calculateSketchCanvasSize();d.sketchCanvas.width=c.x,d.sketchCanvas.height=c.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}i=this.sketchContext}return i},saveContext:function(n){this.useCanvas&&this._getContext(n).save()},restoreContext:function(n){this.useCanvas&&this._getContext(n).restore()},setClip:function(n,i){if(this.useCanvas){var a=this._getContext(i);a.beginPath(),a.rect(n.x,n.y,n.width,n.height),a.clip()}},drawRectangle:function(n,i,a){if(this.useCanvas){var d=this._getContext(a);d.save(),d.fillStyle=i,d.fillRect(n.x,n.y,n.width,n.height),d.restore()}},blendSketch:function(n,i,a,d){var l=n;if(e.isPlainObject(l)||(l={opacity:n,scale:i,translate:a,compositeOperation:d}),!(!this.useCanvas||!this.sketchCanvas)){n=l.opacity,d=l.compositeOperation;var c=l.bounds;if(this.context.save(),this.context.globalAlpha=n,d&&(this.context.globalCompositeOperation=d),c)c.x<0&&(c.width+=c.x,c.x=0),c.x+c.width>this.canvas.width&&(c.width=this.canvas.width-c.x),c.y<0&&(c.height+=c.y,c.y=0),c.y+c.height>this.canvas.height&&(c.height=this.canvas.height-c.y),this.context.drawImage(this.sketchCanvas,c.x,c.y,c.width,c.height,c.x,c.y,c.width,c.height);else{i=l.scale||1,a=l.translate;var p=a instanceof e.Point?a:new e.Point(0,0),g=0,w=0;if(a){var S=this.sketchCanvas.width-this.canvas.width,C=this.sketchCanvas.height-this.canvas.height;g=Math.round(S/2),w=Math.round(C/2)}this.context.drawImage(this.sketchCanvas,p.x-g*i,p.y-w*i,(this.canvas.width+2*g)*i,(this.canvas.height+2*w)*i,-g,-w,this.canvas.width+2*g,this.canvas.height+2*w)}this.context.restore()}},drawDebugInfo:function(n,i,a,d){if(this.useCanvas){var l=this.viewer.world.getIndexOfItem(d)%this.debugGridColor.length,c=this.context;c.save(),c.lineWidth=2*e.pixelDensityRatio,c.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",c.strokeStyle=this.debugGridColor[l],c.fillStyle=this.debugGridColor[l],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),d.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:d.getRotation(!0),point:d.viewport.pixelFromPointNoRotate(d._getRotationPoint(!0),!0)}),d.viewport.getRotation(!0)%360===0&&d.getRotation(!0)%360===0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),c.strokeRect(n.position.x*e.pixelDensityRatio,n.position.y*e.pixelDensityRatio,n.size.x*e.pixelDensityRatio,n.size.y*e.pixelDensityRatio);var p=(n.position.x+n.size.x/2)*e.pixelDensityRatio,g=(n.position.y+n.size.y/2)*e.pixelDensityRatio;c.translate(p,g),c.rotate(Math.PI/180*-this.viewport.getRotation(!0)),c.translate(-p,-g),n.x===0&&n.y===0&&(c.fillText("Zoom: "+this.viewport.getZoom(),n.position.x*e.pixelDensityRatio,(n.position.y-30)*e.pixelDensityRatio),c.fillText("Pan: "+this.viewport.getBounds().toString(),n.position.x*e.pixelDensityRatio,(n.position.y-20)*e.pixelDensityRatio)),c.fillText("Level: "+n.level,(n.position.x+10)*e.pixelDensityRatio,(n.position.y+20)*e.pixelDensityRatio),c.fillText("Column: "+n.x,(n.position.x+10)*e.pixelDensityRatio,(n.position.y+30)*e.pixelDensityRatio),c.fillText("Row: "+n.y,(n.position.x+10)*e.pixelDensityRatio,(n.position.y+40)*e.pixelDensityRatio),c.fillText("Order: "+a+" of "+i,(n.position.x+10)*e.pixelDensityRatio,(n.position.y+50)*e.pixelDensityRatio),c.fillText("Size: "+n.size.toString(),(n.position.x+10)*e.pixelDensityRatio,(n.position.y+60)*e.pixelDensityRatio),c.fillText("Position: "+n.position.toString(),(n.position.x+10)*e.pixelDensityRatio,(n.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),d.getRotation(!0)%360!==0&&this._restoreRotationChanges(),d.viewport.getRotation(!0)%360===0&&d.getRotation(!0)%360===0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),c.restore()}},debugRect:function(n){if(this.useCanvas){var i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,n.width*e.pixelDensityRatio,n.height*e.pixelDensityRatio),i.restore()}},setImageSmoothingEnabled:function(n){this.useCanvas&&(this._imageSmoothingEnabled=n,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(n){n.msImageSmoothingEnabled=this._imageSmoothingEnabled,n.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(n){var i=this._getContext(n).canvas;return new e.Point(i.width,i.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(n){var i=n.point?n.point.times(e.pixelDensityRatio):this.getCanvasCenter(),a=this._getContext(n.useSketch);a.save(),a.translate(i.x,i.y),this.viewer.viewport.flipped?(a.rotate(Math.PI/180*-n.degrees),a.scale(-1,1)):a.rotate(Math.PI/180*n.degrees),a.translate(-i.x,-i.y)},_flip:function(n){n=n||{};var i=n.point?n.point.times(e.pixelDensityRatio):this.getCanvasCenter(),a=this._getContext(n.useSketch);a.translate(i.x,0),a.scale(-1,1),a.translate(-i.x,0)},_restoreRotationChanges:function(n){var i=this._getContext(n);i.restore()},_calculateCanvasSize:function(){var n=e.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:Math.round(i.x*n),y:Math.round(i.y*n)}},_calculateSketchCanvasSize:function(){var n=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return n;var i=Math.ceil(Math.sqrt(n.x*n.x+n.y*n.y));return{x:i,y:i}}}}(o),function(e){e.Viewport=function(n){var i=arguments;i.length&&i[0]instanceof e.Point&&(n={containerSize:i[0],contentSize:i[1],config:i[2]}),n.config&&(e.extend(!0,n,n.config),delete n.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},n.margins||{}),delete n.margins,n.initialDegrees=n.degrees,delete n.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},n),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:n.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(n){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(n)},resetContentSize:function(n){return e.console.assert(n,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(n instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(n.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(n.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,n.y/n.x),n.x),this},setHomeBounds:function(n,i){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(n,i)},_setContentBounds:function(n,i){e.console.assert(n,"[Viewport._setContentBounds] bounds is required"),e.console.assert(n instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(n.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(n.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=n.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=n.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var n=this._contentAspectRatio/this.getAspectRatio(),i;return this.homeFillsViewer?i=n>=1?n:1:i=n>=1?1:n,i/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),a=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-a/2,i,a)},goHome:function(n){return this.viewer&&this.viewer.raiseEvent("home",{immediately:n}),this.fitBounds(this.getHomeBounds(),n)},getMinZoom:function(){var n=this.getHomeZoom(),i=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*n;return i},getMaxZoom:function(){var n=this.maxZoomLevel;return n||(n=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,n/=this._contentBounds.width),Math.max(n,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(n){e.console.assert(e.type(n)==="object","[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},n),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(-this.getRotation(n))},getBoundsNoRotate:function(n){var i=this.getCenter(n),a=1/this.getZoom(n),d=a/this.getAspectRatio();return new e.Rect(i.x-a/2,i.y-d/2,a,d)},getBoundsWithMargins:function(n){return this.getBoundsNoRotateWithMargins(n).rotate(-this.getRotation(n),this.getCenter(n))},getBoundsNoRotateWithMargins:function(n){var i=this.getBoundsNoRotate(n),a=this._containerInnerSize.x*this.getZoom(n);return i.x-=this._margins.left/a,i.y-=this._margins.top/a,i.width+=(this._margins.left+this._margins.right)/a,i.height+=(this._margins.top+this._margins.bottom)/a,i},getCenter:function(n){var i=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),a=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),d,l,c,p,g,w,S,C;return n?i:this.zoomPoint?(d=this.pixelFromPoint(this.zoomPoint,!0),l=this.getZoom(),c=1/l,p=c/this.getAspectRatio(),g=new e.Rect(i.x-c/2,i.y-p/2,c,p),w=this._pixelFromPoint(this.zoomPoint,g),S=w.minus(d).rotate(-this.getRotation(!0)),C=S.divide(this._containerInnerSize.x*l),a.plus(C)):a},getZoom:function(n){return n?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(n){return Math.max(Math.min(n,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(n){var i=this.viewportToViewerElementRectangle(n).getBoundingBox(),a=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),d=!1,l=!1;if(!this.wrapHorizontal){var c=i.x+i.width,p=a.x+a.width,g,w,S;i.width>a.width?g=this.visibilityRatio*a.width:g=this.visibilityRatio*i.width,w=a.x-c+g,S=p-i.x-g,g>a.width?(i.x+=(w+S)/2,d=!0):S<0?(i.x+=S,d=!0):w>0&&(i.x+=w,d=!0)}if(!this.wrapVertical){var C=i.y+i.height,T=a.y+a.height,P,A,M;i.height>a.height?P=this.visibilityRatio*a.height:P=this.visibilityRatio*i.height,A=a.y-C+P,M=T-i.y-P,P>a.height?(i.y+=(A+M)/2,l=!0):M<0?(i.y+=M,l=!0):A>0&&(i.y+=A,l=!0)}var V=d||l,X=V?this.viewerElementToViewportRectangle(i):n.clone();return X.xConstrained=d,X.yConstrained=l,X.constraintApplied=V,X},_raiseConstraintsEvent:function(n){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n})},applyConstraints:function(n){var i=this.getZoom(),a=this._applyZoomConstraints(i);i!==a&&this.zoomTo(a,this.zoomPoint,n);var d=this.getConstrainedBounds(!1);return d.constraintApplied&&(this.fitBounds(d,n),this._raiseConstraintsEvent(n)),this},ensureVisible:function(n){return this.applyConstraints(n)},_fitBounds:function(n,i){i=i||{};var a=i.immediately||!1,d=i.constraints||!1,l=this.getAspectRatio(),c=n.getCenter(),p=new e.Rect(n.x,n.y,n.width,n.height,n.degrees+this.getRotation()).getBoundingBox();p.getAspectRatio()>=l?p.height=p.width/l:p.width=p.height*l,p.x=c.x-p.width/2,p.y=c.y-p.height/2;var g=1/p.width;if(a)return this.panTo(c,!0),this.zoomTo(g,null,!0),d&&this.applyConstraints(!0),this;var w=this.getCenter(!0),S=this.getZoom(!0);this.panTo(w,!0),this.zoomTo(S,null,!0);var C=this.getBounds(),T=this.getZoom();if(T===0||Math.abs(g/T-1)<1e-8)return this.zoomTo(g,null,!0),this.panTo(c,a),d&&this.applyConstraints(!1),this;if(d){this.panTo(c,!1),g=this._applyZoomConstraints(g),this.zoomTo(g,null,!1);var P=this.getConstrainedBounds();this.panTo(w,!0),this.zoomTo(S,null,!0),this.fitBounds(P)}else{var A=p.rotate(-this.getRotation()),M=A.getTopLeft().times(g).minus(C.getTopLeft().times(T)).divide(g-T);this.zoomTo(g,M,a)}return this},fitBounds:function(n,i){return this._fitBounds(n,{immediately:i,constraints:!1})},fitBoundsWithConstraints:function(n,i){return this._fitBounds(n,{immediately:i,constraints:!0})},fitVertically:function(n){var i=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,n)},fitHorizontally:function(n){var i=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,n)},getConstrainedBounds:function(n){var i,a;return i=this.getBounds(n),a=this._applyBoundaryConstraints(i),a},panBy:function(n,i){var a=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(a.plus(n),i)},panTo:function(n,i){return i?(this.centerSpringX.resetTo(n.x),this.centerSpringY.resetTo(n.y)):(this.centerSpringX.springTo(n.x),this.centerSpringY.springTo(n.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:n,immediately:i}),this},zoomBy:function(n,i,a){return this.zoomTo(this.zoomSpring.target.value*n,i,a)},zoomTo:function(n,i,a){var d=this;return this.zoomPoint=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,a?this._adjustCenterSpringsForZoomPoint(function(){d.zoomSpring.resetTo(n)}):this.zoomSpring.springTo(n),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:n,refPoint:i,immediately:a}),this},setRotation:function(n,i){return this.rotateTo(n,null,i)},getRotation:function(n){return n?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(n,i,a){return this.rotateTo(n,i,a)},rotateTo:function(n,i,a){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===n&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,a)if(this.rotationPivot){var d=n-this._oldDegrees;if(!d)return this.rotationPivot=null,this;this._rotateAboutPivot(n)}else this.degreesSpring.resetTo(n);else{var l=e.positiveModulo(this.degreesSpring.current.value,360),c=e.positiveModulo(n,360),p=c-l;p>180?c-=360:p<-180&&(c+=360);var g=l-c;this.degreesSpring.resetTo(n+g),this.degreesSpring.springTo(n)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:n,immediately:!!a,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(n,i,a){return this.rotateTo(this.degreesSpring.target.value+n,i,a)},resize:function(n,i){var a=this.getBoundsNoRotate(),d=a,l;this.containerSize.x=n.x,this.containerSize.y=n.y,this._updateContainerInnerSize(),i&&(l=n.x/this.containerSize.x,d.width=a.width*l,d.height=d.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:n,maintain:i});var c=this.fitBounds(d,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:n,maintain:i}),c},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var n=this;this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var i=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,i},_rotateAboutPivot:function(n){var i=n===!0,a=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(a.x),this.centerSpringY.shiftBy(a.y),i?this.degreesSpring.update():this.degreesSpring.resetTo(n);var d=this.degreesSpring.current.value-this._oldDegrees,l=a.rotate(d*-1).times(-1);this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y)},_adjustCenterSpringsForZoomPoint:function(n){if(this.zoomPoint){var i=this.pixelFromPoint(this.zoomPoint,!0);n();var a=this.pixelFromPoint(this.zoomPoint,!0),d=a.minus(i),l=this.deltaPointsFromPixels(d,!0);this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else n()},deltaPixelsFromPointsNoRotate:function(n,i){return n.times(this._containerInnerSize.x*this.getZoom(i))},deltaPixelsFromPoints:function(n,i){return this.deltaPixelsFromPointsNoRotate(n.rotate(this.getRotation(i)),i)},deltaPointsFromPixelsNoRotate:function(n,i){return n.divide(this._containerInnerSize.x*this.getZoom(i))},deltaPointsFromPixels:function(n,i){return this.deltaPointsFromPixelsNoRotate(n,i).rotate(-this.getRotation(i))},pixelFromPointNoRotate:function(n,i){return this._pixelFromPointNoRotate(n,this.getBoundsNoRotate(i))},pixelFromPoint:function(n,i){return this._pixelFromPoint(n,this.getBoundsNoRotate(i))},_pixelFromPointNoRotate:function(n,i){return n.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(n,i){return this._pixelFromPointNoRotate(n.rotate(this.getRotation(!0),this.getCenter(!0)),i)},pointFromPixelNoRotate:function(n,i){var a=this.getBoundsNoRotate(i);return n.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/a.width).plus(a.getTopLeft())},pointFromPixel:function(n,i){return this.pointFromPixelNoRotate(n,i).rotate(-this.getRotation(i),this.getCenter(i))},_viewportToImageDelta:function(n,i){var a=this._contentBoundsNoRotate.width;return new e.Point(n*this._contentSizeNoRotate.x/a,i*this._contentSizeNoRotate.x/a)},viewportToImageCoordinates:function(n,i){if(n instanceof e.Point)return this.viewportToImageCoordinates(n.x,n.y);if(this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(a===1){var d=this.viewer.world.getItemAt(0);return d.viewportToImageCoordinates(n,i,!0)}}return this._viewportToImageDelta(n-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(n,i){var a=this._contentBoundsNoRotate.width;return new e.Point(n/this._contentSizeNoRotate.x*a,i/this._contentSizeNoRotate.x*a)},imageToViewportCoordinates:function(n,i){if(n instanceof e.Point)return this.imageToViewportCoordinates(n.x,n.y);if(this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(a===1){var d=this.viewer.world.getItemAt(0);return d.imageToViewportCoordinates(n,i,!0)}}var l=this._imageToViewportDelta(n,i);return l.x+=this._contentBoundsNoRotate.x,l.y+=this._contentBoundsNoRotate.y,l},imageToViewportRectangle:function(n,i,a,d){var l=n;if(l instanceof e.Rect||(l=new e.Rect(n,i,a,d)),this.viewer){var c=this.viewer.world.getItemCount();if(c>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(c===1){var p=this.viewer.world.getItemAt(0);return p.imageToViewportRectangle(n,i,a,d,!0)}}var g=this.imageToViewportCoordinates(l.x,l.y),w=this._imageToViewportDelta(l.width,l.height);return new e.Rect(g.x,g.y,w.x,w.y,l.degrees)},viewportToImageRectangle:function(n,i,a,d){var l=n;if(l instanceof e.Rect||(l=new e.Rect(n,i,a,d)),this.viewer){var c=this.viewer.world.getItemCount();if(c>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(c===1){var p=this.viewer.world.getItemAt(0);return p.viewportToImageRectangle(n,i,a,d,!0)}}var g=this.viewportToImageCoordinates(l.x,l.y),w=this._viewportToImageDelta(l.width,l.height);return new e.Rect(g.x,g.y,w.x,w.y,l.degrees)},viewerElementToImageCoordinates:function(n){var i=this.pointFromPixel(n,!0);return this.viewportToImageCoordinates(i)},imageToViewerElementCoordinates:function(n){var i=this.imageToViewportCoordinates(n);return this.pixelFromPoint(i,!0)},windowToImageCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=n.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var i=this.imageToViewerElementCoordinates(n);return i.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(n){return this.pointFromPixel(n,!0)},viewportToViewerElementCoordinates:function(n){return this.pixelFromPoint(n,!0)},viewerElementToViewportRectangle:function(n){return e.Rect.fromSummits(this.pointFromPixel(n.getTopLeft(),!0),this.pointFromPixel(n.getTopRight(),!0),this.pointFromPixel(n.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(n){return e.Rect.fromSummits(this.pixelFromPoint(n.getTopLeft(),!0),this.pixelFromPoint(n.getTopRight(),!0),this.pixelFromPoint(n.getBottomLeft(),!0))},windowToViewportCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=n.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var i=this.viewportToViewerElementCoordinates(n);return i.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(n){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(i===1){var a=this.viewer.world.getItemAt(0);return a.viewportToImageZoom(n)}}var d=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,c=this._contentBoundsNoRotate.width,p=l/d*c;return n*p},imageToViewportZoom:function(n){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(i===1){var a=this.viewer.world.getItemAt(0);return a.imageToViewportZoom(n)}}var d=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,c=this._contentBoundsNoRotate.width,p=d/l/c;return n*p},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(n){return this.flipped===n?this:(this.flipped=n,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:n}),this)}}}(o),function(e){e.TiledImage=function(l){var c=this;e.console.assert(l.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(l.drawer,"[TiledImage] options.drawer is required"),e.console.assert(l.viewer,"[TiledImage] options.viewer is required"),e.console.assert(l.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(l.source,"[TiledImage] options.source is required"),e.console.assert(!l.clip||l.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=l.tileCache,delete l.tileCache,this._drawer=l.drawer,delete l.drawer,this._imageLoader=l.imageLoader,delete l.imageLoader,l.clip instanceof e.Rect&&(this._clip=l.clip.clone()),delete l.clip;var p=l.x||0;delete l.x;var g=l.y||0;delete l.y,this.normHeight=l.source.dimensions.y/l.source.dimensions.x,this.contentAspectX=l.source.dimensions.x/l.source.dimensions.y;var w=1;l.width?(w=l.width,delete l.width,l.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete l.height)):l.height&&(w=l.height/this.normHeight,delete l.height);var S=l.fitBounds;delete l.fitBounds;var C=l.fitBoundsPlacement||o.Placement.CENTER;delete l.fitBoundsPlacement;var T=l.degrees||0;delete l.degrees;var P=l.ajaxHeaders;delete l.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},l),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:p,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:g,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:w,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:T,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),S&&this.fitBounds(S,C,!0),this._drawingHandler=function(A){c.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:c},A))},this._ownAjaxHeaders={},this.setAjaxHeaders(P,!1)},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(l){l!==this._fullyLoaded&&(this._fullyLoaded=l,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var l=this._xSpring.update(),c=this._ySpring.update(),p=this._scaleSpring.update(),g=this._degreesSpring.update();return l||c||p||g?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(l){return this.getBoundsNoRotate(l).rotate(this.getRotation(l),this._getRotationPoint(l))},getBoundsNoRotate:function(l){return l?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(l){var c=this.getBoundsNoRotate(l);if(this._clip){var p=l?this._worldWidthCurrent:this._worldWidthTarget,g=p/this.source.dimensions.x,w=this._clip.times(g);c=new e.Rect(c.x+w.x,c.y+w.y,w.width,w.height)}return c.rotate(this.getRotation(l),this._getRotationPoint(l))},getTileBounds:function(l,c,p){var g=this.source.getNumTiles(l),w=(g.x+c%g.x)%g.x,S=(g.y+p%g.y)%g.y,C=this.source.getTileBounds(l,w,S);return this.getFlip()&&(C.x=1-C.x-C.width),C.x+=(c-w)/g.x,C.y+=this._worldHeightCurrent/this._worldWidthCurrent*((p-S)/g.y),C},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var l=this.imageToWindowCoordinates(new e.Point(0,0)),c=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(c.x-l.x,c.y-l.y)},_viewportToImageDelta:function(l,c,p){var g=p?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(l*(this.source.dimensions.x/g),c*(this.source.dimensions.y*this.contentAspectX/g))},viewportToImageCoordinates:function(l,c,p){var g;return l instanceof e.Point?(p=c,g=l):g=new e.Point(l,c),g=g.rotate(-this.getRotation(p),this._getRotationPoint(p)),p?this._viewportToImageDelta(g.x-this._xSpring.current.value,g.y-this._ySpring.current.value):this._viewportToImageDelta(g.x-this._xSpring.target.value,g.y-this._ySpring.target.value)},_imageToViewportDelta:function(l,c,p){var g=p?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(l/this.source.dimensions.x*g,c/this.source.dimensions.y/this.contentAspectX*g)},imageToViewportCoordinates:function(l,c,p){l instanceof e.Point&&(p=c,c=l.y,l=l.x);var g=this._imageToViewportDelta(l,c);return p?(g.x+=this._xSpring.current.value,g.y+=this._ySpring.current.value):(g.x+=this._xSpring.target.value,g.y+=this._ySpring.target.value),g.rotate(this.getRotation(p),this._getRotationPoint(p))},imageToViewportRectangle:function(l,c,p,g,w){var S=l;S instanceof e.Rect?w=c:S=new e.Rect(l,c,p,g);var C=this.imageToViewportCoordinates(S.getTopLeft(),w),T=this._imageToViewportDelta(S.width,S.height,w);return new e.Rect(C.x,C.y,T.x,T.y,S.degrees+this.getRotation(w))},viewportToImageRectangle:function(l,c,p,g,w){var S=l;l instanceof e.Rect?w=c:S=new e.Rect(l,c,p,g);var C=this.viewportToImageCoordinates(S.getTopLeft(),w),T=this._viewportToImageDelta(S.width,S.height,w);return new e.Rect(C.x,C.y,T.x,T.y,S.degrees-this.getRotation(w))},viewerElementToImageCoordinates:function(l){var c=this.viewport.pointFromPixel(l,!0);return this.viewportToImageCoordinates(c)},imageToViewerElementCoordinates:function(l){var c=this.imageToViewportCoordinates(l);return this.viewport.pixelFromPoint(c,!0)},windowToImageCoordinates:function(l){var c=l.minus(o.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(c)},imageToWindowCoordinates:function(l){var c=this.imageToViewerElementCoordinates(l);return c.plus(o.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(l){var c=this._scaleSpring.current.value;return l=l.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((l.x-this._xSpring.current.value)/c,(l.y-this._ySpring.current.value)/c,l.width/c,l.height/c,l.degrees)},viewportToImageZoom:function(l){var c=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return c*l},imageToViewportZoom:function(l){var c=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return l/c},setPosition:function(l,c){var p=this._xSpring.target.value===l.x&&this._ySpring.target.value===l.y;if(c){if(p&&this._xSpring.current.value===l.x&&this._ySpring.current.value===l.y)return;this._xSpring.resetTo(l.x),this._ySpring.resetTo(l.y),this._needsDraw=!0}else{if(p)return;this._xSpring.springTo(l.x),this._ySpring.springTo(l.y),this._needsDraw=!0}p||this._raiseBoundsChange()},setWidth:function(l,c){this._setScale(l,c)},setHeight:function(l,c){this._setScale(l/this.normHeight,c)},setCroppingPolygons:function(l){var c=function(g){return g instanceof e.Point||typeof g.x=="number"&&typeof g.y=="number"},p=function(g){return g.map(function(w){try{if(c(w))return{x:w.x,y:w.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!e.isArray(l))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=l.map(function(g){return p(g)})}catch(g){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(g),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(l,c,p){c=c||e.Placement.CENTER;var g=e.Placement.properties[c],w=this.contentAspectX,S=0,C=0,T=1,P=1;if(this._clip&&(w=this._clip.getAspectRatio(),T=this._clip.width/this.source.dimensions.x,P=this._clip.height/this.source.dimensions.y,l.getAspectRatio()>w?(S=this._clip.x/this._clip.height*l.height,C=this._clip.y/this._clip.height*l.height):(S=this._clip.x/this._clip.width*l.width,C=this._clip.y/this._clip.width*l.width)),l.getAspectRatio()>w){var A=l.height/P,M=0;g.isHorizontallyCentered?M=(l.width-l.height*w)/2:g.isRight&&(M=l.width-l.height*w),this.setPosition(new e.Point(l.x-S+M,l.y-C),p),this.setHeight(A,p)}else{var V=l.width/T,X=0;g.isVerticallyCentered?X=(l.height-l.width/w)/2:g.isBottom&&(X=l.height-l.width/w),this.setPosition(new e.Point(l.x-S,l.y-C+X),p),this.setWidth(V,p)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(l){e.console.assert(!l||l instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),l instanceof e.Rect?this._clip=l.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(l){this.flipped=!!l,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(l){l!==this.opacity&&(this.opacity=l,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(l){this._preload=!!l,this._needsDraw=!0},getRotation:function(l){return l?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(l,c){this._degreesSpring.target.value===l&&this._degreesSpring.isAtTargetValue()||(c?this._degreesSpring.resetTo(l):this._degreesSpring.springTo(l),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(l){return this.getBoundsNoRotate(l).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(l){l!==this.compositeOperation&&(this.compositeOperation=l,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(l,c){if(l===null&&(l={}),!e.isPlainObject(l)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=l,this._updateAjaxHeaders(c)},_updateAjaxHeaders:function(l){if(l===void 0&&(l=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,l){var c,p,g,w;for(var S in this.tilesMatrix){c=this.source.getNumTiles(S);for(var C in this.tilesMatrix[S]){p=(c.x+C%c.x)%c.x;for(var T in this.tilesMatrix[S][C])if(g=(c.y+T%c.y)%c.y,w=this.tilesMatrix[S][C][T],w.loadWithAjax=this.loadTilesWithAjax,w.loadWithAjax){var P=this.source.getTileAjaxHeaders(S,p,g);w.ajaxHeaders=e.extend({},this.ajaxHeaders,P)}else w.ajaxHeaders=null}}for(var A=0;A<this._imageLoader.jobQueue.length;A++){var M=this._imageLoader.jobQueue[A];M.loadWithAjax=M.tile.loadWithAjax,M.ajaxHeaders=M.tile.loadWithAjax?M.tile.ajaxHeaders:null}}},_setScale:function(l,c){var p=this._scaleSpring.target.value===l;if(c){if(p&&this._scaleSpring.current.value===l)return;this._scaleSpring.resetTo(l),this._updateForScale(),this._needsDraw=!0}else{if(p)return;this._scaleSpring.springTo(l),this._updateForScale(),this._needsDraw=!0}p||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var l=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),c=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,p=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(c/this.minPixelRatio)/Math.log(2))));return p=Math.max(p,this.source.minLevel||0),l=Math.min(l,p),{lowestLevel:l,highestLevel:p}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var l=this.lastDrawn.pop();l.beingDrawn=!1}var c=this.viewport,p=this._viewportToTiledImageRectangle(c.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var g=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(p=p.intersection(g),p===null)return}for(var w=this._getLevelsInterval(),S=w.lowestLevel,C=w.highestLevel,T=null,P=!1,A=e.now(),M=C;M>=S;M--){var V=!1,X=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(M),!0).x*this._scaleSpring.current.value;if(M===S||!P&&X>=this.minPixelRatio)V=!0,P=!0;else if(!P)continue;var te=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(M),!1).x*this._scaleSpring.current.value,re=c.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,ee=this.immediateRender?1:re,G=Math.min(1,(X-.5)/.5),L=ee/Math.abs(ee-te);if(T=this._updateLevel(P,V,M,G,L,p,A,T),this._providesCoverage(this.coverage,M))break}this._drawTiles(this.lastDrawn),T&&!T.context2D?(this._loadTile(T,A),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(l,c,p){var g,w;this.wrapHorizontal?(g=e.positiveModulo(c.x,1),w=e.positiveModulo(p.x,1)):(g=Math.max(0,c.x),w=Math.min(1,p.x));var S,C,T=1/this.source.aspectRatio;this.wrapVertical?(S=e.positiveModulo(c.y,T),C=e.positiveModulo(p.y,T)):(S=Math.max(0,c.y),C=Math.min(T,p.y));var P=this.source.getTileAtPoint(l,new e.Point(g,S)),A=this.source.getTileAtPoint(l,new e.Point(w,C)),M=this.source.getNumTiles(l);return this.wrapHorizontal&&(P.x+=M.x*Math.floor(c.x),A.x+=M.x*Math.floor(p.x)),this.wrapVertical&&(P.y+=M.y*Math.floor(c.y/T),A.y+=M.y*Math.floor(p.y/T)),{topLeft:P,bottomRight:A}},_updateLevel:function(l,c,p,g,w,S,C,T){var P=S.getBoundingBox().getTopLeft(),A=S.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:l,level:p,opacity:g,visibility:w,drawArea:S,topleft:P,bottomright:A,currenttime:C,best:T}),this._resetCoverage(this.coverage,p),this._resetCoverage(this.loadingCoverage,p);var M=this._getCornerTiles(p,P,A),V=M.topLeft,X=M.bottomRight,te=this.source.getNumTiles(p),re=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(X.x+=1,this.wrapHorizontal||(X.x=Math.min(X.x,te.x-1)));for(var ee=V.x;ee<=X.x;ee++)for(var G=V.y;G<=X.y;G++){var L;if(this.getFlip()){var J=(te.x+ee%te.x)%te.x;L=ee+te.x-J-J-1}else L=ee;S.intersection(this.getTileBounds(p,L,G))!==null&&(T=this._updateTile(c,l,L,G,p,g,w,re,te,C,T))}return T},_updateTile:function(l,c,p,g,w,S,C,T,P,A,M){var V=this._getTile(p,g,w,A,P,this._worldWidthCurrent,this._worldHeightCurrent),X=c;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:V}),this._setCoverage(this.coverage,w,p,g,!1);var te=V.loaded||V.loading||this._isCovered(this.loadingCoverage,w,p,g);if(this._setCoverage(this.loadingCoverage,w,p,g,te),!V.exists||(l&&!X&&(this._isCovered(this.coverage,w,p,g)?this._setCoverage(this.coverage,w,p,g,!0):X=!0),!X))return M;if(this._positionTile(V,this.source.tileOverlap,this.viewport,T,C),!V.loaded)if(V.context2D)this._setTileLoaded(V);else{var re=this._tileCache.getImageRecord(V.cacheKey);re&&this._setTileLoaded(V,re.getData())}if(V.loaded){var ee=this._blendTile(V,p,g,w,S,A);ee&&(this._needsDraw=!0)}else V.loading?this._tilesLoading++:te||(M=this._compareTiles(M,V));return M},_getTile:function(l,c,p,g,w,S,C){var T,P,A,M,V,X,te,re,ee,G,L=this.tilesMatrix,J=this.source;return L[p]||(L[p]={}),L[p][l]||(L[p][l]={}),(!L[p][l][c]||!L[p][l][c].flipped!=!this.flipped)&&(T=(w.x+l%w.x)%w.x,P=(w.y+c%w.y)%w.y,A=this.getTileBounds(p,l,c),M=J.getTileBounds(p,T,P,!0),V=J.tileExists(p,T,P),X=J.getTileUrl(p,T,P),te=J.getTilePostData(p,T,P),this.loadTilesWithAjax?(re=J.getTileAjaxHeaders(p,T,P),e.isPlainObject(this.ajaxHeaders)&&(re=e.extend({},this.ajaxHeaders,re))):re=null,ee=J.getContext2D?J.getContext2D(p,T,P):void 0,G=new e.Tile(p,l,c,A,V,X,ee,this.loadTilesWithAjax,re,M,te,J.getTileHashKey(p,T,P,X,re,te)),this.getFlip()?T===0&&(G.isRightMost=!0):T===w.x-1&&(G.isRightMost=!0),P===w.y-1&&(G.isBottomMost=!0),G.flipped=this.flipped,L[p][l][c]=G),G=L[p][l][c],G.lastTouchTime=g,G},_loadTile:function(l,c){var p=this;l.loading=!0,this._imageLoader.addJob({src:l.getUrl(),tile:l,source:this.source,postData:l.postData,loadWithAjax:l.loadWithAjax,ajaxHeaders:l.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(g,w,S){p._onTileLoad(l,c,g,w,S)},abort:function(){l.loading=!1}})},_onTileLoad:function(l,c,p,g,w){if(p)l.exists=!0;else{e.console.error("Tile %s failed to load: %s - error: %s",l,l.getUrl(),g),this.viewer.raiseEvent("tile-load-failed",{tile:l,tiledImage:this,time:c,message:g,tileRequest:w}),l.loading=!1,l.exists=!1;return}if(c<this.lastResetTime){e.console.warn("Ignoring tile %s loaded before reset: %s",l,l.getUrl()),l.loading=!1;return}var S=this,C=function(){var T=S.source,P=T.getClosestLevel();S._setTileLoaded(l,p,P,w)};this._midDraw?window.setTimeout(C,1):C()},_setTileLoaded:function(l,c,p,g){var w=0,S=!1,C=this;function T(){return S&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),w++,P}function P(){w--,w===0&&(l.loading=!1,l.loaded=!0,l.hasTransparency=C.source.hasTransparency(l.context2D,l.getUrl(),l.ajaxHeaders,l.postData),l.context2D||C._tileCache.cacheTile({data:c,tile:l,cutoff:p,tiledImage:C}),C._needsDraw=!0)}var A=T();this.viewer.raiseEvent("tile-loaded",{tile:l,tiledImage:this,tileRequest:g,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),c},data:c,getCompletionCallback:T}),S=!0,A()},_positionTile:function(l,c,p,g,w){var S=l.bounds.getTopLeft();S.x*=this._scaleSpring.current.value,S.y*=this._scaleSpring.current.value,S.x+=this._xSpring.current.value,S.y+=this._ySpring.current.value;var C=l.bounds.getSize();C.x*=this._scaleSpring.current.value,C.y*=this._scaleSpring.current.value;var T=p.pixelFromPointNoRotate(S,!0),P=p.pixelFromPointNoRotate(S,!1),A=p.deltaPixelsFromPointsNoRotate(C,!0),M=p.deltaPixelsFromPointsNoRotate(C,!1),V=P.plus(M.divide(2)),X=g.squaredDistanceTo(V);c||(A=A.plus(new e.Point(1,1))),l.isRightMost&&this.wrapHorizontal&&(A.x+=.75),l.isBottomMost&&this.wrapVertical&&(A.y+=.75),l.position=T,l.size=A,l.squaredDistance=X,l.visibility=w},_blendTile:function(l,c,p,g,w,S){var C=1e3*this.blendTime,T,P;if(l.blendStart||(l.blendStart=S),T=S-l.blendStart,P=C?Math.min(1,T/C):1,this.alwaysBlend&&(P*=w),l.opacity=P,this.lastDrawn.push(l),P===1)this._setCoverage(this.coverage,g,c,p,!0),this._hasOpaqueTile=!0;else if(T<C)return!0;return!1},_compareTiles:function(l,c){return!l||c.visibility>l.visibility||c.visibility===l.visibility&&c.squaredDistance<l.squaredDistance?c:l},_drawTiles:function(l){if(!(this.opacity===0||l.length===0&&!this.placeholderFillStyle)){var c=l[0],p;c&&(p=this.opacity<1||this.compositeOperation&&this.compositeOperation!=="source-over"||!this._isBottomItem()&&this.source.hasTransparency(c.context2D,c.getUrl(),c.ajaxHeaders,c.postData));var g,w,S=this.viewport.getZoom(!0),C=this.viewportToImageZoom(S);l.length>1&&C>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&e.supportsCanvas&&this.viewer.useCanvas&&(p=!0,g=c.getScaleForEdgeSmoothing(),w=c.getTranslationForEdgeSmoothing(g,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var T;p&&(g||(T=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!==0||this.getRotation(!0)%360!==0)&&(T.x=this._drawer.viewer.container.clientWidth-(T.x+T.width)),T=T.times(e.pixelDensityRatio)),this._drawer._clear(!0,T)),g||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:p}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:p}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var P=!1;if(this._clip){this._drawer.saveContext(p);var A=this.imageToViewportRectangle(this._clip,!0);A=A.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var M=this._drawer.viewportToDrawerRectangle(A);g&&(M=M.times(g)),w&&(M=M.translate(w)),this._drawer.setClip(M,p),P=!0}if(this._croppingPolygons){var V=this;this._drawer.saveContext(p);try{var X=this._croppingPolygons.map(function(ie){return ie.map(function(pe){var ne=V.imageToViewportCoordinates(pe.x,pe.y,!0).rotate(-V.getRotation(!0),V._getRotationPoint(!0)),ce=V._drawer.viewportCoordToDrawerCoord(ne);return g&&(ce=ce.times(g)),w&&(ce=ce.plus(w)),ce})});this._drawer.clipWithPolygons(X,p)}catch(ie){e.console.error(ie)}P=!0}if(this.placeholderFillStyle&&this._hasOpaqueTile===!1){var te=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));g&&(te=te.times(g)),w&&(te=te.translate(w));var re=null;typeof this.placeholderFillStyle=="function"?re=this.placeholderFillStyle(this,this._drawer.context):re=this.placeholderFillStyle,this._drawer.drawRectangle(te,re,p)}var ee=d(this.subPixelRoundingForTransparency),G=!1;if(ee===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)G=!0;else if(ee===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var L=this.viewer&&this.viewer.isAnimating();G=!L}for(var J=l.length-1;J>=0;J--)c=l[J],this._drawer.drawTile(c,this._drawingHandler,p,g,w,G,this.source),c.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:c});P&&this._drawer.restoreContext(p),g||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(p),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(p)),p&&(g&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:g,translate:w,compositeOperation:this.compositeOperation,bounds:T}),g&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),g||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(l)}},_drawDebugInfo:function(l){if(this.debugMode)for(var c=l.length-1;c>=0;c--){var p=l[c];try{this._drawer.drawDebugInfo(p,l.length,c,this)}catch(g){e.console.error(g)}}},_providesCoverage:function(l,c,p,g){var w,S,C,T;if(!l[c])return!1;if(p===void 0||g===void 0){w=l[c];for(C in w)if(Object.prototype.hasOwnProperty.call(w,C)){S=w[C];for(T in S)if(Object.prototype.hasOwnProperty.call(S,T)&&!S[T])return!1}return!0}return l[c][p]===void 0||l[c][p][g]===void 0||l[c][p][g]===!0},_isCovered:function(l,c,p,g){return p===void 0||g===void 0?this._providesCoverage(l,c+1):this._providesCoverage(l,c+1,2*p,2*g)&&this._providesCoverage(l,c+1,2*p,2*g+1)&&this._providesCoverage(l,c+1,2*p+1,2*g)&&this._providesCoverage(l,c+1,2*p+1,2*g+1)},_setCoverage:function(l,c,p,g,w){if(!l[c]){e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",c);return}l[c][p]||(l[c][p]={}),l[c][p][g]=w},_resetCoverage:function(l,c){l[c]={}}});var n=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function i(l){return l!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&l!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&l!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function a(l){return i(l)?n:l}function d(l){if(typeof l=="number")return a(l);if(!l||!e.Browser)return n;var c=l[e.Browser.vendor];return i(c)&&(c=l["*"]),a(c)}}(o),function(e){var n=function(a){e.console.assert(a,"[TileCache.cacheTile] options is required"),e.console.assert(a.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(a.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=a.tile,this.tiledImage=a.tiledImage},i=function(a){e.console.assert(a,"[ImageRecord] options is required"),e.console.assert(a.data,"[ImageRecord] options.data is required"),this._tiles=[],a.create.apply(null,[this,a.data,a.ownerTile]),this._destroyImplementation=a.destroy.bind(null,this),this.getImage=a.getImage.bind(null,this),this.getData=a.getData.bind(null,this),this.getRenderedContext=a.getRenderedContext.bind(null,this)};i.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(a){e.console.assert(a,"[ImageRecord.addTile] tile is required"),this._tiles.push(a)},removeTile:function(a){for(var d=0;d<this._tiles.length;d++)if(this._tiles[d]===a){this._tiles.splice(d,1);return}e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",a)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(a){a=a||{},this._maxImageCacheCount=a.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(a){e.console.assert(a,"[TileCache.cacheTile] options is required"),e.console.assert(a.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(a.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(a.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var d=a.cutoff||0,l=this._tilesLoaded.length,c=this._imagesLoaded[a.tile.cacheKey];if(c||(a.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),a.data=a.image),e.console.assert(a.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),c=this._imagesLoaded[a.tile.cacheKey]=new i({data:a.data,ownerTile:a.tile,create:a.tiledImage.source.createTileCache,destroy:a.tiledImage.source.destroyTileCache,getImage:a.tiledImage.source.getTileCacheDataAsImage,getData:a.tiledImage.source.getTileCacheData,getRenderedContext:a.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),c.addTile(a.tile),a.tile.cacheImageRecord=c,this._imagesLoadedCount>this._maxImageCacheCount){for(var p=null,g=-1,w=null,S,C,T,P,A,M,V=this._tilesLoaded.length-1;V>=0;V--)if(M=this._tilesLoaded[V],S=M.tile,!(S.level<=d||S.beingDrawn)){if(!p){p=S,g=V,w=M;continue}P=S.lastTouchTime,C=p.lastTouchTime,A=S.level,T=p.level,(P<C||P===C&&A>T)&&(p=S,g=V,w=M)}p&&g>=0&&(this._unloadTile(w),l=g)}this._tilesLoaded[l]=new n({tile:a.tile,tiledImage:a.tiledImage})},clearTilesFor:function(a){e.console.assert(a,"[TileCache.clearTilesFor] tiledImage is required");for(var d,l=0;l<this._tilesLoaded.length;++l)d=this._tilesLoaded[l],d.tiledImage===a&&(this._unloadTile(d),this._tilesLoaded.splice(l,1),l--)},getImageRecord:function(a){return e.console.assert(a,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[a]},_unloadTile:function(a){e.console.assert(a,"[TileCache._unloadTile] tileRecord is required");var d=a.tile,l=a.tiledImage;d.unload(),d.cacheImageRecord=null;var c=this._imagesLoaded[d.cacheKey];c.removeTile(d),c.getTileCount()||(c.destroy(),delete this._imagesLoaded[d.cacheKey],this._imagesLoadedCount--),l.viewer.raiseEvent("tile-unloaded",{tile:d,tiledImage:l})}}}(o),function(e){e.World=function(n){var i=this;e.console.assert(n.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=n.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(a){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(n,i){if(e.console.assert(n,"[World.addItem] item is required"),e.console.assert(n instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),i=i||{},i.index!==void 0){var a=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(a,0,n)}else this._items.push(n);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,n.addHandler("bounds-change",this._delegatedFigureSizes),n.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:n})},getItemAt:function(n){return e.console.assert(n!==void 0,"[World.getItemAt] index is required"),this._items[n]},getIndexOfItem:function(n){return e.console.assert(n,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,n)},getItemCount:function(){return this._items.length},setItemIndex:function(n,i){e.console.assert(n,"[World.setItemIndex] item is required"),e.console.assert(i!==void 0,"[World.setItemIndex] index is required");var a=this.getIndexOfItem(n);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i===a||a===-1||(this._items.splice(a,1),this._items.splice(i,0,n),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:n,previousIndex:a,newIndex:i}))},removeItem:function(n){e.console.assert(n,"[World.removeItem] item is required");var i=e.indexOf(this._items,n);i!==-1&&(n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(n))},removeAll:function(){this.viewer._cancelPendingImages();var n,i;for(i=0;i<this._items.length;i++)n=this._items[i],n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy();var a=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,i=0;i<a.length;i++)n=a[i],this._raiseRemoveItem(n)},resetItems:function(){for(var n=0;n<this._items.length;n++)this._items[n].reset()},update:function(){for(var n=!1,i=0;i<this._items.length;i++)n=this._items[i].update()||n;return n},draw:function(){for(var n=0;n<this._items.length;n++)this._items[n].draw();this._needsDraw=!1},needsDraw:function(){for(var n=0;n<this._items.length;n++)if(this._items[n].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(n){this._autoRefigureSizes=n,n&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(n){n=n||{};var i=n.immediately||!1,a=n.layout||e.DEFAULT_SETTINGS.collectionLayout,d=n.rows||e.DEFAULT_SETTINGS.collectionRows,l=n.columns||e.DEFAULT_SETTINGS.collectionColumns,c=n.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,p=n.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,g=c+p,w;!n.rows&&l?w=l:w=Math.ceil(this._items.length/d);var S=0,C=0,T,P,A,M,V;this.setAutoRefigureSizes(!1);for(var X=0;X<this._items.length;X++)X&&X%w===0&&(a==="horizontal"?(C+=g,S=0):(S+=g,C=0)),T=this._items[X],P=T.getBounds(),P.width>P.height?A=c:A=c*(P.width/P.height),M=A*(P.height/P.width),V=new e.Point(S+(c-A)/2,C+(c-M)/2),T.setPosition(V,i),T.setWidth(A,i),a==="horizontal"?S+=g:C+=g;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var n=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,a=this._contentFactor||0;if(!this._items.length)this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;else{var d=this._items[0],l=d.getBounds();this._contentFactor=d.getContentSize().x/l.width;for(var c=d.getClippedBounds().getBoundingBox(),p=c.x,g=c.y,w=c.x+c.width,S=c.y+c.height,C=1;C<this._items.length;C++)d=this._items[C],l=d.getBounds(),this._contentFactor=Math.max(this._contentFactor,d.getContentSize().x/l.width),c=d.getClippedBounds().getBoundingBox(),p=Math.min(p,c.x),g=Math.min(g,c.y),w=Math.max(w,c.x+c.width),S=Math.max(S,c.y+c.height);this._homeBounds=new e.Rect(p,g,w-p,S-g),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==a||!this._homeBounds.equals(n)||!this._contentSize.equals(i))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(n){this.raiseEvent("remove-item",{item:n})}})}(o)})(jp);var Qb=jp.exports;const Ip=Jb(Qb);/*! For license information please see openseadragon-annotorious.min.js.LICENSE.txt */var $b={2768:(t,o,e)=>{var n=e(7701),i=e(593),a=n("%TypeError%"),d=e(9898),l=e(9368),c=e(7967),p=e(6376),g=e(4130),w=e(2835),S=e(5217),C=e(1753),T=i("String.prototype.split"),P=Object("a"),A=P[0]!=="a"||!(0 in P);t.exports=function(M){var V,X=w(this),te=A&&C(this)?T(this,""):X,re=g(te);if(!p(M))throw new a("Array.prototype.forEach callback must be a function");arguments.length>1&&(V=arguments[1]);for(var ee=0;ee<re;){var G=S(ee);if(c(te,G)){var L=l(te,G);d(M,V,[L,ee,te])}ee+=1}}},2867:(t,o,e)=>{var n=e(4347),i=e(4373),a=e(593),d=e(9793),l=e(2768),c=e(683),p=c(),g=e(4635),w=a("Array.prototype.slice"),S=i.apply(p),C=function(T,P){return d(T),S(T,w(arguments,1))};n(C,{getPolyfill:c,implementation:l,shim:g}),t.exports=C},683:(t,o,e)=>{var n=e(3206),i=e(2768);t.exports=function(){var a=Array.prototype.forEach;return n(a)?a:i}},4635:(t,o,e)=>{var n=e(4347),i=e(683);t.exports=function(){var a=i();return n(Array.prototype,{forEach:a},{forEach:function(){return Array.prototype.forEach!==a}}),a}},9584:function(t,o){var e,n;e=function(i,a){var d,l,c=typeof Map=="function"?new Map:(d=[],l=[],{has:function(T){return d.indexOf(T)>-1},get:function(T){return l[d.indexOf(T)]},set:function(T,P){d.indexOf(T)===-1&&(d.push(T),l.push(P))},delete:function(T){var P=d.indexOf(T);P>-1&&(d.splice(P,1),l.splice(P,1))}}),p=function(T){return new Event(T,{bubbles:!0})};try{new Event("test")}catch{p=function(P){var A=document.createEvent("Event");return A.initEvent(P,!0,!1),A}}function g(T){if(T&&T.nodeName&&T.nodeName==="TEXTAREA"&&!c.has(T)){var P=null,A=null,M=null,V=function(){T.clientWidth!==A&&G()},X=(function(L){window.removeEventListener("resize",V,!1),T.removeEventListener("input",G,!1),T.removeEventListener("keyup",G,!1),T.removeEventListener("autosize:destroy",X,!1),T.removeEventListener("autosize:update",G,!1),Object.keys(L).forEach(function(J){T.style[J]=L[J]}),c.delete(T)}).bind(T,{height:T.style.height,resize:T.style.resize,overflowY:T.style.overflowY,overflowX:T.style.overflowX,wordWrap:T.style.wordWrap});T.addEventListener("autosize:destroy",X,!1),"onpropertychange"in T&&"oninput"in T&&T.addEventListener("keyup",G,!1),window.addEventListener("resize",V,!1),T.addEventListener("input",G,!1),T.addEventListener("autosize:update",G,!1),T.style.overflowX="hidden",T.style.wordWrap="break-word",c.set(T,{destroy:X,update:G}),(te=window.getComputedStyle(T,null)).resize==="vertical"?T.style.resize="none":te.resize==="both"&&(T.style.resize="horizontal"),P=te.boxSizing==="content-box"?-(parseFloat(te.paddingTop)+parseFloat(te.paddingBottom)):parseFloat(te.borderTopWidth)+parseFloat(te.borderBottomWidth),isNaN(P)&&(P=0),G()}var te;function re(L){var J=T.style.width;T.style.width="0px",T.offsetWidth,T.style.width=J,T.style.overflowY=L}function ee(){if(T.scrollHeight!==0){var L=function(ie){for(var pe=[];ie&&ie.parentNode&&ie.parentNode instanceof Element;)ie.parentNode.scrollTop&&pe.push({node:ie.parentNode,scrollTop:ie.parentNode.scrollTop}),ie=ie.parentNode;return pe}(T),J=document.documentElement&&document.documentElement.scrollTop;T.style.height="",T.style.height=T.scrollHeight+P+"px",A=T.clientWidth,L.forEach(function(ie){ie.node.scrollTop=ie.scrollTop}),J&&(document.documentElement.scrollTop=J)}}function G(){ee();var L=Math.round(parseFloat(T.style.height)),J=window.getComputedStyle(T,null),ie=J.boxSizing==="content-box"?Math.round(parseFloat(J.height)):T.offsetHeight;if(ie<L?J.overflowY==="hidden"&&(re("scroll"),ee(),ie=J.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(T,null).height)):T.offsetHeight):J.overflowY!=="hidden"&&(re("hidden"),ee(),ie=J.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(T,null).height)):T.offsetHeight),M!==ie){M=ie;var pe=p("autosize:resized");try{T.dispatchEvent(pe)}catch{}}}}function w(T){var P=c.get(T);P&&P.destroy()}function S(T){var P=c.get(T);P&&P.update()}var C=null;typeof window>"u"||typeof window.getComputedStyle!="function"?((C=function(T){return T}).destroy=function(T){return T},C.update=function(T){return T}):((C=function(T,P){return T&&Array.prototype.forEach.call(T.length?T:[T],function(A){return g(A)}),T}).destroy=function(T){return T&&Array.prototype.forEach.call(T.length?T:[T],w),T},C.update=function(T){return T&&Array.prototype.forEach.call(T.length?T:[T],S),T}),a.default=C,i.exports=a.default},(n=e.apply(o,[t,o]))===void 0||(t.exports=n)},593:(t,o,e)=>{var n=e(7701),i=e(4373),a=i(n("String.prototype.indexOf"));t.exports=function(d,l){var c=n(d,!!l);return typeof c=="function"&&a(d,".prototype.")>-1?i(c):c}},4373:(t,o,e)=>{var n=e(3767),i=e(7701),a=e(7990),d=i("%TypeError%"),l=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),p=i("%Reflect.apply%",!0)||n.call(c,l),g=i("%Object.defineProperty%",!0),w=i("%Math.max%");if(g)try{g({},"a",{value:1})}catch{g=null}t.exports=function(C){if(typeof C!="function")throw new d("a function is required");var T=p(n,c,arguments);return a(T,1+w(0,C.length-(arguments.length-1)),!0)};var S=function(){return p(n,l,arguments)};g?g(t.exports,"apply",{value:S}):t.exports.apply=S},8344:(t,o,e)=>{function n(l){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}function i(l){var c,p,g="";if(typeof l=="string"||typeof l=="number")g+=l;else if(n(l)=="object")if(Array.isArray(l))for(c=0;c<l.length;c++)l[c]&&(p=i(l[c]))&&(g&&(g+=" "),g+=p);else for(c in l)l[c]&&(g&&(g+=" "),g+=c);return g}function a(){for(var l,c,p=0,g="";p<arguments.length;)(l=arguments[p++])&&(c=i(l))&&(g&&(g+=" "),g+=c);return g}e.r(o),e.d(o,{clsx:()=>a,default:()=>d});const d=a},6286:t=>{t.exports=function(o,e,n){return((n=window.getComputedStyle)?n(o):o.currentStyle)[e.replace(/-(\w)/gi,function(i,a){return a.toUpperCase()})]}},4919:(t,o,e)=>{function n(g){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},n(g)}var i=e(1020)(),a=e(7701),d=i&&a("%Object.defineProperty%",!0);if(d)try{d({},"a",{value:1})}catch{d=!1}var l=a("%SyntaxError%"),c=a("%TypeError%"),p=e(3820);t.exports=function(g,w,S){if(!g||n(g)!=="object"&&typeof g!="function")throw new c("`obj` must be an object or a function`");if(typeof w!="string"&&n(w)!=="symbol")throw new c("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new c("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new c("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new c("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new c("`loose`, if provided, must be a boolean");var C=arguments.length>3?arguments[3]:null,T=arguments.length>4?arguments[4]:null,P=arguments.length>5?arguments[5]:null,A=arguments.length>6&&arguments[6],M=!!p&&p(g,w);if(d)d(g,w,{configurable:P===null&&M?M.configurable:!P,enumerable:C===null&&M?M.enumerable:!C,value:S,writable:T===null&&M?M.writable:!T});else{if(!A&&(C||T||P))throw new l("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");g[w]=S}}},4347:(t,o,e)=>{function n(C){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},n(C)}var i=e(8204),a=typeof Symbol=="function"&&n(Symbol("foo"))==="symbol",d=Object.prototype.toString,l=Array.prototype.concat,c=Object.defineProperty,p=e(1020)(),g=c&&p,w=function(C,T,P,A){if(T in C){if(A===!0){if(C[T]===P)return}else if(typeof(M=A)!="function"||d.call(M)!=="[object Function]"||!A())return}var M;g?c(C,T,{configurable:!0,enumerable:!1,value:P,writable:!0}):C[T]=P},S=function(C,T){var P=arguments.length>2?arguments[2]:{},A=i(T);a&&(A=l.call(A,Object.getOwnPropertySymbols(T)));for(var M=0;M<A.length;M+=1)w(C,A[M],T[A[M]],P[A[M]])};S.supportsDescriptors=!!g,t.exports=S},3206:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(e){var n=!0,i=!0,a=!1;if(typeof e=="function"){try{e.call("f",function(d,l,c){o(c)!=="object"&&(n=!1)}),e.call([null],function(){i=typeof this=="string"},"x")}catch{a=!0}return!a&&n&&i}return!1}},2358:(t,o,e)=>{function n(p){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},n(p)}var i=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol",a=e(9739),d=e(1493),l=e(3258),c=e(8247);t.exports=function(p){if(a(p))return p;var g,w="default";if(arguments.length>1&&(arguments[1]===String?w="string":arguments[1]===Number&&(w="number")),i&&(Symbol.toPrimitive?g=function(C,T){var P=C[T];if(P!=null){if(!d(P))throw new TypeError(P+" returned for property "+T+" of object "+C+" is not a function");return P}}(p,Symbol.toPrimitive):c(p)&&(g=Symbol.prototype.valueOf)),g!==void 0){var S=g.call(p,w);if(a(S))return S;throw new TypeError("unable to convert exotic object to primitive")}return w==="default"&&(l(p)||c(p))&&(w="string"),function(C,T){if(C==null)throw new TypeError("Cannot call method on "+C);if(typeof T!="string"||T!=="number"&&T!=="string")throw new TypeError('hint must be "string" or "number"');var P,A,M,V=T==="string"?["toString","valueOf"]:["valueOf","toString"];for(M=0;M<V.length;++M)if(P=C[V[M]],d(P)&&(A=P.call(C),a(A)))return A;throw new TypeError("No default value")}(p,w==="default"?"number":w)}},9739:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(e){return e===null||typeof e!="function"&&o(e)!=="object"}},3094:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function e(n,i){if(n===i)return!0;if(n&&i&&o(n)=="object"&&o(i)=="object"){if(n.constructor!==i.constructor)return!1;var a,d,l;if(Array.isArray(n)){if((a=n.length)!=i.length)return!1;for(d=a;d--!=0;)if(!e(n[d],i[d]))return!1;return!0}if(n.constructor===RegExp)return n.source===i.source&&n.flags===i.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===i.toString();if((a=(l=Object.keys(n)).length)!==Object.keys(i).length)return!1;for(d=a;d--!=0;)if(!Object.prototype.hasOwnProperty.call(i,l[d]))return!1;for(d=a;d--!=0;){var c=l[d];if(!e(n[c],i[c]))return!1}return!0}return n!=n&&i!=i}},3161:t=>{var o=Object.prototype.toString,e=Math.max,n=function(i,a){for(var d=[],l=0;l<i.length;l+=1)d[l]=i[l];for(var c=0;c<a.length;c+=1)d[c+i.length]=a[c];return d};t.exports=function(i){var a=this;if(typeof a!="function"||o.apply(a)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+a);for(var d,l=function(S,C){for(var T=[],P=1,A=0;P<S.length;P+=1,A+=1)T[A]=S[P];return T}(arguments),c=e(0,a.length-l.length),p=[],g=0;g<c;g++)p[g]="$"+g;if(d=Function("binder","return function ("+function(S,C){for(var T="",P=0;P<S.length;P+=1)T+=S[P],P+1<S.length&&(T+=",");return T}(p)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof d){var S=a.apply(this,n(l,arguments));return Object(S)===S?S:this}return a.apply(i,n(l,arguments))}),a.prototype){var w=function(){};w.prototype=a.prototype,d.prototype=new w,w.prototype=null}return d}},3767:(t,o,e)=>{var n=e(3161);t.exports=Function.prototype.bind||n},7701:(t,o,e)=>{function n(Q){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},n(Q)}var i,a=SyntaxError,d=Function,l=TypeError,c=function(Q){try{return d('"use strict"; return ('+Q+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var g=function(){throw new l},w=p?function(){try{return g}catch{try{return p(arguments,"callee").get}catch{return g}}}():g,S=e(8489)(),C=e(1593)(),T=Object.getPrototypeOf||(C?function(Q){return Q.__proto__}:null),P={},A=typeof Uint8Array<"u"&&T?T(Uint8Array):i,M={"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":S&&T?T([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":P,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&T?T(T([][Symbol.iterator]())):i,"%JSON%":(typeof JSON>"u"?"undefined":n(JSON))==="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map<"u"&&S&&T?T(new Map()[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set<"u"&&S&&T?T(new Set()[Symbol.iterator]()):i,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&T?T(""[Symbol.iterator]()):i,"%Symbol%":S?Symbol:i,"%SyntaxError%":a,"%ThrowTypeError%":w,"%TypedArray%":A,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet};if(T)try{null.error}catch(Q){var V=T(T(Q));M["%Error.prototype%"]=V}var X=function Q(ae){var Se;if(ae==="%AsyncFunction%")Se=c("async function () {}");else if(ae==="%GeneratorFunction%")Se=c("function* () {}");else if(ae==="%AsyncGeneratorFunction%")Se=c("async function* () {}");else if(ae==="%AsyncGenerator%"){var Ee=Q("%AsyncGeneratorFunction%");Ee&&(Se=Ee.prototype)}else if(ae==="%AsyncIteratorPrototype%"){var Ie=Q("%AsyncGenerator%");Ie&&T&&(Se=T(Ie.prototype))}return M[ae]=Se,Se},te={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},re=e(3767),ee=e(2383),G=re.call(Function.call,Array.prototype.concat),L=re.call(Function.apply,Array.prototype.splice),J=re.call(Function.call,String.prototype.replace),ie=re.call(Function.call,String.prototype.slice),pe=re.call(Function.call,RegExp.prototype.exec),ne=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ce=/\\(\\)?/g,ve=function(Q,ae){var Se,Ee=Q;if(ee(te,Ee)&&(Ee="%"+(Se=te[Ee])[0]+"%"),ee(M,Ee)){var Ie=M[Ee];if(Ie===P&&(Ie=X(Ee)),Ie===void 0&&!ae)throw new l("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:Se,name:Ee,value:Ie}}throw new a("intrinsic "+Q+" does not exist!")};t.exports=function(Q,ae){if(typeof Q!="string"||Q.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ae!="boolean")throw new l('"allowMissing" argument must be a boolean');if(pe(/^%?[^%]*%?$/,Q)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Se=function(Be){var nt=ie(Be,0,1),ft=ie(Be,-1);if(nt==="%"&&ft!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(ft==="%"&&nt!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var W=[];return J(Be,ne,function(Y,le,ye,x){W[W.length]=ye?J(x,ce,"$1"):le||Y}),W}(Q),Ee=Se.length>0?Se[0]:"",Ie=ve("%"+Ee+"%",ae),Le=Ie.name,Te=Ie.value,We=!1,je=Ie.alias;je&&(Ee=je[0],L(Se,G([0,1],je)));for(var Ke=1,at=!0;Ke<Se.length;Ke+=1){var Ze=Se[Ke],fe=ie(Ze,0,1),Ne=ie(Ze,-1);if((fe==='"'||fe==="'"||fe==="`"||Ne==='"'||Ne==="'"||Ne==="`")&&fe!==Ne)throw new a("property names with quotes must have matching quotes");if(Ze!=="constructor"&&at||(We=!0),ee(M,Le="%"+(Ee+="."+Ze)+"%"))Te=M[Le];else if(Te!=null){if(!(Ze in Te)){if(!ae)throw new l("base intrinsic for "+Q+" exists, but the property is not available.");return}if(p&&Ke+1>=Se.length){var ke=p(Te,Ze);Te=(at=!!ke)&&"get"in ke&&!("originalValue"in ke.get)?ke.get:Te[Ze]}else at=ee(Te,Ze),Te=Te[Ze];at&&!We&&(M[Le]=Te)}}return Te}},3820:(t,o,e)=>{var n=e(7701)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n},1020:(t,o,e)=>{var n=e(7701)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch{return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},t.exports=i},1593:t=>{var o={foo:{}},e=Object;t.exports=function(){return{__proto__:o}.foo===o.foo&&!({__proto__:null}instanceof e)}},8489:(t,o,e)=>{function n(d){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},n(d)}var i=typeof Symbol<"u"&&Symbol,a=e(7027);t.exports=function(){return typeof i=="function"&&typeof Symbol=="function"&&n(i("foo"))==="symbol"&&n(Symbol("bar"))==="symbol"&&a()}},7027:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(o(Symbol.iterator)==="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;for(n in e[n]=42,e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,n);if(d.value!==42||d.enumerable!==!0)return!1}return!0}},1191:(t,o,e)=>{var n=e(7027);t.exports=function(){return n()&&!!Symbol.toStringTag}},1888:(t,o,e)=>{var n=e(3767);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},2383:(t,o,e)=>{var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,a=e(3767);t.exports=a.call(n,i)},7480:(t,o,e)=>{var n=e(5532),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},d={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function c(P){return n.isMemo(P)?d:l[P.$$typeof]||i}l[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[n.Memo]=d;var p=Object.defineProperty,g=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,S=Object.getOwnPropertyDescriptor,C=Object.getPrototypeOf,T=Object.prototype;t.exports=function P(A,M,V){if(typeof M!="string"){if(T){var X=C(M);X&&X!==T&&P(A,X,V)}var te=g(M);w&&(te=te.concat(w(M)));for(var re=c(A),ee=c(M),G=0;G<te.length;++G){var L=te[G];if(!(a[L]||V&&V[L]||ee&&ee[L]||re&&re[L])){var J=S(M,L);try{p(A,L,J)}catch{}}}}return A}},1493:t=>{function o(T){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},o(T)}var e,n,i=Function.prototype.toString,a=(typeof Reflect>"u"?"undefined":o(Reflect))==="object"&&Reflect!==null&&Reflect.apply;if(typeof a=="function"&&typeof Object.defineProperty=="function")try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},a(function(){throw 42},null,e)}catch(T){T!==n&&(a=null)}else a=null;var d=/^\s*class\b/,l=function(T){try{var P=i.call(T);return d.test(P)}catch{return!1}},c=function(T){try{return!l(T)&&(i.call(T),!0)}catch{return!1}},p=Object.prototype.toString,g=typeof Symbol=="function"&&!!Symbol.toStringTag,w=!(0 in[,]),S=function(){return!1};if((typeof document>"u"?"undefined":o(document))==="object"){var C=document.all;p.call(C)===p.call(document.all)&&(S=function(T){if((w||!T)&&(T===void 0||o(T)==="object"))try{var P=p.call(T);return(P==="[object HTMLAllCollection]"||P==="[object HTML document.all class]"||P==="[object HTMLCollection]"||P==="[object Object]")&&T("")==null}catch{}return!1})}t.exports=a?function(T){if(S(T))return!0;if(!T||typeof T!="function"&&o(T)!=="object")return!1;try{a(T,null,e)}catch(P){if(P!==n)return!1}return!l(T)&&c(T)}:function(T){if(S(T))return!0;if(!T||typeof T!="function"&&o(T)!=="object")return!1;if(g)return c(T);if(l(T))return!1;var P=p.call(T);return!(P!=="[object Function]"&&P!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(P))&&c(T)}},3258:(t,o,e)=>{function n(l){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}var i=Date.prototype.getDay,a=Object.prototype.toString,d=e(1191)();t.exports=function(l){return n(l)==="object"&&l!==null&&(d?function(c){try{return i.call(c),!0}catch{return!1}}(l):a.call(l)==="[object Date]")}},4803:(t,o,e)=>{function n(C){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},n(C)}var i,a,d,l,c=e(593),p=e(1191)();if(p){i=c("Object.prototype.hasOwnProperty"),a=c("RegExp.prototype.exec"),d={};var g=function(){throw d};l={toString:g,valueOf:g},n(Symbol.toPrimitive)==="symbol"&&(l[Symbol.toPrimitive]=g)}var w=c("Object.prototype.toString"),S=Object.getOwnPropertyDescriptor;t.exports=p?function(C){if(!C||n(C)!=="object")return!1;var T=S(C,"lastIndex");if(!T||!i(T,"value"))return!1;try{a(C,l)}catch(P){return P===d}}:function(C){return!(!C||n(C)!=="object"&&typeof C!="function")&&w(C)==="[object RegExp]"}},1753:(t,o,e)=>{function n(l){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}var i=String.prototype.valueOf,a=Object.prototype.toString,d=e(1191)();t.exports=function(l){return typeof l=="string"||n(l)==="object"&&(d?function(c){try{return i.call(c),!0}catch{return!1}}(l):a.call(l)==="[object String]")}},8247:(t,o,e)=>{function n(l){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}var i=Object.prototype.toString;if(e(8489)()){var a=Symbol.prototype.toString,d=/^Symbol\(.*\)$/;t.exports=function(l){if(n(l)==="symbol")return!0;if(i.call(l)!=="[object Symbol]")return!1;try{return function(c){return n(c.valueOf())==="symbol"&&d.test(a.call(c))}(l)}catch{return!1}}}else t.exports=function(l){return!1}},7e3:(t,o,e)=>{var n=e(6286);t.exports=function(i){var a=n(i,"line-height"),d=parseFloat(a,10);if(a===d+""){var l=i.style.lineHeight;i.style.lineHeight=a+"em",a=n(i,"line-height"),d=parseFloat(a,10),l?i.style.lineHeight=l:delete i.style.lineHeight}if(a.indexOf("pt")!==-1?(d*=4,d/=3):a.indexOf("mm")!==-1?(d*=96,d/=25.4):a.indexOf("cm")!==-1?(d*=96,d/=2.54):a.indexOf("in")!==-1?d*=96:a.indexOf("pc")!==-1&&(d*=16),d=Math.round(d),a==="normal"){var c=i.nodeName,p=document.createElement(c);p.innerHTML="&nbsp;",c.toUpperCase()==="TEXTAREA"&&p.setAttribute("rows","1");var g=n(i,"font-size");p.style.fontSize=g,p.style.padding="0px",p.style.border="0px";var w=document.body;w.appendChild(p),d=p.offsetHeight,w.removeChild(p)}return d}},8436:(t,o,e)=>{function n(re){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},n(re)}var i=e(2867),a=e(2940),d=e(2459),l=e(1888),c=e(2293),p=function(re){d(!1,re)},g=String.prototype.replace,w=String.prototype.split,S="||||",C=function(re){var ee=re%100,G=ee%10;return ee!==11&&G===1?0:2<=G&&G<=4&&!(ee>=12&&ee<=14)?1:2},T={pluralTypes:{arabic:function(re){if(re<3)return re;var ee=re%100;return ee>=3&&ee<=10?3:ee>=11?4:5},bosnian_serbian:C,chinese:function(){return 0},croatian:C,french:function(re){return re>=2?1:0},german:function(re){return re!==1?1:0},russian:C,lithuanian:function(re){return re%10==1&&re%100!=11?0:re%10>=2&&re%10<=9&&(re%100<11||re%100>19)?1:2},czech:function(re){return re===1?0:re>=2&&re<=4?1:2},polish:function(re){if(re===1)return 0;var ee=re%10;return 2<=ee&&ee<=4&&(re%100<10||re%100>=20)?1:2},icelandic:function(re){return re%10!=1||re%100==11?1:0},slovenian:function(re){var ee=re%100;return ee===1?0:ee===2?1:ee===3||ee===4?2:3},romanian:function(re){if(re===1)return 0;var ee=re%100;return re===0||ee>=2&&ee<=19?1:2}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"]}};function P(re){return re.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var A,M=(A={},function(re,ee){var G=A[ee];return G&&!re.pluralTypes[G]&&(G=null,A[ee]=G),G||(G=function(L,J){var ie,pe,ne=(ie=L.pluralTypeToLanguages,pe={},i(a(ie),function(ce){var ve=ce[0],Q=ce[1];i(Q,function(ae){pe[ae]=ve})}),pe);return ne[J]||ne[w.call(J,/-/,1)[0]]||ne.en}(re,ee))&&(A[ee]=G),G}),V=/%\{(.*?)\}/g;function X(re,ee,G,L,J,ie){if(typeof re!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(ee==null)return re;var pe=re,ne=L||V,ce=ie||g,ve=typeof ee=="number"?{smart_count:ee}:ee;if(ve.smart_count!=null&&re){var Q=J||T,ae=w.call(re,S),Se=function(Ee,Ie,Le){return Ee.pluralTypes[Ie](Le)}(Q,M(Q,G||"en"),ve.smart_count);pe=c(ae[Se]||ae[0])}return ce.call(pe,ne,function(Ee,Ie){return l(ve,Ie)&&ve[Ie]!=null?ve[Ie]:Ee})}function te(re){var ee=re||{};this.phrases={},this.extend(ee.phrases||{}),this.currentLocale=ee.locale||"en";var G=ee.allowMissing?X:null;this.onMissingKey=typeof ee.onMissingKey=="function"?ee.onMissingKey:G,this.warn=ee.warn||p,this.replaceImplementation=ee.replace||g,this.tokenRegex=function(L){var J=L&&L.prefix||"%{",ie=L&&L.suffix||"}";if(J===S||ie===S)throw new RangeError('"'+S+'" token is reserved for pluralization');return new RegExp(P(J)+"(.*?)"+P(ie),"g")}(ee.interpolation),this.pluralRules=ee.pluralRules||T}te.prototype.locale=function(re){return re&&(this.currentLocale=re),this.currentLocale},te.prototype.extend=function(re,ee){i(a(re||{}),function(G){var L=G[0],J=G[1],ie=ee?ee+"."+L:L;n(J)==="object"?this.extend(J,ie):this.phrases[ie]=J},this)},te.prototype.unset=function(re,ee){typeof re=="string"?delete this.phrases[re]:i(a(re||{}),function(G){var L=G[0],J=G[1],ie=ee?ee+"."+L:L;n(J)==="object"?this.unset(J,ie):delete this.phrases[ie]},this)},te.prototype.clear=function(){this.phrases={}},te.prototype.replace=function(re){this.clear(),this.extend(re)},te.prototype.t=function(re,ee){var G,L,J=ee??{};return typeof this.phrases[re]=="string"?G=this.phrases[re]:typeof J._=="string"?G=J._:this.onMissingKey?L=(0,this.onMissingKey)(re,J,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation):(this.warn('Missing translation for key: "'+re+'"'),L=re),typeof G=="string"&&(L=X(G,J,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),L},te.prototype.has=function(re){return l(this.phrases,re)},te.transformPhrase=function(re,ee,G){return X(re,ee,G)},t.exports=te},7594:(t,o,e)=>{function n(H){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},n(H)}var i=typeof Map=="function"&&Map.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,d=i&&a&&typeof a.get=="function"?a.get:null,l=i&&Map.prototype.forEach,c=typeof Set=="function"&&Set.prototype,p=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,g=c&&p&&typeof p.get=="function"?p.get:null,w=c&&Set.prototype.forEach,S=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap.prototype.has:null,C=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet.prototype.has:null,T=typeof WeakRef=="function"&&WeakRef.prototype?WeakRef.prototype.deref:null,P=Boolean.prototype.valueOf,A=Object.prototype.toString,M=Function.prototype.toString,V=String.prototype.match,X=String.prototype.slice,te=String.prototype.replace,re=String.prototype.toUpperCase,ee=String.prototype.toLowerCase,G=RegExp.prototype.test,L=Array.prototype.concat,J=Array.prototype.join,ie=Array.prototype.slice,pe=Math.floor,ne=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ce=Object.getOwnPropertySymbols,ve=typeof Symbol=="function"&&n(Symbol.iterator)==="symbol"?Symbol.prototype.toString:null,Q=typeof Symbol=="function"&&n(Symbol.iterator)==="object",ae=typeof Symbol=="function"&&Symbol.toStringTag&&(n(Symbol.toStringTag),1)?Symbol.toStringTag:null,Se=Object.prototype.propertyIsEnumerable,Ee=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(H){return H.__proto__}:null);function Ie(H,F){if(H===1/0||H===-1/0||H!=H||H&&H>-1e3&&H<1e3||G.call(/e/,F))return F;var $=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof H=="number"){var se=H<0?-pe(-H):pe(H);if(se!==H){var he=String(se),_e=X.call(F,he.length+1);return te.call(he,$,"$&_")+"."+te.call(te.call(_e,/([0-9]{3})/g,"$&_"),/_$/,"")}}return te.call(F,$,"$&_")}var Le=e(4654),Te=Le.custom,We=fe(Te)?Te:null;function je(H,F,$){var se=($.quoteStyle||F)==="double"?'"':"'";return se+H+se}function Ke(H){return te.call(String(H),/"/g,"&quot;")}function at(H){return!(Be(H)!=="[object Array]"||ae&&n(H)==="object"&&ae in H)}function Ze(H){return!(Be(H)!=="[object RegExp]"||ae&&n(H)==="object"&&ae in H)}function fe(H){if(Q)return H&&n(H)==="object"&&H instanceof Symbol;if(n(H)==="symbol")return!0;if(!H||n(H)!=="object"||!ve)return!1;try{return ve.call(H),!0}catch{}return!1}t.exports=function H(F,$,se,he){var _e=$||{};if(ke(_e,"quoteStyle")&&_e.quoteStyle!=="single"&&_e.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ke(_e,"maxStringLength")&&(typeof _e.maxStringLength=="number"?_e.maxStringLength<0&&_e.maxStringLength!==1/0:_e.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ae=!ke(_e,"customInspect")||_e.customInspect;if(typeof Ae!="boolean"&&Ae!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ke(_e,"indent")&&_e.indent!==null&&_e.indent!=="	"&&!(parseInt(_e.indent,10)===_e.indent&&_e.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ke(_e,"numericSeparator")&&typeof _e.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Fe=_e.numericSeparator;if(F===void 0)return"undefined";if(F===null)return"null";if(typeof F=="boolean")return F?"true":"false";if(typeof F=="string")return ft(F,_e);if(typeof F=="number"){if(F===0)return 1/0/F>0?"0":"-0";var Me=String(F);return Fe?Ie(F,Me):Me}if(typeof F=="bigint"){var Xe=String(F)+"n";return Fe?Ie(F,Xe):Xe}var k=_e.depth===void 0?5:_e.depth;if(se===void 0&&(se=0),se>=k&&k>0&&n(F)==="object")return at(F)?"[Array]":"[Object]";var R,B=function(Ue,xt){var wn;if(Ue.indent==="	")wn="	";else{if(!(typeof Ue.indent=="number"&&Ue.indent>0))return null;wn=J.call(Array(Ue.indent+1)," ")}return{base:wn,prev:J.call(Array(xt+1),wn)}}(_e,se);if(he===void 0)he=[];else if(nt(he,F)>=0)return"[Circular]";function U(Ue,xt,wn){if(xt&&(he=ie.call(he)).push(xt),wn){var Qe={depth:_e.depth};return ke(_e,"quoteStyle")&&(Qe.quoteStyle=_e.quoteStyle),H(Ue,Qe,se+1,he)}return H(Ue,_e,se+1,he)}if(typeof F=="function"&&!Ze(F)){var me=function(Ue){if(Ue.name)return Ue.name;var xt=V.call(M.call(Ue),/^function\s*([\w$]+)/);return xt?xt[1]:null}(F),Oe=j(F,U);return"[Function"+(me?": "+me:" (anonymous)")+"]"+(Oe.length>0?" { "+J.call(Oe,", ")+" }":"")}if(fe(F)){var Ge=Q?te.call(String(F),/^(Symbol\(.*\))_[^)]*$/,"$1"):ve.call(F);return n(F)!=="object"||Q?Ge:Y(Ge)}if((R=F)&&n(R)==="object"&&(typeof HTMLElement<"u"&&R instanceof HTMLElement||typeof R.nodeName=="string"&&typeof R.getAttribute=="function")){for(var Je="<"+ee.call(String(F.nodeName)),ze=F.attributes||[],It=0;It<ze.length;It++)Je+=" "+ze[It].name+"="+je(Ke(ze[It].value),"double",_e);return Je+=">",F.childNodes&&F.childNodes.length&&(Je+="..."),Je+"</"+ee.call(String(F.nodeName))+">"}if(at(F)){if(F.length===0)return"[]";var _t=j(F,U);return B&&!function(Ue){for(var xt=0;xt<Ue.length;xt++)if(nt(Ue[xt],`
`)>=0)return!1;return!0}(_t)?"["+x(_t,B)+"]":"[ "+J.call(_t,", ")+" ]"}if(function(Ue){return!(Be(Ue)!=="[object Error]"||ae&&n(Ue)==="object"&&ae in Ue)}(F)){var Lt=j(F,U);return"cause"in Error.prototype||!("cause"in F)||Se.call(F,"cause")?Lt.length===0?"["+String(F)+"]":"{ ["+String(F)+"] "+J.call(Lt,", ")+" }":"{ ["+String(F)+"] "+J.call(L.call("[cause]: "+U(F.cause),Lt),", ")+" }"}if(n(F)==="object"&&Ae){if(We&&typeof F[We]=="function"&&Le)return Le(F,{depth:k-se});if(Ae!=="symbol"&&typeof F.inspect=="function")return F.inspect()}if(function(Ue){if(!d||!Ue||n(Ue)!=="object")return!1;try{d.call(Ue);try{g.call(Ue)}catch{return!0}return Ue instanceof Map}catch{}return!1}(F)){var jn=[];return l&&l.call(F,function(Ue,xt){jn.push(U(xt,F,!0)+" => "+U(Ue,F))}),ye("Map",d.call(F),jn,B)}if(function(Ue){if(!g||!Ue||n(Ue)!=="object")return!1;try{g.call(Ue);try{d.call(Ue)}catch{return!0}return Ue instanceof Set}catch{}return!1}(F)){var In=[];return w&&w.call(F,function(Ue){In.push(U(Ue,F))}),ye("Set",g.call(F),In,B)}if(function(Ue){if(!S||!Ue||n(Ue)!=="object")return!1;try{S.call(Ue,S);try{C.call(Ue,C)}catch{return!0}return Ue instanceof WeakMap}catch{}return!1}(F))return le("WeakMap");if(function(Ue){if(!C||!Ue||n(Ue)!=="object")return!1;try{C.call(Ue,C);try{S.call(Ue,S)}catch{return!0}return Ue instanceof WeakSet}catch{}return!1}(F))return le("WeakSet");if(function(Ue){if(!T||!Ue||n(Ue)!=="object")return!1;try{return T.call(Ue),!0}catch{}return!1}(F))return le("WeakRef");if(function(Ue){return!(Be(Ue)!=="[object Number]"||ae&&n(Ue)==="object"&&ae in Ue)}(F))return Y(U(Number(F)));if(function(Ue){if(!Ue||n(Ue)!=="object"||!ne)return!1;try{return ne.call(Ue),!0}catch{}return!1}(F))return Y(U(ne.call(F)));if(function(Ue){return!(Be(Ue)!=="[object Boolean]"||ae&&n(Ue)==="object"&&ae in Ue)}(F))return Y(P.call(F));if(function(Ue){return!(Be(Ue)!=="[object String]"||ae&&n(Ue)==="object"&&ae in Ue)}(F))return Y(U(String(F)));if(typeof window<"u"&&F===window)return"{ [object Window] }";if(F===e.g)return"{ [object globalThis] }";if(!function(Ue){return!(Be(Ue)!=="[object Date]"||ae&&n(Ue)==="object"&&ae in Ue)}(F)&&!Ze(F)){var $t=j(F,U),Zr=Ee?Ee(F)===Object.prototype:F instanceof Object||F.constructor===Object,Ln=F instanceof Object?"":"null prototype",bn=!Zr&&ae&&Object(F)===F&&ae in F?X.call(Be(F),8,-1):Ln?"Object":"",Pn=(Zr||typeof F.constructor!="function"?"":F.constructor.name?F.constructor.name+" ":"")+(bn||Ln?"["+J.call(L.call([],bn||[],Ln||[]),": ")+"] ":"");return $t.length===0?Pn+"{}":B?Pn+"{"+x($t,B)+"}":Pn+"{ "+J.call($t,", ")+" }"}return String(F)};var Ne=Object.prototype.hasOwnProperty||function(H){return H in this};function ke(H,F){return Ne.call(H,F)}function Be(H){return A.call(H)}function nt(H,F){if(H.indexOf)return H.indexOf(F);for(var $=0,se=H.length;$<se;$++)if(H[$]===F)return $;return-1}function ft(H,F){if(H.length>F.maxStringLength){var $=H.length-F.maxStringLength,se="... "+$+" more character"+($>1?"s":"");return ft(X.call(H,0,F.maxStringLength),F)+se}return je(te.call(te.call(H,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",F)}function W(H){var F=H.charCodeAt(0),$={8:"b",9:"t",10:"n",12:"f",13:"r"}[F];return $?"\\"+$:"\\x"+(F<16?"0":"")+re.call(F.toString(16))}function Y(H){return"Object("+H+")"}function le(H){return H+" { ? }"}function ye(H,F,$,se){return H+" ("+F+") {"+(se?x($,se):J.call($,", "))+"}"}function x(H,F){if(H.length===0)return"";var $=`
`+F.prev+F.base;return $+J.call(H,","+$)+`
`+F.prev}function j(H,F){var $=at(H),se=[];if($){se.length=H.length;for(var he=0;he<H.length;he++)se[he]=ke(H,he)?F(H[he],H):""}var _e,Ae=typeof ce=="function"?ce(H):[];if(Q){_e={};for(var Fe=0;Fe<Ae.length;Fe++)_e["$"+Ae[Fe]]=Ae[Fe]}for(var Me in H)ke(H,Me)&&($&&String(Number(Me))===Me&&Me<H.length||Q&&_e["$"+Me]instanceof Symbol||(G.call(/[^\w$]/,Me)?se.push(F(Me,H)+": "+F(H[Me],H)):se.push(Me+": "+F(H[Me],H))));if(typeof ce=="function")for(var Xe=0;Xe<Ae.length;Xe++)Se.call(H,Ae[Xe])&&se.push("["+F(Ae[Xe])+"]: "+F(H[Ae[Xe]],H));return se}},1561:(t,o,e)=>{function n(P){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},n(P)}var i;if(!Object.keys){var a=Object.prototype.hasOwnProperty,d=Object.prototype.toString,l=e(8013),c=Object.prototype.propertyIsEnumerable,p=!c.call({toString:null},"toString"),g=c.call(function(){},"prototype"),w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=function(P){var A=P.constructor;return A&&A.prototype===P},C={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},T=function(){if(typeof window>"u")return!1;for(var P in window)try{if(!C["$"+P]&&a.call(window,P)&&window[P]!==null&&n(window[P])==="object")try{S(window[P])}catch{return!0}}catch{return!0}return!1}();i=function(P){var A=P!==null&&n(P)==="object",M=d.call(P)==="[object Function]",V=l(P),X=A&&d.call(P)==="[object String]",te=[];if(!A&&!M&&!V)throw new TypeError("Object.keys called on a non-object");var re=g&&M;if(X&&P.length>0&&!a.call(P,0))for(var ee=0;ee<P.length;++ee)te.push(String(ee));if(V&&P.length>0)for(var G=0;G<P.length;++G)te.push(String(G));else for(var L in P)re&&L==="prototype"||!a.call(P,L)||te.push(String(L));if(p)for(var J=function(pe){if(typeof window>"u"||!T)return S(pe);try{return S(pe)}catch{return!1}}(P),ie=0;ie<w.length;++ie)J&&w[ie]==="constructor"||!a.call(P,w[ie])||te.push(w[ie]);return te}}t.exports=i},8204:(t,o,e)=>{var n=Array.prototype.slice,i=e(8013),a=Object.keys,d=a?function(c){return a(c)}:e(1561),l=Object.keys;d.shim=function(){if(Object.keys){var c=function(){var p=Object.keys(arguments);return p&&p.length===arguments.length}(1,2);c||(Object.keys=function(p){return i(p)?l(n.call(p)):l(p)})}else Object.keys=d;return Object.keys||d},t.exports=d},8013:t=>{function o(n){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o(n)}var e=Object.prototype.toString;t.exports=function(n){var i=e.call(n),a=i==="[object Arguments]";return a||(a=i!=="[object Array]"&&n!==null&&o(n)==="object"&&typeof n.length=="number"&&n.length>=0&&e.call(n.callee)==="[object Function]"),a}},3167:(t,o,e)=>{var n=e(9793),i=e(593),a=i("Object.prototype.propertyIsEnumerable"),d=i("Array.prototype.push");t.exports=function(l){var c=n(l),p=[];for(var g in c)a(c,g)&&d(p,[g,c[g]]);return p}},2940:(t,o,e)=>{var n=e(4347),i=e(4373),a=e(3167),d=e(3365),l=e(463),c=i(d(),Object);n(c,{getPolyfill:d,implementation:a,shim:l}),t.exports=c},3365:(t,o,e)=>{var n=e(3167);t.exports=function(){return typeof Object.entries=="function"?Object.entries:n}},463:(t,o,e)=>{var n=e(3365),i=e(4347);t.exports=function(){var a=n();return i(Object,{entries:a},{entries:function(){return Object.entries!==a}}),a}},4741:(t,o,e)=>{e.r(o),e.d(o,{Children:()=>$t,Component:()=>X,Fragment:()=>V,PureComponent:()=>ze,StrictMode:()=>Ar,Suspense:()=>bn,SuspenseList:()=>xt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>Ft,cloneElement:()=>Bo,createContext:()=>at,createElement:()=>P,createFactory:()=>Or,createPortal:()=>Lo,createRef:()=>M,default:()=>Ho,findDOMNode:()=>gn,flushSync:()=>lr,forwardRef:()=>jn,hydrate:()=>zt,isValidElement:()=>Gn,lazy:()=>Ue,memo:()=>It,render:()=>Yr,unmountComponentAtNode:()=>en,unstable_batchedUpdates:()=>Cr,useCallback:()=>_e,useContext:()=>Ae,useDebugValue:()=>Fe,useEffect:()=>H,useErrorBoundary:()=>Me,useImperativeHandle:()=>se,useLayoutEffect:()=>F,useMemo:()=>he,useReducer:()=>j,useRef:()=>$,useState:()=>x,version:()=>ar});var n,i,a,d,l,c,p,g={},w=[],S=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function C(I,N){for(var Z in N)I[Z]=N[Z];return I}function T(I){var N=I.parentNode;N&&N.removeChild(I)}function P(I,N,Z){var ue,Re,be,Ve={};for(be in N)be=="key"?ue=N[be]:be=="ref"?Re=N[be]:Ve[be]=N[be];if(arguments.length>2&&(Ve.children=arguments.length>3?n.call(arguments,2):Z),typeof I=="function"&&I.defaultProps!=null)for(be in I.defaultProps)Ve[be]===void 0&&(Ve[be]=I.defaultProps[be]);return A(I,Ve,ue,Re,null)}function A(I,N,Z,ue,Re){var be={type:I,props:N,key:Z,ref:ue,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Re??++a};return Re==null&&i.vnode!=null&&i.vnode(be),be}function M(){return{current:null}}function V(I){return I.children}function X(I,N){this.props=I,this.context=N}function te(I,N){if(N==null)return I.__?te(I.__,I.__.__k.indexOf(I)+1):null;for(var Z;N<I.__k.length;N++)if((Z=I.__k[N])!=null&&Z.__e!=null)return Z.__e;return typeof I.type=="function"?te(I):null}function re(I){var N,Z;if((I=I.__)!=null&&I.__c!=null){for(I.__e=I.__c.base=null,N=0;N<I.__k.length;N++)if((Z=I.__k[N])!=null&&Z.__e!=null){I.__e=I.__c.base=Z.__e;break}return re(I)}}function ee(I){(!I.__d&&(I.__d=!0)&&d.push(I)&&!G.__r++||c!==i.debounceRendering)&&((c=i.debounceRendering)||l)(G)}function G(){for(var I;G.__r=d.length;)I=d.sort(function(N,Z){return N.__v.__b-Z.__v.__b}),d=[],I.some(function(N){var Z,ue,Re,be,Ve,Ye;N.__d&&(Ve=(be=(Z=N).__v).__e,(Ye=Z.__P)&&(ue=[],(Re=C({},be)).__v=be.__v+1,ae(Ye,be,Re,Z.__n,Ye.ownerSVGElement!==void 0,be.__h!=null?[Ve]:null,ue,Ve??te(be),be.__h),Se(ue,be),be.__e!=Ve&&re(be)))})}function L(I,N,Z,ue,Re,be,Ve,Ye,bt,qe){var Ce,Mt,et,$e,lt,yn,Rt,jt=ue&&ue.__k||w,Zt=jt.length;for(Z.__k=[],Ce=0;Ce<N.length;Ce++)if(($e=Z.__k[Ce]=($e=N[Ce])==null||typeof $e=="boolean"?null:typeof $e=="string"||typeof $e=="number"||typeof $e=="bigint"?A(null,$e,null,null,$e):Array.isArray($e)?A(V,{children:$e},null,null,null):$e.__b>0?A($e.type,$e.props,$e.key,null,$e.__v):$e)!=null){if($e.__=Z,$e.__b=Z.__b+1,(et=jt[Ce])===null||et&&$e.key==et.key&&$e.type===et.type)jt[Ce]=void 0;else for(Mt=0;Mt<Zt;Mt++){if((et=jt[Mt])&&$e.key==et.key&&$e.type===et.type){jt[Mt]=void 0;break}et=null}ae(I,$e,et=et||g,Re,be,Ve,Ye,bt,qe),lt=$e.__e,(Mt=$e.ref)&&et.ref!=Mt&&(Rt||(Rt=[]),et.ref&&Rt.push(et.ref,null,$e),Rt.push(Mt,$e.__c||lt,$e)),lt!=null?(yn==null&&(yn=lt),typeof $e.type=="function"&&$e.__k===et.__k?$e.__d=bt=J($e,bt,I):bt=pe(I,$e,et,jt,lt,bt),typeof Z.type=="function"&&(Z.__d=bt)):bt&&et.__e==bt&&bt.parentNode!=I&&(bt=te(et))}for(Z.__e=yn,Ce=Zt;Ce--;)jt[Ce]!=null&&(typeof Z.type=="function"&&jt[Ce].__e!=null&&jt[Ce].__e==Z.__d&&(Z.__d=te(ue,Ce+1)),Le(jt[Ce],jt[Ce]));if(Rt)for(Ce=0;Ce<Rt.length;Ce++)Ie(Rt[Ce],Rt[++Ce],Rt[++Ce])}function J(I,N,Z){for(var ue,Re=I.__k,be=0;Re&&be<Re.length;be++)(ue=Re[be])&&(ue.__=I,N=typeof ue.type=="function"?J(ue,N,Z):pe(Z,ue,ue,Re,ue.__e,N));return N}function ie(I,N){return N=N||[],I==null||typeof I=="boolean"||(Array.isArray(I)?I.some(function(Z){ie(Z,N)}):N.push(I)),N}function pe(I,N,Z,ue,Re,be){var Ve,Ye,bt;if(N.__d!==void 0)Ve=N.__d,N.__d=void 0;else if(Z==null||Re!=be||Re.parentNode==null)e:if(be==null||be.parentNode!==I)I.appendChild(Re),Ve=null;else{for(Ye=be,bt=0;(Ye=Ye.nextSibling)&&bt<ue.length;bt+=2)if(Ye==Re)break e;I.insertBefore(Re,be),Ve=be}return Ve!==void 0?Ve:Re.nextSibling}function ne(I,N,Z){N[0]==="-"?I.setProperty(N,Z):I[N]=Z==null?"":typeof Z!="number"||S.test(N)?Z:Z+"px"}function ce(I,N,Z,ue,Re){var be;e:if(N==="style")if(typeof Z=="string")I.style.cssText=Z;else{if(typeof ue=="string"&&(I.style.cssText=ue=""),ue)for(N in ue)Z&&N in Z||ne(I.style,N,"");if(Z)for(N in Z)ue&&Z[N]===ue[N]||ne(I.style,N,Z[N])}else if(N[0]==="o"&&N[1]==="n")be=N!==(N=N.replace(/Capture$/,"")),N=N.toLowerCase()in I?N.toLowerCase().slice(2):N.slice(2),I.l||(I.l={}),I.l[N+be]=Z,Z?ue||I.addEventListener(N,be?Q:ve,be):I.removeEventListener(N,be?Q:ve,be);else if(N!=="dangerouslySetInnerHTML"){if(Re)N=N.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(N!=="href"&&N!=="list"&&N!=="form"&&N!=="tabIndex"&&N!=="download"&&N in I)try{I[N]=Z??"";break e}catch{}typeof Z=="function"||(Z!=null&&(Z!==!1||N[0]==="a"&&N[1]==="r")?I.setAttribute(N,Z):I.removeAttribute(N))}}function ve(I){this.l[I.type+!1](i.event?i.event(I):I)}function Q(I){this.l[I.type+!0](i.event?i.event(I):I)}function ae(I,N,Z,ue,Re,be,Ve,Ye,bt){var qe,Ce,Mt,et,$e,lt,yn,Rt,jt,Zt,ur,Ot=N.type;if(N.constructor!==void 0)return null;Z.__h!=null&&(bt=Z.__h,Ye=N.__e=Z.__e,N.__h=null,be=[Ye]),(qe=i.__b)&&qe(N);try{e:if(typeof Ot=="function"){if(Rt=N.props,jt=(qe=Ot.contextType)&&ue[qe.__c],Zt=qe?jt?jt.props.value:qe.__:ue,Z.__c?yn=(Ce=N.__c=Z.__c).__=Ce.__E:("prototype"in Ot&&Ot.prototype.render?N.__c=Ce=new Ot(Rt,Zt):(N.__c=Ce=new X(Rt,Zt),Ce.constructor=Ot,Ce.render=Te),jt&&jt.sub(Ce),Ce.props=Rt,Ce.state||(Ce.state={}),Ce.context=Zt,Ce.__n=ue,Mt=Ce.__d=!0,Ce.__h=[]),Ce.__s==null&&(Ce.__s=Ce.state),Ot.getDerivedStateFromProps!=null&&(Ce.__s==Ce.state&&(Ce.__s=C({},Ce.__s)),C(Ce.__s,Ot.getDerivedStateFromProps(Rt,Ce.__s))),et=Ce.props,$e=Ce.state,Mt)Ot.getDerivedStateFromProps==null&&Ce.componentWillMount!=null&&Ce.componentWillMount(),Ce.componentDidMount!=null&&Ce.__h.push(Ce.componentDidMount);else{if(Ot.getDerivedStateFromProps==null&&Rt!==et&&Ce.componentWillReceiveProps!=null&&Ce.componentWillReceiveProps(Rt,Zt),!Ce.__e&&Ce.shouldComponentUpdate!=null&&Ce.shouldComponentUpdate(Rt,Ce.__s,Zt)===!1||N.__v===Z.__v){Ce.props=Rt,Ce.state=Ce.__s,N.__v!==Z.__v&&(Ce.__d=!1),Ce.__v=N,N.__e=Z.__e,N.__k=Z.__k,N.__k.forEach(function(Jr){Jr&&(Jr.__=N)}),Ce.__h.length&&Ve.push(Ce);break e}Ce.componentWillUpdate!=null&&Ce.componentWillUpdate(Rt,Ce.__s,Zt),Ce.componentDidUpdate!=null&&Ce.__h.push(function(){Ce.componentDidUpdate(et,$e,lt)})}Ce.context=Zt,Ce.props=Rt,Ce.state=Ce.__s,(qe=i.__r)&&qe(N),Ce.__d=!1,Ce.__v=N,Ce.__P=I,qe=Ce.render(Ce.props,Ce.state,Ce.context),Ce.state=Ce.__s,Ce.getChildContext!=null&&(ue=C(C({},ue),Ce.getChildContext())),Mt||Ce.getSnapshotBeforeUpdate==null||(lt=Ce.getSnapshotBeforeUpdate(et,$e)),ur=qe!=null&&qe.type===V&&qe.key==null?qe.props.children:qe,L(I,Array.isArray(ur)?ur:[ur],N,Z,ue,Re,be,Ve,Ye,bt),Ce.base=N.__e,N.__h=null,Ce.__h.length&&Ve.push(Ce),yn&&(Ce.__E=Ce.__=null),Ce.__e=!1}else be==null&&N.__v===Z.__v?(N.__k=Z.__k,N.__e=Z.__e):N.__e=Ee(Z.__e,N,Z,ue,Re,be,Ve,bt);(qe=i.diffed)&&qe(N)}catch(Jr){N.__v=null,(bt||be!=null)&&(N.__e=Ye,N.__h=!!bt,be[be.indexOf(Ye)]=null),i.__e(Jr,N,Z)}}function Se(I,N){i.__c&&i.__c(N,I),I.some(function(Z){try{I=Z.__h,Z.__h=[],I.some(function(ue){ue.call(Z)})}catch(ue){i.__e(ue,Z.__v)}})}function Ee(I,N,Z,ue,Re,be,Ve,Ye){var bt,qe,Ce,Mt=Z.props,et=N.props,$e=N.type,lt=0;if($e==="svg"&&(Re=!0),be!=null){for(;lt<be.length;lt++)if((bt=be[lt])&&"setAttribute"in bt==!!$e&&($e?bt.localName===$e:bt.nodeType===3)){I=bt,be[lt]=null;break}}if(I==null){if($e===null)return document.createTextNode(et);I=Re?document.createElementNS("http://www.w3.org/2000/svg",$e):document.createElement($e,et.is&&et),be=null,Ye=!1}if($e===null)Mt===et||Ye&&I.data===et||(I.data=et);else{if(be=be&&n.call(I.childNodes),qe=(Mt=Z.props||g).dangerouslySetInnerHTML,Ce=et.dangerouslySetInnerHTML,!Ye){if(be!=null)for(Mt={},lt=0;lt<I.attributes.length;lt++)Mt[I.attributes[lt].name]=I.attributes[lt].value;(Ce||qe)&&(Ce&&(qe&&Ce.__html==qe.__html||Ce.__html===I.innerHTML)||(I.innerHTML=Ce&&Ce.__html||""))}if(function(yn,Rt,jt,Zt,ur){var Ot;for(Ot in jt)Ot==="children"||Ot==="key"||Ot in Rt||ce(yn,Ot,null,jt[Ot],Zt);for(Ot in Rt)ur&&typeof Rt[Ot]!="function"||Ot==="children"||Ot==="key"||Ot==="value"||Ot==="checked"||jt[Ot]===Rt[Ot]||ce(yn,Ot,Rt[Ot],jt[Ot],Zt)}(I,et,Mt,Re,Ye),Ce)N.__k=[];else if(lt=N.props.children,L(I,Array.isArray(lt)?lt:[lt],N,Z,ue,Re&&$e!=="foreignObject",be,Ve,be?be[0]:Z.__k&&te(Z,0),Ye),be!=null)for(lt=be.length;lt--;)be[lt]!=null&&T(be[lt]);Ye||("value"in et&&(lt=et.value)!==void 0&&(lt!==Mt.value||lt!==I.value||$e==="progress"&&!lt)&&ce(I,"value",lt,Mt.value,!1),"checked"in et&&(lt=et.checked)!==void 0&&lt!==I.checked&&ce(I,"checked",lt,Mt.checked,!1))}return I}function Ie(I,N,Z){try{typeof I=="function"?I(N):I.current=N}catch(ue){i.__e(ue,Z)}}function Le(I,N,Z){var ue,Re;if(i.unmount&&i.unmount(I),(ue=I.ref)&&(ue.current&&ue.current!==I.__e||Ie(ue,null,N)),(ue=I.__c)!=null){if(ue.componentWillUnmount)try{ue.componentWillUnmount()}catch(be){i.__e(be,N)}ue.base=ue.__P=null}if(ue=I.__k)for(Re=0;Re<ue.length;Re++)ue[Re]&&Le(ue[Re],N,typeof I.type!="function");Z||I.__e==null||T(I.__e),I.__e=I.__d=void 0}function Te(I,N,Z){return this.constructor(I,Z)}function We(I,N,Z){var ue,Re,be;i.__&&i.__(I,N),Re=(ue=typeof Z=="function")?null:Z&&Z.__k||N.__k,be=[],ae(N,I=(!ue&&Z||N).__k=P(V,null,[I]),Re||g,g,N.ownerSVGElement!==void 0,!ue&&Z?[Z]:Re?null:N.firstChild?n.call(N.childNodes):null,be,!ue&&Z?Z:Re?Re.__e:N.firstChild,ue),Se(be,I)}function je(I,N){We(I,N,je)}function Ke(I,N,Z){var ue,Re,be,Ve=C({},I.props);for(be in N)be=="key"?ue=N[be]:be=="ref"?Re=N[be]:Ve[be]=N[be];return arguments.length>2&&(Ve.children=arguments.length>3?n.call(arguments,2):Z),A(I.type,Ve,ue||I.key,Re||I.ref,null)}function at(I,N){var Z={__c:N="__cC"+p++,__:I,Consumer:function(ue,Re){return ue.children(Re)},Provider:function(ue){var Re,be;return this.getChildContext||(Re=[],(be={})[N]=this,this.getChildContext=function(){return be},this.shouldComponentUpdate=function(Ve){this.props.value!==Ve.value&&Re.some(ee)},this.sub=function(Ve){Re.push(Ve);var Ye=Ve.componentWillUnmount;Ve.componentWillUnmount=function(){Re.splice(Re.indexOf(Ve),1),Ye&&Ye.call(Ve)}}),ue.children}};return Z.Provider.__=Z.Consumer.contextType=Z}n=w.slice,i={__e:function(I,N){for(var Z,ue,Re;N=N.__;)if((Z=N.__c)&&!Z.__)try{if((ue=Z.constructor)&&ue.getDerivedStateFromError!=null&&(Z.setState(ue.getDerivedStateFromError(I)),Re=Z.__d),Z.componentDidCatch!=null&&(Z.componentDidCatch(I),Re=Z.__d),Re)return Z.__E=Z}catch(be){I=be}throw I}},a=0,X.prototype.setState=function(I,N){var Z;Z=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof I=="function"&&(I=I(C({},Z),this.props)),I&&C(Z,I),I!=null&&this.__v&&(N&&this.__h.push(N),ee(this))},X.prototype.forceUpdate=function(I){this.__v&&(this.__e=!0,I&&this.__h.push(I),ee(this))},X.prototype.render=V,d=[],l=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,G.__r=0,p=0;var Ze,fe,Ne,ke=0,Be=[],nt=i.__b,ft=i.__r,W=i.diffed,Y=i.__c,le=i.unmount;function ye(I,N){i.__h&&i.__h(fe,I,ke||N),ke=0;var Z=fe.__H||(fe.__H={__:[],__h:[]});return I>=Z.__.length&&Z.__.push({}),Z.__[I]}function x(I){return ke=1,j(me,I)}function j(I,N,Z){var ue=ye(Ze++,2);return ue.t=I,ue.__c||(ue.__=[Z?Z(N):me(void 0,N),function(Re){var be=ue.t(ue.__[0],Re);ue.__[0]!==be&&(ue.__=[be,ue.__[1]],ue.__c.setState({}))}],ue.__c=fe),ue.__}function H(I,N){var Z=ye(Ze++,3);!i.__s&&U(Z.__H,N)&&(Z.__=I,Z.__H=N,fe.__H.__h.push(Z))}function F(I,N){var Z=ye(Ze++,4);!i.__s&&U(Z.__H,N)&&(Z.__=I,Z.__H=N,fe.__h.push(Z))}function $(I){return ke=5,he(function(){return{current:I}},[])}function se(I,N,Z){ke=6,F(function(){typeof I=="function"?I(N()):I&&(I.current=N())},Z==null?Z:Z.concat(I))}function he(I,N){var Z=ye(Ze++,7);return U(Z.__H,N)&&(Z.__=I(),Z.__H=N,Z.__h=I),Z.__}function _e(I,N){return ke=8,he(function(){return I},N)}function Ae(I){var N=fe.context[I.__c],Z=ye(Ze++,9);return Z.c=I,N?(Z.__==null&&(Z.__=!0,N.sub(fe)),N.props.value):I.__}function Fe(I,N){i.useDebugValue&&i.useDebugValue(N?N(I):I)}function Me(I){var N=ye(Ze++,10),Z=x();return N.__=I,fe.componentDidCatch||(fe.componentDidCatch=function(ue){N.__&&N.__(ue),Z[1](ue)}),[Z[0],function(){Z[1](void 0)}]}function Xe(){var I;for(Be.sort(function(N,Z){return N.__v.__b-Z.__v.__b});I=Be.pop();)if(I.__P)try{I.__H.__h.forEach(R),I.__H.__h.forEach(B),I.__H.__h=[]}catch(N){I.__H.__h=[],i.__e(N,I.__v)}}i.__b=function(I){fe=null,nt&&nt(I)},i.__r=function(I){ft&&ft(I),Ze=0;var N=(fe=I.__c).__H;N&&(N.__h.forEach(R),N.__h.forEach(B),N.__h=[])},i.diffed=function(I){W&&W(I);var N=I.__c;N&&N.__H&&N.__H.__h.length&&(Be.push(N)!==1&&Ne===i.requestAnimationFrame||((Ne=i.requestAnimationFrame)||function(Z){var ue,Re=function(){clearTimeout(be),k&&cancelAnimationFrame(ue),setTimeout(Z)},be=setTimeout(Re,100);k&&(ue=requestAnimationFrame(Re))})(Xe)),fe=null},i.__c=function(I,N){N.some(function(Z){try{Z.__h.forEach(R),Z.__h=Z.__h.filter(function(ue){return!ue.__||B(ue)})}catch(ue){N.some(function(Re){Re.__h&&(Re.__h=[])}),N=[],i.__e(ue,Z.__v)}}),Y&&Y(I,N)},i.unmount=function(I){le&&le(I);var N,Z=I.__c;Z&&Z.__H&&(Z.__H.__.forEach(function(ue){try{R(ue)}catch(Re){N=Re}}),N&&i.__e(N,Z.__v))};var k=typeof requestAnimationFrame=="function";function R(I){var N=fe,Z=I.__c;typeof Z=="function"&&(I.__c=void 0,Z()),fe=N}function B(I){var N=fe;I.__c=I.__(),fe=N}function U(I,N){return!I||I.length!==N.length||N.some(function(Z,ue){return Z!==I[ue]})}function me(I,N){return typeof N=="function"?N(I):N}function Oe(I){return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},Oe(I)}function Ge(I,N){for(var Z in N)I[Z]=N[Z];return I}function Je(I,N){for(var Z in I)if(Z!=="__source"&&!(Z in N))return!0;for(var ue in N)if(ue!=="__source"&&I[ue]!==N[ue])return!0;return!1}function ze(I){this.props=I}function It(I,N){function Z(Re){var be=this.props.ref,Ve=be==Re.ref;return!Ve&&be&&(be.call?be(null):be.current=null),N?!N(this.props,Re)||!Ve:Je(this.props,Re)}function ue(Re){return this.shouldComponentUpdate=Z,P(I,Re)}return ue.displayName="Memo("+(I.displayName||I.name)+")",ue.prototype.isReactComponent=!0,ue.__f=!0,ue}(ze.prototype=new X).isPureReactComponent=!0,ze.prototype.shouldComponentUpdate=function(I,N){return Je(this.props,I)||Je(this.state,N)};var _t=i.__b;i.__b=function(I){I.type&&I.type.__f&&I.ref&&(I.props.ref=I.ref,I.ref=null),_t&&_t(I)};var Lt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function jn(I){function N(Z,ue){var Re=Ge({},Z);return delete Re.ref,I(Re,(ue=Z.ref||ue)&&(Oe(ue)!="object"||"current"in ue)?ue:null)}return N.$$typeof=Lt,N.render=N,N.prototype.isReactComponent=N.__f=!0,N.displayName="ForwardRef("+(I.displayName||I.name)+")",N}var In=function(I,N){return I==null?null:ie(ie(I).map(N))},$t={map:In,forEach:In,count:function(I){return I?ie(I).length:0},only:function(I){var N=ie(I);if(N.length!==1)throw"Children.only";return N[0]},toArray:ie},Zr=i.__e;i.__e=function(I,N,Z){if(I.then){for(var ue,Re=N;Re=Re.__;)if((ue=Re.__c)&&ue.__c)return N.__e==null&&(N.__e=Z.__e,N.__k=Z.__k),ue.__c(I,N)}Zr(I,N,Z)};var Ln=i.unmount;function bn(){this.__u=0,this.t=null,this.__b=null}function Pn(I){var N=I.__.__c;return N&&N.__e&&N.__e(I)}function Ue(I){var N,Z,ue;function Re(be){if(N||(N=I()).then(function(Ve){Z=Ve.default||Ve},function(Ve){ue=Ve}),ue)throw ue;if(!Z)throw N;return P(Z,be)}return Re.displayName="Lazy",Re.__f=!0,Re}function xt(){this.u=null,this.o=null}i.unmount=function(I){var N=I.__c;N&&N.__R&&N.__R(),N&&I.__h===!0&&(I.type=null),Ln&&Ln(I)},(bn.prototype=new X).__c=function(I,N){var Z=N.__c,ue=this;ue.t==null&&(ue.t=[]),ue.t.push(Z);var Re=Pn(ue.__v),be=!1,Ve=function(){be||(be=!0,Z.__R=null,Re?Re(Ye):Ye())};Z.__R=Ve;var Ye=function(){if(!--ue.__u){if(ue.state.__e){var qe=ue.state.__e;ue.__v.__k[0]=function Mt(et,$e,lt){return et&&(et.__v=null,et.__k=et.__k&&et.__k.map(function(yn){return Mt(yn,$e,lt)}),et.__c&&et.__c.__P===$e&&(et.__e&&lt.insertBefore(et.__e,et.__d),et.__c.__e=!0,et.__c.__P=lt)),et}(qe,qe.__c.__P,qe.__c.__O)}var Ce;for(ue.setState({__e:ue.__b=null});Ce=ue.t.pop();)Ce.forceUpdate()}},bt=N.__h===!0;ue.__u++||bt||ue.setState({__e:ue.__b=ue.__v.__k[0]}),I.then(Ve,Ve)},bn.prototype.componentWillUnmount=function(){this.t=[]},bn.prototype.render=function(I,N){if(this.__b){if(this.__v.__k){var Z=document.createElement("div"),ue=this.__v.__k[0].__c;this.__v.__k[0]=function be(Ve,Ye,bt){return Ve&&(Ve.__c&&Ve.__c.__H&&(Ve.__c.__H.__.forEach(function(qe){typeof qe.__c=="function"&&qe.__c()}),Ve.__c.__H=null),(Ve=Ge({},Ve)).__c!=null&&(Ve.__c.__P===bt&&(Ve.__c.__P=Ye),Ve.__c=null),Ve.__k=Ve.__k&&Ve.__k.map(function(qe){return be(qe,Ye,bt)})),Ve}(this.__b,Z,ue.__O=ue.__P)}this.__b=null}var Re=N.__e&&P(V,null,I.fallback);return Re&&(Re.__h=null),[P(V,null,N.__e?null:I.children),Re]};var wn=function(I,N,Z){if(++Z[1]===Z[0]&&I.o.delete(N),I.props.revealOrder&&(I.props.revealOrder[0]!=="t"||!I.o.size))for(Z=I.u;Z;){for(;Z.length>3;)Z.pop()();if(Z[1]<Z[0])break;I.u=Z=Z[2]}};function Qe(I){return this.getChildContext=function(){return I.context},I.children}function sa(I){var N=this,Z=I.i;N.componentWillUnmount=function(){We(null,N.l),N.l=null,N.i=null},N.i&&N.i!==Z&&N.componentWillUnmount(),I.__v?(N.l||(N.i=Z,N.l={nodeType:1,parentNode:Z,childNodes:[],appendChild:function(ue){this.childNodes.push(ue),N.i.appendChild(ue)},insertBefore:function(ue,Re){this.childNodes.push(ue),N.i.appendChild(ue)},removeChild:function(ue){this.childNodes.splice(this.childNodes.indexOf(ue)>>>1,1),N.i.removeChild(ue)}}),We(P(Qe,{context:N.context},I.__v),N.l)):N.l&&N.componentWillUnmount()}function Lo(I,N){return P(sa,{__v:I,i:N})}(xt.prototype=new X).__e=function(I){var N=this,Z=Pn(N.__v),ue=N.o.get(I);return ue[0]++,function(Re){var be=function(){N.props.revealOrder?(ue.push(Re),wn(N,I,ue)):Re()};Z?Z(be):be()}},xt.prototype.render=function(I){this.u=null,this.o=new Map;var N=ie(I.children);I.revealOrder&&I.revealOrder[0]==="b"&&N.reverse();for(var Z=N.length;Z--;)this.o.set(N[Z],this.u=[1,0,this.u]);return I.children},xt.prototype.componentDidUpdate=xt.prototype.componentDidMount=function(){var I=this;this.o.forEach(function(N,Z){wn(I,Z,N)})};var Tr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,aa=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,No=typeof document<"u",Et=function(I){return(typeof Symbol<"u"&&Oe(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(I)};function Yr(I,N,Z){return N.__k==null&&(N.textContent=""),We(I,N),typeof Z=="function"&&Z(),I?I.__c:null}function zt(I,N,Z){return je(I,N),typeof Z=="function"&&Z(),I?I.__c:null}X.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(I){Object.defineProperty(X.prototype,I,{configurable:!0,get:function(){return this["UNSAFE_"+I]},set:function(N){Object.defineProperty(this,I,{configurable:!0,writable:!0,value:N})}})});var sr=i.event;function Sn(){}function Vi(){return this.cancelBubble}function Kr(){return this.defaultPrevented}i.event=function(I){return sr&&(I=sr(I)),I.persist=Sn,I.isPropagationStopped=Vi,I.isDefaultPrevented=Kr,I.nativeEvent=I};var Pr,Wn={configurable:!0,get:function(){return this.class}},Wi=i.vnode;i.vnode=function(I){var N=I.type,Z=I.props,ue=Z;if(typeof N=="string"){var Re=N.indexOf("-")===-1;for(var be in ue={},Z){var Ve=Z[be];No&&be==="children"&&N==="noscript"||be==="value"&&"defaultValue"in Z&&Ve==null||(be==="defaultValue"&&"value"in Z&&Z.value==null?be="value":be==="download"&&Ve===!0?Ve="":/ondoubleclick/i.test(be)?be="ondblclick":/^onchange(textarea|input)/i.test(be+N)&&!Et(Z.type)?be="oninput":/^onfocus$/i.test(be)?be="onfocusin":/^onblur$/i.test(be)?be="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(be)?be=be.toLowerCase():Re&&aa.test(be)?be=be.replace(/[A-Z0-9]/,"-$&").toLowerCase():Ve===null&&(Ve=void 0),ue[be]=Ve)}N=="select"&&ue.multiple&&Array.isArray(ue.value)&&(ue.value=ie(Z.children).forEach(function(Ye){Ye.props.selected=ue.value.indexOf(Ye.props.value)!=-1})),N=="select"&&ue.defaultValue!=null&&(ue.value=ie(Z.children).forEach(function(Ye){Ye.props.selected=ue.multiple?ue.defaultValue.indexOf(Ye.props.value)!=-1:ue.defaultValue==Ye.props.value})),I.props=ue,Z.class!=Z.className&&(Wn.enumerable="className"in Z,Z.className!=null&&(ue.class=Z.className),Object.defineProperty(ue,"className",Wn))}I.$$typeof=Tr,Wi&&Wi(I)};var Xt=i.__r;i.__r=function(I){Xt&&Xt(I),Pr=I.__c};var Ft={ReactCurrentDispatcher:{current:{readContext:function(I){return Pr.__n[I.__c].props.value}}}},ar="17.0.2";function Or(I){return P.bind(null,I)}function Gn(I){return!!I&&I.$$typeof===Tr}function Bo(I){return Gn(I)?Ke.apply(null,arguments):I}function en(I){return!!I.__k&&(We(null,I),!0)}function gn(I){return I&&(I.base||I.nodeType===1&&I)||null}var Cr=function(I,N){return I(N)},lr=function(I,N){return I(N)},Ar=V;const Ho={useState:x,useReducer:j,useEffect:H,useLayoutEffect:F,useRef:$,useImperativeHandle:se,useMemo:he,useCallback:_e,useContext:Ae,useDebugValue:Fe,version:"17.0.2",Children:$t,render:Yr,hydrate:zt,unmountComponentAtNode:en,createPortal:Lo,createElement:P,createContext:at,createFactory:Or,cloneElement:Bo,createRef:M,Fragment:V,isValidElement:Gn,findDOMNode:gn,Component:X,PureComponent:ze,memo:It,forwardRef:jn,flushSync:lr,unstable_batchedUpdates:Cr,StrictMode:V,Suspense:bn,SuspenseList:xt,lazy:Ue,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Ft}},9428:(t,o,e)=>{var n=e(2134);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function d(p,g,w,S,C,T){if(T!==n){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}function l(){return d}d.isRequired=d;var c={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:l,element:d,elementType:d,instanceOf:l,node:d,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:a,resetWarningCache:i};return c.PropTypes=c,c}},6526:(t,o,e)=>{t.exports=e(9428)()},2134:t=>{t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7072:function(t,o,e){var n,i,a;function d(l){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},d(l)}a=function(){function l(G,L,J,ie,pe){(function ne(ce,ve,Q,ae,Se){for(;ae>Q;){if(ae-Q>600){var Ee=ae-Q+1,Ie=ve-Q+1,Le=Math.log(Ee),Te=.5*Math.exp(2*Le/3),We=.5*Math.sqrt(Le*Te*(Ee-Te)/Ee)*(Ie-Ee/2<0?-1:1);ne(ce,ve,Math.max(Q,Math.floor(ve-Ie*Te/Ee+We)),Math.min(ae,Math.floor(ve+(Ee-Ie)*Te/Ee+We)),Se)}var je=ce[ve],Ke=Q,at=ae;for(c(ce,Q,ve),Se(ce[ae],je)>0&&c(ce,Q,ae);Ke<at;){for(c(ce,Ke,at),Ke++,at--;Se(ce[Ke],je)<0;)Ke++;for(;Se(ce[at],je)>0;)at--}Se(ce[Q],je)===0?c(ce,Q,at):c(ce,++at,ae),at<=ve&&(Q=at+1),ve<=at&&(ae=at-1)}})(G,L,J||0,ie||G.length-1,pe||p)}function c(G,L,J){var ie=G[L];G[L]=G[J],G[J]=ie}function p(G,L){return G<L?-1:G>L?1:0}var g=function(G){G===void 0&&(G=9),this._maxEntries=Math.max(4,G),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function w(G,L,J){if(!J)return L.indexOf(G);for(var ie=0;ie<L.length;ie++)if(J(G,L[ie]))return ie;return-1}function S(G,L){C(G,0,G.children.length,L,G)}function C(G,L,J,ie,pe){pe||(pe=re(null)),pe.minX=1/0,pe.minY=1/0,pe.maxX=-1/0,pe.maxY=-1/0;for(var ne=L;ne<J;ne++){var ce=G.children[ne];T(pe,G.leaf?ie(ce):ce)}return pe}function T(G,L){return G.minX=Math.min(G.minX,L.minX),G.minY=Math.min(G.minY,L.minY),G.maxX=Math.max(G.maxX,L.maxX),G.maxY=Math.max(G.maxY,L.maxY),G}function P(G,L){return G.minX-L.minX}function A(G,L){return G.minY-L.minY}function M(G){return(G.maxX-G.minX)*(G.maxY-G.minY)}function V(G){return G.maxX-G.minX+(G.maxY-G.minY)}function X(G,L){return G.minX<=L.minX&&G.minY<=L.minY&&L.maxX<=G.maxX&&L.maxY<=G.maxY}function te(G,L){return L.minX<=G.maxX&&L.minY<=G.maxY&&L.maxX>=G.minX&&L.maxY>=G.minY}function re(G){return{children:G,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ee(G,L,J,ie,pe){for(var ne=[L,J];ne.length;)if(!((J=ne.pop())-(L=ne.pop())<=ie)){var ce=L+Math.ceil((J-L)/ie/2)*ie;l(G,ce,L,J,pe),ne.push(L,ce,ce,J)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(G){var L=this.data,J=[];if(!te(G,L))return J;for(var ie=this.toBBox,pe=[];L;){for(var ne=0;ne<L.children.length;ne++){var ce=L.children[ne],ve=L.leaf?ie(ce):ce;te(G,ve)&&(L.leaf?J.push(ce):X(G,ve)?this._all(ce,J):pe.push(ce))}L=pe.pop()}return J},g.prototype.collides=function(G){var L=this.data;if(!te(G,L))return!1;for(var J=[];L;){for(var ie=0;ie<L.children.length;ie++){var pe=L.children[ie],ne=L.leaf?this.toBBox(pe):pe;if(te(G,ne)){if(L.leaf||X(G,ne))return!0;J.push(pe)}}L=J.pop()}return!1},g.prototype.load=function(G){if(!G||!G.length)return this;if(G.length<this._minEntries){for(var L=0;L<G.length;L++)this.insert(G[L]);return this}var J=this._build(G.slice(),0,G.length-1,0);if(this.data.children.length)if(this.data.height===J.height)this._splitRoot(this.data,J);else{if(this.data.height<J.height){var ie=this.data;this.data=J,J=ie}this._insert(J,this.data.height-J.height-1,!0)}else this.data=J;return this},g.prototype.insert=function(G){return G&&this._insert(G,this.data.height-1),this},g.prototype.clear=function(){return this.data=re([]),this},g.prototype.remove=function(G,L){if(!G)return this;for(var J,ie,pe,ne=this.data,ce=this.toBBox(G),ve=[],Q=[];ne||ve.length;){if(ne||(ne=ve.pop(),ie=ve[ve.length-1],J=Q.pop(),pe=!0),ne.leaf){var ae=w(G,ne.children,L);if(ae!==-1)return ne.children.splice(ae,1),ve.push(ne),this._condense(ve),this}pe||ne.leaf||!X(ne,ce)?ie?(J++,ne=ie.children[J],pe=!1):ne=null:(ve.push(ne),Q.push(J),J=0,ie=ne,ne=ne.children[0])}return this},g.prototype.toBBox=function(G){return G},g.prototype.compareMinX=function(G,L){return G.minX-L.minX},g.prototype.compareMinY=function(G,L){return G.minY-L.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(G){return this.data=G,this},g.prototype._all=function(G,L){for(var J=[];G;)G.leaf?L.push.apply(L,G.children):J.push.apply(J,G.children),G=J.pop();return L},g.prototype._build=function(G,L,J,ie){var pe,ne=J-L+1,ce=this._maxEntries;if(ne<=ce)return S(pe=re(G.slice(L,J+1)),this.toBBox),pe;ie||(ie=Math.ceil(Math.log(ne)/Math.log(ce)),ce=Math.ceil(ne/Math.pow(ce,ie-1))),(pe=re([])).leaf=!1,pe.height=ie;var ve=Math.ceil(ne/ce),Q=ve*Math.ceil(Math.sqrt(ce));ee(G,L,J,Q,this.compareMinX);for(var ae=L;ae<=J;ae+=Q){var Se=Math.min(ae+Q-1,J);ee(G,ae,Se,ve,this.compareMinY);for(var Ee=ae;Ee<=Se;Ee+=ve){var Ie=Math.min(Ee+ve-1,Se);pe.children.push(this._build(G,Ee,Ie,ie-1))}}return S(pe,this.toBBox),pe},g.prototype._chooseSubtree=function(G,L,J,ie){for(;ie.push(L),!L.leaf&&ie.length-1!==J;){for(var pe=1/0,ne=1/0,ce=void 0,ve=0;ve<L.children.length;ve++){var Q=L.children[ve],ae=M(Q),Se=(Ee=G,Ie=Q,(Math.max(Ie.maxX,Ee.maxX)-Math.min(Ie.minX,Ee.minX))*(Math.max(Ie.maxY,Ee.maxY)-Math.min(Ie.minY,Ee.minY))-ae);Se<ne?(ne=Se,pe=ae<pe?ae:pe,ce=Q):Se===ne&&ae<pe&&(pe=ae,ce=Q)}L=ce||L.children[0]}var Ee,Ie;return L},g.prototype._insert=function(G,L,J){var ie=J?G:this.toBBox(G),pe=[],ne=this._chooseSubtree(ie,this.data,L,pe);for(ne.children.push(G),T(ne,ie);L>=0&&pe[L].children.length>this._maxEntries;)this._split(pe,L),L--;this._adjustParentBBoxes(ie,pe,L)},g.prototype._split=function(G,L){var J=G[L],ie=J.children.length,pe=this._minEntries;this._chooseSplitAxis(J,pe,ie);var ne=this._chooseSplitIndex(J,pe,ie),ce=re(J.children.splice(ne,J.children.length-ne));ce.height=J.height,ce.leaf=J.leaf,S(J,this.toBBox),S(ce,this.toBBox),L?G[L-1].children.push(ce):this._splitRoot(J,ce)},g.prototype._splitRoot=function(G,L){this.data=re([G,L]),this.data.height=G.height+1,this.data.leaf=!1,S(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(G,L,J){for(var ie,pe,ne,ce,ve,Q,ae,Se=1/0,Ee=1/0,Ie=L;Ie<=J-L;Ie++){var Le=C(G,0,Ie,this.toBBox),Te=C(G,Ie,J,this.toBBox),We=(pe=Le,ne=Te,ce=Math.max(pe.minX,ne.minX),ve=Math.max(pe.minY,ne.minY),Q=Math.min(pe.maxX,ne.maxX),ae=Math.min(pe.maxY,ne.maxY),Math.max(0,Q-ce)*Math.max(0,ae-ve)),je=M(Le)+M(Te);We<Se?(Se=We,ie=Ie,Ee=je<Ee?je:Ee):We===Se&&je<Ee&&(Ee=je,ie=Ie)}return ie||J-L},g.prototype._chooseSplitAxis=function(G,L,J){var ie=G.leaf?this.compareMinX:P,pe=G.leaf?this.compareMinY:A;this._allDistMargin(G,L,J,ie)<this._allDistMargin(G,L,J,pe)&&G.children.sort(ie)},g.prototype._allDistMargin=function(G,L,J,ie){G.children.sort(ie);for(var pe=this.toBBox,ne=C(G,0,L,pe),ce=C(G,J-L,J,pe),ve=V(ne)+V(ce),Q=L;Q<J-L;Q++){var ae=G.children[Q];T(ne,G.leaf?pe(ae):ae),ve+=V(ne)}for(var Se=J-L-1;Se>=L;Se--){var Ee=G.children[Se];T(ce,G.leaf?pe(Ee):Ee),ve+=V(ce)}return ve},g.prototype._adjustParentBBoxes=function(G,L,J){for(var ie=J;ie>=0;ie--)T(L[ie],G)},g.prototype._condense=function(G){for(var L=G.length-1,J=void 0;L>=0;L--)G[L].children.length===0?L>0?(J=G[L-1].children).splice(J.indexOf(G[L]),1):this.clear():S(G[L],this.toBBox)},g},d(o)=="object"?t.exports=a():(i=typeof(n=a)=="function"?n.call(o,e,o,t):n)===void 0||(t.exports=i)},8744:function(t,o,e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var P in T)T.hasOwnProperty(P)&&(C[P]=T[P])},function(C,T){function P(){this.constructor=C}n(C,T),C.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}),a=this&&this.__assign||Object.assign||function(C){for(var T,P=1,A=arguments.length;P<A;P++)for(var M in T=arguments[P])Object.prototype.hasOwnProperty.call(T,M)&&(C[M]=T[M]);return C},d=this&&this.__rest||function(C,T){var P={};for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&T.indexOf(A)<0&&(P[A]=C[A]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function"){var M=0;for(A=Object.getOwnPropertySymbols(C);M<A.length;M++)T.indexOf(A[M])<0&&(P[A[M]]=C[A[M]])}return P};o.__esModule=!0;var l=e(4741),c=e(6526),p=e(9584),g=e(7e3),w="autosize:resized",S=function(C){function T(){var P=C!==null&&C.apply(this,arguments)||this;return P.state={lineHeight:null},P.textarea=null,P.onResize=function(A){P.props.onResize&&P.props.onResize(A)},P.updateLineHeight=function(){P.textarea&&P.setState({lineHeight:g(P.textarea)})},P.onChange=function(A){var M=P.props.onChange;P.currentValue=A.currentTarget.value,M&&M(A)},P}return i(T,C),T.prototype.componentDidMount=function(){var P=this,A=this.props,M=A.maxRows,V=A.async;typeof M=="number"&&this.updateLineHeight(),typeof M=="number"||V?setTimeout(function(){return P.textarea&&p(P.textarea)}):this.textarea&&p(this.textarea),this.textarea&&this.textarea.addEventListener(w,this.onResize)},T.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(w,this.onResize),p.destroy(this.textarea))},T.prototype.render=function(){var P=this,A=this.props,M=(A.onResize,A.maxRows),V=(A.onChange,A.style),X=(A.innerRef,A.children),te=d(A,["onResize","maxRows","onChange","style","innerRef","children"]),re=this.state.lineHeight,ee=M&&re?re*M:null;return l.createElement("textarea",a({},te,{onChange:this.onChange,style:ee?a({},V,{maxHeight:ee}):V,ref:function(G){P.textarea=G,typeof P.props.innerRef=="function"?P.props.innerRef(G):P.props.innerRef&&(P.props.innerRef.current=G)}}),X)},T.prototype.componentDidUpdate=function(){this.textarea&&p.update(this.textarea)},T.defaultProps={rows:1,async:!1},T.propTypes={rows:c.number,maxRows:c.number,onResize:c.func,innerRef:c.any,async:c.bool},T}(l.Component);o.TextareaAutosize=l.forwardRef(function(C,T){return l.createElement(S,a({},C,{innerRef:T}))})},6451:(t,o,e)=>{var n=e(8744);o.Z=n.TextareaAutosize},7199:(t,o,e)=>{var n=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function i(ne,ce){var ve=Object.keys(ne);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(ne);ce&&(Q=Q.filter(function(ae){return Object.getOwnPropertyDescriptor(ne,ae).enumerable})),ve.push.apply(ve,Q)}return ve}function a(ne){for(var ce=1;ce<arguments.length;ce++){var ve=arguments[ce]!=null?arguments[ce]:{};ce%2?i(Object(ve),!0).forEach(function(Q){d(ne,Q,ve[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(ve)):i(Object(ve)).forEach(function(Q){Object.defineProperty(ne,Q,Object.getOwnPropertyDescriptor(ve,Q))})}return ne}function d(ne,ce,ve){return(ce=p(ce))in ne?Object.defineProperty(ne,ce,{value:ve,enumerable:!0,configurable:!0,writable:!0}):ne[ce]=ve,ne}function l(ne,ce){(ce==null||ce>ne.length)&&(ce=ne.length);for(var ve=0,Q=new Array(ce);ve<ce;ve++)Q[ve]=ne[ve];return Q}function c(ne,ce){for(var ve=0;ve<ce.length;ve++){var Q=ce[ve];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(ne,p(Q.key),Q)}}function p(ne){var ce=function(ve,Q){if(C(ve)!=="object"||ve===null)return ve;var ae=ve[Symbol.toPrimitive];if(ae!==void 0){var Se=ae.call(ve,"string");if(C(Se)!=="object")return Se;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ve)}(ne);return C(ce)==="symbol"?ce:String(ce)}function g(ne,ce){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ve,Q){return ve.__proto__=Q,ve},g(ne,ce)}function w(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function S(ne){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},S(ne)}function C(ne){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},C(ne)}Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"DraggableCore",{enumerable:!0,get:function(){return re.default}}),o.default=void 0;var T=function(ne,ce){if(ne&&ne.__esModule)return ne;if(ne===null||C(ne)!=="object"&&typeof ne!="function")return{default:ne};var ve=L(ce);if(ve&&ve.has(ne))return ve.get(ne);var Q={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Se in ne)if(Se!=="default"&&Object.prototype.hasOwnProperty.call(ne,Se)){var Ee=ae?Object.getOwnPropertyDescriptor(ne,Se):null;Ee&&(Ee.get||Ee.set)?Object.defineProperty(Q,Se,Ee):Q[Se]=ne[Se]}return Q.default=ne,ve&&ve.set(ne,Q),Q}(e(4741)),P=G(e(6526)),A=G(e(4741)),M=G(e(8344)),V=e(5676),X=e(6102),te=e(6339),re=G(e(9466)),ee=G(e(7165));function G(ne){return ne&&ne.__esModule?ne:{default:ne}}function L(ne){if(typeof WeakMap!="function")return null;var ce=new WeakMap,ve=new WeakMap;return(L=function(Q){return Q?ve:ce})(ne)}function J(){return J=Object.assign?Object.assign.bind():function(ne){for(var ce=1;ce<arguments.length;ce++){var ve=arguments[ce];for(var Q in ve)Object.prototype.hasOwnProperty.call(ve,Q)&&(ne[Q]=ve[Q])}return ne},J.apply(this,arguments)}function ie(ne,ce,ve){return(ce=function(Q){var ae=function(Se,Ee){if(C(Se)!=="object"||Se===null)return Se;var Ie=Se[Symbol.toPrimitive];if(Ie!==void 0){var Le=Ie.call(Se,"string");if(C(Le)!=="object")return Le;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Se)}(Q);return C(ae)==="symbol"?ae:String(ae)}(ce))in ne?Object.defineProperty(ne,ce,{value:ve,enumerable:!0,configurable:!0,writable:!0}):ne[ce]=ve,ne}var pe=function(ne){(function(Le,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function");Le.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Le,writable:!0,configurable:!0}}),Object.defineProperty(Le,"prototype",{writable:!1}),Te&&g(Le,Te)})(Ie,ne);var ce,ve,Q,ae,Se,Ee=(ae=Ie,Se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Le,Te=S(ae);if(Se){var We=S(this).constructor;Le=Reflect.construct(Te,arguments,We)}else Le=Te.apply(this,arguments);return function(je,Ke){if(Ke&&(C(Ke)==="object"||typeof Ke=="function"))return Ke;if(Ke!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(je)}(this,Le)});function Ie(Le){var Te;return function(We,je){if(!(We instanceof je))throw new TypeError("Cannot call a class as a function")}(this,Ie),ie(w(Te=Ee.call(this,Le)),"onDragStart",function(We,je){if((0,ee.default)("Draggable: onDragStart: %j",je),Te.props.onStart(We,(0,X.createDraggableData)(w(Te),je))===!1)return!1;Te.setState({dragging:!0,dragged:!0})}),ie(w(Te),"onDrag",function(We,je){if(!Te.state.dragging)return!1;(0,ee.default)("Draggable: onDrag: %j",je);var Ke,at,Ze=(0,X.createDraggableData)(w(Te),je),fe={x:Ze.x,y:Ze.y,slackX:0,slackY:0};if(Te.props.bounds){var Ne=fe.x,ke=fe.y;fe.x+=Te.state.slackX,fe.y+=Te.state.slackY;var Be=(Ke=(0,X.getBoundPosition)(w(Te),fe.x,fe.y),at=2,function(W){if(Array.isArray(W))return W}(Ke)||function(W,Y){var le=W==null?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(le!=null){var ye,x,j,H,F=[],$=!0,se=!1;try{if(j=(le=le.call(W)).next,Y===0){if(Object(le)!==le)return;$=!1}else for(;!($=(ye=j.call(le)).done)&&(F.push(ye.value),F.length!==Y);$=!0);}catch(he){se=!0,x=he}finally{try{if(!$&&le.return!=null&&(H=le.return(),Object(H)!==H))return}finally{if(se)throw x}}return F}}(Ke,at)||function(W,Y){if(W){if(typeof W=="string")return l(W,Y);var le=Object.prototype.toString.call(W).slice(8,-1);return le==="Object"&&W.constructor&&(le=W.constructor.name),le==="Map"||le==="Set"?Array.from(W):le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le)?l(W,Y):void 0}}(Ke,at)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),nt=Be[0],ft=Be[1];fe.x=nt,fe.y=ft,fe.slackX=Te.state.slackX+(Ne-fe.x),fe.slackY=Te.state.slackY+(ke-fe.y),Ze.x=fe.x,Ze.y=fe.y,Ze.deltaX=fe.x-Te.state.x,Ze.deltaY=fe.y-Te.state.y}if(Te.props.onDrag(We,Ze)===!1)return!1;Te.setState(fe)}),ie(w(Te),"onDragStop",function(We,je){if(!Te.state.dragging||Te.props.onStop(We,(0,X.createDraggableData)(w(Te),je))===!1)return!1;(0,ee.default)("Draggable: onDragStop: %j",je);var Ke={dragging:!1,slackX:0,slackY:0};if(Te.props.position){var at=Te.props.position,Ze=at.x,fe=at.y;Ke.x=Ze,Ke.y=fe}Te.setState(Ke)}),Te.state={dragging:!1,dragged:!1,x:Le.position?Le.position.x:Le.defaultPosition.x,y:Le.position?Le.position.y:Le.defaultPosition.y,prevPropsPosition:a({},Le.position),slackX:0,slackY:0,isElementSVG:!1},!Le.position||Le.onDrag||Le.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Te}return ce=Ie,Q=[{key:"getDerivedStateFromProps",value:function(Le,Te){var We=Le.position,je=Te.prevPropsPosition;return!We||je&&We.x===je.x&&We.y===je.y?null:((0,ee.default)("Draggable: getDerivedStateFromProps %j",{position:We,prevPropsPosition:je}),{x:We.x,y:We.y,prevPropsPosition:a({},We)})}}],(ve=[{key:"componentDidMount",value:function(){window.SVGElement!==void 0&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Le,Te;return(Le=(Te=this.props)===null||Te===void 0||(Te=Te.nodeRef)===null||Te===void 0?void 0:Te.current)!==null&&Le!==void 0?Le:A.default.findDOMNode(this)}},{key:"render",value:function(){var Le,Te=this.props,We=(Te.axis,Te.bounds,Te.children),je=Te.defaultPosition,Ke=Te.defaultClassName,at=Te.defaultClassNameDragging,Ze=Te.defaultClassNameDragged,fe=Te.position,Ne=Te.positionOffset,ke=(Te.scale,function(ye,x){if(ye==null)return{};var j,H,F=function(se,he){if(se==null)return{};var _e,Ae,Fe={},Me=Object.keys(se);for(Ae=0;Ae<Me.length;Ae++)_e=Me[Ae],he.indexOf(_e)>=0||(Fe[_e]=se[_e]);return Fe}(ye,x);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(ye);for(H=0;H<$.length;H++)j=$[H],x.indexOf(j)>=0||Object.prototype.propertyIsEnumerable.call(ye,j)&&(F[j]=ye[j])}return F}(Te,n)),Be={},nt=null,ft=!fe||this.state.dragging,W=fe||je,Y={x:(0,X.canDragX)(this)&&ft?this.state.x:W.x,y:(0,X.canDragY)(this)&&ft?this.state.y:W.y};this.state.isElementSVG?nt=(0,V.createSVGTransform)(Y,Ne):Be=(0,V.createCSSTransform)(Y,Ne);var le=(0,M.default)(We.props.className||"",Ke,(d(Le={},at,this.state.dragging),d(Le,Ze,this.state.dragged),Le));return T.createElement(re.default,J({},ke,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),T.cloneElement(T.Children.only(We),{className:le,style:a(a({},We.props.style),Be),transform:nt}))}}])&&c(ce.prototype,ve),Q&&c(ce,Q),Object.defineProperty(ce,"prototype",{writable:!1}),Ie}(T.Component);o.default=pe,ie(pe,"displayName","Draggable"),ie(pe,"propTypes",a(a({},re.default.propTypes),{},{axis:P.default.oneOf(["both","x","y","none"]),bounds:P.default.oneOfType([P.default.shape({left:P.default.number,right:P.default.number,top:P.default.number,bottom:P.default.number}),P.default.string,P.default.oneOf([!1])]),defaultClassName:P.default.string,defaultClassNameDragging:P.default.string,defaultClassNameDragged:P.default.string,defaultPosition:P.default.shape({x:P.default.number,y:P.default.number}),positionOffset:P.default.shape({x:P.default.oneOfType([P.default.number,P.default.string]),y:P.default.oneOfType([P.default.number,P.default.string])}),position:P.default.shape({x:P.default.number,y:P.default.number}),className:te.dontSetMe,style:te.dontSetMe,transform:te.dontSetMe})),ie(pe,"defaultProps",a(a({},re.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},9466:(t,o,e)=>{function n(L,J){return function(ie){if(Array.isArray(ie))return ie}(L)||function(ie,pe){var ne=ie==null?null:typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(ne!=null){var ce,ve,Q,ae,Se=[],Ee=!0,Ie=!1;try{if(Q=(ne=ne.call(ie)).next,pe===0){if(Object(ne)!==ne)return;Ee=!1}else for(;!(Ee=(ce=Q.call(ne)).done)&&(Se.push(ce.value),Se.length!==pe);Ee=!0);}catch(Le){Ie=!0,ve=Le}finally{try{if(!Ee&&ne.return!=null&&(ae=ne.return(),Object(ae)!==ae))return}finally{if(Ie)throw ve}}return Se}}(L,J)||function(ie,pe){if(ie){if(typeof ie=="string")return i(ie,pe);var ne=Object.prototype.toString.call(ie).slice(8,-1);return ne==="Object"&&ie.constructor&&(ne=ie.constructor.name),ne==="Map"||ne==="Set"?Array.from(ie):ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne)?i(ie,pe):void 0}}(L,J)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function i(L,J){(J==null||J>L.length)&&(J=L.length);for(var ie=0,pe=new Array(J);ie<J;ie++)pe[ie]=L[ie];return pe}function a(L,J){for(var ie=0;ie<J.length;ie++){var pe=J[ie];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(L,(ne=function(ce,ve){if(p(ce)!=="object"||ce===null)return ce;var Q=ce[Symbol.toPrimitive];if(Q!==void 0){var ae=Q.call(ce,"string");if(p(ae)!=="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ce)}(pe.key),p(ne)==="symbol"?ne:String(ne)),pe)}var ne}function d(L,J){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ie,pe){return ie.__proto__=pe,ie},d(L,J)}function l(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function c(L){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)},c(L)}function p(L){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},p(L)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var g=function(L,J){if(L&&L.__esModule)return L;if(L===null||p(L)!=="object"&&typeof L!="function")return{default:L};var ie=V(J);if(ie&&ie.has(L))return ie.get(L);var pe={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ce in L)if(ce!=="default"&&Object.prototype.hasOwnProperty.call(L,ce)){var ve=ne?Object.getOwnPropertyDescriptor(L,ce):null;ve&&(ve.get||ve.set)?Object.defineProperty(pe,ce,ve):pe[ce]=L[ce]}return pe.default=L,ie&&ie.set(L,pe),pe}(e(4741)),w=M(e(6526)),S=M(e(4741)),C=e(5676),T=e(6102),P=e(6339),A=M(e(7165));function M(L){return L&&L.__esModule?L:{default:L}}function V(L){if(typeof WeakMap!="function")return null;var J=new WeakMap,ie=new WeakMap;return(V=function(pe){return pe?ie:J})(L)}function X(L,J,ie){return(J=function(pe){var ne=function(ce,ve){if(p(ce)!=="object"||ce===null)return ce;var Q=ce[Symbol.toPrimitive];if(Q!==void 0){var ae=Q.call(ce,"string");if(p(ae)!=="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ce)}(pe);return p(ne)==="symbol"?ne:String(ne)}(J))in L?Object.defineProperty(L,J,{value:ie,enumerable:!0,configurable:!0,writable:!0}):L[J]=ie,L}var te={start:"touchstart",move:"touchmove",stop:"touchend"},re={start:"mousedown",move:"mousemove",stop:"mouseup"},ee=re,G=function(L){(function(Q,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ae&&ae.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),Object.defineProperty(Q,"prototype",{writable:!1}),ae&&d(Q,ae)})(ve,L);var J,ie,pe,ne,ce=(pe=ve,ne=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Q,ae=c(pe);if(ne){var Se=c(this).constructor;Q=Reflect.construct(ae,arguments,Se)}else Q=ae.apply(this,arguments);return function(Ee,Ie){if(Ie&&(p(Ie)==="object"||typeof Ie=="function"))return Ie;if(Ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(Ee)}(this,Q)});function ve(){var Q;return function(ae,Se){if(!(ae instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ve),X(l(Q=ce.apply(this,arguments)),"dragging",!1),X(l(Q),"lastX",NaN),X(l(Q),"lastY",NaN),X(l(Q),"touchIdentifier",null),X(l(Q),"mounted",!1),X(l(Q),"handleDragStart",function(ae){if(Q.props.onMouseDown(ae),!Q.props.allowAnyClick&&typeof ae.button=="number"&&ae.button!==0)return!1;var Se=Q.findDOMNode();if(!Se||!Se.ownerDocument||!Se.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Ee=Se.ownerDocument;if(!(Q.props.disabled||!(ae.target instanceof Ee.defaultView.Node)||Q.props.handle&&!(0,C.matchesSelectorAndParentsTo)(ae.target,Q.props.handle,Se)||Q.props.cancel&&(0,C.matchesSelectorAndParentsTo)(ae.target,Q.props.cancel,Se))){ae.type==="touchstart"&&ae.preventDefault();var Ie=(0,C.getTouchIdentifier)(ae);Q.touchIdentifier=Ie;var Le=(0,T.getControlPosition)(ae,Ie,l(Q));if(Le!=null){var Te=Le.x,We=Le.y,je=(0,T.createCoreData)(l(Q),Te,We);(0,A.default)("DraggableCore: handleDragStart: %j",je),(0,A.default)("calling",Q.props.onStart),Q.props.onStart(ae,je)!==!1&&Q.mounted!==!1&&(Q.props.enableUserSelectHack&&(0,C.addUserSelectStyles)(Ee),Q.dragging=!0,Q.lastX=Te,Q.lastY=We,(0,C.addEvent)(Ee,ee.move,Q.handleDrag),(0,C.addEvent)(Ee,ee.stop,Q.handleDragStop))}}}),X(l(Q),"handleDrag",function(ae){var Se=(0,T.getControlPosition)(ae,Q.touchIdentifier,l(Q));if(Se!=null){var Ee=Se.x,Ie=Se.y;if(Array.isArray(Q.props.grid)){var Le=Ee-Q.lastX,Te=Ie-Q.lastY,We=n((0,T.snapToGrid)(Q.props.grid,Le,Te),2);if(Le=We[0],Te=We[1],!Le&&!Te)return;Ee=Q.lastX+Le,Ie=Q.lastY+Te}var je=(0,T.createCoreData)(l(Q),Ee,Ie);if((0,A.default)("DraggableCore: handleDrag: %j",je),Q.props.onDrag(ae,je)!==!1&&Q.mounted!==!1)Q.lastX=Ee,Q.lastY=Ie;else try{Q.handleDragStop(new MouseEvent("mouseup"))}catch{var Ke=document.createEvent("MouseEvents");Ke.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Q.handleDragStop(Ke)}}}),X(l(Q),"handleDragStop",function(ae){if(Q.dragging){var Se=(0,T.getControlPosition)(ae,Q.touchIdentifier,l(Q));if(Se!=null){var Ee=Se.x,Ie=Se.y;if(Array.isArray(Q.props.grid)){var Le=Ee-Q.lastX||0,Te=Ie-Q.lastY||0,We=n((0,T.snapToGrid)(Q.props.grid,Le,Te),2);Le=We[0],Te=We[1],Ee=Q.lastX+Le,Ie=Q.lastY+Te}var je=(0,T.createCoreData)(l(Q),Ee,Ie);if(Q.props.onStop(ae,je)===!1||Q.mounted===!1)return!1;var Ke=Q.findDOMNode();Ke&&Q.props.enableUserSelectHack&&(0,C.removeUserSelectStyles)(Ke.ownerDocument),(0,A.default)("DraggableCore: handleDragStop: %j",je),Q.dragging=!1,Q.lastX=NaN,Q.lastY=NaN,Ke&&((0,A.default)("DraggableCore: Removing handlers"),(0,C.removeEvent)(Ke.ownerDocument,ee.move,Q.handleDrag),(0,C.removeEvent)(Ke.ownerDocument,ee.stop,Q.handleDragStop))}}}),X(l(Q),"onMouseDown",function(ae){return ee=re,Q.handleDragStart(ae)}),X(l(Q),"onMouseUp",function(ae){return ee=re,Q.handleDragStop(ae)}),X(l(Q),"onTouchStart",function(ae){return ee=te,Q.handleDragStart(ae)}),X(l(Q),"onTouchEnd",function(ae){return ee=te,Q.handleDragStop(ae)}),Q}return J=ve,(ie=[{key:"componentDidMount",value:function(){this.mounted=!0;var Q=this.findDOMNode();Q&&(0,C.addEvent)(Q,te.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Q=this.findDOMNode();if(Q){var ae=Q.ownerDocument;(0,C.removeEvent)(ae,re.move,this.handleDrag),(0,C.removeEvent)(ae,te.move,this.handleDrag),(0,C.removeEvent)(ae,re.stop,this.handleDragStop),(0,C.removeEvent)(ae,te.stop,this.handleDragStop),(0,C.removeEvent)(Q,te.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,C.removeUserSelectStyles)(ae)}}},{key:"findDOMNode",value:function(){var Q,ae;return(Q=this.props)!==null&&Q!==void 0&&Q.nodeRef?(ae=this.props)===null||ae===void 0||(ae=ae.nodeRef)===null||ae===void 0?void 0:ae.current:S.default.findDOMNode(this)}},{key:"render",value:function(){return g.cloneElement(g.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&a(J.prototype,ie),Object.defineProperty(J,"prototype",{writable:!1}),ve}(g.Component);o.default=G,X(G,"displayName","DraggableCore"),X(G,"propTypes",{allowAnyClick:w.default.bool,children:w.default.node.isRequired,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(L,J){if(L[J]&&L[J].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:P.dontSetMe,style:P.dontSetMe,transform:P.dontSetMe}),X(G,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},40:(t,o,e)=>{var n=e(7199),i=n.default,a=n.DraggableCore;t.exports=i,t.exports.default=i,t.exports.DraggableCore=a},5676:(t,o,e)=>{function n(P,A){var M=Object.keys(P);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(P);A&&(V=V.filter(function(X){return Object.getOwnPropertyDescriptor(P,X).enumerable})),M.push.apply(M,V)}return M}function i(P){for(var A=1;A<arguments.length;A++){var M=arguments[A]!=null?arguments[A]:{};A%2?n(Object(M),!0).forEach(function(V){a(P,V,M[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(M)):n(Object(M)).forEach(function(V){Object.defineProperty(P,V,Object.getOwnPropertyDescriptor(M,V))})}return P}function a(P,A,M){return(A=function(V){var X=function(te,re){if(d(te)!=="object"||te===null)return te;var ee=te[Symbol.toPrimitive];if(ee!==void 0){var G=ee.call(te,"string");if(d(G)!=="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(te)}(V);return d(X)==="symbol"?X:String(X)}(A))in P?Object.defineProperty(P,A,{value:M,enumerable:!0,configurable:!0,writable:!0}):P[A]=M,P}function d(P){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},d(P)}Object.defineProperty(o,"__esModule",{value:!0}),o.addClassName=C,o.addEvent=function(P,A,M,V){if(P){var X=i({capture:!0},V);P.addEventListener?P.addEventListener(A,M,X):P.attachEvent?P.attachEvent("on"+A,M):P["on"+A]=M}},o.addUserSelectStyles=function(P){if(P){var A=P.getElementById("react-draggable-style-el");A||((A=P.createElement("style")).type="text/css",A.id="react-draggable-style-el",A.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,A.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,P.getElementsByTagName("head")[0].appendChild(A)),P.body&&C(P.body,"react-draggable-transparent-selection")}},o.createCSSTransform=function(P,A){var M=S(P,A,"px");return a({},(0,c.browserPrefixToKey)("transform",c.default),M)},o.createSVGTransform=function(P,A){return S(P,A,"")},o.getTouch=function(P,A){return P.targetTouches&&(0,l.findInArray)(P.targetTouches,function(M){return A===M.identifier})||P.changedTouches&&(0,l.findInArray)(P.changedTouches,function(M){return A===M.identifier})},o.getTouchIdentifier=function(P){return P.targetTouches&&P.targetTouches[0]?P.targetTouches[0].identifier:P.changedTouches&&P.changedTouches[0]?P.changedTouches[0].identifier:void 0},o.getTranslation=S,o.innerHeight=function(P){var A=P.clientHeight,M=P.ownerDocument.defaultView.getComputedStyle(P);return(A-=(0,l.int)(M.paddingTop))-(0,l.int)(M.paddingBottom)},o.innerWidth=function(P){var A=P.clientWidth,M=P.ownerDocument.defaultView.getComputedStyle(P);return(A-=(0,l.int)(M.paddingLeft))-(0,l.int)(M.paddingRight)},o.matchesSelector=w,o.matchesSelectorAndParentsTo=function(P,A,M){var V=P;do{if(w(V,A))return!0;if(V===M)return!1;V=V.parentNode}while(V);return!1},o.offsetXYFromParent=function(P,A,M){var V=A===A.ownerDocument.body?{left:0,top:0}:A.getBoundingClientRect();return{x:(P.clientX+A.scrollLeft-V.left)/M,y:(P.clientY+A.scrollTop-V.top)/M}},o.outerHeight=function(P){var A=P.clientHeight,M=P.ownerDocument.defaultView.getComputedStyle(P);return(A+=(0,l.int)(M.borderTopWidth))+(0,l.int)(M.borderBottomWidth)},o.outerWidth=function(P){var A=P.clientWidth,M=P.ownerDocument.defaultView.getComputedStyle(P);return(A+=(0,l.int)(M.borderLeftWidth))+(0,l.int)(M.borderRightWidth)},o.removeClassName=T,o.removeEvent=function(P,A,M,V){if(P){var X=i({capture:!0},V);P.removeEventListener?P.removeEventListener(A,M,X):P.detachEvent?P.detachEvent("on"+A,M):P["on"+A]=null}},o.removeUserSelectStyles=function(P){if(P)try{if(P.body&&T(P.body,"react-draggable-transparent-selection"),P.selection)P.selection.empty();else{var A=(P.defaultView||window).getSelection();A&&A.type!=="Caret"&&A.removeAllRanges()}}catch{}};var l=e(6339),c=function(P,A){if(P&&P.__esModule)return P;if(P===null||d(P)!=="object"&&typeof P!="function")return{default:P};var M=p(A);if(M&&M.has(P))return M.get(P);var V={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in P)if(te!=="default"&&Object.prototype.hasOwnProperty.call(P,te)){var re=X?Object.getOwnPropertyDescriptor(P,te):null;re&&(re.get||re.set)?Object.defineProperty(V,te,re):V[te]=P[te]}return V.default=P,M&&M.set(P,V),V}(e(3561));function p(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,M=new WeakMap;return(p=function(V){return V?M:A})(P)}var g="";function w(P,A){return g||(g=(0,l.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(M){return(0,l.isFunction)(P[M])})),!!(0,l.isFunction)(P[g])&&P[g](A)}function S(P,A,M){var V=P.x,X=P.y,te="translate(".concat(V).concat(M,",").concat(X).concat(M,")");if(A){var re="".concat(typeof A.x=="string"?A.x:A.x+M),ee="".concat(typeof A.y=="string"?A.y:A.y+M);te="translate(".concat(re,", ").concat(ee,")")+te}return te}function C(P,A){P.classList?P.classList.add(A):P.className.match(new RegExp("(?:^|\\s)".concat(A,"(?!\\S)")))||(P.className+=" ".concat(A))}function T(P,A){P.classList?P.classList.remove(A):P.className=P.className.replace(new RegExp("(?:^|\\s)".concat(A,"(?!\\S)"),"g"),"")}},3561:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.browserPrefixToKey=i,o.browserPrefixToStyle=function(a,d){return d?"-".concat(d.toLowerCase(),"-").concat(a):a},o.default=void 0,o.getPrefix=n;var e=["Moz","Webkit","O","ms"];function n(){var a,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var l=(a=window.document)===null||a===void 0||(a=a.documentElement)===null||a===void 0?void 0:a.style;if(!l||d in l)return"";for(var c=0;c<e.length;c++)if(i(d,e[c])in l)return e[c];return""}function i(a,d){return d?"".concat(d).concat(function(l){for(var c="",p=!0,g=0;g<l.length;g++)p?(c+=l[g].toUpperCase(),p=!1):l[g]==="-"?p=!0:c+=l[g];return c}(a)):a}o.default=n()},7165:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){}},6102:(t,o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.canDragX=function(d){return d.props.axis==="both"||d.props.axis==="x"},o.canDragY=function(d){return d.props.axis==="both"||d.props.axis==="y"},o.createCoreData=function(d,l,c){var p=!(0,n.isNum)(d.lastX),g=a(d);return p?{node:g,deltaX:0,deltaY:0,lastX:l,lastY:c,x:l,y:c}:{node:g,deltaX:l-d.lastX,deltaY:c-d.lastY,lastX:d.lastX,lastY:d.lastY,x:l,y:c}},o.createDraggableData=function(d,l){var c=d.props.scale;return{node:l.node,x:d.state.x+l.deltaX/c,y:d.state.y+l.deltaY/c,deltaX:l.deltaX/c,deltaY:l.deltaY/c,lastX:d.state.x,lastY:d.state.y}},o.getBoundPosition=function(d,l,c){if(!d.props.bounds)return[l,c];var p=d.props.bounds;p=typeof p=="string"?p:function(M){return{left:M.left,top:M.top,right:M.right,bottom:M.bottom}}(p);var g=a(d);if(typeof p=="string"){var w,S=g.ownerDocument,C=S.defaultView;if(!((w=p==="parent"?g.parentNode:S.querySelector(p))instanceof C.HTMLElement))throw new Error('Bounds selector "'+p+'" could not find an element.');var T=w,P=C.getComputedStyle(g),A=C.getComputedStyle(T);p={left:-g.offsetLeft+(0,n.int)(A.paddingLeft)+(0,n.int)(P.marginLeft),top:-g.offsetTop+(0,n.int)(A.paddingTop)+(0,n.int)(P.marginTop),right:(0,i.innerWidth)(T)-(0,i.outerWidth)(g)-g.offsetLeft+(0,n.int)(A.paddingRight)-(0,n.int)(P.marginRight),bottom:(0,i.innerHeight)(T)-(0,i.outerHeight)(g)-g.offsetTop+(0,n.int)(A.paddingBottom)-(0,n.int)(P.marginBottom)}}return(0,n.isNum)(p.right)&&(l=Math.min(l,p.right)),(0,n.isNum)(p.bottom)&&(c=Math.min(c,p.bottom)),(0,n.isNum)(p.left)&&(l=Math.max(l,p.left)),(0,n.isNum)(p.top)&&(c=Math.max(c,p.top)),[l,c]},o.getControlPosition=function(d,l,c){var p=typeof l=="number"?(0,i.getTouch)(d,l):null;if(typeof l=="number"&&!p)return null;var g=a(c),w=c.props.offsetParent||g.offsetParent||g.ownerDocument.body;return(0,i.offsetXYFromParent)(p||d,w,c.props.scale)},o.snapToGrid=function(d,l,c){return[Math.round(l/d[0])*d[0],Math.round(c/d[1])*d[1]]};var n=e(6339),i=e(5676);function a(d){var l=d.findDOMNode();if(!l)throw new Error("<DraggableCore>: Unmounted during event!");return l}},6339:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.dontSetMe=function(e,n,i){if(e[n])return new Error("Invalid prop ".concat(n," passed to ").concat(i," - do not set this, set it on the child."))},o.findInArray=function(e,n){for(var i=0,a=e.length;i<a;i++)if(n.apply(n,[e[i],i,e]))return e[i]},o.int=function(e){return parseInt(e,10)},o.isFunction=function(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"},o.isNum=function(e){return typeof e=="number"&&!isNaN(e)}},2718:(t,o,e)=>{function n(A){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},n(A)}var i=Object.assign||function(A){for(var M=1;M<arguments.length;M++){var V=arguments[M];for(var X in V)Object.prototype.hasOwnProperty.call(V,X)&&(A[X]=V[X])}return A},a=function(){function A(M,V){for(var X=0;X<V.length;X++){var te=V[X];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(M,te.key,te)}}return function(M,V,X){return V&&A(M.prototype,V),X&&A(M,X),M}}(),d=e(4741),l=p(d),c=p(e(6526));function p(A){return A&&A.__esModule?A:{default:A}}var g={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},w=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],S=function(A,M){M.style.fontSize=A.fontSize,M.style.fontFamily=A.fontFamily,M.style.fontWeight=A.fontWeight,M.style.fontStyle=A.fontStyle,M.style.letterSpacing=A.letterSpacing,M.style.textTransform=A.textTransform},C=!(typeof window>"u"||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),T=function(){return C?"_"+Math.random().toString(36).substr(2,12):void 0},P=function(A){function M(V){(function(te,re){if(!(te instanceof re))throw new TypeError("Cannot call a class as a function")})(this,M);var X=function(te,re){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!re||n(re)!=="object"&&typeof re!="function"?te:re}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,V));return X.inputRef=function(te){X.input=te,typeof X.props.inputRef=="function"&&X.props.inputRef(te)},X.placeHolderSizerRef=function(te){X.placeHolderSizer=te},X.sizerRef=function(te){X.sizer=te},X.state={inputWidth:V.minWidth,inputId:V.id||T(),prevId:V.id},X}return function(V,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+n(X));V.prototype=Object.create(X&&X.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(V,X):V.__proto__=X)}(M,A),a(M,null,[{key:"getDerivedStateFromProps",value:function(V,X){var te=V.id;return te!==X.prevId?{inputId:te||T(),prevId:te}:null}}]),a(M,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(V,X){X.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var V=this.input&&window.getComputedStyle(this.input);V&&(S(V,this.sizer),this.placeHolderSizer&&S(V,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&this.sizer.scrollWidth!==void 0){var V=void 0;V=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(V+=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(V=this.props.minWidth),V!==this.state.inputWidth&&this.setState({inputWidth:V})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var V=this.props.injectStyles;return C&&V?l.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var V=[this.props.defaultValue,this.props.value,""].reduce(function(ee,G){return ee??G}),X=i({},this.props.style);X.display||(X.display="inline-block");var te=i({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),re=function(ee,G){var L={};for(var J in ee)G.indexOf(J)>=0||Object.prototype.hasOwnProperty.call(ee,J)&&(L[J]=ee[J]);return L}(this.props,[]);return function(ee){w.forEach(function(G){return delete ee[G]})}(re),re.className=this.props.inputClassName,re.id=this.state.inputId,re.style=te,l.default.createElement("div",{className:this.props.className,style:X},this.renderStyles(),l.default.createElement("input",i({},re,{ref:this.inputRef})),l.default.createElement("div",{ref:this.sizerRef,style:g},V),this.props.placeholder?l.default.createElement("div",{ref:this.placeHolderSizerRef,style:g},this.props.placeholder):null)}}]),M}(d.Component);P.propTypes={className:c.default.string,defaultValue:c.default.any,extraWidth:c.default.oneOfType([c.default.number,c.default.string]),id:c.default.string,injectStyles:c.default.bool,inputClassName:c.default.string,inputRef:c.default.func,inputStyle:c.default.object,minWidth:c.default.oneOfType([c.default.number,c.default.string]),onAutosize:c.default.func,onChange:c.default.func,placeholder:c.default.string,placeholderIsMinWidth:c.default.bool,style:c.default.object,value:c.default.any},P.defaultProps={minWidth:1,injectStyles:!0},o.Z=P},4015:(t,o)=>{function e(L){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},e(L)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,d=n?Symbol.for("react.fragment"):60107,l=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,p=n?Symbol.for("react.provider"):60109,g=n?Symbol.for("react.context"):60110,w=n?Symbol.for("react.async_mode"):60111,S=n?Symbol.for("react.concurrent_mode"):60111,C=n?Symbol.for("react.forward_ref"):60112,T=n?Symbol.for("react.suspense"):60113,P=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,M=n?Symbol.for("react.lazy"):60116,V=n?Symbol.for("react.block"):60121,X=n?Symbol.for("react.fundamental"):60117,te=n?Symbol.for("react.responder"):60118,re=n?Symbol.for("react.scope"):60119;function ee(L){if(e(L)==="object"&&L!==null){var J=L.$$typeof;switch(J){case i:switch(L=L.type){case w:case S:case d:case c:case l:case T:return L;default:switch(L=L&&L.$$typeof){case g:case C:case M:case A:case p:return L;default:return J}}case a:return J}}}function G(L){return ee(L)===S}o.AsyncMode=w,o.ConcurrentMode=S,o.ContextConsumer=g,o.ContextProvider=p,o.Element=i,o.ForwardRef=C,o.Fragment=d,o.Lazy=M,o.Memo=A,o.Portal=a,o.Profiler=c,o.StrictMode=l,o.Suspense=T,o.isAsyncMode=function(L){return G(L)||ee(L)===w},o.isConcurrentMode=G,o.isContextConsumer=function(L){return ee(L)===g},o.isContextProvider=function(L){return ee(L)===p},o.isElement=function(L){return e(L)==="object"&&L!==null&&L.$$typeof===i},o.isForwardRef=function(L){return ee(L)===C},o.isFragment=function(L){return ee(L)===d},o.isLazy=function(L){return ee(L)===M},o.isMemo=function(L){return ee(L)===A},o.isPortal=function(L){return ee(L)===a},o.isProfiler=function(L){return ee(L)===c},o.isStrictMode=function(L){return ee(L)===l},o.isSuspense=function(L){return ee(L)===T},o.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===d||L===S||L===c||L===l||L===T||L===P||e(L)==="object"&&L!==null&&(L.$$typeof===M||L.$$typeof===A||L.$$typeof===p||L.$$typeof===g||L.$$typeof===C||L.$$typeof===X||L.$$typeof===te||L.$$typeof===re||L.$$typeof===V)},o.typeOf=ee},5532:(t,o,e)=>{t.exports=e(4015)},3108:(t,o,e)=>{var n=e(593),i=e(7701),a=e(4803),d=n("RegExp.prototype.exec"),l=i("%TypeError%");t.exports=function(c){if(!a(c))throw new l("`regex` must be a RegExp");return function(p){return d(c,p)!==null}}},7990:(t,o,e)=>{var n=e(7701),i=e(4919),a=e(1020)(),d=e(3820),l=n("%TypeError%"),c=n("%Math.floor%");t.exports=function(p,g){if(typeof p!="function")throw new l("`fn` is not a function");if(typeof g!="number"||g<0||g>4294967295||c(g)!==g)throw new l("`length` must be a positive 32-bit integer");var w=arguments.length>2&&!!arguments[2],S=!0,C=!0;if("length"in p&&d){var T=d(p,"length");T&&!T.configurable&&(S=!1),T&&!T.writable&&(C=!1)}return(S||C||!w)&&(a?i(p,"length",g,!0,!0):i(p,"length",g)),p}},7212:(t,o,e)=>{var n=e(9793),i=e(5217),a=e(593)("String.prototype.replace"),d=/^\s$/.test("᠎"),l=d?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,c=d?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var p=i(n(this));return a(a(p,l,""),c,"")}},2293:(t,o,e)=>{var n=e(4373),i=e(4347),a=e(9793),d=e(7212),l=e(9937),c=e(9183),p=n(l()),g=function(w){return a(w),p(w)};i(g,{getPolyfill:l,implementation:d,shim:c}),t.exports=g},9937:(t,o,e)=>{var n=e(7212);t.exports=function(){return String.prototype.trim&&"​".trim()==="​"&&"᠎".trim()==="᠎"&&"_᠎".trim()==="_᠎"&&"᠎_".trim()==="᠎_"?String.prototype.trim:n}},9183:(t,o,e)=>{var n=e(4347),i=e(9937);t.exports=function(){var a=i();return n(String.prototype,{trim:a},{trim:function(){return String.prototype.trim!==a}}),a}},8841:(t,o)=>{var e=[["ثانية","ثانيتين","%s ثوان","%s ثانية"],["دقيقة","دقيقتين","%s دقائق","%s دقيقة"],["ساعة","ساعتين","%s ساعات","%s ساعة"],["يوم","يومين","%s أيام","%s يوماً"],["أسبوع","أسبوعين","%s أسابيع","%s أسبوعاً"],["شهر","شهرين","%s أشهر","%s شهراً"],["عام","عامين","%s أعوام","%s عاماً"]];o.Z=function(n,i){if(i===0)return["منذ لحظات","بعد لحظات"];var a,d,l=(a=Math.floor(i/2),(d=n)<3?e[a][d-1]:d>=3&&d<=10?e[a][2]:e[a][3]);return["منذ "+l,"بعد "+l]}},2463:(t,o)=>{o.Z=function(e,n){var i=0;return(n==1||n==3||n==5||n==7||n==9||n==11||n==13)&&e>=5&&(i=1),[[["právě teď","právě teď"]],[["před %s vteřinami","za %s vteřiny"],["před %s vteřinami","za %s vteřin"]],[["před minutou","za minutu"]],[["před %s minutami","za %s minuty"],["před %s minutami","za %s minut"]],[["před hodinou","za hodinu"]],[["před %s hodinami","za %s hodiny"],["před %s hodinami","za %s hodin"]],[["včera","zítra"]],[["před %s dny","za %s dny"],["před %s dny","za %s dnů"]],[["minulý týden","příští týden"]],[["před %s týdny","za %s týdny"],["před %s týdny","za %s týdnů"]],[["minulý měsíc","přístí měsíc"]],[["před %s měsíci","za %s měsíce"],["před %s měsíci","za %s měsíců"]],[["před rokem","přístí rok"]],[["před %s lety","za %s roky"],["před %s lety","za %s let"]]][n][i]}},3506:(t,o)=>{o.Z=function(e,n){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][n]}},1975:(t,o)=>{o.Z=function(e,n){return[["μόλις τώρα","σε λίγο"],["%s δευτερόλεπτα πριν","σε %s δευτερόλεπτα"],["1 λεπτό πριν","σε 1 λεπτό"],["%s λεπτά πριν","σε %s λεπτά"],["1 ώρα πριν","σε 1 ώρα"],["%s ώρες πριν","σε %s ώρες"],["1 μέρα πριν","σε 1 μέρα"],["%s μέρες πριν","σε %s μέρες"],["1 εβδομάδα πριν","σε 1 εβδομάδα"],["%s εβδομάδες πριν","σε %s εβδομάδες"],["1 μήνα πριν","σε 1 μήνα"],["%s μήνες πριν","σε %s μήνες"],["1 χρόνο πριν","σε 1 χρόνο"],["%s χρόνια πριν","σε %s χρόνια"]][n]}},7813:(t,o)=>{o.Z=function(e,n){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 día","en 1 día"],["hace %s días","en %s días"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 año","en 1 año"],["hace %s años","en %s años"]][n]}},5194:(t,o)=>{o.Z=function(e,n){return[["juuri äsken","juuri nyt"],["%s sekuntia sitten","%s sekunnin päästä"],["minuutti sitten","minuutin päästä"],["%s minuuttia sitten","%s minuutin päästä"],["tunti sitten","tunnin päästä"],["%s tuntia sitten","%s tunnin päästä"],["päivä sitten","päivän päästä"],["%s päivää sitten","%s päivän päästä"],["viikko sitten","viikon päästä"],["%s viikkoa sitten","%s viikon päästä"],["kuukausi sitten","kuukauden päästä"],["%s kuukautta sitten","%s kuukauden päästä"],["vuosi sitten","vuoden päästä"],["%s vuotta sitten","%s vuoden päästä"]][n]}},3971:(t,o)=>{o.Z=function(e,n){return[["à l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][n]}},5211:(t,o)=>{o.Z=function(e,n){return[["xusto agora","daquí a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 día","nun día"],["hai %s días","en %s días"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][n]}},3335:(t,o)=>{o.Z=function(e,n){return[["अभी","कुछ समय"],["%s सेकंड पहले","%s सेकंड में"],["1 मिनट पहले","1 मिनट में"],["%s मिनट पहले","%s मिनट में"],["1 घंटे पहले","1 घंटे में"],["%s घंटे पहले","%s घंटे में"],["1 दिन पहले","1 दिन में"],["%s दिन पहले","%s दिनों में"],["1 सप्ताह पहले","1 सप्ताह में"],["%s हफ्ते पहले","%s हफ्तों में"],["1 महीने पहले","1 महीने में"],["%s महीने पहले","%s महीनों में"],["1 साल पहले","1 साल में"],["%s साल पहले","%s साल में"]][n]}},6509:(t,o)=>{o.Z=function(e,n){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][n]}},6244:(t,o)=>{o.Z=function(e,n){return[["すこし前","すぐに"],["%s秒前","%s秒以内"],["1分前","1分以内"],["%s分前","%s分以内"],["1時間前","1時間以内"],["%s時間前","%s時間以内"],["1日前","1日以内"],["%s日前","%s日以内"],["1週間前","1週間以内"],["%s週間前","%s週間以内"],["1ヶ月前","1ヶ月以内"],["%sヶ月前","%sヶ月以内"],["1年前","1年以内"],["%s年前","%s年以内"]][n]}},5626:(t,o)=>{o.Z=function(e,n){return[["방금","곧"],["%s초 전","%s초 후"],["1분 전","1분 후"],["%s분 전","%s분 후"],["1시간 전","1시간 후"],["%s시간 전","%s시간 후"],["1일 전","1일 후"],["%s일 전","%s일 후"],["1주일 전","1주일 후"],["%s주일 전","%s주일 후"],["1개월 전","1개월 후"],["%s개월 전","%s개월 후"],["1년 전","1년 후"],["%s년 전","%s년 후"]][n]}},4178:(t,o)=>{o.Z=function(e,n){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][n]}},3099:(t,o)=>{o.Z=function(e,n){return[["agora mesmo","agora"],["há %s segundos","em %s segundos"],["há um minuto","em um minuto"],["há %s minutos","em %s minutos"],["há uma hora","em uma hora"],["há %s horas","em %s horas"],["há um dia","em um dia"],["há %s dias","em %s dias"],["há uma semana","em uma semana"],["há %s semanas","em %s semanas"],["há um mês","em um mês"],["há %s meses","em %s meses"],["há um ano","em um ano"],["há %s anos","em %s anos"]][n]}},2404:(t,o)=>{function e(g,w,S,C,T){var P=T%10,A=C;return T===1?A=g:P===1&&T>20?A=w:P>1&&P<5&&(T>20||T<10)&&(A=S),A}var n=e.bind(null,"секунду","%s секунду","%s секунды","%s секунд"),i=e.bind(null,"минуту","%s минуту","%s минуты","%s минут"),a=e.bind(null,"час","%s час","%s часа","%s часов"),d=e.bind(null,"день","%s день","%s дня","%s дней"),l=e.bind(null,"неделю","%s неделю","%s недели","%s недель"),c=e.bind(null,"месяц","%s месяц","%s месяца","%s месяцев"),p=e.bind(null,"год","%s год","%s года","%s лет");o.Z=function(g,w){switch(w){case 0:return["только что","через несколько секунд"];case 1:return[n(g)+" назад","через "+n(g)];case 2:case 3:return[i(g)+" назад","через "+i(g)];case 4:case 5:return[a(g)+" назад","через "+a(g)];case 6:return["вчера","завтра"];case 7:return[d(g)+" назад","через "+d(g)];case 8:case 9:return[l(g)+" назад","через "+l(g)];case 10:case 11:return[c(g)+" назад","через "+c(g)];case 12:case 13:return[p(g)+" назад","через "+p(g)];default:return["",""]}}},8248:(t,o)=>{o.Z=function(e,n){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 månad sedan","om 1 månad"],["%s månader sedan","om %s månader"],["1 år sedan","om 1 år"],["%s år sedan","om %s år"]][n]}},4475:(t,o)=>{o.Z=function(e,n){return[["เมื่อสักครู่นี้","อีกสักครู่"],["%s วินาทีที่แล้ว","ใน %s วินาที"],["1 นาทีที่แล้ว","ใน 1 นาที"],["%s นาทีที่แล้ว","ใน %s นาที"],["1 ชั่วโมงที่แล้ว","ใน 1 ชั่วโมง"],["%s ชั่วโมงที่แล้ว","ใน %s ชั่วโมง"],["1 วันที่แล้ว","ใน 1 วัน"],["%s วันที่แล้ว","ใน %s วัน"],["1 อาทิตย์ที่แล้ว","ใน 1 อาทิตย์"],["%s อาทิตย์ที่แล้ว","ใน %s อาทิตย์"],["1 เดือนที่แล้ว","ใน 1 เดือน"],["%s เดือนที่แล้ว","ใน %s เดือน"],["1 ปีที่แล้ว","ใน 1 ปี"],["%s ปีที่แล้ว","ใน %s ปี"]][n]}},1311:(t,o)=>{o.Z=function(e,n){return[["az önce","şimdi"],["%s saniye önce","%s saniye içinde"],["1 dakika önce","1 dakika içinde"],["%s dakika önce","%s dakika içinde"],["1 saat önce","1 saat içinde"],["%s saat önce","%s saat içinde"],["1 gün önce","1 gün içinde"],["%s gün önce","%s gün içinde"],["1 hafta önce","1 hafta içinde"],["%s hafta önce","%s hafta içinde"],["1 ay önce","1 ay içinde"],["%s ay önce","%s ay içinde"],["1 yıl önce","1 yıl içinde"],["%s yıl önce","%s yıl içinde"]][n]}},3211:(t,o)=>{var e=["秒","分钟","小时","天","周","个月","年"];o.Z=function(n,i){if(i===0)return["刚刚","片刻后"];var a=e[~~(i/2)];return[n+" "+a+"前",n+" "+a+"后"]}},7883:(t,o)=>{o.Z=function(e,n){return[["剛剛","片刻後"],["%s 秒前","%s 秒後"],["1 分鐘前","1 分鐘後"],["%s 分鐘前","%s 分鐘後"],["1 小時前","1 小時後"],["%s 小時前","%s 小時後"],["1 天前","1 天後"],["%s 天前","%s 天後"],["1 週前","1 週後"],["%s 週前","%s 週後"],["1 個月前","1 個月後"],["%s 個月前","%s 個月後"],["1 年前","1 年後"],["%s 年前","%s 年後"]][n]}},8773:t=>{function o(){}o.prototype={on:function(e,n,i){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:n,ctx:i}),this},once:function(e,n,i){var a=this;function d(){a.off(e,d),n.apply(i,arguments)}return d._=n,this.on(e,d,i)},emit:function(e){for(var n=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),a=0,d=i.length;a<d;a++)i[a].fn.apply(i[a].ctx,n);return this},off:function(e,n){var i=this.e||(this.e={}),a=i[e],d=[];if(a&&n)for(var l=0,c=a.length;l<c;l++)a[l].fn!==n&&a[l].fn._!==n&&d.push(a[l]);return d.length?i[e]=d:delete i[e],this}},t.exports=o,t.exports.TinyEmitter=o},2459:t=>{t.exports=function(){}},4654:()=>{},9898:(t,o,e)=>{var n=e(7701),i=e(593),a=n("%TypeError%"),d=e(2983),l=n("%Reflect.apply%",!0)||i("Function.prototype.apply");t.exports=function(c,p){var g=arguments.length>2?arguments[2]:[];if(!d(g))throw new a("Assertion failed: optional `argumentsList`, if provided, must be a List");return l(c,p,g)}},9368:(t,o,e)=>{var n=e(7701)("%TypeError%"),i=e(7594),a=e(7163),d=e(2764);t.exports=function(l,c){if(d(l)!=="Object")throw new n("Assertion failed: Type(O) is not Object");if(!a(c))throw new n("Assertion failed: IsPropertyKey(P) is not true, got "+i(c));return l[c]}},7967:(t,o,e)=>{var n=e(7701)("%TypeError%"),i=e(7163),a=e(2764);t.exports=function(d,l){if(a(d)!=="Object")throw new n("Assertion failed: `O` must be an Object");if(!i(l))throw new n("Assertion failed: `P` must be a Property Key");return l in d}},2983:(t,o,e)=>{t.exports=e(3089)},6376:(t,o,e)=>{t.exports=e(1493)},7163:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(e){return typeof e=="string"||o(e)==="symbol"}},4130:(t,o,e)=>{var n=e(7701)("%TypeError%"),i=e(9368),a=e(2990),d=e(2764);t.exports=function(l){if(d(l)!=="Object")throw new n("Assertion failed: `obj` must be an Object");return a(i(l,"length"))}},9793:(t,o,e)=>{t.exports=e(5152)},1758:(t,o,e)=>{var n=e(7701),i=n("%Number%"),a=n("%RegExp%"),d=n("%TypeError%"),l=n("%parseInt%"),c=e(593),p=e(3108),g=c("String.prototype.slice"),w=p(/^0b[01]+$/i),S=p(/^0o[0-7]+$/i),C=p(/^[-+]0x[0-9a-f]+$/i),T=p(new a("["+["","​","￾"].join("")+"]","g")),P=e(2293),A=e(2764);t.exports=function M(V){if(A(V)!=="String")throw new d("Assertion failed: `argument` is not a String");if(w(V))return i(l(g(V,2),2));if(S(V))return i(l(g(V,2),8));if(T(V)||C(V))return NaN;var X=P(V);return X!==V?M(X):i(V)}},6769:(t,o,e)=>{var n=e(3916),i=e(8973),a=e(1256),d=e(367);t.exports=function(l){var c=n(l);return a(c)||c===0?0:d(c)?i(c):c}},2990:(t,o,e)=>{var n=e(7622),i=e(6769);t.exports=function(a){var d=i(a);return d<=0?0:d>n?n:d}},3916:(t,o,e)=>{function n(g){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},n(g)}var i=e(7701),a=i("%TypeError%"),d=i("%Number%"),l=e(7544),c=e(306),p=e(1758);t.exports=function(g){var w=l(g)?g:c(g,d);if(n(w)==="symbol")throw new a("Cannot convert a Symbol value to a number");if(typeof w=="bigint")throw new a("Conversion from 'BigInt' to 'number' is not allowed.");return typeof w=="string"?p(w):d(w)}},2835:(t,o,e)=>{var n=e(7701)("%Object%"),i=e(9793);t.exports=function(a){return i(a),n(a)}},306:(t,o,e)=>{var n=e(2358);t.exports=function(i){return arguments.length>1?n(i,arguments[1]):n(i)}},5217:(t,o,e)=>{function n(l){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(l)}var i=e(7701),a=i("%String%"),d=i("%TypeError%");t.exports=function(l){if(n(l)==="symbol")throw new d("Cannot convert a Symbol value to a string");return a(l)}},2764:(t,o,e)=>{function n(a){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n(a)}var i=e(3986);t.exports=function(a){return n(a)==="symbol"?"Symbol":typeof a=="bigint"?"BigInt":i(a)}},9218:(t,o,e)=>{var n=e(2764),i=Math.floor;t.exports=function(a){return n(a)==="BigInt"?a:i(a)}},8973:(t,o,e)=>{var n=e(7701),i=e(9218),a=n("%TypeError%");t.exports=function(d){if(typeof d!="number"&&typeof d!="bigint")throw new a("argument must be a Number or a BigInt");var l=d<0?-i(-d):i(d);return l===0?0:l}},5152:(t,o,e)=>{var n=e(7701)("%TypeError%");t.exports=function(i,a){if(i==null)throw new n(a||"Cannot call method on "+i);return i}},3986:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(e){return e===null?"Null":e===void 0?"Undefined":typeof e=="function"||o(e)==="object"?"Object":typeof e=="number"?"Number":typeof e=="boolean"?"Boolean":typeof e=="string"?"String":void 0}},3089:(t,o,e)=>{var n=e(7701)("%Array%"),i=!n.isArray&&e(593)("Object.prototype.toString");t.exports=n.isArray||function(a){return i(a)==="[object Array]"}},367:(t,o,e)=>{var n=e(1256);t.exports=function(i){return(typeof i=="number"||typeof i=="bigint")&&!n(i)&&i!==1/0&&i!==-1/0}},1256:t=>{t.exports=Number.isNaN||function(o){return o!=o}},7544:t=>{function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}t.exports=function(e){return e===null||typeof e!="function"&&o(e)!=="object"}},7622:t=>{t.exports=Number.MAX_SAFE_INTEGER||9007199254740991}},dd={};function ct(t){var o=dd[t];if(o!==void 0)return o.exports;var e=dd[t]={exports:{}};return $b[t].call(e.exports,e,e.exports,ct),e.exports}ct.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return ct.d(o,{a:o}),o},ct.d=(t,o)=>{for(var e in o)ct.o(o,e)&&!ct.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ct.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),ct.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var Lp={};(()=>{ct.d(Lp,{Z:()=>fy});var t=ct(4741),o=ct(8773),e=ct.n(o),n=ct(40),i=ct.n(n),a=["second","minute","hour","day","week","month","year"],d=["秒","分钟","小时","天","周","个月","年"],l={},c=function(r,s){l[r]=s},p=function(r){return l[r]||l.en_US},g=[60,60,24,7,365/7/12,12];function w(r){return r instanceof Date?r:!isNaN(r)||/^\d+$/.test(r)?new Date(parseInt(r)):(r=(r||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(r))}function S(r,s){for(var f=r<0?1:0,h=r=Math.abs(r),u=0;r>=g[u]&&u<g.length;u++)r/=g[u];return(r=Math.floor(r))>((u*=2)==0?9:1)&&(u+=1),s(r,u,h)[f].replace("%s",r.toString())}function C(r,s){return(+(s?w(s):new Date)-+w(r))/1e3}var T="timeago-id";function P(r){return parseInt(r.getAttribute(T))}var A={},M=function(r){clearTimeout(r),delete A[r]};function V(r,s,f,h){M(P(r));var u=h.relativeDate,b=h.minInterval,v=C(s,u);r.innerText=S(v,f);var y=setTimeout(function(){V(r,s,f,h)},Math.min(1e3*Math.max(function(m){for(var _=1,E=0,O=Math.abs(m);m>=g[E]&&E<g.length;E++)m/=g[E],_*=g[E];return O=(O%=_)?_-O:_,Math.ceil(O)}(v),b||1),2147483647));A[y]=0,function(m,_){m.setAttribute(T,_)}(r,y)}function X(r){r?M(P(r)):Object.keys(A).forEach(M)}c("en_US",function(r,s){if(s===0)return["just now","right now"];var f=a[Math.floor(s/2)];return r>1&&(f+="s"),[r+" "+f+" ago","in "+r+" "+f]}),c("zh_CN",function(r,s){if(s===0)return["刚刚","片刻后"];var f=d[~~(s/2)];return[r+" "+f+"前",r+" "+f+"后"]});var te,re=(te=function(r,s){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var u in h)h.hasOwnProperty(u)&&(f[u]=h[u])},te(r,s)},function(r,s){function f(){this.constructor=r}te(r,s),r.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}),ee=function(){return ee=Object.assign||function(r){for(var s,f=1,h=arguments.length;f<h;f++)for(var u in s=arguments[f])Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u]);return r},ee.apply(this,arguments)},G=function(r){function s(){var f=r!==null&&r.apply(this,arguments)||this;return f.dom=null,f}return re(s,r),s.prototype.componentDidMount=function(){this.renderTimeAgo()},s.prototype.componentDidUpdate=function(){this.renderTimeAgo()},s.prototype.renderTimeAgo=function(){var f,h=this.props,u=h.live,b=h.datetime,v=h.locale,y=h.opts;X(this.dom),u!==!1&&(this.dom.setAttribute("datetime",""+((f=b)instanceof Date?f.getTime():f)),function(m,_,E){(m.length?m:[m]).forEach(function(O){V(O,function(D){return D.getAttribute("datetime")}(O),p(_),E||{})})}(this.dom,v,y))},s.prototype.componentWillUnmount=function(){X(this.dom)},s.prototype.render=function(){var f=this,h=this.props,u=h.datetime,b=(h.live,h.locale),v=h.opts,y=function(m,_){var E={};for(var O in m)Object.prototype.hasOwnProperty.call(m,O)&&_.indexOf(O)<0&&(E[O]=m[O]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function"){var D=0;for(O=Object.getOwnPropertySymbols(m);D<O.length;D++)_.indexOf(O[D])<0&&Object.prototype.propertyIsEnumerable.call(m,O[D])&&(E[O[D]]=m[O[D]])}return E}(h,["datetime","live","locale","opts"]);return t.createElement("time",ee({ref:function(m){f.dom=m}},y),function(m,_,E){return S(C(m,E&&E.relativeDate),p(_))}(u,b,v))},s.defaultProps={live:!0,className:""},s}(t.PureComponent);const L=G;var J=ct(8436),ie=ct.n(J);const pe=JSON.parse('{"Add a comment...":"إضافة تعليق","Add a reply...":"إضافة رد","Add tag...":"إضافة علامة","Cancel":"إلغاء","Close":"إغلاق","Edit":"Edit","Delete":"Delete","Ok":"تم"}'),ne=JSON.parse('{"Add a comment...":"Napsat komentář...","Add a reply...":"Odpovědět...","Add tag...":"Přidat štítek...","Cancel":"Zrušit","Close":"Zavřít","Edit":"Upravit","Delete":"Smazat","Ok":"Ok"}'),ce=JSON.parse('{"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...","Cancel":"Abbrechen","Close":"Schliessen","Edit":"Bearbeiten","Delete":"Löschen","Ok":"Ok"}'),ve=JSON.parse('{"Add a comment...":"Σχολίασε...","Add a reply...":"Απάντησε...","Add tag...":"Πρόσθεσε tag...","Cancel":"Άκυρο","Close":"Κλείσιμο","Edit":"Επεξεργασία","Delete":"Διαγραφή","Ok":"Ok"}'),Q=JSON.parse('{"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Cerrar","Edit":"Editar","Delete":"Eliminar","Ok":"Ok"}'),ae=JSON.parse('{"Add a comment...":"Lisää kommentti","Add a reply...":"Lisää vastaus","Add tag...":"Lisää tunniste","Cancel":"Peruuta","Close":"Sulje","Edit":"Muokkaa","Delete":"Poista","Ok":"Ok"}'),Se=JSON.parse('{"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une réponse...","Add tag...":"Ajouter une étiquette...","Cancel":"Annuler","Close":"Fermer","Edit":"Éditer","Delete":"Supprimer","Ok":"Ok"}'),Ee=JSON.parse('{"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Pechar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}'),Ie=JSON.parse('{"Add a comment...":"टिप्पणी जोड़ें","Add a reply...":"जवाब दें","Add tag...":"टैग लगाएँ","Cancel":"रद्द करें","Close":"बंद करें","Edit":"संपादित करें","Delete":"हटाएँ","Ok":"ठीक है"}'),Le=JSON.parse('{"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...","Cancel":"Annulla","Close":"Chiudi","Edit":"Edit","Delete":"Delete","Ok":"Ok"}'),Te=JSON.parse('{"Add a comment...":"コメントを追加する...","Add a reply...":"返信する...","Add tag...":"タグを追加する...","Cancel":"キャンセル","Close":"閉じる","Edit":"編集","Delete":"削除","Ok":"Ok"}'),We=JSON.parse('{"Add a comment...":"댓글 추가","Add a reply...":"답글 추가","Add tag...":"태그 추가","Cancel":"취소","Close":"닫기","Edit":"수정","Delete":"삭제","Ok":"확인"}'),je=JSON.parse('{"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...","Cancel":"Afbreken","Close":"Sluiten","Edit":"Bewerken","Delete":"Verwijderen","Ok":"Ok"}'),Ke=JSON.parse('{"Add a comment...":"Adicionar um comentário...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Fechar","Edit":"Editar","Delete":"Apagar","Ok":"Ok"}'),at=JSON.parse('{"Add a comment...":"Добавить комментарий...","Add a reply...":"Добавить ответ...","Add tag...":"Добавить тэг...","Cancel":"Отмена","Close":"Закрыть","Edit":"Редактировать","Delete":"Удалить","Ok":"Ок"}'),Ze=JSON.parse('{"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...","Cancel":"Cancel","Close":"Stäng","Edit":"Edit","Delete":"Delete","Ok":"Ok"}'),fe=JSON.parse('{"Add a comment...":"เพิ่มคอมเมนต์...","Add a reply...":"ตอบกลับ...","Add tag...":"เพิ่มแท็ก...","Cancel":"ยกเลิก","Close":"ปิด","Edit":"แก้ไข","Delete":"ลบ","Ok":"ตกลง"}'),Ne=JSON.parse('{"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...","Cancel":"İptal","Close":"Kapat","Edit":"Düzenle","Delete":"Sil","Ok":"Tamam"}'),ke=JSON.parse('{"Add a comment...":"تبصرہ کریں","Add a reply...":"جواب دیں","Add tag...":"ٹیگ لگائیں","Cancel":"منسوخ کریں","Close":"بند کریں","Edit":"ترمیم کریں","Delete":"ہٹائیں","Ok":"ٹھیک ہے"}'),Be=JSON.parse('{"Add a comment...":"添加注释...","Add a reply...":"添加回复...","Add tag...":"标签...","Cancel":"取消","Close":"关闭","Edit":"编辑","Delete":"删除","Ok":"确认"}'),nt=JSON.parse('{"Add a comment...":"添加评论...","Add a reply...":"添加回复...","Add tag...":"添加标签...","Cancel":"取消","Close":"关闭","Edit":"编辑","Delete":"删除","Ok":"确认"}'),ft=JSON.parse('{"Add a comment...":"添加評論...","Add a reply...":"添加回覆...","Add tag...":"添加標籤...","Cancel":"取消","Close":"關閉","Edit":"編輯","Delete":"刪除","Ok":"確認"}');var W=ct(8841),Y=ct(2463),le=ct(3506),ye=ct(1975),x=ct(7813),j=ct(5194),H=ct(3971),F=ct(5211),$=ct(3335),se=ct(6509),he=ct(6244),_e=ct(5626),Ae=ct(4178),Fe=ct(3099),Me=ct(2404),Xe=ct(8248),k=ct(4475),R=ct(1311),B=ct(3211),U=ct(7883);function me(r){return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},me(r)}function Oe(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Ge(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Oe(Object(f),!0).forEach(function(h){Je(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Oe(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Je(r,s,f){return(s=function(h){var u=function(b,v){if(me(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(me(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h);return me(u)==="symbol"?u:String(u)}(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}var ze={ar:pe,cs:ne,de:ce,el:ve,es:Q,fi:ae,fr:Se,gl:Ee,hi:Ie,it:Le,ja:Te,ko:We,nl:je,pt:Ke,ru:at,sv:Ze,th:fe,tr:Ne,ur:ke,zh:Be,"zh-CN":nt,"zh-TW":ft},It=Object.keys(ze),_t=new(ie())({allowMissing:!0});_t.init=function(r,s){_t.clear(),r&&(_t.locale(r),_t.extend(ze[r])),s&&_t.extend(s)},c("ar",W.Z),c("cs",Y.Z),c("de",le.Z),c("el",ye.Z),c("es",x.Z),c("fi",j.Z),c("fr",H.Z),c("gl",F.Z),c("hi",$.Z),c("it",se.Z),c("ja",he.Z),c("ko",_e.Z),c("nl",Ae.Z),c("pt",Fe.Z),c("ru",Me.Z),c("sv",Xe.Z),c("th",k.Z),c("tr",R.Z),c("zh",B.Z),c("zh-CN",B.Z),c("zh-TW",U.Z),_t.registerMessages=function(r,s){ze[r]?ze[r]=Ge(Ge({},ze[r]),s):ze[r]=s};const Lt=_t,jn=function(r){var s=(0,t.useRef)();return function(f,h){var u=function(b){f.current&&!f.current.contains(event.target)&&r.onClickOutside()};(0,t.useEffect)(function(){return document.addEventListener("mousedown",u),function(){return document.removeEventListener("mousedown",u)}})}(s),t.default.createElement("ul",{ref:s,className:"r6o-comment-dropdown-menu"},t.default.createElement("li",{onClick:r.onEdit},Lt.t("Edit")),t.default.createElement("li",{onClick:r.onDelete},Lt.t("Delete")))};var In=ct(6451);function $t(r){return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$t(r)}function Zr(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,xt(h.key),h)}}function Ln(r,s){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},Ln(r,s)}function bn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Pn(r){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Pn(r)}function Ue(r,s,f){return(s=xt(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function xt(r){var s=function(f,h){if($t(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if($t(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return $t(s)==="symbol"?s:String(s)}var wn=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&Ln(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=Pn(h);if(u){var _=Pn(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&($t(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bn(E)}(this,y)});function v(y){var m;return function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}(this,v),Ue(bn(m=b.call(this,y)),"onKeyDown",function(_){_.which===13&&_.ctrlKey&&m.props.onSaveAndClose()}),Ue(bn(m),"onKeyUp",function(_){_.which===46&&_.stopPropagation()}),m.element=(0,t.createRef)(),m}return s=v,(f=[{key:"componentDidMount",value:function(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}},{key:"render",value:function(){return t.default.createElement(In.Z,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||Lt.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown})}}])&&Zr(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(t.Component);function Qe(){return Qe=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(r[h]=f[h])}return r},Qe.apply(this,arguments)}var sa=function(){function r(f){var h=this;this._insertTag=function(u){var b;b=h.tags.length===0?h.insertionPoint?h.insertionPoint.nextSibling:h.prepend?h.container.firstChild:h.before:h.tags[h.tags.length-1].nextSibling,h.container.insertBefore(u,b),h.tags.push(u)},this.isSpeedy=f.speedy===void 0||f.speedy,this.tags=[],this.ctr=0,this.nonce=f.nonce,this.key=f.key,this.container=f.container,this.prepend=f.prepend,this.insertionPoint=f.insertionPoint,this.before=null}var s=r.prototype;return s.hydrate=function(f){f.forEach(this._insertTag)},s.insert=function(f){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(b){var v=document.createElement("style");return v.setAttribute("data-emotion",b.key),b.nonce!==void 0&&v.setAttribute("nonce",b.nonce),v.appendChild(document.createTextNode("")),v.setAttribute("data-s",""),v}(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var u=function(b){if(b.sheet)return b.sheet;for(var v=0;v<document.styleSheets.length;v++)if(document.styleSheets[v].ownerNode===b)return document.styleSheets[v]}(h);try{u.insertRule(f,u.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(f));this.ctr++},s.flush=function(){this.tags.forEach(function(f){return f.parentNode&&f.parentNode.removeChild(f)}),this.tags=[],this.ctr=0},r}(),Lo=Math.abs,Tr=String.fromCharCode,aa=Object.assign;function No(r){return r.trim()}function Et(r,s,f){return r.replace(s,f)}function Yr(r,s){return r.indexOf(s)}function zt(r,s){return 0|r.charCodeAt(s)}function sr(r,s,f){return r.slice(s,f)}function Sn(r){return r.length}function Vi(r){return r.length}function Kr(r,s){return s.push(r),r}var Pr=1,Wn=1,Wi=0,Xt=0,Ft=0,ar="";function Or(r,s,f,h,u,b,v){return{value:r,root:s,parent:f,type:h,props:u,children:b,line:Pr,column:Wn,length:v,return:""}}function Gn(r,s){return aa(Or("",null,null,"",null,null,0),r,{length:-r.length},s)}function Bo(){return Ft=Xt>0?zt(ar,--Xt):0,Wn--,Ft===10&&(Wn=1,Pr--),Ft}function en(){return Ft=Xt<Wi?zt(ar,Xt++):0,Wn++,Ft===10&&(Wn=1,Pr++),Ft}function gn(){return zt(ar,Xt)}function Cr(){return Xt}function lr(r,s){return sr(ar,r,s)}function Ar(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ho(r){return Pr=Wn=1,Wi=Sn(ar=r),Xt=0,[]}function I(r){return ar="",r}function N(r){return No(lr(Xt-1,Re(r===91?r+2:r===40?r+1:r)))}function Z(r){for(;(Ft=gn())&&Ft<33;)en();return Ar(r)>2||Ar(Ft)>3?"":" "}function ue(r,s){for(;--s&&en()&&!(Ft<48||Ft>102||Ft>57&&Ft<65||Ft>70&&Ft<97););return lr(r,Cr()+(s<6&&gn()==32&&en()==32))}function Re(r){for(;en();)switch(Ft){case r:return Xt;case 34:case 39:r!==34&&r!==39&&Re(Ft);break;case 40:r===41&&Re(r);break;case 92:en()}return Xt}function be(r,s){for(;en()&&r+Ft!==57&&(r+Ft!==84||gn()!==47););return"/*"+lr(s,Xt-1)+"*"+Tr(r===47?r:en())}function Ve(r){for(;!Ar(gn());)en();return lr(r,Xt)}var Ye="-ms-",bt="-moz-",qe="-webkit-",Ce="comm",Mt="rule",et="decl",$e="@keyframes";function lt(r,s){for(var f="",h=Vi(r),u=0;u<h;u++)f+=s(r[u],u,r,s)||"";return f}function yn(r,s,f,h){switch(r.type){case"@layer":if(r.children.length)break;case"@import":case et:return r.return=r.return||r.value;case Ce:return"";case $e:return r.return=r.value+"{"+lt(r.children,h)+"}";case Mt:r.value=r.props.join(",")}return Sn(f=lt(r.children,h))?r.return=r.value+"{"+f+"}":""}function Rt(r){return I(jt("",null,null,null,[""],r=Ho(r),0,[0],r))}function jt(r,s,f,h,u,b,v,y,m){for(var _=0,E=0,O=v,D=0,z=0,q=0,K=1,oe=1,xe=1,de=0,ge="",we=u,De=b,Pe=h,He=ge;oe;)switch(q=de,de=en()){case 40:if(q!=108&&zt(He,O-1)==58){Yr(He+=Et(N(de),"&","&\f"),"&\f")!=-1&&(xe=-1);break}case 34:case 39:case 91:He+=N(de);break;case 9:case 10:case 13:case 32:He+=Z(q);break;case 92:He+=ue(Cr()-1,7);continue;case 47:switch(gn()){case 42:case 47:Kr(ur(be(en(),Cr()),s,f),m);break;default:He+="/"}break;case 123*K:y[_++]=Sn(He)*xe;case 125*K:case 59:case 0:switch(de){case 0:case 125:oe=0;case 59+E:xe==-1&&(He=Et(He,/\f/g,"")),z>0&&Sn(He)-O&&Kr(z>32?Ot(He+";",h,f,O-1):Ot(Et(He," ","")+";",h,f,O-2),m);break;case 59:He+=";";default:if(Kr(Pe=Zt(He,s,f,_,E,u,y,ge,we=[],De=[],O),b),de===123)if(E===0)jt(He,s,Pe,Pe,we,b,O,y,De);else switch(D===99&&zt(He,3)===110?100:D){case 100:case 108:case 109:case 115:jt(r,Pe,Pe,h&&Kr(Zt(r,Pe,Pe,0,0,u,y,ge,u,we=[],O),De),u,De,O,y,h?we:De);break;default:jt(He,Pe,Pe,Pe,[""],De,0,y,De)}}_=E=z=0,K=xe=1,ge=He="",O=v;break;case 58:O=1+Sn(He),z=q;default:if(K<1){if(de==123)--K;else if(de==125&&K++==0&&Bo()==125)continue}switch(He+=Tr(de),de*K){case 38:xe=E>0?1:(He+="\f",-1);break;case 44:y[_++]=(Sn(He)-1)*xe,xe=1;break;case 64:gn()===45&&(He+=N(en())),D=gn(),E=O=Sn(ge=He+=Ve(Cr())),de++;break;case 45:q===45&&Sn(He)==2&&(K=0)}}return b}function Zt(r,s,f,h,u,b,v,y,m,_,E){for(var O=u-1,D=u===0?b:[""],z=Vi(D),q=0,K=0,oe=0;q<h;++q)for(var xe=0,de=sr(r,O+1,O=Lo(K=v[q])),ge=r;xe<z;++xe)(ge=No(K>0?D[xe]+" "+de:Et(de,/&\f/g,D[xe])))&&(m[oe++]=ge);return Or(r,s,f,u===0?Mt:y,m,_,E)}function ur(r,s,f){return Or(r,s,f,Ce,Tr(Ft),sr(r,2,-2),0)}function Ot(r,s,f,h){return Or(r,s,f,et,sr(r,0,h),sr(r,h+1,-1),h)}var Jr=function(r,s,f){for(var h=0,u=0;h=u,u=gn(),h===38&&u===12&&(s[f]=1),!Ar(u);)en();return lr(r,Xt)},wu=new WeakMap,Yp=function(r){if(r.type==="rule"&&r.parent&&!(r.length<1)){for(var s=r.value,f=r.parent,h=r.column===f.column&&r.line===f.line;f.type!=="rule";)if(!(f=f.parent))return;if((r.props.length!==1||s.charCodeAt(0)===58||wu.get(f))&&!h){wu.set(r,!0);for(var u=[],b=function(E,O){return I(function(D,z){var q=-1,K=44;do switch(Ar(K)){case 0:K===38&&gn()===12&&(z[q]=1),D[q]+=Jr(Xt-1,z,q);break;case 2:D[q]+=N(K);break;case 4:if(K===44){D[++q]=gn()===58?"&\f":"",z[q]=D[q].length;break}default:D[q]+=Tr(K)}while(K=en());return D}(Ho(E),O))}(s,u),v=f.props,y=0,m=0;y<b.length;y++)for(var _=0;_<v.length;_++,m++)r.props[m]=u[y]?b[y].replace(/&\f/g,v[_]):v[_]+" "+b[y]}}},Kp=function(r){if(r.type==="decl"){var s=r.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(r.return="",r.value="")}};function Su(r,s){switch(function(f,h){return 45^zt(f,0)?(((h<<2^zt(f,0))<<2^zt(f,1))<<2^zt(f,2))<<2^zt(f,3):0}(r,s)){case 5103:return qe+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qe+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return qe+r+bt+r+Ye+r+r;case 6828:case 4268:return qe+r+Ye+r+r;case 6165:return qe+r+Ye+"flex-"+r+r;case 5187:return qe+r+Et(r,/(\w+).+(:[^]+)/,qe+"box-$1$2"+Ye+"flex-$1$2")+r;case 5443:return qe+r+Ye+"flex-item-"+Et(r,/flex-|-self/,"")+r;case 4675:return qe+r+Ye+"flex-line-pack"+Et(r,/align-content|flex-|-self/,"")+r;case 5548:return qe+r+Ye+Et(r,"shrink","negative")+r;case 5292:return qe+r+Ye+Et(r,"basis","preferred-size")+r;case 6060:return qe+"box-"+Et(r,"-grow","")+qe+r+Ye+Et(r,"grow","positive")+r;case 4554:return qe+Et(r,/([^-])(transform)/g,"$1"+qe+"$2")+r;case 6187:return Et(Et(Et(r,/(zoom-|grab)/,qe+"$1"),/(image-set)/,qe+"$1"),r,"")+r;case 5495:case 3959:return Et(r,/(image-set\([^]*)/,qe+"$1$`$1");case 4968:return Et(Et(r,/(.+:)(flex-)?(.*)/,qe+"box-pack:$3"+Ye+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qe+r+r;case 4095:case 3583:case 4068:case 2532:return Et(r,/(.+)-inline(.+)/,qe+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sn(r)-1-s>6)switch(zt(r,s+1)){case 109:if(zt(r,s+4)!==45)break;case 102:return Et(r,/(.+:)(.+)-([^]+)/,"$1"+qe+"$2-$3$1"+bt+(zt(r,s+3)==108?"$3":"$2-$3"))+r;case 115:return~Yr(r,"stretch")?Su(Et(r,"stretch","fill-available"),s)+r:r}break;case 4949:if(zt(r,s+1)!==115)break;case 6444:switch(zt(r,Sn(r)-3-(~Yr(r,"!important")&&10))){case 107:return Et(r,":",":"+qe)+r;case 101:return Et(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qe+(zt(r,14)===45?"inline-":"")+"box$3$1"+qe+"$2$3$1"+Ye+"$2box$3")+r}break;case 5936:switch(zt(r,s+11)){case 114:return qe+r+Ye+Et(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return qe+r+Ye+Et(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return qe+r+Ye+Et(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return qe+r+Ye+r+r}return r}var Jp=[function(r,s,f,h){if(r.length>-1&&!r.return)switch(r.type){case et:r.return=Su(r.value,r.length);break;case $e:return lt([Gn(r,{value:Et(r.value,"@","@"+qe)})],h);case Mt:if(r.length)return function(u,b){return u.map(b).join("")}(r.props,function(u){switch(function(b,v){return(b=/(::plac\w+|:read-\w+)/.exec(b))?b[0]:b}(u)){case":read-only":case":read-write":return lt([Gn(r,{props:[Et(u,/:(read-\w+)/,":-moz-$1")]})],h);case"::placeholder":return lt([Gn(r,{props:[Et(u,/:(plac\w+)/,":"+qe+"input-$1")]}),Gn(r,{props:[Et(u,/:(plac\w+)/,":-moz-$1")]}),Gn(r,{props:[Et(u,/:(plac\w+)/,Ye+"input-$1")]})],h)}return""})}}],Qp=function(r){var s=r.key;if(s==="css"){var f=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(f,function(K){K.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(K),K.setAttribute("data-s",""))})}var h,u,b=r.stylisPlugins||Jp,v={},y=[];h=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(K){for(var oe=K.getAttribute("data-emotion").split(" "),xe=1;xe<oe.length;xe++)v[oe[xe]]=!0;y.push(K)});var m,_,E,O,D=[yn,(O=function(K){m.insert(K)},function(K){K.root||(K=K.return)&&O(K)})],z=(_=[Yp,Kp].concat(b,D),E=Vi(_),function(K,oe,xe,de){for(var ge="",we=0;we<E;we++)ge+=_[we](K,oe,xe,de)||"";return ge});u=function(K,oe,xe,de){m=xe,lt(Rt(K?K+"{"+oe.styles+"}":oe.styles),z),de&&(q.inserted[oe.name]=!0)};var q={key:s,sheet:new sa({key:s,container:h,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:v,registered:{},insert:u};return q.sheet.hydrate(y),q};function _u(r,s,f){var h="";return f.split(" ").forEach(function(u){r[u]!==void 0?s.push(r[u]+";"):h+=u+" "}),h}var la=function(r,s,f){var h=r.key+"-"+s.name;f===!1&&r.registered[h]===void 0&&(r.registered[h]=s.styles)},xu=function(r,s,f){la(r,s,f);var h=r.key+"-"+s.name;if(r.inserted[s.name]===void 0){var u=s;do r.insert(s===u?"."+h:"",u,r.sheet,!0),u=u.next;while(u!==void 0)}},$p={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function em(r){var s=Object.create(null);return function(f){return s[f]===void 0&&(s[f]=r(f)),s[f]}}function Gi(r){return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gi(r)}var tm=/[A-Z]|^ms/g,nm=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Eu=function(r){return r.charCodeAt(1)===45},Tu=function(r){return r!=null&&typeof r!="boolean"},ua=em(function(r){return Eu(r)?r:r.replace(tm,"-$&").toLowerCase()}),Pu=function(r,s){switch(r){case"animation":case"animationName":if(typeof s=="string")return s.replace(nm,function(f,h,u){return Nn={name:h,styles:u,next:Nn},h})}return $p[r]===1||Eu(r)||typeof s!="number"||s===0?s:s+"px"};function qi(r,s,f){if(f==null)return"";if(f.__emotion_styles!==void 0)return f;switch(Gi(f)){case"boolean":return"";case"object":if(f.anim===1)return Nn={name:f.name,styles:f.styles,next:Nn},f.name;if(f.styles!==void 0){var h=f.next;if(h!==void 0)for(;h!==void 0;)Nn={name:h.name,styles:h.styles,next:Nn},h=h.next;return f.styles+";"}return function(y,m,_){var E="";if(Array.isArray(_))for(var O=0;O<_.length;O++)E+=qi(y,m,_[O])+";";else for(var D in _){var z=_[D];if(Gi(z)!=="object")m!=null&&m[z]!==void 0?E+=D+"{"+m[z]+"}":Tu(z)&&(E+=ua(D)+":"+Pu(D,z)+";");else if(!Array.isArray(z)||typeof z[0]!="string"||m!=null&&m[z[0]]!==void 0){var q=qi(y,m,z);switch(D){case"animation":case"animationName":E+=ua(D)+":"+q+";";break;default:E+=D+"{"+q+"}"}}else for(var K=0;K<z.length;K++)Tu(z[K])&&(E+=ua(D)+":"+Pu(D,z[K])+";")}return E}(r,s,f);case"function":if(r!==void 0){var u=Nn,b=f(r);return Nn=u,qi(r,s,b)}}if(s==null)return f;var v=s[f];return v!==void 0?v:f}var Nn,Ou=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ca=function(r,s,f){if(r.length===1&&Gi(r[0])==="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var h=!0,u="";Nn=void 0;var b=r[0];b==null||b.raw===void 0?(h=!1,u+=qi(f,s,b)):u+=b[0];for(var v=1;v<r.length;v++)u+=qi(f,s,r[v]),h&&(u+=b[v]);Ou.lastIndex=0;for(var y,m="";(y=Ou.exec(u))!==null;)m+="-"+y[1];var _=function(E){for(var O,D=0,z=0,q=E.length;q>=4;++z,q-=4)O=1540483477*(65535&(O=255&E.charCodeAt(z)|(255&E.charCodeAt(++z))<<8|(255&E.charCodeAt(++z))<<16|(255&E.charCodeAt(++z))<<24))+(59797*(O>>>16)<<16),D=1540483477*(65535&(O^=O>>>24))+(59797*(O>>>16)<<16)^1540483477*(65535&D)+(59797*(D>>>16)<<16);switch(q){case 3:D^=(255&E.charCodeAt(z+2))<<16;case 2:D^=(255&E.charCodeAt(z+1))<<8;case 1:D=1540483477*(65535&(D^=255&E.charCodeAt(z)))+(59797*(D>>>16)<<16)}return(((D=1540483477*(65535&(D^=D>>>13))+(59797*(D>>>16)<<16))^D>>>15)>>>0).toString(36)}(u)+m;return{name:_,styles:u,next:Nn}},Cu=!!t.useInsertionEffect&&t.useInsertionEffect,Au=Cu||function(r){return r()};Cu||t.useLayoutEffect;var fa={}.hasOwnProperty,Ru=t.createContext(typeof HTMLElement<"u"?Qp({key:"css"}):null),Du=(Ru.Provider,function(r){return(0,t.forwardRef)(function(s,f){var h=(0,t.useContext)(Ru);return r(s,h,f)})}),ku=t.createContext({}),ha="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rm=function(r){var s=r.cache,f=r.serialized,h=r.isStringTag;return la(s,f,h),Au(function(){return xu(s,f,h)}),null},im=Du(function(r,s,f){var h=r.css;typeof h=="string"&&s.registered[h]!==void 0&&(h=s.registered[h]);var u=r[ha],b=[h],v="";typeof r.className=="string"?v=_u(s.registered,b,r.className):r.className!=null&&(v=r.className+" ");var y=ca(b,void 0,t.useContext(ku));v+=s.key+"-"+y.name;var m={};for(var _ in r)fa.call(r,_)&&_!=="css"&&_!==ha&&(m[_]=r[_]);return m.ref=f,m.className=v,t.createElement(t.Fragment,null,t.createElement(rm,{cache:s,serialized:y,isStringTag:typeof u=="string"}),t.createElement(u,m))});function da(r){return da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},da(r)}ct(7480);var ot=function(r,s){var f=arguments;if(s==null||!fa.call(s,"css"))return t.createElement.apply(void 0,f);var h=f.length,u=new Array(h);u[0]=im,u[1]=function(v,y){var m={};for(var _ in y)fa.call(y,_)&&(m[_]=y[_]);return m[ha]=v,m}(r,s);for(var b=2;b<h;b++)u[b]=f[b];return t.createElement.apply(null,u)};function pa(){for(var r=arguments.length,s=new Array(r),f=0;f<r;f++)s[f]=arguments[f];return ca(s)}var om=function r(s){for(var f=s.length,h=0,u="";h<f;h++){var b=s[h];if(b!=null){var v=void 0;switch(da(b)){case"boolean":break;case"object":if(Array.isArray(b))v=r(b);else for(var y in v="",b)b[y]&&y&&(v&&(v+=" "),v+=y);break;default:v=b}v&&(u&&(u+=" "),u+=v)}}return u},sm=function(r){var s=r.cache,f=r.serializedArr;return Au(function(){for(var h=0;h<f.length;h++)xu(s,f[h],!1)}),null},am=Du(function(r,s){var f=[],h=function(){for(var v=arguments.length,y=new Array(v),m=0;m<v;m++)y[m]=arguments[m];var _=ca(y,s.registered);return f.push(_),la(s,_,!1),s.key+"-"+_.name},u={css:h,cx:function(){for(var v=arguments.length,y=new Array(v),m=0;m<v;m++)y[m]=arguments[m];return function(_,E,O){var D=[],z=_u(_,D,O);return D.length<2?O:z+E(D)}(s.registered,h,om(y))},theme:t.useContext(ku)},b=r.children(u);return t.createElement(t.Fragment,null,t.createElement(sm,{cache:s,serializedArr:f}),b)});function ma(r,s){if(r==null)return{};var f,h,u={},b=Object.keys(r);for(h=0;h<b.length;h++)f=b[h],s.indexOf(f)>=0||(u[f]=r[f]);return u}function Qr(r,s){if(r==null)return{};var f,h,u=ma(r,s);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(r);for(h=0;h<b.length;h++)f=b[h],s.indexOf(f)>=0||Object.prototype.propertyIsEnumerable.call(r,f)&&(u[f]=r[f])}return u}function $r(r){return $r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$r(r)}var lm=ct(2718);function Fo(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function Mu(r){var s=function(f,h){if($r(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if($r(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return $r(s)==="symbol"?s:String(s)}function ju(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Mu(h.key),h)}}function zo(r,s,f){return s&&ju(r.prototype,s),f&&ju(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}function Uo(r,s){return Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},Uo(r,s)}function Vo(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&Uo(r,s)}function qn(r,s,f){return(s=Mu(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function ga(r){return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ga(r)}function um(r,s,f){return s in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Iu(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Yt(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Iu(Object(f),!0).forEach(function(h){um(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Iu(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Wo(r){return Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},Wo(r)}function Go(r){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var f,h,u,b=Wo(r);if(s){var v=Wo(this).constructor;f=Reflect.construct(b,arguments,v)}else f=b.apply(this,arguments);return h=this,!(u=f)||ga(u)!=="object"&&typeof u!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(h):u}}var qo=function(){};function cm(r,s){return s?s[0]==="-"?r+s:r+"__"+s:r}function fm(r,s,f){var h=[f];if(s&&r)for(var u in s)s.hasOwnProperty(u)&&s[u]&&h.push("".concat(cm(r,u)));return h.filter(function(b){return b}).map(function(b){return String(b).trim()}).join(" ")}var Lu=function(r){return Array.isArray(r)?r.filter(Boolean):$r(r)==="object"&&r!==null?[r]:[]},Nu=function(r){return r.className,r.clearValue,r.cx,r.getStyles,r.getValue,r.hasValue,r.isMulti,r.isRtl,r.options,r.selectOption,r.selectProps,r.setValue,r.theme,Yt({},Qr(r,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]))};function ya(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function Bu(r){return ya(r)?window.pageYOffset:r.scrollTop}function Xo(r,s){ya(r)?window.scrollTo(0,s):r.scrollTop=s}function Zo(r,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qo,u=Bu(r),b=s-u,v=0;(function y(){var m,_=b*((m=(m=v+=10)/f-1)*m*m+1)+u;Xo(r,_),v<f?window.requestAnimationFrame(y):h(r)})()}function Hu(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Fu=!1,hm={get passive(){return Fu=!0}},Yo=typeof window<"u"?window:{};Yo.addEventListener&&Yo.removeEventListener&&(Yo.addEventListener("p",qo,hm),Yo.removeEventListener("p",qo,!1));var dm=Fu,va=function(r){return r==="auto"?"bottom":r},zu=(0,t.createContext)({getPortalPlacement:null}),Uu=function(r){Vo(f,r);var s=Go(f);function f(){var h;Fo(this,f);for(var u=arguments.length,b=new Array(u),v=0;v<u;v++)b[v]=arguments[v];return(h=s.call.apply(s,[this].concat(b))).state={maxHeight:h.props.maxMenuHeight,placement:null},h.getPlacement=function(y){var m=h.props,_=m.minMenuHeight,E=m.maxMenuHeight,O=m.menuPlacement,D=m.menuPosition,z=m.menuShouldScrollIntoView,q=m.theme;if(y){var K=D==="fixed",oe=function(de){var ge=de.maxHeight,we=de.menuEl,De=de.minHeight,Pe=de.placement,He=de.shouldScroll,tt=de.isFixedPosition,At=de.theme.spacing,st=function(fo){var er=getComputedStyle(fo),hy=er.position==="absolute",dy=/(auto|scroll)/,gh=document.documentElement;if(er.position==="fixed")return gh;for(var xs=fo;xs=xs.parentElement;)if(er=getComputedStyle(xs),(!hy||er.position!=="static")&&dy.test(er.overflow+er.overflowY+er.overflowX))return xs;return gh}(we),ht={placement:"bottom",maxHeight:ge};if(!we||!we.offsetParent)return ht;var Bt=st.getBoundingClientRect().height,rt=we.getBoundingClientRect(),kt=rt.bottom,Tt=rt.height,Ut=rt.top,un=we.offsetParent.getBoundingClientRect().top,vn=window.innerHeight,cn=Bu(st),nn=parseInt(getComputedStyle(we).marginBottom,10),yt=parseInt(getComputedStyle(we).marginTop,10),Vt=un-yt,sn=vn-Ut,Gt=Vt+cn,En=Bt-cn-Ut,$n=kt-vn+cn+nn,Bn=cn+Ut-yt,Ei=160;switch(Pe){case"auto":case"bottom":if(sn>=Tt)return{placement:"bottom",maxHeight:ge};if(En>=Tt&&!tt)return He&&Zo(st,$n,Ei),{placement:"bottom",maxHeight:ge};if(!tt&&En>=De||tt&&sn>=De)return He&&Zo(st,$n,Ei),{placement:"bottom",maxHeight:tt?sn-nn:En-nn};if(Pe==="auto"||tt){var uo=ge,co=tt?Vt:Gt;return co>=De&&(uo=Math.min(co-nn-At.controlHeight,ge)),{placement:"top",maxHeight:uo}}if(Pe==="bottom")return He&&Xo(st,$n),{placement:"bottom",maxHeight:ge};break;case"top":if(Vt>=Tt)return{placement:"top",maxHeight:ge};if(Gt>=Tt&&!tt)return He&&Zo(st,Bn,Ei),{placement:"top",maxHeight:ge};if(!tt&&Gt>=De||tt&&Vt>=De){var _s=ge;return(!tt&&Gt>=De||tt&&Vt>=De)&&(_s=tt?Vt-yt:Gt-yt),He&&Zo(st,Bn,Ei),{placement:"top",maxHeight:_s}}return{placement:"bottom",maxHeight:ge};default:throw new Error('Invalid placement provided "'.concat(Pe,'".'))}return ht}({maxHeight:E,menuEl:y,minHeight:_,placement:O,shouldScroll:z&&!K,isFixedPosition:K,theme:q}),xe=h.context.getPortalPlacement;xe&&xe(oe),h.setState(oe)}},h.getUpdatedProps=function(){var y=h.props.menuPlacement,m=h.state.placement||va(y);return Yt(Yt({},h.props),{},{placement:m,maxHeight:h.state.maxHeight})},h}return zo(f,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),f}(t.Component);Uu.contextType=zu;var Vu=function(r){var s=r.theme,f=s.spacing.baseUnit;return{color:s.colors.neutral40,padding:"".concat(2*f,"px ").concat(3*f,"px"),textAlign:"center"}},pm=Vu,mm=Vu,Wu=function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps;return ot("div",Qe({css:u("noOptionsMessage",r),className:h({"menu-notice":!0,"menu-notice--no-options":!0},f)},b),s)};Wu.defaultProps={children:"No options"};var Gu=function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps;return ot("div",Qe({css:u("loadingMessage",r),className:h({"menu-notice":!0,"menu-notice--loading":!0},f)},b),s)};Gu.defaultProps={children:"Loading..."};var qu,ba,wa,gm=function(r){Vo(f,r);var s=Go(f);function f(){var h;Fo(this,f);for(var u=arguments.length,b=new Array(u),v=0;v<u;v++)b[v]=arguments[v];return(h=s.call.apply(s,[this].concat(b))).state={placement:null},h.getPortalPlacement=function(y){var m=y.placement;m!==va(h.props.menuPlacement)&&h.setState({placement:m})},h}return zo(f,[{key:"render",value:function(){var h=this.props,u=h.appendTo,b=h.children,v=h.className,y=h.controlElement,m=h.cx,_=h.innerProps,E=h.menuPlacement,O=h.menuPosition,D=h.getStyles,z=O==="fixed";if(!u&&!z||!y)return null;var q=this.state.placement||va(E),K=function(ge){var we=ge.getBoundingClientRect();return{bottom:we.bottom,height:we.height,left:we.left,right:we.right,top:we.top,width:we.width}}(y),oe=z?0:window.pageYOffset,xe=K[q]+oe,de=ot("div",Qe({css:D("menuPortal",{offset:xe,position:O,rect:K}),className:m({"menu-portal":!0},v)},_),b);return ot(zu.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},u?(0,t.createPortal)(de,u):de)}}]),f}(t.Component),ym={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Xu=function(r){var s=r.size,f=Qr(r,["size"]);return ot("svg",Qe({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ym},f))},Sa=function(r){return ot(Xu,Qe({size:20},r),ot("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Zu=function(r){return ot(Xu,Qe({size:20},r),ot("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Yu=function(r){var s=r.isFocused,f=r.theme,h=f.spacing.baseUnit,u=f.colors;return{label:"indicatorContainer",color:s?u.neutral60:u.neutral20,display:"flex",padding:2*h,transition:"color 150ms",":hover":{color:s?u.neutral80:u.neutral40}}},vm=Yu,bm=Yu,wm=function(){var r=pa.apply(void 0,arguments),s="animation-"+r.name;return{name:s,styles:"@keyframes "+s+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(qu||(ba=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],wa||(wa=ba.slice(0)),qu=Object.freeze(Object.defineProperties(ba,{raw:{value:Object.freeze(wa)}})))),_a=function(r){var s=r.delay,f=r.offset;return ot("span",{css:pa({animation:"".concat(wm," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:f?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ku=function(r){var s=r.className,f=r.cx,h=r.getStyles,u=r.innerProps,b=r.isRtl;return ot("div",Qe({css:h("loadingIndicator",r),className:f({indicator:!0,"loading-indicator":!0},s)},u),ot(_a,{delay:0,offset:b}),ot(_a,{delay:160,offset:!0}),ot(_a,{delay:320,offset:!b}))};Ku.defaultProps={size:4};var Sm=function(r){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:r?0:1,outline:0,padding:0,color:"inherit"}},Ju=function(r){var s=r.children,f=r.innerProps;return ot("div",f,s)},_m=Ju,xm=Ju,Qu=function(r){var s=r.children,f=r.className,h=r.components,u=r.cx,b=r.data,v=r.getStyles,y=r.innerProps,m=r.isDisabled,_=r.removeProps,E=r.selectProps,O=h.Container,D=h.Label,z=h.Remove;return ot(am,null,function(q){var K=q.css,oe=q.cx;return ot(O,{data:b,innerProps:Yt({className:oe(K(v("multiValue",r)),u({"multi-value":!0,"multi-value--is-disabled":m},f))},y),selectProps:E},ot(D,{data:b,innerProps:{className:oe(K(v("multiValueLabel",r)),u({"multi-value__label":!0},f))},selectProps:E},s),ot(z,{data:b,innerProps:Yt({className:oe(K(v("multiValueRemove",r)),u({"multi-value__remove":!0},f))},_),selectProps:E}))})};Qu.defaultProps={cropWithEllipsis:!0};var Em={ClearIndicator:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps;return ot("div",Qe({css:u("clearIndicator",r),className:h({indicator:!0,"clear-indicator":!0},f)},b),s||ot(Sa,null))},Control:function(r){var s=r.children,f=r.cx,h=r.getStyles,u=r.className,b=r.isDisabled,v=r.isFocused,y=r.innerRef,m=r.innerProps,_=r.menuIsOpen;return ot("div",Qe({ref:y,css:h("control",r),className:f({control:!0,"control--is-disabled":b,"control--is-focused":v,"control--menu-is-open":_},u)},m),s)},DropdownIndicator:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps;return ot("div",Qe({css:u("dropdownIndicator",r),className:h({indicator:!0,"dropdown-indicator":!0},f)},b),s||ot(Zu,null))},DownChevron:Zu,CrossIcon:Sa,Group:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.Heading,v=r.headingProps,y=r.innerProps,m=r.label,_=r.theme,E=r.selectProps;return ot("div",Qe({css:u("group",r),className:h({group:!0},f)},y),ot(b,Qe({},v,{selectProps:E,theme:_,getStyles:u,cx:h}),m),ot("div",null,s))},GroupHeading:function(r){var s=r.getStyles,f=r.cx,h=r.className,u=Nu(r);u.data;var b=Qr(u,["data"]);return ot("div",Qe({css:s("groupHeading",r),className:f({"group-heading":!0},h)},b))},IndicatorsContainer:function(r){var s=r.children,f=r.className,h=r.cx,u=r.innerProps,b=r.getStyles;return ot("div",Qe({css:b("indicatorsContainer",r),className:h({indicators:!0},f)},u),s)},IndicatorSeparator:function(r){var s=r.className,f=r.cx,h=r.getStyles,u=r.innerProps;return ot("span",Qe({},u,{css:h("indicatorSeparator",r),className:f({"indicator-separator":!0},s)}))},Input:function(r){var s=r.className,f=r.cx,h=r.getStyles,u=Nu(r),b=u.innerRef,v=u.isDisabled,y=u.isHidden,m=Qr(u,["innerRef","isDisabled","isHidden"]);return ot("div",{css:h("input",r)},ot(lm.Z,Qe({className:f({input:!0},s),inputRef:b,inputStyle:Sm(y),disabled:v},m)))},LoadingIndicator:Ku,Menu:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerRef,v=r.innerProps;return ot("div",Qe({css:u("menu",r),className:h({menu:!0},f),ref:b},v),s)},MenuList:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps,v=r.innerRef,y=r.isMulti;return ot("div",Qe({css:u("menuList",r),className:h({"menu-list":!0,"menu-list--is-multi":y},f),ref:v},b),s)},MenuPortal:gm,LoadingMessage:Gu,NoOptionsMessage:Wu,MultiValue:Qu,MultiValueContainer:_m,MultiValueLabel:xm,MultiValueRemove:function(r){var s=r.children,f=r.innerProps;return ot("div",f,s||ot(Sa,{size:14}))},Option:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.isDisabled,v=r.isFocused,y=r.isSelected,m=r.innerRef,_=r.innerProps;return ot("div",Qe({css:u("option",r),className:h({option:!0,"option--is-disabled":b,"option--is-focused":v,"option--is-selected":y},f),ref:m},_),s)},Placeholder:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps;return ot("div",Qe({css:u("placeholder",r),className:h({placeholder:!0},f)},b),s)},SelectContainer:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.innerProps,v=r.isDisabled,y=r.isRtl;return ot("div",Qe({css:u("container",r),className:h({"--is-disabled":v,"--is-rtl":y},f)},b),s)},SingleValue:function(r){var s=r.children,f=r.className,h=r.cx,u=r.getStyles,b=r.isDisabled,v=r.innerProps;return ot("div",Qe({css:u("singleValue",r),className:h({"single-value":!0,"single-value--is-disabled":b},f)},v),s)},ValueContainer:function(r){var s=r.children,f=r.className,h=r.cx,u=r.innerProps,b=r.isMulti,v=r.getStyles,y=r.hasValue;return ot("div",Qe({css:v("valueContainer",r),className:h({"value-container":!0,"value-container--is-multi":b,"value-container--has-value":y},f)},u),s)}};function xa(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function $u(r){return function(s){if(Array.isArray(s))return xa(s)}(r)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(r)||function(s,f){if(s){if(typeof s=="string")return xa(s,f);var h=Object.prototype.toString.call(s).slice(8,-1);return h==="Object"&&s.constructor&&(h=s.constructor.name),h==="Map"||h==="Set"?Array.from(s):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?xa(s,f):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var ec=Number.isNaN||function(r){return typeof r=="number"&&r!=r};function Tm(r,s){if(r.length!==s.length)return!1;for(var f=0;f<r.length;f++)if(!((h=r[f])===(u=s[f])||ec(h)&&ec(u)))return!1;var h,u;return!0}for(var Pm={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Om=function(r){return ot("span",Qe({css:Pm},r))},Cm={guidance:function(r){var s=r.isSearchable,f=r.isMulti,h=r.isDisabled,u=r.tabSelectsValue;switch(r.context){case"menu":return"Use Up and Down to choose options".concat(h?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(r["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(f?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(r){var s=r.action,f=r.label,h=f===void 0?"":f,u=r.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(h,", deselected.");case"select-option":return"option ".concat(h,u?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(r){var s=r.context,f=r.focused,h=f===void 0?{}:f,u=r.options,b=r.label,v=b===void 0?"":b,y=r.selectValue,m=r.isDisabled,_=r.isSelected,E=function(z,q){return z&&z.length?"".concat(z.indexOf(q)+1," of ").concat(z.length):""};if(s==="value"&&y)return"value ".concat(v," focused, ").concat(E(y,h),".");if(s==="menu"){var O=m?" disabled":"",D="".concat(_?"selected":"focused").concat(O);return"option ".concat(v," ").concat(D,", ").concat(E(u,h),".")}return""},onFilter:function(r){var s=r.inputValue,f=r.resultsMessage;return"".concat(f).concat(s?" for search term "+s:"",".")}},Am=function(r){var s=r.ariaSelection,f=r.focusedOption,h=r.focusedValue,u=r.focusableOptions,b=r.isFocused,v=r.selectValue,y=r.selectProps,m=y.ariaLiveMessages,_=y.getOptionLabel,E=y.inputValue,O=y.isMulti,D=y.isOptionDisabled,z=y.isSearchable,q=y.menuIsOpen,K=y.options,oe=y.screenReaderStatus,xe=y.tabSelectsValue,de=y["aria-label"],ge=y["aria-live"],we=(0,t.useMemo)(function(){return Yt(Yt({},Cm),m||{})},[m]),De=(0,t.useMemo)(function(){var st,ht="";if(s&&we.onChange){var Bt=s.option,rt=s.removedValue,kt=s.value,Tt=rt||Bt||(st=kt,Array.isArray(st)?null:st),Ut=Yt({isDisabled:Tt&&D(Tt),label:Tt?_(Tt):""},s);ht=we.onChange(Ut)}return ht},[s,D,_,we]),Pe=(0,t.useMemo)(function(){var st="",ht=f||h,Bt=!!(f&&v&&v.includes(f));if(ht&&we.onFocus){var rt={focused:ht,label:_(ht),isDisabled:D(ht),isSelected:Bt,options:K,context:ht===f?"menu":"value",selectValue:v};st=we.onFocus(rt)}return st},[f,h,_,D,we,K,v]),He=(0,t.useMemo)(function(){var st="";if(q&&K.length&&we.onFilter){var ht=oe({count:u.length});st=we.onFilter({inputValue:E,resultsMessage:ht})}return st},[u,E,q,we,K,oe]),tt=(0,t.useMemo)(function(){var st="";if(we.guidance){var ht=h?"value":q?"menu":"input";st=we.guidance({"aria-label":de,context:ht,isDisabled:f&&D(f),isMulti:O,isSearchable:z,tabSelectsValue:xe})}return st},[de,f,h,O,D,z,q,we,xe]),At="".concat(Pe," ").concat(He," ").concat(tt);return ot(Om,{"aria-live":ge,"aria-atomic":"false","aria-relevant":"additions text"},b&&ot(t.default.Fragment,null,ot("span",{id:"aria-selection"},De),ot("span",{id:"aria-context"},At)))},Ea=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Rm=new RegExp("["+Ea.map(function(r){return r.letters}).join("")+"]","g"),tc={},Ta=0;Ta<Ea.length;Ta++)for(var Pa=Ea[Ta],Oa=0;Oa<Pa.letters.length;Oa++)tc[Pa.letters[Oa]]=Pa.base;var nc=function(r){return r.replace(Rm,function(s){return tc[s]})},Dm=function(r,s){var f;s===void 0&&(s=Tm);var h,u=[],b=!1;return function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return b&&f===this&&s(v,u)||(h=r.apply(this,v),b=!0,f=this,u=v),h}}(nc),rc=function(r){return r.replace(/^\s+|\s+$/g,"")},km=function(r){return"".concat(r.label," ").concat(r.value)};function Mm(r){r.in,r.out,r.onExited,r.appear,r.enter,r.exit;var s=r.innerRef;r.emotion;var f=Qr(r,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return ot("input",Qe({ref:s},f,{css:pa({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var ic=["boxSizing","height","overflow","paddingRight","position"],oc={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function sc(r){r.preventDefault()}function ac(r){r.stopPropagation()}function lc(){var r=this.scrollTop,s=this.scrollHeight,f=r+this.offsetHeight;r===0?this.scrollTop=1:f===s&&(this.scrollTop=r-1)}function uc(){return"ontouchstart"in window||navigator.maxTouchPoints}var cc=!(typeof window>"u"||!window.document||!window.document.createElement),Xi=0,ei={capture:!1,passive:!1},jm=function(){return document.activeElement&&document.activeElement.blur()},Im={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Lm(r){var s=r.children,f=r.lockEnabled,h=r.captureEnabled,u=function(v){var y=v.isEnabled,m=v.onBottomArrive,_=v.onBottomLeave,E=v.onTopArrive,O=v.onTopLeave,D=(0,t.useRef)(!1),z=(0,t.useRef)(!1),q=(0,t.useRef)(0),K=(0,t.useRef)(null),oe=(0,t.useCallback)(function(Pe,He){if(K.current!==null){var tt=K.current,At=tt.scrollTop,st=tt.scrollHeight,ht=tt.clientHeight,Bt=K.current,rt=He>0,kt=st-ht-At,Tt=!1;kt>He&&D.current&&(_&&_(Pe),D.current=!1),rt&&z.current&&(O&&O(Pe),z.current=!1),rt&&He>kt?(m&&!D.current&&m(Pe),Bt.scrollTop=st,Tt=!0,D.current=!0):!rt&&-He>At&&(E&&!z.current&&E(Pe),Bt.scrollTop=0,Tt=!0,z.current=!0),Tt&&function(Ut){Ut.preventDefault(),Ut.stopPropagation()}(Pe)}},[]),xe=(0,t.useCallback)(function(Pe){oe(Pe,Pe.deltaY)},[oe]),de=(0,t.useCallback)(function(Pe){q.current=Pe.changedTouches[0].clientY},[]),ge=(0,t.useCallback)(function(Pe){var He=q.current-Pe.changedTouches[0].clientY;oe(Pe,He)},[oe]),we=(0,t.useCallback)(function(Pe){if(Pe){var He=!!dm&&{passive:!1};typeof Pe.addEventListener=="function"&&Pe.addEventListener("wheel",xe,He),typeof Pe.addEventListener=="function"&&Pe.addEventListener("touchstart",de,He),typeof Pe.addEventListener=="function"&&Pe.addEventListener("touchmove",ge,He)}},[ge,de,xe]),De=(0,t.useCallback)(function(Pe){Pe&&(typeof Pe.removeEventListener=="function"&&Pe.removeEventListener("wheel",xe,!1),typeof Pe.removeEventListener=="function"&&Pe.removeEventListener("touchstart",de,!1),typeof Pe.removeEventListener=="function"&&Pe.removeEventListener("touchmove",ge,!1))},[ge,de,xe]);return(0,t.useEffect)(function(){if(y){var Pe=K.current;return we(Pe),function(){De(Pe)}}},[y,we,De]),function(Pe){K.current=Pe}}({isEnabled:h===void 0||h,onBottomArrive:r.onBottomArrive,onBottomLeave:r.onBottomLeave,onTopArrive:r.onTopArrive,onTopLeave:r.onTopLeave}),b=function(v){var y=v.isEnabled,m=v.accountForScrollbars,_=m===void 0||m,E=(0,t.useRef)({}),O=(0,t.useRef)(null),D=(0,t.useCallback)(function(q){if(cc){var K=document.body,oe=K&&K.style;if(_&&ic.forEach(function(we){var De=oe&&oe[we];E.current[we]=De}),_&&Xi<1){var xe=parseInt(E.current.paddingRight,10)||0,de=document.body?document.body.clientWidth:0,ge=window.innerWidth-de+xe||0;Object.keys(oc).forEach(function(we){var De=oc[we];oe&&(oe[we]=De)}),oe&&(oe.paddingRight="".concat(ge,"px"))}K&&uc()&&(K.addEventListener("touchmove",sc,ei),q&&(q.addEventListener("touchstart",lc,ei),q.addEventListener("touchmove",ac,ei))),Xi+=1}},[]),z=(0,t.useCallback)(function(q){if(cc){var K=document.body,oe=K&&K.style;Xi=Math.max(Xi-1,0),_&&Xi<1&&ic.forEach(function(xe){var de=E.current[xe];oe&&(oe[xe]=de)}),K&&uc()&&(K.removeEventListener("touchmove",sc,ei),q&&(q.removeEventListener("touchstart",lc,ei),q.removeEventListener("touchmove",ac,ei)))}},[]);return(0,t.useEffect)(function(){if(y){var q=O.current;return D(q),function(){z(q)}}},[y,D,z]),function(q){O.current=q}}({isEnabled:f});return ot(t.default.Fragment,null,f&&ot("div",{onClick:jm,css:Im}),s(function(v){u(v),b(v)}))}var Nm={clearIndicator:bm,container:function(r){var s=r.isDisabled;return{label:"container",direction:r.isRtl?"rtl":null,pointerEvents:s?"none":null,position:"relative"}},control:function(r){var s=r.isDisabled,f=r.isFocused,h=r.theme,u=h.colors,b=h.borderRadius,v=h.spacing;return{label:"control",alignItems:"center",backgroundColor:s?u.neutral5:u.neutral0,borderColor:s?u.neutral10:f?u.primary:u.neutral20,borderRadius:b,borderStyle:"solid",borderWidth:1,boxShadow:f?"0 0 0 1px ".concat(u.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:v.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:f?u.primary:u.neutral30}}},dropdownIndicator:vm,group:function(r){var s=r.theme.spacing;return{paddingBottom:2*s.baseUnit,paddingTop:2*s.baseUnit}},groupHeading:function(r){var s=r.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*s.baseUnit,paddingRight:3*s.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(r){var s=r.isDisabled,f=r.theme,h=f.spacing.baseUnit,u=f.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:s?u.neutral10:u.neutral20,marginBottom:2*h,marginTop:2*h,width:1}},input:function(r){var s=r.isDisabled,f=r.theme,h=f.spacing,u=f.colors;return{margin:h.baseUnit/2,paddingBottom:h.baseUnit/2,paddingTop:h.baseUnit/2,visibility:s?"hidden":"visible",color:u.neutral80}},loadingIndicator:function(r){var s=r.isFocused,f=r.size,h=r.theme,u=h.colors,b=h.spacing.baseUnit;return{label:"loadingIndicator",color:s?u.neutral60:u.neutral20,display:"flex",padding:2*b,transition:"color 150ms",alignSelf:"center",fontSize:f,lineHeight:1,marginRight:f,textAlign:"center",verticalAlign:"middle"}},loadingMessage:mm,menu:function(r){var s,f=r.placement,h=r.theme,u=h.borderRadius,b=h.spacing,v=h.colors;return qn(s={label:"menu"},function(y){return y?{bottom:"top",top:"bottom"}[y]:"bottom"}(f),"100%"),qn(s,"backgroundColor",v.neutral0),qn(s,"borderRadius",u),qn(s,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),qn(s,"marginBottom",b.menuGutter),qn(s,"marginTop",b.menuGutter),qn(s,"position","absolute"),qn(s,"width","100%"),qn(s,"zIndex",1),s},menuList:function(r){var s=r.maxHeight,f=r.theme.spacing.baseUnit;return{maxHeight:s,overflowY:"auto",paddingBottom:f,paddingTop:f,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(r){var s=r.rect,f=r.offset,h=r.position;return{left:s.left,position:h,top:f,width:s.width,zIndex:1}},multiValue:function(r){var s=r.theme,f=s.spacing,h=s.borderRadius;return{label:"multiValue",backgroundColor:s.colors.neutral10,borderRadius:h/2,display:"flex",margin:f.baseUnit/2,minWidth:0}},multiValueLabel:function(r){var s=r.theme,f=s.borderRadius,h=s.colors,u=r.cropWithEllipsis;return{borderRadius:f/2,color:h.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:u?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(r){var s=r.theme,f=s.spacing,h=s.borderRadius,u=s.colors;return{alignItems:"center",borderRadius:h/2,backgroundColor:r.isFocused&&u.dangerLight,display:"flex",paddingLeft:f.baseUnit,paddingRight:f.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}}},noOptionsMessage:pm,option:function(r){var s=r.isDisabled,f=r.isFocused,h=r.isSelected,u=r.theme,b=u.spacing,v=u.colors;return{label:"option",backgroundColor:h?v.primary:f?v.primary25:"transparent",color:s?v.neutral20:h?v.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*b.baseUnit,"px ").concat(3*b.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!s&&(h?v.primary:v.primary50)}}},placeholder:function(r){var s=r.theme,f=s.spacing;return{label:"placeholder",color:s.colors.neutral50,marginLeft:f.baseUnit/2,marginRight:f.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(r){var s=r.isDisabled,f=r.theme,h=f.spacing,u=f.colors;return{label:"singleValue",color:s?u.neutral40:u.neutral80,marginLeft:h.baseUnit/2,marginRight:h.baseUnit/2,maxWidth:"calc(100% - ".concat(2*h.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(r){var s=r.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(s.baseUnit/2,"px ").concat(2*s.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}},Ca={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Bm={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Hu(),captureMenuScroll:!Hu(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(r,s){var f=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:km,trim:!0,matchFrom:"any"},void 0),h=f.ignoreCase,u=f.ignoreAccents,b=f.stringify,v=f.trim,y=f.matchFrom,m=v?rc(s):s,_=v?rc(b(r)):b(r);return h&&(m=m.toLowerCase(),_=_.toLowerCase()),u&&(m=Dm(m),_=nc(_)),y==="start"?_.substr(0,m.length)===m:_.indexOf(m)>-1},formatGroupLabel:function(r){return r.label},getOptionLabel:function(r){return r.label},getOptionValue:function(r){return r.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(r){return!!r.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(r){var s=r.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function fc(r,s,f,h){return{type:"option",data:s,isDisabled:gc(r,s,f),isSelected:yc(r,s,f),label:mc(r,s),value:Ko(r,s),index:h}}function hc(r,s){return r.options.map(function(f,h){if(f.options){var u=f.options.map(function(v,y){return fc(r,v,s,y)}).filter(function(v){return pc(r,v)});return u.length>0?{type:"group",data:f,options:u,index:h}:void 0}var b=fc(r,f,s,h);return pc(r,b)?b:void 0}).filter(function(f){return!!f})}function dc(r){return r.reduce(function(s,f){return f.type==="group"?s.push.apply(s,$u(f.options.map(function(h){return h.data}))):s.push(f.data),s},[])}function pc(r,s){var f=r.inputValue,h=f===void 0?"":f,u=s.data,b=s.isSelected,v=s.label,y=s.value;return(!bc(r)||!b)&&vc(r,{label:v,value:y,data:u},h)}var mc=function(r,s){return r.getOptionLabel(s)},Ko=function(r,s){return r.getOptionValue(s)};function gc(r,s,f){return typeof r.isOptionDisabled=="function"&&r.isOptionDisabled(s,f)}function yc(r,s,f){if(f.indexOf(s)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(s,f);var h=Ko(r,s);return f.some(function(u){return Ko(r,u)===h})}function vc(r,s,f){return!r.filterOption||r.filterOption(s,f)}var bc=function(r){var s=r.hideSelectedOptions,f=r.isMulti;return s===void 0?f:s},Hm=1,wc=function(r){Vo(f,r);var s=Go(f);function f(h){var u;return Fo(this,f),(u=s.call(this,h)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},u.blockOptionHover=!1,u.isComposing=!1,u.commonProps=void 0,u.initialTouchX=0,u.initialTouchY=0,u.instancePrefix="",u.openAfterFocus=!1,u.scrollToFocusedOptionOnUpdate=!1,u.userIsDragging=void 0,u.controlRef=null,u.getControlRef=function(b){u.controlRef=b},u.focusedOptionRef=null,u.getFocusedOptionRef=function(b){u.focusedOptionRef=b},u.menuListRef=null,u.getMenuListRef=function(b){u.menuListRef=b},u.inputRef=null,u.getInputRef=function(b){u.inputRef=b},u.focus=u.focusInput,u.blur=u.blurInput,u.onChange=function(b,v){var y=u.props,m=y.onChange,_=y.name;v.name=_,u.ariaOnChange(b,v),m(b,v)},u.setValue=function(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",y=arguments.length>2?arguments[2]:void 0,m=u.props,_=m.closeMenuOnSelect,E=m.isMulti;u.onInputChange("",{action:"set-value"}),_&&(u.setState({inputIsHiddenAfterUpdate:!E}),u.onMenuClose()),u.setState({clearFocusValueOnUpdate:!0}),u.onChange(b,{action:v,option:y})},u.selectOption=function(b){var v=u.props,y=v.blurInputOnSelect,m=v.isMulti,_=v.name,E=u.state.selectValue,O=m&&u.isOptionSelected(b,E),D=u.isOptionDisabled(b,E);if(O){var z=u.getOptionValue(b);u.setValue(E.filter(function(q){return u.getOptionValue(q)!==z}),"deselect-option",b)}else{if(D)return void u.ariaOnChange(b,{action:"select-option",name:_});m?u.setValue([].concat($u(E),[b]),"select-option",b):u.setValue(b,"select-option")}y&&u.blurInput()},u.removeValue=function(b){var v=u.props.isMulti,y=u.state.selectValue,m=u.getOptionValue(b),_=y.filter(function(O){return u.getOptionValue(O)!==m}),E=v?_:_[0]||null;u.onChange(E,{action:"remove-value",removedValue:b}),u.focusInput()},u.clearValue=function(){var b=u.state.selectValue;u.onChange(u.props.isMulti?[]:null,{action:"clear",removedValues:b})},u.popValue=function(){var b=u.props.isMulti,v=u.state.selectValue,y=v[v.length-1],m=v.slice(0,v.length-1),_=b?m:m[0]||null;u.onChange(_,{action:"pop-value",removedValue:y})},u.getValue=function(){return u.state.selectValue},u.cx=function(){for(var b=arguments.length,v=new Array(b),y=0;y<b;y++)v[y]=arguments[y];return fm.apply(void 0,[u.props.classNamePrefix].concat(v))},u.getOptionLabel=function(b){return mc(u.props,b)},u.getOptionValue=function(b){return Ko(u.props,b)},u.getStyles=function(b,v){var y=Nm[b](v);y.boxSizing="border-box";var m=u.props.styles[b];return m?m(y,v):y},u.getElementId=function(b){return"".concat(u.instancePrefix,"-").concat(b)},u.getComponents=function(){return b=u.props,Yt(Yt({},Em),b.components);var b},u.buildCategorizedOptions=function(){return hc(u.props,u.state.selectValue)},u.getCategorizedOptions=function(){return u.props.menuIsOpen?u.buildCategorizedOptions():[]},u.buildFocusableOptions=function(){return dc(u.buildCategorizedOptions())},u.getFocusableOptions=function(){return u.props.menuIsOpen?u.buildFocusableOptions():[]},u.ariaOnChange=function(b,v){u.setState({ariaSelection:Yt({value:b},v)})},u.onMenuMouseDown=function(b){b.button===0&&(b.stopPropagation(),b.preventDefault(),u.focusInput())},u.onMenuMouseMove=function(b){u.blockOptionHover=!1},u.onControlMouseDown=function(b){var v=u.props.openMenuOnClick;u.state.isFocused?u.props.menuIsOpen?b.target.tagName!=="INPUT"&&b.target.tagName!=="TEXTAREA"&&u.onMenuClose():v&&u.openMenu("first"):(v&&(u.openAfterFocus=!0),u.focusInput()),b.target.tagName!=="INPUT"&&b.target.tagName!=="TEXTAREA"&&b.preventDefault()},u.onDropdownIndicatorMouseDown=function(b){if(!(b&&b.type==="mousedown"&&b.button!==0||u.props.isDisabled)){var v=u.props,y=v.isMulti,m=v.menuIsOpen;u.focusInput(),m?(u.setState({inputIsHiddenAfterUpdate:!y}),u.onMenuClose()):u.openMenu("first"),b.preventDefault(),b.stopPropagation()}},u.onClearIndicatorMouseDown=function(b){b&&b.type==="mousedown"&&b.button!==0||(u.clearValue(),b.stopPropagation(),u.openAfterFocus=!1,b.type==="touchend"?u.focusInput():setTimeout(function(){return u.focusInput()}))},u.onScroll=function(b){typeof u.props.closeMenuOnScroll=="boolean"?b.target instanceof HTMLElement&&ya(b.target)&&u.props.onMenuClose():typeof u.props.closeMenuOnScroll=="function"&&u.props.closeMenuOnScroll(b)&&u.props.onMenuClose()},u.onCompositionStart=function(){u.isComposing=!0},u.onCompositionEnd=function(){u.isComposing=!1},u.onTouchStart=function(b){var v=b.touches,y=v&&v.item(0);y&&(u.initialTouchX=y.clientX,u.initialTouchY=y.clientY,u.userIsDragging=!1)},u.onTouchMove=function(b){var v=b.touches,y=v&&v.item(0);if(y){var m=Math.abs(y.clientX-u.initialTouchX),_=Math.abs(y.clientY-u.initialTouchY);u.userIsDragging=m>5||_>5}},u.onTouchEnd=function(b){u.userIsDragging||(u.controlRef&&!u.controlRef.contains(b.target)&&u.menuListRef&&!u.menuListRef.contains(b.target)&&u.blurInput(),u.initialTouchX=0,u.initialTouchY=0)},u.onControlTouchEnd=function(b){u.userIsDragging||u.onControlMouseDown(b)},u.onClearIndicatorTouchEnd=function(b){u.userIsDragging||u.onClearIndicatorMouseDown(b)},u.onDropdownIndicatorTouchEnd=function(b){u.userIsDragging||u.onDropdownIndicatorMouseDown(b)},u.handleInputChange=function(b){var v=b.currentTarget.value;u.setState({inputIsHiddenAfterUpdate:!1}),u.onInputChange(v,{action:"input-change"}),u.props.menuIsOpen||u.onMenuOpen()},u.onInputFocus=function(b){u.props.onFocus&&u.props.onFocus(b),u.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(u.openAfterFocus||u.props.openMenuOnFocus)&&u.openMenu("first"),u.openAfterFocus=!1},u.onInputBlur=function(b){u.menuListRef&&u.menuListRef.contains(document.activeElement)?u.inputRef.focus():(u.props.onBlur&&u.props.onBlur(b),u.onInputChange("",{action:"input-blur"}),u.onMenuClose(),u.setState({focusedValue:null,isFocused:!1}))},u.onOptionHover=function(b){u.blockOptionHover||u.state.focusedOption===b||u.setState({focusedOption:b})},u.shouldHideSelectedOptions=function(){return bc(u.props)},u.onKeyDown=function(b){var v=u.props,y=v.isMulti,m=v.backspaceRemovesValue,_=v.escapeClearsValue,E=v.inputValue,O=v.isClearable,D=v.isDisabled,z=v.menuIsOpen,q=v.onKeyDown,K=v.tabSelectsValue,oe=v.openMenuOnFocus,xe=u.state,de=xe.focusedOption,ge=xe.focusedValue,we=xe.selectValue;if(!(D||typeof q=="function"&&(q(b),b.defaultPrevented))){switch(u.blockOptionHover=!0,b.key){case"ArrowLeft":if(!y||E)return;u.focusValue("previous");break;case"ArrowRight":if(!y||E)return;u.focusValue("next");break;case"Delete":case"Backspace":if(E)return;if(ge)u.removeValue(ge);else{if(!m)return;y?u.popValue():O&&u.clearValue()}break;case"Tab":if(u.isComposing||b.shiftKey||!z||!K||!de||oe&&u.isOptionSelected(de,we))return;u.selectOption(de);break;case"Enter":if(b.keyCode===229)break;if(z){if(!de||u.isComposing)return;u.selectOption(de);break}return;case"Escape":z?(u.setState({inputIsHiddenAfterUpdate:!1}),u.onInputChange("",{action:"menu-close"}),u.onMenuClose()):O&&_&&u.clearValue();break;case" ":if(E)return;if(!z){u.openMenu("first");break}if(!de)return;u.selectOption(de);break;case"ArrowUp":z?u.focusOption("up"):u.openMenu("last");break;case"ArrowDown":z?u.focusOption("down"):u.openMenu("first");break;case"PageUp":if(!z)return;u.focusOption("pageup");break;case"PageDown":if(!z)return;u.focusOption("pagedown");break;case"Home":if(!z)return;u.focusOption("first");break;case"End":if(!z)return;u.focusOption("last");break;default:return}b.preventDefault()}},u.instancePrefix="react-select-"+(u.props.instanceId||++Hm),u.state.selectValue=Lu(h.value),u}return zo(f,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(h){var u,b,v,y,m,_=this.props,E=_.isDisabled,O=_.menuIsOpen,D=this.state.isFocused;(D&&!E&&h.isDisabled||D&&O&&!h.menuIsOpen)&&this.focusInput(),D&&E&&!h.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(u=this.menuListRef,b=this.focusedOptionRef,v=u.getBoundingClientRect(),y=b.getBoundingClientRect(),m=b.offsetHeight/3,y.bottom+m>v.bottom?Xo(u,Math.min(b.offsetTop+b.clientHeight-u.offsetHeight+m,u.scrollHeight)):y.top-m<v.top&&Xo(u,Math.max(b.offsetTop-m,0)),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(h,u){this.props.onInputChange(h,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(h){var u=this,b=this.state,v=b.selectValue,y=b.isFocused,m=this.buildFocusableOptions(),_=h==="first"?0:m.length-1;if(!this.props.isMulti){var E=m.indexOf(v[0]);E>-1&&(_=E)}this.scrollToFocusedOptionOnUpdate=!(y&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[_]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(h){var u=this.state,b=u.selectValue,v=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var y=b.indexOf(v);v||(y=-1);var m=b.length-1,_=-1;if(b.length){switch(h){case"previous":_=y===0?0:y===-1?m:y-1;break;case"next":y>-1&&y<m&&(_=y+1)}this.setState({inputIsHidden:_!==-1,focusedValue:b[_]})}}}},{key:"focusOption",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,b=this.state.focusedOption,v=this.getFocusableOptions();if(v.length){var y=0,m=v.indexOf(b);b||(m=-1),h==="up"?y=m>0?m-1:v.length-1:h==="down"?y=(m+1)%v.length:h==="pageup"?(y=m-u)<0&&(y=0):h==="pagedown"?(y=m+u)>v.length-1&&(y=v.length-1):h==="last"&&(y=v.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:v[y],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Ca):Yt(Yt({},Ca),this.props.theme):Ca}},{key:"getCommonProps",value:function(){var h=this.clearValue,u=this.cx,b=this.getStyles,v=this.getValue,y=this.selectOption,m=this.setValue,_=this.props,E=_.isMulti,O=_.isRtl,D=_.options;return{clearValue:h,cx:u,getStyles:b,getValue:v,hasValue:this.hasValue(),isMulti:E,isRtl:O,options:D,selectOption:y,selectProps:_,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var h=this.props,u=h.isClearable,b=h.isMulti;return u===void 0?b:u}},{key:"isOptionDisabled",value:function(h,u){return gc(this.props,h,u)}},{key:"isOptionSelected",value:function(h,u){return yc(this.props,h,u)}},{key:"filterOption",value:function(h,u){return vc(this.props,h,u)}},{key:"formatOptionLabel",value:function(h,u){if(typeof this.props.formatOptionLabel=="function"){var b=this.props.inputValue,v=this.state.selectValue;return this.props.formatOptionLabel(h,{context:u,inputValue:b,selectValue:v})}return this.getOptionLabel(h)}},{key:"formatGroupLabel",value:function(h){return this.props.formatGroupLabel(h)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var h=this.props,u=h.isDisabled,b=h.isSearchable,v=h.inputId,y=h.inputValue,m=h.tabIndex,_=h.form,E=this.getComponents().Input,O=this.state.inputIsHidden,D=this.commonProps,z=v||this.getElementId("input"),q={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return b?t.default.createElement(E,Qe({},D,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:z,innerRef:this.getInputRef,isDisabled:u,isHidden:O,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:_,type:"text",value:y},q)):t.default.createElement(Mm,Qe({id:z,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:qo,onFocus:this.onInputFocus,readOnly:!0,disabled:u,tabIndex:m,form:_,value:""},q))}},{key:"renderPlaceholderOrValue",value:function(){var h=this,u=this.getComponents(),b=u.MultiValue,v=u.MultiValueContainer,y=u.MultiValueLabel,m=u.MultiValueRemove,_=u.SingleValue,E=u.Placeholder,O=this.commonProps,D=this.props,z=D.controlShouldRenderValue,q=D.isDisabled,K=D.isMulti,oe=D.inputValue,xe=D.placeholder,de=this.state,ge=de.selectValue,we=de.focusedValue,De=de.isFocused;if(!this.hasValue()||!z)return oe?null:t.default.createElement(E,Qe({},O,{key:"placeholder",isDisabled:q,isFocused:De}),xe);if(K){var Pe=ge.map(function(tt,At){var st=tt===we;return t.default.createElement(b,Qe({},O,{components:{Container:v,Label:y,Remove:m},isFocused:st,isDisabled:q,key:"".concat(h.getOptionValue(tt)).concat(At),index:At,removeProps:{onClick:function(){return h.removeValue(tt)},onTouchEnd:function(){return h.removeValue(tt)},onMouseDown:function(ht){ht.preventDefault(),ht.stopPropagation()}},data:tt}),h.formatOptionLabel(tt,"value"))});return Pe}if(oe)return null;var He=ge[0];return t.default.createElement(_,Qe({},O,{data:He,isDisabled:q}),this.formatOptionLabel(He,"value"))}},{key:"renderClearIndicator",value:function(){var h=this.getComponents().ClearIndicator,u=this.commonProps,b=this.props,v=b.isDisabled,y=b.isLoading,m=this.state.isFocused;if(!this.isClearable()||!h||v||!this.hasValue()||y)return null;var _={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.default.createElement(h,Qe({},u,{innerProps:_,isFocused:m}))}},{key:"renderLoadingIndicator",value:function(){var h=this.getComponents().LoadingIndicator,u=this.commonProps,b=this.props,v=b.isDisabled,y=b.isLoading,m=this.state.isFocused;return h&&y?t.default.createElement(h,Qe({},u,{innerProps:{"aria-hidden":"true"},isDisabled:v,isFocused:m})):null}},{key:"renderIndicatorSeparator",value:function(){var h=this.getComponents(),u=h.DropdownIndicator,b=h.IndicatorSeparator;if(!u||!b)return null;var v=this.commonProps,y=this.props.isDisabled,m=this.state.isFocused;return t.default.createElement(b,Qe({},v,{isDisabled:y,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var h=this.getComponents().DropdownIndicator;if(!h)return null;var u=this.commonProps,b=this.props.isDisabled,v=this.state.isFocused,y={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.default.createElement(h,Qe({},u,{innerProps:y,isDisabled:b,isFocused:v}))}},{key:"renderMenu",value:function(){var h=this,u=this.getComponents(),b=u.Group,v=u.GroupHeading,y=u.Menu,m=u.MenuList,_=u.MenuPortal,E=u.LoadingMessage,O=u.NoOptionsMessage,D=u.Option,z=this.commonProps,q=this.state.focusedOption,K=this.props,oe=K.captureMenuScroll,xe=K.inputValue,de=K.isLoading,ge=K.loadingMessage,we=K.minMenuHeight,De=K.maxMenuHeight,Pe=K.menuIsOpen,He=K.menuPlacement,tt=K.menuPosition,At=K.menuPortalTarget,st=K.menuShouldBlockScroll,ht=K.menuShouldScrollIntoView,Bt=K.noOptionsMessage,rt=K.onMenuScrollToTop,kt=K.onMenuScrollToBottom;if(!Pe)return null;var Tt,Ut=function(yt,Vt){var sn=yt.type,Gt=yt.data,En=yt.isDisabled,$n=yt.isSelected,Bn=yt.label,Ei=yt.value,uo=q===Gt,co=En?void 0:function(){return h.onOptionHover(Gt)},_s=En?void 0:function(){return h.selectOption(Gt)},fo="".concat(h.getElementId("option"),"-").concat(Vt),er={id:fo,onClick:_s,onMouseMove:co,onMouseOver:co,tabIndex:-1};return t.default.createElement(D,Qe({},z,{innerProps:er,data:Gt,isDisabled:En,isSelected:$n,key:fo,label:Bn,type:sn,value:Ei,isFocused:uo,innerRef:uo?h.getFocusedOptionRef:void 0}),h.formatOptionLabel(yt.data,"menu"))};if(this.hasOptions())Tt=this.getCategorizedOptions().map(function(yt){if(yt.type==="group"){var Vt=yt.data,sn=yt.options,Gt=yt.index,En="".concat(h.getElementId("group"),"-").concat(Gt),$n="".concat(En,"-heading");return t.default.createElement(b,Qe({},z,{key:En,data:Vt,options:sn,Heading:v,headingProps:{id:$n,data:yt.data},label:h.formatGroupLabel(yt.data)}),yt.options.map(function(Bn){return Ut(Bn,"".concat(Gt,"-").concat(Bn.index))}))}if(yt.type==="option")return Ut(yt,"".concat(yt.index))});else if(de){var un=ge({inputValue:xe});if(un===null)return null;Tt=t.default.createElement(E,z,un)}else{var vn=Bt({inputValue:xe});if(vn===null)return null;Tt=t.default.createElement(O,z,vn)}var cn={minMenuHeight:we,maxMenuHeight:De,menuPlacement:He,menuPosition:tt,menuShouldScrollIntoView:ht},nn=t.default.createElement(Uu,Qe({},z,cn),function(yt){var Vt=yt.ref,sn=yt.placerProps,Gt=sn.placement,En=sn.maxHeight;return t.default.createElement(y,Qe({},z,cn,{innerRef:Vt,innerProps:{onMouseDown:h.onMenuMouseDown,onMouseMove:h.onMenuMouseMove},isLoading:de,placement:Gt}),t.default.createElement(Lm,{captureEnabled:oe,onTopArrive:rt,onBottomArrive:kt,lockEnabled:st},function($n){return t.default.createElement(m,Qe({},z,{innerRef:function(Bn){h.getMenuListRef(Bn),$n(Bn)},isLoading:de,maxHeight:En,focusedOption:q}),Tt)}))});return At||tt==="fixed"?t.default.createElement(_,Qe({},z,{appendTo:At,controlElement:this.controlRef,menuPlacement:He,menuPosition:tt}),nn):nn}},{key:"renderFormField",value:function(){var h=this,u=this.props,b=u.delimiter,v=u.isDisabled,y=u.isMulti,m=u.name,_=this.state.selectValue;if(m&&!v){if(y){if(b){var E=_.map(function(z){return h.getOptionValue(z)}).join(b);return t.default.createElement("input",{name:m,type:"hidden",value:E})}var O=_.length>0?_.map(function(z,q){return t.default.createElement("input",{key:"i-".concat(q),name:m,type:"hidden",value:h.getOptionValue(z)})}):t.default.createElement("input",{name:m,type:"hidden"});return t.default.createElement("div",null,O)}var D=_[0]?this.getOptionValue(_[0]):"";return t.default.createElement("input",{name:m,type:"hidden",value:D})}}},{key:"renderLiveRegion",value:function(){var h=this.commonProps,u=this.state,b=u.ariaSelection,v=u.focusedOption,y=u.focusedValue,m=u.isFocused,_=u.selectValue,E=this.getFocusableOptions();return t.default.createElement(Am,Qe({},h,{ariaSelection:b,focusedOption:v,focusedValue:y,isFocused:m,selectValue:_,focusableOptions:E}))}},{key:"render",value:function(){var h=this.getComponents(),u=h.Control,b=h.IndicatorsContainer,v=h.SelectContainer,y=h.ValueContainer,m=this.props,_=m.className,E=m.id,O=m.isDisabled,D=m.menuIsOpen,z=this.state.isFocused,q=this.commonProps=this.getCommonProps();return t.default.createElement(v,Qe({},q,{className:_,innerProps:{id:E,onKeyDown:this.onKeyDown},isDisabled:O,isFocused:z}),this.renderLiveRegion(),t.default.createElement(u,Qe({},q,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:O,isFocused:z,menuIsOpen:D}),t.default.createElement(y,Qe({},q,{isDisabled:O}),this.renderPlaceholderOrValue(),this.renderInput()),t.default.createElement(b,Qe({},q,{isDisabled:O}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(h,u){var b=u.prevProps,v=u.clearFocusValueOnUpdate,y=u.inputIsHiddenAfterUpdate,m=h.options,_=h.value,E=h.menuIsOpen,O=h.inputValue,D={};if(b&&(_!==b.value||m!==b.options||E!==b.menuIsOpen||O!==b.inputValue)){var z=Lu(_),q=E?function(de,ge){return dc(hc(de,ge))}(h,z):[],K=v?function(de,ge){var we=de.focusedValue,De=de.selectValue.indexOf(we);if(De>-1){if(ge.indexOf(we)>-1)return we;if(De<ge.length)return ge[De]}return null}(u,z):null,oe=function(de,ge){var we=de.focusedOption;return we&&ge.indexOf(we)>-1?we:ge[0]}(u,q);D={selectValue:z,focusedOption:oe,focusedValue:K,clearFocusValueOnUpdate:!1}}var xe=y!=null&&h!==b?{inputIsHidden:y,inputIsHiddenAfterUpdate:void 0}:{};return Yt(Yt(Yt({},D),xe),{},{prevProps:h})}}]),f}(t.Component);wc.defaultProps=Bm;var Sc,_c,xc,Fm=(t.Component,Sc=wc,xc=_c=function(r){Vo(f,r);var s=Go(f);function f(){var h;Fo(this,f);for(var u=arguments.length,b=new Array(u),v=0;v<u;v++)b[v]=arguments[v];return(h=s.call.apply(s,[this].concat(b))).select=void 0,h.state={inputValue:h.props.inputValue!==void 0?h.props.inputValue:h.props.defaultInputValue,menuIsOpen:h.props.menuIsOpen!==void 0?h.props.menuIsOpen:h.props.defaultMenuIsOpen,value:h.props.value!==void 0?h.props.value:h.props.defaultValue},h.onChange=function(y,m){h.callProp("onChange",y,m),h.setState({value:y})},h.onInputChange=function(y,m){var _=h.callProp("onInputChange",y,m);h.setState({inputValue:_!==void 0?_:y})},h.onMenuOpen=function(){h.callProp("onMenuOpen"),h.setState({menuIsOpen:!0})},h.onMenuClose=function(){h.callProp("onMenuClose"),h.setState({menuIsOpen:!1})},h}return zo(f,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(h){return this.props[h]!==void 0?this.props[h]:this.state[h]}},{key:"callProp",value:function(h){if(typeof this.props[h]=="function"){for(var u,b=arguments.length,v=new Array(b>1?b-1:0),y=1;y<b;y++)v[y-1]=arguments[y];return(u=this.props)[h].apply(u,v)}}},{key:"render",value:function(){var h=this,u=this.props;u.defaultInputValue,u.defaultMenuIsOpen,u.defaultValue;var b=Qr(u,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return t.default.createElement(Sc,Qe({},b,{ref:function(v){h.select=v},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),f}(t.Component),_c.defaultProps={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},xc);const zm=Fm;var Aa=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];const Ec=function(r){var s=r.content?Aa.find(function(f){return f.value===r.content}):null;return t.default.createElement("div",{className:"r6o-purposedropdown"},t.default.createElement(zm,{value:s,onChange:r.onChange,options:Aa,isDisabled:!r.editable}))};var Um=function(r){return t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:r.width},t.default.createElement("metadata",null,"IcoFont Icons"),t.default.createElement("title",null,"simple-down"),t.default.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),t.default.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"}))},Vm=function(r){return t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:r.width},t.default.createElement("metadata",null,"IcoFont Icons"),t.default.createElement("title",null,"close"),t.default.createElement("glyph",{glyphName:"close",unicode:"",horizAdvX:"1000"}),t.default.createElement("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"}))},Wm=function(r){return t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:r.width},t.default.createElement("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}))};function Zi(r){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zi(r)}function Tc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Jo(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Tc(Object(f),!0).forEach(function(h){Gm(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Tc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Gm(r,s,f){return(s=function(h){var u=function(b,v){if(Zi(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(Zi(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h);return Zi(u)==="symbol"?u:String(u)}(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Pc(r,s){return function(f){if(Array.isArray(f))return f}(r)||function(f,h){var u=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(u!=null){var b,v,y,m,_=[],E=!0,O=!1;try{if(y=(u=u.call(f)).next,h===0){if(Object(u)!==u)return;E=!1}else for(;!(E=(b=y.call(u)).done)&&(_.push(b.value),_.length!==h);E=!0);}catch(D){O=!0,v=D}finally{try{if(!E&&u.return!=null&&(m=u.return(),Object(m)!==m))return}finally{if(O)throw v}}return _}}(r,s)||function(f,h){if(f){if(typeof f=="string")return Oc(f,h);var u=Object.prototype.toString.call(f).slice(8,-1);return u==="Object"&&f.constructor&&(u=f.constructor.name),u==="Map"||u==="Set"?Array.from(f):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Oc(f,h):void 0}}(r,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oc(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}const qm=function(r){var s=Pc((0,t.useState)(!1),2),f=s[0],h=s[1],u=Pc((0,t.useState)(!1),2),b=u[0],v=u[1],y=r.body.modified||r.body.created,m=r.body.creator&&t.default.createElement("div",{className:"r6o-lastmodified"},t.default.createElement("span",{className:"r6o-lastmodified-by"},r.body.creator.name||r.body.creator.id),r.body.created&&t.default.createElement("span",{className:"r6o-lastmodified-at"},t.default.createElement(L,{datetime:r.env.toClientTime(y),locale:Lt.locale()})));return r.readOnly?t.default.createElement("div",{className:"r6o-widget comment"},t.default.createElement("div",{className:"r6o-readonly-comment"},r.body.value),m):t.default.createElement("div",{className:f?"r6o-widget comment editable":"r6o-widget comment"},t.default.createElement(wn,{editable:f,content:r.body.value,onChange:function(_){return r.onUpdate(r.body,Jo(Jo({},r.body),{},{value:_.target.value}))},onSaveAndClose:r.onSaveAndClose}),!f&&m,r.purposeSelector&&t.default.createElement(Ec,{editable:f,content:r.body.purpose,onChange:function(_){return r.onUpdate(r.body,Jo(Jo({},r.body),{},{purpose:_.value}))},onSaveAndClose:r.onSaveAndClose}),t.default.createElement("div",{className:b?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:function(){return v(!b)}},t.default.createElement(Um,{width:12})),b&&t.default.createElement(jn,{onEdit:function(_){h(!0),v(!1)},onDelete:function(_){r.onDelete(r.body),v(!1)},onClickOutside:function(){return v(!1)}}))};function Yi(r){return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yi(r)}function Cc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function ti(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Cc(Object(f),!0).forEach(function(h){Xm(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Cc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Xm(r,s,f){return(s=function(h){var u=function(b,v){if(Yi(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(Yi(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h);return Yi(u)==="symbol"?u:String(u)}(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}var Zm=Aa.map(function(r){return r.value}),Ac=function(r,s){var f=s?Zm.indexOf(r.purpose)>-1:r.purpose=="commenting"||r.purpose=="replying";return r.type==="TextualBody"&&(!Object.prototype.hasOwnProperty.call(r,"purpose")||f)},Rc=function(r,s){if(s.editable===!0)return!1;if(s.editable===!1)return!0;if(s.editable==="MINE_ONLY"){var f,h,u=(f=r.creator)===null||f===void 0?void 0:f.id;return((h=s.env.user)===null||h===void 0?void 0:h.id)!==u}return s.readOnly},Dc=function(r){var s,f,h=r.annotation?r.annotation.bodies.filter(function(m){return Ac(m,r.purposeSelector)}):[],u=(s=h.find(function(m){return m.draft==1}),f=h.length>1,s||{type:"TextualBody",value:"",purpose:f?"replying":"commenting",draft:!0}),b=h.filter(function(m){return m!=u}),v=!r.readOnly&&r.annotation,y=b.length===0||!r.disableReply;return t.default.createElement(t.default.Fragment,null,b.map(function(m,_){return t.default.createElement(qm,{key:_,env:r.env,purposeSelector:r.purposeSelector,readOnly:Rc(m,r),body:m,onUpdate:r.onUpdateBody,onDelete:r.onRemoveBody,onSaveAndClose:r.onSaveAndClose})}),v&&y&&t.default.createElement("div",{className:"r6o-widget comment editable"},t.default.createElement(wn,{focus:r.focus,content:u.value,editable:!0,placeholder:b.length>0?Lt.t("Add a reply..."):r.textPlaceHolder||Lt.t("Add a comment..."),onChange:function(m){var _=u.value,E=m.target.value;_.length===0&&E.length>0?r.onAppendBody(ti(ti({},u),{},{value:E})):_.length>0&&E.length===0?r.onRemoveBody(u):r.onUpdateBody(u,ti(ti({},u),{},{value:E}))},onSaveAndClose:function(){return r.onSaveAndClose()}}),r.purposeSelector&&u.value.length>0&&t.default.createElement(Ec,{editable:!0,content:u.purpose,onChange:function(m){return r.onUpdateBody(u,ti(ti({},u),{},{purpose:m.value}))},onSaveAndClose:function(){return r.onSaveAndClose()}})))};Dc.disableDelete=function(r,s){return r.bodies.filter(function(f){return Ac(f,s.purposeSelector)}).some(function(f){return Rc(f,s)})};const kc=Dc;function Mc(r,s){r.prototype=Object.create(s.prototype),r.prototype.constructor=r,Uo(r,s)}function jc(r,s){return r.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Ic=t.default.createContext(null);var Lc=function(r){return r.scrollTop},Ki="unmounted",Rr="exited",Dr="entering",ni="entered",Ra="exiting",Xn=function(r){function s(h,u){var b;b=r.call(this,h,u)||this;var v,y=u&&!u.isMounting?h.enter:h.appear;return b.appearStatus=null,h.in?y?(v=Rr,b.appearStatus=Dr):v=ni:v=h.unmountOnExit||h.mountOnEnter?Ki:Rr,b.state={status:v},b.nextCallback=null,b}Mc(s,r),s.getDerivedStateFromProps=function(h,u){return h.in&&u.status===Ki?{status:Rr}:null};var f=s.prototype;return f.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},f.componentDidUpdate=function(h){var u=null;if(h!==this.props){var b=this.state.status;this.props.in?b!==Dr&&b!==ni&&(u=Dr):b!==Dr&&b!==ni||(u=Ra)}this.updateStatus(!1,u)},f.componentWillUnmount=function(){this.cancelNextCallback()},f.getTimeouts=function(){var h,u,b,v=this.props.timeout;return h=u=b=v,v!=null&&typeof v!="number"&&(h=v.exit,u=v.enter,b=v.appear!==void 0?v.appear:u),{exit:h,enter:u,appear:b}},f.updateStatus=function(h,u){if(h===void 0&&(h=!1),u!==null)if(this.cancelNextCallback(),u===Dr){if(this.props.unmountOnExit||this.props.mountOnEnter){var b=this.props.nodeRef?this.props.nodeRef.current:t.default.findDOMNode(this);b&&Lc(b)}this.performEnter(h)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Rr&&this.setState({status:Ki})},f.performEnter=function(h){var u=this,b=this.props.enter,v=this.context?this.context.isMounting:h,y=this.props.nodeRef?[v]:[t.default.findDOMNode(this),v],m=y[0],_=y[1],E=this.getTimeouts(),O=v?E.appear:E.enter;h||b?(this.props.onEnter(m,_),this.safeSetState({status:Dr},function(){u.props.onEntering(m,_),u.onTransitionEnd(O,function(){u.safeSetState({status:ni},function(){u.props.onEntered(m,_)})})})):this.safeSetState({status:ni},function(){u.props.onEntered(m)})},f.performExit=function(){var h=this,u=this.props.exit,b=this.getTimeouts(),v=this.props.nodeRef?void 0:t.default.findDOMNode(this);u?(this.props.onExit(v),this.safeSetState({status:Ra},function(){h.props.onExiting(v),h.onTransitionEnd(b.exit,function(){h.safeSetState({status:Rr},function(){h.props.onExited(v)})})})):this.safeSetState({status:Rr},function(){h.props.onExited(v)})},f.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},f.safeSetState=function(h,u){u=this.setNextCallback(u),this.setState(h,u)},f.setNextCallback=function(h){var u=this,b=!0;return this.nextCallback=function(v){b&&(b=!1,u.nextCallback=null,h(v))},this.nextCallback.cancel=function(){b=!1},this.nextCallback},f.onTransitionEnd=function(h,u){this.setNextCallback(u);var b=this.props.nodeRef?this.props.nodeRef.current:t.default.findDOMNode(this),v=h==null&&!this.props.addEndListener;if(b&&!v){if(this.props.addEndListener){var y=this.props.nodeRef?[this.nextCallback]:[b,this.nextCallback],m=y[0],_=y[1];this.props.addEndListener(m,_)}h!=null&&setTimeout(this.nextCallback,h)}else setTimeout(this.nextCallback,0)},f.render=function(){var h=this.state.status;if(h===Ki)return null;var u=this.props,b=u.children,v=(u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef,ma(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.default.createElement(Ic.Provider,{value:null},typeof b=="function"?b(h,v):t.default.cloneElement(t.default.Children.only(b),v))},s}(t.default.Component);function ri(){}Xn.contextType=Ic,Xn.propTypes={},Xn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ri,onEntering:ri,onEntered:ri,onExit:ri,onExiting:ri,onExited:ri},Xn.UNMOUNTED=Ki,Xn.EXITED=Rr,Xn.ENTERING=Dr,Xn.ENTERED=ni,Xn.EXITING=Ra;const Ym=Xn;var Da=function(r,s){return r&&s&&s.split(" ").forEach(function(f){return u=f,void((h=r).classList?h.classList.remove(u):typeof h.className=="string"?h.className=jc(h.className,u):h.setAttribute("class",jc(h.className&&h.className.baseVal||"",u)));var h,u})},ka=function(r){function s(){for(var h,u=arguments.length,b=new Array(u),v=0;v<u;v++)b[v]=arguments[v];return(h=r.call.apply(r,[this].concat(b))||this).appliedClasses={appear:{},enter:{},exit:{}},h.onEnter=function(y,m){var _=h.resolveArguments(y,m),E=_[0],O=_[1];h.removeClasses(E,"exit"),h.addClass(E,O?"appear":"enter","base"),h.props.onEnter&&h.props.onEnter(y,m)},h.onEntering=function(y,m){var _=h.resolveArguments(y,m),E=_[0],O=_[1]?"appear":"enter";h.addClass(E,O,"active"),h.props.onEntering&&h.props.onEntering(y,m)},h.onEntered=function(y,m){var _=h.resolveArguments(y,m),E=_[0],O=_[1]?"appear":"enter";h.removeClasses(E,O),h.addClass(E,O,"done"),h.props.onEntered&&h.props.onEntered(y,m)},h.onExit=function(y){var m=h.resolveArguments(y)[0];h.removeClasses(m,"appear"),h.removeClasses(m,"enter"),h.addClass(m,"exit","base"),h.props.onExit&&h.props.onExit(y)},h.onExiting=function(y){var m=h.resolveArguments(y)[0];h.addClass(m,"exit","active"),h.props.onExiting&&h.props.onExiting(y)},h.onExited=function(y){var m=h.resolveArguments(y)[0];h.removeClasses(m,"exit"),h.addClass(m,"exit","done"),h.props.onExited&&h.props.onExited(y)},h.resolveArguments=function(y,m){return h.props.nodeRef?[h.props.nodeRef.current,y]:[y,m]},h.getClassNames=function(y){var m=h.props.classNames,_=typeof m=="string",E=_?(_&&m?m+"-":"")+y:m[y];return{baseClassName:E,activeClassName:_?E+"-active":m[y+"Active"],doneClassName:_?E+"-done":m[y+"Done"]}},h}Mc(s,r);var f=s.prototype;return f.addClass=function(h,u,b){var v=this.getClassNames(u)[b+"ClassName"],y=this.getClassNames("enter").doneClassName;u==="appear"&&b==="done"&&y&&(v+=" "+y),b==="active"&&h&&Lc(h),v&&(this.appliedClasses[u][b]=v,function(m,_){m&&_&&_.split(" ").forEach(function(E){return D=E,void((O=m).classList?O.classList.add(D):function(z,q){return z.classList?!!q&&z.classList.contains(q):(" "+(z.className.baseVal||z.className)+" ").indexOf(" "+q+" ")!==-1}(O,D)||(typeof O.className=="string"?O.className=O.className+" "+D:O.setAttribute("class",(O.className&&O.className.baseVal||"")+" "+D)));var O,D})}(h,v))},f.removeClasses=function(h,u){var b=this.appliedClasses[u],v=b.base,y=b.active,m=b.done;this.appliedClasses[u]={},v&&Da(h,v),y&&Da(h,y),m&&Da(h,m)},f.render=function(){var h=this.props,u=(h.classNames,ma(h,["classNames"]));return t.default.createElement(Ym,Qe({},u,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(t.default.Component);ka.defaultProps={classNames:""},ka.propTypes={};const Km=ka;function Ma(r,s){return function(f){if(Array.isArray(f))return f}(r)||function(f,h){var u=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(u!=null){var b,v,y,m,_=[],E=!0,O=!1;try{if(y=(u=u.call(f)).next,h===0){if(Object(u)!==u)return;E=!1}else for(;!(E=(b=y.call(u)).done)&&(_.push(b.value),_.length!==h);E=!0);}catch(D){O=!0,v=D}finally{try{if(!E&&u.return!=null&&(m=u.return(),Object(m)!==m))return}finally{if(O)throw v}}return _}}(r,s)||function(f,h){if(f){if(typeof f=="string")return Nc(f,h);var u=Object.prototype.toString.call(f).slice(8,-1);return u==="Object"&&f.constructor&&(u=f.constructor.name),u==="Map"||u==="Set"?Array.from(f):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Nc(f,h):void 0}}(r,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nc(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}const Jm=function(r){var s=(0,t.useRef)(),f=Ma((0,t.useState)(r.initialValue||""),2),h=f[0],u=f[1],b=Ma((0,t.useState)([]),2),v=b[0],y=b[1],m=Ma((0,t.useState)(null),2),_=m[0],E=m[1];(0,t.useEffect)(function(){r.focus&&s.current.querySelector("input").focus({preventScroll:!0})},[]),(0,t.useEffect)(function(){r.onChange&&r.onChange(h)},[h]);var O=function(){if(_!==null)r.onSubmit(v[_]);else{var D=h.trim();if(D){var z=Array.isArray(r.vocabulary)?r.vocabulary.find(function(q){return(q.label||q).toLowerCase()===D.toLowerCase()}):null;z?r.onSubmit(z):r.onSubmit(D)}}u(""),y([]),E(null)};return t.default.createElement("div",{ref:s,className:"r6o-autocomplete"},t.default.createElement("div",null,t.default.createElement("input",{onKeyDown:function(D){if(D.which===13)O();else if(D.which===27)r.onCancel&&r.onCancel();else if(v.length>0){if(D.which===38)if(_===null)E(0);else{var z=Math.max(0,_-1);E(z)}else if(D.which===40)if(_===null)E(0);else{var q=Math.min(v.length-1,_+1);E(q)}}else D.which===40&&Array.isArray(r.vocabulary)&&y(r.vocabulary)},onChange:function(D){var z=D.target.value;u(z),E(null),z?function(q){if(typeof r.vocabulary=="function"){var K=(xe=q,(0,r.vocabulary)(xe));K.then?K.then(y):y(K)}else{var oe=function(de,ge){return ge.filter(function(we){return(we.label?we.label:we).toLowerCase().startsWith(de.toLowerCase())})}(q,r.vocabulary);y(oe)}var xe}(z):y([])},value:h,placeholder:r.placeholder})),t.default.createElement("ul",null,v.length>0&&v.map(function(D,z){return t.default.createElement("li",{key:"".concat(D.label?D.label:D).concat(z),onClick:O,onMouseEnter:function(){return E(z)},style:_===z?{backgroundColor:"#bde4ff"}:{}},D.label?D.label:D)})))};function Ji(r){return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ji(r)}function Bc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Qo(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Bc(Object(f),!0).forEach(function(h){Qm(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Bc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Qm(r,s,f){return(s=function(h){var u=function(b,v){if(Ji(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(Ji(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h);return Ji(u)==="symbol"?u:String(u)}(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Hc(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}const Fc=function(r){var s=r.annotation?r.annotation.bodies.filter(function(E){return E.purpose==="tagging"}):[],f=s.slice().reverse().find(function(E){return E.draft})||{type:"TextualBody",value:"",purpose:"tagging",draft:!0},h=s.filter(function(E){return E!=f}),u=function(E,O){return function(D){if(Array.isArray(D))return D}(E)||function(D,z){var q=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(q!=null){var K,oe,xe,de,ge=[],we=!0,De=!1;try{if(xe=(q=q.call(D)).next,z===0){if(Object(q)!==q)return;we=!1}else for(;!(we=(K=xe.call(q)).done)&&(ge.push(K.value),ge.length!==z);we=!0);}catch(Pe){De=!0,oe=Pe}finally{try{if(!we&&q.return!=null&&(de=q.return(),Object(de)!==de))return}finally{if(De)throw oe}}return ge}}(E,O)||function(D,z){if(D){if(typeof D=="string")return Hc(D,z);var q=Object.prototype.toString.call(D).slice(8,-1);return q==="Object"&&D.constructor&&(q=D.constructor.name),q==="Map"||q==="Set"?Array.from(D):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?Hc(D,z):void 0}}(E,O)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}((0,t.useState)(!1),2),b=u[0],v=u[1],y=function(E){return function(O){v(b!==E&&E)}},m=function(E){return function(O){O.stopPropagation(),r.onRemoveBody(E)}},_=function(E){return E.value||E.source.label};return t.default.createElement("div",{className:"r6o-widget r6o-tag"},h.length>0&&t.default.createElement("ul",{className:"r6o-taglist"},h.map(function(E){return t.default.createElement("li",{key:_(E),onClick:y(E)},t.default.createElement("span",{className:"r6o-label"},_(E)),!r.readOnly&&t.default.createElement(Km,{in:b===E,timeout:200,classNames:"r6o-delete"},t.default.createElement("span",{className:"r6o-delete-wrapper",onClick:m(E)},t.default.createElement("span",{className:"r6o-delete"},t.default.createElement(Vm,{width:12})))))})),!r.readOnly&&t.default.createElement(Jm,{focus:r.focus,placeholder:r.textPlaceHolder||Lt.t("Add tag..."),vocabulary:r.vocabulary||[],onChange:function(E){var O=f.value.trim(),D=E.trim();O.length===0&&D.length>0?r.onAppendBody(Qo(Qo({},f),{},{value:D})):O.length>0&&D.length===0?r.onRemoveBody(f):O!==D&&r.onUpdateBody(f,Qo(Qo({},f),{},{value:D}))},onSubmit:function(E){var O=E.uri?{type:"SpecificResource",purpose:"tagging",source:{id:E.uri,label:E.label}}:{type:"TextualBody",purpose:"tagging",value:E.label||E};f.value.trim().length===0?r.onAppendBody(O):r.onUpdateBody(f,O)}}))};function ii(r){return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ii(r)}function zc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Uc(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?zc(Object(f),!0).forEach(function(h){$m(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):zc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function $m(r,s,f){return(s=Vc(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function eg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Vc(h.key),h)}}function Vc(r){var s=function(f,h){if(ii(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(ii(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return ii(s)==="symbol"?s:String(s)}function ja(r,s){return ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},ja(r,s)}function $o(r){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},$o(r)}var Wc=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&ja(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=$o(h);if(u){var _=$o(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(ii(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}(E)}(this,y)});function v(y){var m;return function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}(this,v),(m=b.call(this,y)).element=t.default.createRef(),m}return s=v,f=[{key:"renderWidget",value:function(y){for(var m=this.props.widget(Uc(Uc({annotation:y.annotation,readOnly:y.readOnly},y.config),{},{onAppendBody:function(_,E){return y.onAppendBody(_,E)},onUpdateBody:function(_,E,O){return y.onUpdateBody(_,E,O)},onUpsertBody:function(_,E,O){return y.onUpsertBody(_,E,O)},onRemoveBody:function(_,E){return y.onRemoveBody(_,E)},onBatchModify:function(_,E){return y.onBatchModify(_,E)},onSetProperty:function(_,E){return y.onSetProperty(_,E)},onAddContext:function(_){return y.onAddContext(_)},onSaveAndClose:function(){return y.onSaveAndClose()}}));this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(m)}},{key:"componentDidMount",value:function(){this.renderWidget(this.props)}},{key:"componentWillReceiveProps",value:function(y){this.element.current&&this.props.annotation!==y.annotation&&this.renderWidget(y)}},{key:"render",value:function(){return t.default.createElement("div",{ref:this.element,className:"widget"})}}],f&&eg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(t.Component),tg=["widget","force"];window.React=t.default,window.ReactDOM=t.default;var ng={COMMENT:kc,TAG:Fc},rg=[t.default.createElement(kc,null),t.default.createElement(Fc,null)],ig=function(r){var s=function(u,b,v){if(typeof u=="string"||u instanceof String)return t.default.createElement(ng[u],b);if((v==null?void 0:v.toLowerCase())==="react")return t.default.createElement(u,b);if((v==null?void 0:v.toLowerCase())==="plainjs")return t.default.createElement(Wc,{widget:u,config:b});if(function(m){var _;return typeof m=="function"&&!((_=m.prototype)===null||_===void 0||!_.isReactComponent)}(y=u)||function(m){return typeof m=="function"&&(String(m).match(/return .+\(['|"].+['|"],\s*\{/g)||String(m).match(/return .+preact_compat/)||String(m).match(/return .+\.createElement/g))}(y))return t.default.createElement(u,b);if(typeof u=="function"||u instanceof Function)return t.default.createElement(Wc,{widget:u,config:b});throw"".concat(u," is not a valid plugin");var y};if(r.widget){var f=r.widget,h=r.force;return s(f,function(u,b){if(u==null)return{};var v,y,m=function(E,O){if(E==null)return{};var D,z,q={},K=Object.keys(E);for(z=0;z<K.length;z++)D=K[z],O.indexOf(D)>=0||(q[D]=E[D]);return q}(u,b);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(u);for(y=0;y<_.length;y++)v=_[y],b.indexOf(v)>=0||Object.prototype.propertyIsEnumerable.call(u,v)&&(m[v]=u[v])}return m}(r,tg),h)}return s(r)};const Gc=function(r,s,f,h){var u=r.getBoundingClientRect();s.className="r6o-editor r6o-arrow-top r6o-arrow-left";var b=f.getBoundingClientRect(),v=b.left,y=b.top,m=b.right,_=b.bottom;if(s.style.top="".concat(_-u.top+14,"px"),s.style.left="".concat(v-u.left,"px"),h){var E=s.children[1].getBoundingClientRect(),O=r.ownerDocument.defaultView,D=O.innerWidth,z=O.innerHeight;if(E.right>D&&(s.classList.remove("r6o-arrow-left"),s.classList.add("r6o-arrow-right"),s.style.left="".concat(m-E.width-u.left,"px")),E.bottom>z){s.classList.remove("r6o-arrow-top"),s.classList.add("r6o-arrow-bottom");var q=s.children[1].getBoundingClientRect().height;s.style.top="".concat(y-u.top-q-14,"px")}var K=s.children[1].getBoundingClientRect();if(K.top<0){s.classList.add("pushed","down"),s.style.top="".concat(-u.top,"px");var oe=_-u.top;K.height-u.top>oe&&s.classList.remove("r6o-arrow-bottom")}K.left<0&&(s.classList.add("pushed","right"),s.style.left="".concat(-u.left,"px")),requestAnimationFrame(function(){return s.style.opacity=1})}};var og=["draft"];function oi(r){return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},oi(r)}function qc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function _n(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?qc(Object(f),!0).forEach(function(h){Kt(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):qc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function kr(r){return function(s){if(Array.isArray(s))return Ia(s)}(r)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(r)||function(s,f){if(s){if(typeof s=="string")return Ia(s,f);var h=Object.prototype.toString.call(s).slice(8,-1);return h==="Object"&&s.constructor&&(h=s.constructor.name),h==="Map"||h==="Set"?Array.from(s):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?Ia(s,f):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ia(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function sg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Xc(h.key),h)}}function La(r,s){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},La(r,s)}function tn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function es(r){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},es(r)}function Kt(r,s,f){return(s=Xc(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Xc(r){var s=function(f,h){if(oi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(oi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return oi(s)==="symbol"?s:String(s)}var Zc=function(r){var s=r.getBoundingClientRect(),f=s.top,h=s.left,u=s.width,b=s.height;return"".concat(f,", ").concat(h,", ").concat(u,", ").concat(b)},ag=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&La(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=es(h);if(u){var _=es(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(oi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tn(E)}(this,y)});function v(y){var m;return function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}(this,v),Kt(tn(m=b.call(this,y)),"initResizeObserver",function(){var _,E=m.props.autoPosition===void 0||m.props.autoPosition;if((_=window)!==null&&_!==void 0&&_.ResizeObserver){var O=new ResizeObserver(function(){m.state.dragged||Gc(m.props.wrapperEl,m.element.current,m.props.selectedElement,E)});return O.observe(m.props.wrapperEl),function(){return O.disconnect()}}m.state.dragged||Gc(m.props.wrapperEl,m.element.current,m.props.selectedElement,E)}),Kt(tn(m),"creationMeta",function(_){var E={},O=m.props.env.user;return O&&(E.creator={},O.id&&(E.creator.id=O.id),O.displayName&&(E.creator.name=O.displayName),E[_.created?"modified":"created"]=m.props.env.getCurrentTimeAdjusted()),E}),Kt(tn(m),"getCurrentAnnotation",function(){return m.state.currentAnnotation.clone()}),Kt(tn(m),"hasChanges",function(){var _;return!((_=m.props.annotation)!==null&&_!==void 0&&_.isEqual(m.state.currentAnnotation))}),Kt(tn(m),"updateCurrentAnnotation",function(_,E){m.setState({currentAnnotation:m.state.currentAnnotation.clone(_)},function(){E?m.onOk():m.props.onChanged&&m.props.onChanged()})}),Kt(tn(m),"onAppendBody",function(_,E){return m.updateCurrentAnnotation({body:[].concat(kr(m.state.currentAnnotation.bodies),[_n(_n({},_),m.creationMeta(_))])},E)}),Kt(tn(m),"onUpdateBody",function(_,E,O){return m.updateCurrentAnnotation({body:m.state.currentAnnotation.bodies.map(function(D){return D===_?_n(_n({},E),m.creationMeta(E)):D})},O)}),Kt(tn(m),"onRemoveBody",function(_,E){return m.updateCurrentAnnotation({body:m.state.currentAnnotation.bodies.filter(function(O){return O!==_})},E)}),Kt(tn(m),"onUpsertBody",function(_,E,O){if(_==null&&E!=null)m.onAppendBody(E,O);else if(_!=null&&E!=null)m.onUpdateBody(_,E,O);else if(_!=null&&E==null){var D=m.state.currentAnnotation.bodies.find(function(z){return z.purpose===_.purpose});D?m.onUpdateBody(D,_,O):m.onAppendBody(_,O)}}),Kt(tn(m),"onBatchModify",function(_,E){var O=_.filter(function(oe){return oe.action==="upsert"&&oe.body}).map(function(oe){return{previous:m.state.currentAnnotation.bodies.find(function(xe){return xe.purpose===oe.body.purpose}),updated:_n(_n({},oe.body),m.creationMeta(oe.body))}}),D=_.filter(function(oe){return oe.action==="remove"}).map(function(oe){return oe.body}),z=[].concat(kr(_.filter(function(oe){return oe.action==="append"||oe.action==="upsert"&&oe.updated&&!oe.previous}).map(function(oe){return _n(_n({},oe.body),m.creationMeta(oe.body))})),kr(O.filter(function(oe){return!oe.previous}).map(function(oe){return oe.updated}))),q=[].concat(kr(_.filter(function(oe){return oe.action==="update"||oe.action==="upsert"&&oe.updated&&oe.previous}).map(function(oe){return{previous:oe.previous,updated:_n(_n({},oe.updated),m.creationMeta(oe.updated))}})),kr(O.filter(function(oe){return oe.previous}))),K=[].concat(kr(m.state.currentAnnotation.bodies.filter(function(oe){return!D.includes(oe)}).map(function(oe){var xe=q.find(function(de){return de.previous===oe});return xe?xe.updated:oe})),kr(z));m.updateCurrentAnnotation({body:K},E)}),Kt(tn(m),"onSetProperty",function(_,E){if(["@context","id","type","body","target"].includes(_))throw new Exception("Cannot set ".concat(_," - not allowed"));if(E)m.updateCurrentAnnotation(Kt({},_,E));else{var O=m.currentAnnotation.clone();delete O[_],m.setState({currentAnnotation:O})}}),Kt(tn(m),"onAddContext",function(_){var E=m.state.currentAnnotation,O=Array.isArray(E.context)?E.context:[E.context];O.indexOf(_)<0&&(O.push(_),m.updateCurrentAnnotation({"@context":O}))}),Kt(tn(m),"onCancel",function(){return m.props.onCancel(m.props.annotation)}),Kt(tn(m),"onOk",function(){var _=function(O){return O.clone({body:O.bodies.map(function(D){return D.draft,function(z,q){if(z==null)return{};var K,oe,xe=function(ge,we){if(ge==null)return{};var De,Pe,He={},tt=Object.keys(ge);for(Pe=0;Pe<tt.length;Pe++)De=tt[Pe],we.indexOf(De)>=0||(He[De]=ge[De]);return He}(z,q);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(z);for(oe=0;oe<de.length;oe++)K=de[oe],q.indexOf(K)>=0||Object.prototype.propertyIsEnumerable.call(z,K)&&(xe[K]=z[K])}return xe}(D,og)})})},E=m.state.currentAnnotation;E.bodies.length!==0||m.props.allowEmpty?E.isSelection?m.props.onAnnotationCreated(_(E).toAnnotation()):m.props.onAnnotationUpdated(_(E),m.props.annotation):E.isSelection?m.onCancel():m.props.onAnnotationDeleted(m.props.annotation)}),Kt(tn(m),"onDelete",function(){return m.props.onAnnotationDeleted(m.props.annotation)}),m.element=t.default.createRef(),m.state={currentAnnotation:y.annotation,dragged:!1,selectionBounds:Zc(y.selectedElement)},m}return s=v,f=[{key:"componentWillReceiveProps",value:function(y){var m,_=this.state.selectionBounds,E=Zc(y.selectedElement);(m=this.props.annotation)!==null&&m!==void 0&&m.isEqual(y.annotation)?this.setState({selectionBounds:E}):this.setState({currentAnnotation:y.annotation,selectionBounds:E}),this.props.modifiedTarget!=y.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),_!=E&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}},{key:"componentDidMount",value:function(){var y=this;this.removeObserver=this.initResizeObserver(),new MutationObserver(function(){y.element.current&&(y.removeObserver&&y.removeObserver(),y.removeObserver=y.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}},{key:"componentWillUnmount",value:function(){this.removeObserver&&this.removeObserver()}},{key:"render",value:function(){var y=this,m=this.state.currentAnnotation,_=this.props.widgets?this.props.widgets.map(ig):rg,E=m&&(m.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!m.isSelection&&!_.some(function(O){return!!O.type.disableDelete&&O.type.disableDelete(m,_n(_n({},O.props),{},{readOnly:y.props.readOnly,env:y.props.env}))});return t.default.createElement(i(),{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:function(){return y.setState({dragged:!0})}},t.default.createElement("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},t.default.createElement("div",{className:"r6o-arrow"}),t.default.createElement("div",{className:"r6o-editor-inner"},_.map(function(O,D){return t.default.cloneElement(O,{key:"".concat(D),focus:D===0,annotation:m,readOnly:y.props.readOnly,env:y.props.env,onAppendBody:y.onAppendBody,onUpdateBody:y.onUpdateBody,onRemoveBody:y.onRemoveBody,onUpsertBody:y.onUpsertBody,onBatchModify:y.onBatchModify,onSetProperty:y.onSetProperty,onAddContext:y.onAddContext,onSaveAndClose:y.onOk})}),this.props.readOnly?t.default.createElement("div",{className:"r6o-footer"},t.default.createElement("button",{className:"r6o-btn",onClick:this.onCancel},Lt.t("Close"))):t.default.createElement("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},E&&t.default.createElement("button",{className:"r6o-btn left delete-annotation",title:Lt.t("Delete"),onClick:this.onDelete},t.default.createElement(Wm,{width:12})),t.default.createElement("button",{className:"r6o-btn outline",onClick:this.onCancel},Lt.t("Cancel")),t.default.createElement("button",{className:"r6o-btn ",onClick:this.onOk},Lt.t("Ok"))))))}}],f&&sg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(t.Component);const Zn=(Yc={default:()=>Ip},Na={},ct.d(Na,Yc),Na);var Yc,Na,Ba,wt="http://www.w3.org/2000/svg",Ha=function(r){var s=r.getAttribute("class");return s?new Set(s.split(" ")):new Set},Yn=function(r,s){var f=Ha(r);f.add(s),r.setAttribute("class",Array.from(f).join(" "))},ts=function(r,s){var f=Ha(r);f.delete(s),f.size===0?r.removeAttribute("class"):r.setAttribute("class",Array.from(f).join(" "))},Fa=function(r,s){return Ha(r).has(s)},lg=new Uint8Array(16);function ug(){if(!Ba&&!(Ba=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ba(lg)}const cg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Jt=[],za=0;za<256;++za)Jt.push((za+256).toString(16).substr(1));const fg=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=(Jt[r[s+0]]+Jt[r[s+1]]+Jt[r[s+2]]+Jt[r[s+3]]+"-"+Jt[r[s+4]]+Jt[r[s+5]]+"-"+Jt[r[s+6]]+Jt[r[s+7]]+"-"+Jt[r[s+8]]+Jt[r[s+9]]+"-"+Jt[r[s+10]]+Jt[r[s+11]]+Jt[r[s+12]]+Jt[r[s+13]]+Jt[r[s+14]]+Jt[r[s+15]]).toLowerCase();if(!function(h){return typeof h=="string"&&cg.test(h)}(f))throw TypeError("Stringified UUID is invalid");return f},Kc=function(r,s,f){var h=(r=r||{}).random||(r.rng||ug)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,s){f=f||0;for(var u=0;u<16;++u)s[f+u]=h[u];return s}return fg(h)};var hg=ct(3094),Jc=ct.n(hg);function Qi(r){return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qi(r)}function Qc(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function si(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Qc(Object(f),!0).forEach(function(h){ns(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Qc(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function dg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,$c(h.key),h)}}function ns(r,s,f){return(s=$c(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function $c(r){var s=function(f,h){if(Qi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(Qi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return Qi(s)==="symbol"?s:String(s)}var cr=function(){function r(h,u){var b=this;(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,r),ns(this,"clone",function(v,y){return new r(si(si({},b.underlying),v),si(si({},b.opts),y))}),ns(this,"selector",function(v){var y=b.underlying.target;if(y.selector)return(Array.isArray(y.selector)?y.selector:[y.selector]).find(function(m){return m.type===v})}),this.underlying=h,this.opts=u}var s,f;return s=r,(f=[{key:"isEqual",value:function(h){return(h==null?void 0:h.type)==="Annotation"&&(this.underlying===h.underlying||!(!this.underlying.id||!h.underlying.id)&&Jc()(this.underlying,h.underlying))}},{key:"readOnly",get:function(){var h;return(h=this.opts)===null||h===void 0?void 0:h.readOnly}},{key:"id",get:function(){return this.underlying.id}},{key:"context",get:function(){return this.underlying["@context"]}},{key:"type",get:function(){return this.underlying.type}},{key:"motivation",get:function(){return this.underlying.motivation}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]},set:function(h){this.underlying.body=h}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"quote",get:function(){var h;return(h=this.selector("TextQuoteSelector"))===null||h===void 0?void 0:h.exact}},{key:"start",get:function(){var h;return(h=this.selector("TextPositionSelector"))===null||h===void 0?void 0:h.start}},{key:"end",get:function(){var h;return(h=this.selector("TextPositionSelector"))===null||h===void 0?void 0:h.end}}])&&dg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}();function $i(r){return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$i(r)}function ef(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function tf(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?ef(Object(f),!0).forEach(function(h){rs(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):ef(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function pg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,nf(h.key),h)}}function rs(r,s,f){return(s=nf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function nf(r){var s=function(f,h){if($i(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if($i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return $i(s)==="symbol"?s:String(s)}ns(cr,"create",function(r){var s={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(Kc()),body:[]};return new cr(si(si({},s),r))});var Ua=function(){function r(h,u){var b=this;(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,r),rs(this,"clone",function(v){var y=new r;return y.underlying=JSON.parse(JSON.stringify(b.underlying)),v&&(y.underlying=tf(tf({},y.underlying),v)),y}),rs(this,"selector",function(v){var y=b.underlying.target;if(y.selector)return(Array.isArray(y.selector)?y.selector:[y.selector]).find(function(m){return m.type===v})}),rs(this,"toAnnotation",function(){var v=Object.assign({},b.underlying,{type:"Annotation",id:"#".concat(Kc())});return new cr(v)}),this.underlying={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Selection",body:u||[],target:h}}var s,f;return s=r,(f=[{key:"context",get:function(){return this.underlying["@context"]}},{key:"type",get:function(){return this.underlying.type}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"isEqual",value:function(h){return!!h&&Jc()(this.underlying,h.underlying)}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}},{key:"quote",get:function(){var h;return(h=this.selector("TextQuoteSelector"))===null||h===void 0?void 0:h.exact}},{key:"isSelection",get:function(){return!0}}])&&pg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}();function rf(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}var fr=function(r,s){var f=r.selector("FragmentSelector");if(f!=null&&f.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){var h=f.value,u=h.includes(":")?h.substring(h.indexOf("=")+1,h.indexOf(":")):"pixel",b=function(E,O){return function(D){if(Array.isArray(D))return D}(E)||function(D,z){var q=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(q!=null){var K,oe,xe,de,ge=[],we=!0,De=!1;try{if(xe=(q=q.call(D)).next,z===0){if(Object(q)!==q)return;we=!1}else for(;!(we=(K=xe.call(q)).done)&&(ge.push(K.value),ge.length!==z);we=!0);}catch(Pe){De=!0,oe=Pe}finally{try{if(!we&&q.return!=null&&(de=q.return(),Object(de)!==de))return}finally{if(De)throw oe}}return ge}}(E,O)||function(D,z){if(D){if(typeof D=="string")return rf(D,z);var q=Object.prototype.toString.call(D).slice(8,-1);return q==="Object"&&D.constructor&&(q=D.constructor.name),q==="Map"||q==="Set"?Array.from(D):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?rf(D,z):void 0}}(E,O)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}((h.includes(":")?h.substring(h.indexOf(":")+1):h.substring(h.indexOf("=")+1)).split(",").map(parseFloat),4),v=b[0],y=b[1],m=b[2],_=b[3];return u.toLowerCase()==="percent"&&(v=v*s.naturalWidth/100,y=y*s.naturalHeight/100,m=m*s.naturalWidth/100,_=_*s.naturalHeight/100),{x:v,y,w:m,h:_}}},ai=function(r,s,f,h,u,b){return(b==null?void 0:b.toLowerCase())==="percent"?function(v,y,m,_,E){var O=v/E.naturalWidth*100,D=y/E.naturalHeight*100,z=m/E.naturalWidth*100,q=_/E.naturalHeight*100;return{source:E.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:"xywh=percent:".concat(O,",").concat(D,",").concat(z,",").concat(q)}}}(r,s,f,h,u):function(v,y,m,_,E){return{source:E==null?void 0:E.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:"xywh=pixel:".concat(v,",").concat(y,",").concat(m,",").concat(_)}}}(r,s,f,h,u)},is=function(r,s,f,h,u){r.setAttribute("x",s),r.setAttribute("y",f),r.setAttribute("width",h),r.setAttribute("height",u)},os=function(r,s,f){r.setAttribute("cx",s),r.setAttribute("cy",f),r.setAttribute("r",7)},of=function(r,s,f,h,u){var b=document.createElementNS(wt,"path");b.setAttribute("fill-rule","evenodd");var v=r.naturalWidth,y=r.naturalHeight;return b.setAttribute("d","M0 0 h".concat(v," v").concat(y," h-").concat(v," z M").concat(s," ").concat(f," h").concat(h," v").concat(u," h-").concat(h," z")),b},sf=function(r,s,f,h,u,b){var v=s.naturalWidth,y=s.naturalHeight;r.setAttribute("d","M0 0 h".concat(v," v").concat(y," h-").concat(v," z M").concat(f," ").concat(h," h").concat(u," v").concat(b," h-").concat(u," z"))},Va=function(r,s,f,h){var u=r.type==="Annotation"||r.type==="Selection"?fr(r,s):{x:r,y:s,w:f,h},b=u.x,v=u.y,y=u.w,m=u.h,_=document.createElementNS(wt,"g");if(y===0&&m===0){Yn(_,"a9s-point"),Yn(_,"a9s-non-scaling"),_.setAttribute("transform-origin","".concat(b," ").concat(v));var E=document.createElementNS(wt,"circle"),O=document.createElementNS(wt,"circle");O.setAttribute("class","a9s-inner"),os(O,b,v),E.setAttribute("class","a9s-outer"),os(E,b,v),_.appendChild(E),_.appendChild(O)}else{var D=document.createElementNS(wt,"rect"),z=document.createElementNS(wt,"rect");z.setAttribute("class","a9s-inner"),is(z,b,v,y,m),D.setAttribute("class","a9s-outer"),is(D,b,v,y,m),_.appendChild(D),_.appendChild(z)}return _},Wa=function(r){var s=r.querySelector(".a9s-outer");return s.nodeName==="rect"?{x:parseFloat(s.getAttribute("x")),y:parseFloat(s.getAttribute("y")),w:parseFloat(s.getAttribute("width")),h:parseFloat(s.getAttribute("height"))}:{x:parseFloat(s.getAttribute("cx")),y:parseFloat(s.getAttribute("cy")),w:0,h:0}},af=function(r,s,f,h,u){var b=r.querySelector(".a9s-inner"),v=r.querySelector(".a9s-outer");v.nodeName==="rect"?(is(b,s,f,h,u),is(v,s,f,h,u)):(os(b,s,f),os(v,s,f))};function eo(r){return eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},eo(r)}function mg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,lf(h.key),h)}}function ss(r,s,f){return(s=lf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function lf(r){var s=function(f,h){if(eo(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(eo(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return eo(s)==="symbol"?s:String(s)}var gg=function(){function r(h,u,b,v,y){var m=this;(function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")})(this,r),ss(this,"dragTo",function(_,E){m.group.style.display=null,m.opposite=[_,E];var O=m.bbox,D=O.x,z=O.y,q=O.w,K=O.h;sf(m.mask,m.env.image,D,z,q,K),af(m.rect,D,z,q,K)}),ss(this,"getBoundingClientRect",function(){return m.rect.getBoundingClientRect()}),ss(this,"toSelection",function(){var _=m.bbox,E=_.x,O=_.y,D=_.w,z=_.h;return new Ua(ai(E,O,D,z,m.env.image,m.config.fragmentUnit))}),ss(this,"destroy",function(){m.group.parentNode.removeChild(m.group),m.mask=null,m.rect=null,m.group=null}),this.anchor=[h,u],this.opposite=[h,u],this.config=v,this.env=y,this.group=document.createElementNS(wt,"g"),this.mask=of(y.image,h,u,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=Va(h,u,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),b.appendChild(this.group)}var s,f;return s=r,f=[{key:"bbox",get:function(){var h=this.opposite[0]-this.anchor[0],u=this.opposite[1]-this.anchor[1];return{x:h>0?this.anchor[0]:this.opposite[0],y:u>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(h)),h:Math.max(1,Math.abs(u))}}},{key:"element",get:function(){return this.rect}}],f&&mg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}(),yg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},Ga=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};function li(r){return li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},li(r)}function uf(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function cf(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,pf(h.key),h)}}function ff(r,s,f){return s&&cf(r.prototype,s),f&&cf(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}function hf(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&qa(r,s)}function qa(r,s){return qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},qa(r,s)}function df(r){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,h=as(r);if(s){var u=as(this).constructor;f=Reflect.construct(h,arguments,u)}else f=h.apply(this,arguments);return function(b,v){if(v&&(li(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xn(b)}(this,f)}}function xn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function as(r){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},as(r)}function On(r,s,f){return(s=pf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function pf(r){var s=function(f,h){if(li(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(li(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return li(s)==="symbol"?s:String(s)}var ls="An implementation is missing",vg=Ga(),mf=function(r){hf(f,r);var s=df(f);function f(h,u,b){var v;uf(this,f),On(xn(v=s.call(this)),"enableResponsive",function(){window.ResizeObserver&&(v.resizeObserver=new ResizeObserver(function(){var m=v.svg.getBoundingClientRect(),_=v.svg.viewBox.baseVal,E=_.width,O=_.height;v.scale=Math.max(E/m.width,O/m.height),v.onScaleChanged&&v.onScaleChanged(v.scale)}),v.resizeObserver.observe(v.svg.parentNode))}),On(xn(v),"getSVGPoint",function(m){var _=v.svg.createSVGPoint();if(vg){var E=v.svg.getBoundingClientRect(),O=m.clientX-E.x,D=m.clientY-E.y,z=v.svg.getBoundingClientRect(),q=z.left,K=z.top;return _.x=O+q,_.y=D+K,_.matrixTransform(v.g.getScreenCTM().inverse())}return _.x=m.offsetX,_.y=m.offsetY,_.matrixTransform(v.g.getCTM().inverse())}),On(xn(v),"drawHandle",function(m,_){var E=document.createElementNS(wt,"g");E.setAttribute("class","a9s-handle");var O=document.createElementNS(wt,"g"),D=function(oe){var xe=document.createElementNS(wt,"circle");return xe.setAttribute("cx",m),xe.setAttribute("cy",_),xe.setAttribute("r",oe),xe.setAttribute("transform-origin","".concat(m," ").concat(_)),xe},z=v.config.handleRadius||6,q=D(z);q.setAttribute("class","a9s-handle-inner");var K=D(z+1);return K.setAttribute("class","a9s-handle-outer"),O.appendChild(K),O.appendChild(q),E.appendChild(O),E}),On(xn(v),"setHandleXY",function(m,_,E){var O=m.querySelector(".a9s-handle-inner");O.setAttribute("cx",_),O.setAttribute("cy",E),O.setAttribute("transform-origin","".concat(_," ").concat(E));var D=m.querySelector(".a9s-handle-outer");D.setAttribute("cx",_),D.setAttribute("cy",E),D.setAttribute("transform-origin","".concat(_," ").concat(E))}),On(xn(v),"getHandleXY",function(m){var _=m.querySelector(".a9s-handle-outer");return{x:parseFloat(_.getAttribute("cx")),y:parseFloat(_.getAttribute("cy"))}}),On(xn(v),"scaleHandle",function(m){var _=m.querySelector(".a9s-handle-inner"),E=m.querySelector(".a9s-handle-outer"),O=v.scale*(v.config.handleRadius||6);_.setAttribute("r",O),E.setAttribute("r",O)}),v.svg=h.closest("svg"),v.g=h,v.config=u,v.env=b,v.scale=1;var y=b.image;return(y instanceof Element||y instanceof HTMLDocument)&&v.enableResponsive(),v}return ff(f,[{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}]),f}(e()),Xa=function(r){hf(f,r);var s=df(f);function f(h,u,b){var v;return uf(this,f),On(xn(v=s.call(this,h,u,b)),"attachListeners",function(y){var m=y.mouseMove,_=y.mouseUp,E=y.dblClick;m&&(v.mouseMove=function(O){var D=v.getSVGPoint(O),z=D.x,q=D.y;v.started||(v.emit("startSelection",{x:z,y:q}),v.started=!0),m(z,q,O)},v.svg.addEventListener("mousemove",v.mouseMove)),_&&(v.mouseUp=function(O){if(O.button===0){var D=v.getSVGPoint(O),z=D.x,q=D.y;_(z,q,O)}},document.addEventListener("mouseup",v.mouseUp)),E&&(v.dblClick=function(O){var D=v.getSVGPoint(O),z=D.x,q=D.y;E(z,q,O)},document.addEventListener("dblclick",v.dblClick))}),On(xn(v),"detachListeners",function(){v.mouseMove&&v.svg.removeEventListener("mousemove",v.mouseMove),v.mouseUp&&document.removeEventListener("mouseup",v.mouseUp),v.dblClick&&document.removeEventListener("dblclick",v.dblClick)}),On(xn(v),"start",function(y,m){var _=v.getSVGPoint(y),E=_.x,O=_.y,D=v.env.image,z=D.naturalWidth,q=D.naturalHeight,K=E<0?0:E>z?z:E,oe=O<0?0:O>q?q:O;v.startDrawing(K,oe,m,y)}),On(xn(v),"startDrawing",function(y){throw new Error(ls)}),On(xn(v),"createEditableShape",function(y,m){throw new Error(ls)}),v.started=!1,v}return ff(f,[{key:"isDrawing",get:function(){throw new Error(ls)}}]),f}(mf);function ui(r){return ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ui(r)}function bg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,yf(h.key),h)}}function Za(r,s){return Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},Za(r,s)}function gf(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function us(r){return us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},us(r)}function yf(r){var s=function(f,h){if(ui(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(ui(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return ui(s)==="symbol"?s:String(s)}Xa.supports=function(r){throw new Error(ls)};var vf="An implementation is missing",bf=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&Za(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=us(h);if(u){var _=us(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(ui(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gf(E)}(this,y)});function v(y,m,_,E){var O,D,z,q;return function(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}(this,v),D=gf(O=b.call(this,m,_,E)),q=function(K){throw new Error(vf)},(z=yf(z="updateState"))in D?Object.defineProperty(D,z,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[z]=q,O.annotation=y,O}return s=v,(f=[{key:"element",get:function(){throw new Error(vf)}}])&&bg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(mf);function wf(r){return function(s){if(Array.isArray(s))return Ya(s)}(r)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(r)||function(s,f){if(s){if(typeof s=="string")return Ya(s,f);var h=Object.prototype.toString.call(s).slice(8,-1);return h==="Object"&&s.constructor&&(h=s.constructor.name),h==="Map"||h==="Set"?Array.from(s):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?Ya(s,f):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ya(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}var wg=/firefox/i.test(navigator.userAgent),Sf=function(r,s,f,h,u){r.setAttribute("width",h),r.setAttribute("height",u),wg?(r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("transform","translate(".concat(s,", ").concat(f,")"))):(r.setAttribute("x",s),r.setAttribute("y",f))},cs=function(r,s,f){if(!f)return r;var h=f.reduce(function(E,O){var D=O(s);if(!D)return E;if(typeof D=="string"||D instanceof String)E.className=E.className?"".concat(E.className," ").concat(D):D;else if(D.nodeType===Node.ELEMENT_NODE)E.elements=E.elements?[].concat(wf(E.elements),[D]):[D];else{var z=D.className,q=D.style,K=D.element;z&&(E.className=E.className?"".concat(E.className," ").concat(z):z),q&&(E.style=E.style?"".concat(E.style," ").concat(q):q),K&&(E.elements=E.elements?[].concat(wf(E.elements),[K]):[K])}for(var oe in D)D.hasOwnProperty(oe)&&oe.startsWith("data-")&&(E[oe]=D[oe]);return E},{}),u=h.className,b=h.style,v=h.elements;if(u&&Yn(r,u),b){var y=r.querySelector(".a9s-outer"),m=r.querySelector(".a9s-inner");y&&m?(y.setAttribute("style","display:none"),m.setAttribute("style",b)):r.setAttribute("style",b)}for(var _ in v&&v.forEach(function(E){return function(O,D){var z=D.getBBox(),q=z.x,K=z.y,oe=z.width,xe=z.height,de=document.createElementNS(wt,"svg");de.setAttribute("class","a9s-formatter-el"),Sf(de,q,K,oe,xe);var ge=document.createElementNS(wt,"g");ge.appendChild(O),de.appendChild(ge),D.append(de)}(E,r)}),h)h.hasOwnProperty(_)&&_.startsWith("data-")&&r.setAttribute(_,h[_])},_f=function(r,s,f,h,u){var b=r.querySelector(".a9s-formatter-el");b&&Sf(b,s,f,h,u)};function ci(r){return ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ci(r)}function xf(r,s){return function(f){if(Array.isArray(f))return f}(r)||function(f,h){var u=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(u!=null){var b,v,y,m,_=[],E=!0,O=!1;try{if(y=(u=u.call(f)).next,h===0){if(Object(u)!==u)return;E=!1}else for(;!(E=(b=y.call(u)).done)&&(_.push(b.value),_.length!==h);E=!0);}catch(D){O=!0,v=D}finally{try{if(!E&&u.return!=null&&(m=u.return(),Object(m)!==m))return}finally{if(O)throw v}}return _}}(r,s)||function(f,h){if(f){if(typeof f=="string")return Ef(f,h);var u=Object.prototype.toString.call(f).slice(8,-1);return u==="Object"&&f.constructor&&(u=f.constructor.name),u==="Map"||u==="Set"?Array.from(f):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Ef(f,h):void 0}}(r,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ef(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function Sg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Tf(h.key),h)}}function Ka(){return Ka=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,s,f){var h=function(b,v){for(;!Object.prototype.hasOwnProperty.call(b,v)&&(b=fi(b))!==null;);return b}(r,s);if(h){var u=Object.getOwnPropertyDescriptor(h,s);return u.get?u.get.call(arguments.length<3?r:f):u.value}},Ka.apply(this,arguments)}function Ja(r,s){return Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},Ja(r,s)}function Kn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function fi(r){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},fi(r)}function hr(r,s,f){return(s=Tf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Tf(r){var s=function(f,h){if(ci(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(ci(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return ci(s)==="symbol"?s:String(s)}var to="corner",fs="edge",_g=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&Ja(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=fi(h);if(u){var _=fi(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(ci(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kn(E)}(this,y)});function v(y,m,_,E){var O;(function(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,v),hr(Kn(O=b.call(this,y,m,_,E)),"onScaleChanged",function(){return O.handles.map(O.scaleHandle)}),hr(Kn(O),"setSize",function(de,ge,we,De){af(O.rectangle,de,ge,we,De),sf(O.mask,O.env.image,de,ge,we,De),_f(O.elementGroup,de,ge,we,De);var Pe=xf(O.handles,8),He=Pe[0],tt=Pe[1],At=Pe[2],st=Pe[3],ht=Pe[4],Bt=Pe[5],rt=Pe[6],kt=Pe[7];O.setHandleXY(He,de,ge),O.setHandleXY(tt,de+we,ge),O.setHandleXY(At,de+we,ge+De),O.setHandleXY(st,de,ge+De),O.enableEdgeControls&&(O.setHandleXY(ht,de+we/2,ge),O.setHandleXY(Bt,de+we,ge+De/2),O.setHandleXY(rt,de+we/2,ge+De),O.setHandleXY(kt,de,ge+De/2))}),hr(Kn(O),"stretchCorners",function(de,ge,we){var De=O.getHandleXY(ge),Pe=we.x-De.x,He=we.y-De.y,tt=Pe>0?De.x:we.x,At=He>0?De.y:we.y,st=Math.abs(Pe),ht=Math.abs(He);return O.setSize(tt,At,st,ht),{x:tt,y:At,w:st,h:ht}}),hr(Kn(O),"stretchEdge",function(de,ge,we){var De=O.getHandleXY(ge),Pe=Wa(O.rectangle),He=de%2==0,tt=He?Pe.w:we.x-De.x,At=He?we.y-De.y:Pe.h,st=He?Pe.x:tt>0?De.x:we.x,ht=He?At>0?De.y:we.y:Pe.y,Bt=Math.abs(tt),rt=Math.abs(At);return O.setSize(st,ht,Bt,rt),{x:st,y:ht,w:Bt,h:rt}}),hr(Kn(O),"onGrab",function(de,ge){return function(we){if(we.button===0){O.grabbedElem=de,O.grabbedType=ge;var De=O.getSVGPoint(we),Pe=Wa(O.rectangle),He=Pe.x,tt=Pe.y;O.mouseOffset={x:De.x-He,y:De.y-tt}}}}),hr(Kn(O),"onMouseMove",function(de){if(de.button===0){var ge=function(nn,yt){return nn<0?0:nn>yt?yt:nn};if(O.grabbedElem){var we=O.getSVGPoint(de);if(O.grabbedElem===O.rectangle){var De=Wa(O.rectangle),Pe=De.w,He=De.h,tt=O.env.image,At=tt.naturalWidth,st=tt.naturalHeight,ht=ge(we.x-O.mouseOffset.x,At-Pe),Bt=ge(we.y-O.mouseOffset.y,st-He);O.setSize(ht,Bt,Pe,He),O.emit("update",ai(ht,Bt,Pe,He,O.env.image,O.config.fragmentUnit))}else{var rt=O.handles.indexOf(O.grabbedElem),kt=O.handles[2^rt],Tt=O.grabbedType===to?O.stretchCorners(rt,kt,we):O.stretchEdge(rt,kt,we),Ut=Tt.x,un=Tt.y,vn=Tt.w,cn=Tt.h;O.emit("update",ai(Ut,un,vn,cn,O.env.image,O.config.fragmentUnit))}}}}),hr(Kn(O),"onMouseUp",function(de){O.grabbedElem=null,O.grabbedType=null,O.mouseOffset=null}),hr(Kn(O),"updateState",function(de){var ge=fr(de,O.env.image),we=ge.x,De=ge.y,Pe=ge.w,He=ge.h;O.setSize(we,De,Pe,He)}),O.svg.addEventListener("mousemove",O.onMouseMove),O.svg.addEventListener("mouseup",O.onMouseUp);var D=fr(y,E.image),z=D.x,q=D.y,K=D.w,oe=D.h;O.containerGroup=document.createElementNS(wt,"g"),O.mask=of(E.image,z,q,K,oe),O.mask.setAttribute("class","a9s-selection-mask"),O.containerGroup.appendChild(O.mask),O.elementGroup=document.createElementNS(wt,"g"),O.elementGroup.setAttribute("class","a9s-annotation editable selected"),O.elementGroup.setAttribute("data-id",y.id),O.rectangle=Va(z,q,K,oe),O.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",O.onGrab(O.rectangle)),O.elementGroup.appendChild(O.rectangle),O.enableEdgeControls=_.enableEdgeControls;var xe=O.enableEdgeControls?[[z+K/2,q,fs],[z+K,q+oe/2,fs],[z+K/2,q+oe,fs],[z,q+oe/2,fs]]:[];return O.handles=[[z,q,to],[z+K,q,to],[z+K,q+oe,to],[z,q+oe,to]].concat(xe).map(function(de){var ge=xf(de,3),we=ge[0],De=ge[1],Pe=ge[2],He=O.drawHandle(we,De);return He.addEventListener("mousedown",O.onGrab(He,Pe)),O.elementGroup.appendChild(He),He}),O.containerGroup.appendChild(O.elementGroup),m.appendChild(O.containerGroup),cs(O.rectangle,y,_.formatters),O.grabbedElem=null,O.grabbedType=null,O.mouseOffset=null,O}return s=v,(f=[{key:"element",get:function(){return this.elementGroup}},{key:"destroy",value:function(){this.containerGroup.parentNode.removeChild(this.containerGroup),Ka(fi(v.prototype),"destroy",this).call(this)}}])&&Sg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(bf);function hi(r){return hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hi(r)}function Pf(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Of(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Pf(Object(f),!0).forEach(function(h){pi(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Pf(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function xg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Cf(h.key),h)}}function Qa(r,s){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},Qa(r,s)}function di(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hs(r){return hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},hs(r)}function pi(r,s,f){return(s=Cf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Cf(r){var s=function(f,h){if(hi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(hi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return hi(s)==="symbol"?s:String(s)}var ds=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&Qa(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=hs(h);if(u){var _=hs(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(hi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return di(E)}(this,y)});function v(y,m,_){var E;return function(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}(this,v),pi(di(E=b.call(this,y,m,_)),"startDrawing",function(O,D){E.attachListeners({mouseMove:E.onMouseMove,mouseUp:E.onMouseUp}),E.rubberband=new gg(O,D,E.g,E.config,E.env)}),pi(di(E),"stop",function(){E.rubberband&&(E.rubberband.destroy(),E.rubberband=null)}),pi(di(E),"onMouseMove",function(O,D){var z=E.env.image,q=z.naturalWidth,K=z.naturalHeight,oe=Math.min(Math.max(O,0),q),xe=Math.min(Math.max(D,0),K);E.rubberband.dragTo(oe,xe)}),pi(di(E),"onMouseUp",function(){E.detachListeners(),E.started=!1;var O=E.rubberband.getBoundingClientRect(),D=O.width,z=O.height,q=E.config.minSelectionWidth||4,K=E.config.minSelectionHeight||4;if(D>=q&&z>=K){var oe=E.rubberband.element;oe.annotation=E.rubberband.toSelection(),E.emit("complete",oe)}else E.emit("cancel");E.stop()}),pi(di(E),"createEditableShape",function(O,D){return new _g(O,E.g,Of(Of({},E.config),{},{formatters:D}),E.env)}),E.rubberband=null,E}return s=v,(f=[{key:"isDrawing",get:function(){return this.rubberband!=null}}])&&xg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(Xa);function Af(r){return function(s){if(Array.isArray(s))return $a(s)}(r)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(r)||Df(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rf(r,s){var f=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!f){if(Array.isArray(r)||(f=Df(r))||s&&r&&typeof r.length=="number"){f&&(r=f);var h=0,u=function(){};return{s:u,n:function(){return h>=r.length?{done:!0}:{done:!1,value:r[h++]}},e:function(m){throw m},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b,v=!0,y=!1;return{s:function(){f=f.call(r)},n:function(){var m=f.next();return v=m.done,m},e:function(m){y=!0,b=m},f:function(){try{v||f.return==null||f.return()}finally{if(y)throw b}}}}function Df(r,s){if(r){if(typeof r=="string")return $a(r,s);var f=Object.prototype.toString.call(r).slice(8,-1);return f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set"?Array.from(r):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?$a(r,s):void 0}}function $a(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}ds.identifier="rect",ds.supports=function(r){var s=r.selector("FragmentSelector");return s==null?void 0:s.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};var ps=function(r){for(var s=0,f=r.length-1,h=0;h<r.length;h++)s+=(r[f][0]+r[h][0])*(r[f][1]-r[h][1]),f=h;return Math.abs(.5*s)},el=function(r,s){for(var f=r[0],h=r[1],u=!1,b=0,v=s.length-1;b<s.length;v=b++){var y=s[b][0],m=s[b][1],_=s[v][0],E=s[v][1];m>h!=E>h&&f<(_-y)*(h-m)/(E-m)+y&&(u=!u)}return u},kf=function(r){var s,f=[],h=[],u=Rf(r.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(function(O){return O.trim()}));try{for(u.s();!(s=u.n()).done;){var b=s.value,v=b.substring(0,1);if(v.toLowerCase()==="z")f.push(Af(h)),h=[];else{var y=b.substring(1).split(" ").map(function(O){return parseFloat(O.trim())}),m=v===v.toUpperCase(),_=m?y[0]:y[0]+h[h.length-1][0],E=m?y[1]:y[1]+h[h.length-1][1];h.push([_,E])}}}catch(O){u.e(O)}finally{u.f()}return h.length>0&&f.push(Af(h)),f};function Mf(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}var jf=function(r){var s=function(h){Array.from(h.attributes).forEach(function(u){u.name.startsWith("on")&&h.removeAttribute(u.name)})},f=r.getElementsByTagName("script");return Array.from(f).reverse().forEach(function(h){return h.parentNode.removeChild(h)}),s(r),Array.from(r.querySelectorAll("*")).forEach(s),r},Mr=function(r){var s,f,h=r.selector("SvgSelector");if(h){var u=new DOMParser,b=h.value,v=u.parseFromString(b,"image/svg+xml"),y=v.lookupPrefix(wt),m=v.lookupNamespaceURI(null);return y||m?jf(v).firstChild:jf((s=v,f=new XMLSerializer().serializeToString(s.documentElement).replace("<svg>",'<svg xmlns="'.concat(wt,'">')),new DOMParser().parseFromString(f,"image/svg+xml").documentElement)).firstChild}},If=function(r){var s=Mr(r),f=document.createElementNS(wt,"g"),h=s.cloneNode(!0);h.setAttribute("class","a9s-inner");var u=s.cloneNode(!0);return u.setAttribute("class","a9s-outer"),f.appendChild(u),f.appendChild(h),f},tl=function(r,s){var f=r.querySelector(".a9s-inner").cloneNode(!0);f.removeAttribute("class"),f.removeAttribute("xmlns");var h=f.outerHTML||new XMLSerializer().serializeToString(f);return h=h.replace(' xmlns="'.concat(wt,'"'),""),{source:s==null?void 0:s.src,selector:{type:"SvgSelector",value:"<svg>".concat(h,"</svg>")}}},Eg=function(r){var s=kf(r);if(s.length==1)return ps(s[0]);var f,h=function(y){return s.find(function(m){if(y!==m)return function(_,E){var O,D=Rf(_);try{for(D.s();!(O=D.n()).done;){var z=O.value;if(!el(z,E))return!1}}catch(q){D.e(q)}finally{D.f()}return!0}(y,m)})},u=0,b=function(y,m){var _=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!_){if(Array.isArray(y)||(_=function(K,oe){if(K){if(typeof K=="string")return Mf(K,oe);var xe=Object.prototype.toString.call(K).slice(8,-1);return xe==="Object"&&K.constructor&&(xe=K.constructor.name),xe==="Map"||xe==="Set"?Array.from(K):xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe)?Mf(K,oe):void 0}}(y))||m&&y&&typeof y.length=="number"){_&&(y=_);var E=0,O=function(){};return{s:O,n:function(){return E>=y.length?{done:!0}:{done:!1,value:y[E++]}},e:function(K){throw K},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D,z=!0,q=!1;return{s:function(){_=_.call(y)},n:function(){var K=_.next();return z=K.done,K},e:function(K){q=!0,D=K},f:function(){try{z||_.return==null||_.return()}finally{if(q)throw D}}}}(s);try{for(b.s();!(f=b.n()).done;){var v=f.value;h(v)?u-=ps(v):u+=ps(v)}}catch(y){b.e(y)}finally{b.f()}return u};function no(r){return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},no(r)}function Tg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Nf(h.key),h)}}function Lf(r,s,f){return(s=Nf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Nf(r){var s=function(f,h){if(no(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(no(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return no(s)==="symbol"?s:String(s)}var Bf=function(){function r(h,u){var b=this;(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,r),Lf(this,"redraw",function(){b.mask.setAttribute("d","M0 0 h".concat(b.w," v").concat(b.h," h-").concat(b.w," z M").concat(b.polygon.getAttribute("points")," z"))}),Lf(this,"destroy",function(){return b.mask.parentNode.removeChild(b.mask)}),this.w=h.naturalWidth,this.h=h.naturalHeight,this.polygon=u,this.mask=document.createElementNS(wt,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d","M0 0 h".concat(this.w," v").concat(this.h," h-").concat(this.w," z M").concat(this.polygon.getAttribute("points")," z"))}var s,f;return s=r,(f=[{key:"element",get:function(){return this.mask}}])&&Tg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}();function ro(r){return ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ro(r)}function Hf(r){return function(s){if(Array.isArray(s))return nl(s)}(r)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(r)||Ff(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ff(r,s){if(r){if(typeof r=="string")return nl(r,s);var f=Object.prototype.toString.call(r).slice(8,-1);return f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set"?Array.from(r):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?nl(r,s):void 0}}function nl(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function Pg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,zf(h.key),h)}}function mi(r,s,f){return(s=zf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function zf(r){var s=function(f,h){if(ro(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(ro(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return ro(s)==="symbol"?s:String(s)}var Og=function(){function r(h,u,b){var v=this;(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,r),mi(this,"setPoints",function(y){var m=y.map(function(_){return"".concat(_[0],",").concat(_[1])}).join(" ");v.outer.setAttribute("points",m),v.inner.setAttribute("points",m)}),mi(this,"getBoundingClientRect",function(){return v.outer.getBoundingClientRect()}),mi(this,"dragTo",function(y){v.group.style.display=null,v.mousepos=y;var m=[].concat(Hf(v.points),[y]);v.setPoints(m),v.mask.redraw()}),mi(this,"addPoint",function(){var y=function(O,D){return function(z){if(Array.isArray(z))return z}(O)||function(z,q){var K=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(K!=null){var oe,xe,de,ge,we=[],De=!0,Pe=!1;try{if(de=(K=K.call(z)).next,q===0){if(Object(K)!==K)return;De=!1}else for(;!(De=(oe=de.call(K)).done)&&(we.push(oe.value),we.length!==q);De=!0);}catch(He){Pe=!0,xe=He}finally{try{if(!De&&K.return!=null&&(ge=K.return(),Object(ge)!==ge))return}finally{if(Pe)throw xe}}return we}}(O,D)||Ff(O,D)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(v.mousepos,2),m=y[0],_=y[1],E=v.points[v.points.length-1];Math.pow(m-E[0],2)+Math.pow(_-E[1],2)>4&&(v.points=[].concat(Hf(v.points),[v.mousepos]),v.setPoints(v.points),v.mask.redraw())}),mi(this,"destroy",function(){v.group.parentNode.removeChild(v.group),v.polygon=null,v.group=null}),mi(this,"toSelection",function(){return new Ua(tl(v.group,v.env.image))}),this.points=[h],this.env=b,this.mousepos=h,this.group=document.createElementNS(wt,"g"),this.polygon=document.createElementNS(wt,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(wt,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(wt,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Bf(b.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),u.appendChild(this.group)}var s,f;return s=r,(f=[{key:"element",get:function(){return this.polygon}}])&&Pg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}();function gi(r){return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gi(r)}function Uf(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function Cg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Vf(h.key),h)}}function rl(r,s){return rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},rl(r,s)}function Jn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function il(){return il=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,s,f){var h=function(b,v){for(;!Object.prototype.hasOwnProperty.call(b,v)&&(b=yi(b))!==null;);return b}(r,s);if(h){var u=Object.getOwnPropertyDescriptor(h,s);return u.get?u.get.call(arguments.length<3?r:f):u.value}},il.apply(this,arguments)}function yi(r){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},yi(r)}function jr(r,s,f){return(s=Vf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Vf(r){var s=function(f,h){if(gi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(gi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return gi(s)==="symbol"?s:String(s)}var ol=function(r){for(var s=r.querySelector(".a9s-inner").points,f=[],h=0;h<s.numberOfItems;h++)f.push(s.getItem(h));return f},Ag=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&rl(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=yi(h);if(u){var _=yi(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(gi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jn(E)}(this,y)});function v(y,m,_,E){var O,D;return function(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")}(this,v),jr(Jn(D=b.call(this,y,m,_,E)),"onScaleChanged",function(){return D.handles.map(D.scaleHandle)}),jr(Jn(D),"setPoints",function(z){var q=function(Pe){return Math.round(10*Pe)/10},K=z.map(function(Pe){return"".concat(q(Pe.x),",").concat(q(Pe.y))}).join(" ");D.shape.querySelector(".a9s-inner").setAttribute("points",K);var oe=D.shape.querySelector(".a9s-outer");oe.setAttribute("points",K),D.mask.redraw();var xe=oe.getBBox(),de=xe.x,ge=xe.y,we=xe.width,De=xe.height;_f(D.elementGroup,de,ge,we,De)}),jr(Jn(D),"onGrab",function(z){return function(q){q.button===0&&(D.grabbedElem=z,D.grabbedAt=D.getSVGPoint(q))}}),jr(Jn(D),"onMouseMove",function(z){var q=function(rt,kt,Tt){return rt+kt<0?-rt:rt+kt>Tt?Tt-rt:kt};if(D.grabbedElem){var K=D.getSVGPoint(z);if(D.grabbedElem===D.shape){var oe=D.shape.querySelector(".a9s-inner").getBBox(),xe=oe.x,de=oe.y,ge=oe.width,we=oe.height,De=D.env.image,Pe=De.naturalWidth,He=De.naturalHeight,tt=q(xe,K.x-D.grabbedAt.x,Pe-ge),At=q(de,K.y-D.grabbedAt.y,He-we),st=ol(D.shape).map(function(rt){return{x:rt.x+tt,y:rt.y+At}});D.grabbedAt=K,D.setPoints(st),st.forEach(function(rt,kt){return D.setHandleXY(D.handles[kt],rt.x,rt.y)}),D.emit("update",tl(D.shape,D.env.image))}else{var ht=D.handles.indexOf(D.grabbedElem),Bt=ol(D.shape).map(function(rt,kt){return kt===ht?K:rt});D.setPoints(Bt),D.setHandleXY(D.handles[ht],K.x,K.y),D.emit("update",tl(D.shape,D.env.image))}}}),jr(Jn(D),"onMouseUp",function(z){D.grabbedElem=null,D.grabbedAt=null}),jr(Jn(D),"updateState",function(z){var q=Mr(z).getAttribute("points").split(" ").map(function(K){var oe=function(xe,de){return function(ge){if(Array.isArray(ge))return ge}(xe)||function(ge,we){var De=ge==null?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(De!=null){var Pe,He,tt,At,st=[],ht=!0,Bt=!1;try{if(tt=(De=De.call(ge)).next,we===0){if(Object(De)!==De)return;ht=!1}else for(;!(ht=(Pe=tt.call(De)).done)&&(st.push(Pe.value),st.length!==we);ht=!0);}catch(rt){Bt=!0,He=rt}finally{try{if(!ht&&De.return!=null&&(At=De.return(),Object(At)!==At))return}finally{if(Bt)throw He}}return st}}(xe,de)||function(ge,we){if(ge){if(typeof ge=="string")return Uf(ge,we);var De=Object.prototype.toString.call(ge).slice(8,-1);return De==="Object"&&ge.constructor&&(De=ge.constructor.name),De==="Map"||De==="Set"?Array.from(ge):De==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(De)?Uf(ge,we):void 0}}(xe,de)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(K.split(",").map(function(xe){return parseFloat(xe.trim())}),2);return{x:oe[0],y:oe[1]}});D.setPoints(q),q.forEach(function(K,oe){return D.setHandleXY(D.handles[oe],K.x,K.y)})}),jr(Jn(D),"destroy",function(){D.containerGroup.parentNode.removeChild(D.containerGroup),il((O=Jn(D),yi(v.prototype)),"destroy",O).call(O)}),D.svg.addEventListener("mousemove",D.onMouseMove),D.svg.addEventListener("mouseup",D.onMouseUp),D.containerGroup=document.createElementNS(wt,"g"),D.shape=If(y),D.shape.querySelector(".a9s-inner").addEventListener("mousedown",D.onGrab(D.shape)),D.mask=new Bf(E.image,D.shape.querySelector(".a9s-inner")),D.containerGroup.appendChild(D.mask.element),D.elementGroup=document.createElementNS(wt,"g"),D.elementGroup.setAttribute("class","a9s-annotation editable selected"),D.elementGroup.setAttribute("data-id",y.id),D.elementGroup.appendChild(D.shape),D.handles=ol(D.shape).map(function(z){var q=D.drawHandle(z.x,z.y);return q.addEventListener("mousedown",D.onGrab(q)),D.elementGroup.appendChild(q),q}),D.containerGroup.appendChild(D.elementGroup),m.appendChild(D.containerGroup),cs(D.shape,y,_.formatters),D.grabbedElem=null,D.grabbedAt=null,D}return s=v,(f=[{key:"element",get:function(){return this.elementGroup}}])&&Cg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(bf);function vi(r){return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vi(r)}function Wf(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function Gf(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Wf(Object(f),!0).forEach(function(h){Lr(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Wf(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Rg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,qf(h.key),h)}}function sl(r,s){return sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},sl(r,s)}function Ir(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ms(r){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ms(r)}function Lr(r,s,f){return(s=qf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function qf(r){var s=function(f,h){if(vi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(vi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return vi(s)==="symbol"?s:String(s)}var al=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&sl(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=ms(h);if(u){var _=ms(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(vi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(E)}(this,y)});function v(y,m,_){var E;return function(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}(this,v),Lr(Ir(E=b.call(this,y,m,_)),"startDrawing",function(O,D,z){E._isDrawing=!0,E._startOnSingleClick=z,E.attachListeners({mouseMove:E.onMouseMove,mouseUp:E.onMouseUp,dblClick:E.onDblClick}),E.rubberband=new Og([O,D],E.g,E.env)}),Lr(Ir(E),"stop",function(){E.detachListeners(),E._isDrawing=!1,E.rubberband&&(E.rubberband.destroy(),E.rubberband=null)}),Lr(Ir(E),"onMouseMove",function(O,D){return E.rubberband.dragTo([O,D])}),Lr(Ir(E),"onMouseUp",function(){var O=E.rubberband.getBoundingClientRect(),D=O.width,z=O.height,q=E.config.minSelectionWidth||4,K=E.config.minSelectionHeight||4;D>=q||z>=K?E.rubberband.addPoint():E._startOnSingleClick||(E.emit("cancel"),E.stop())}),Lr(Ir(E),"onDblClick",function(){E._isDrawing=!1;var O=E.rubberband.element;O.annotation=E.rubberband.toSelection(),E.emit("complete",O),E.stop()}),Lr(Ir(E),"createEditableShape",function(O,D){return new Ag(O,E.g,Gf(Gf({},E.config),{},{formatters:D}),E.env)}),E._isDrawing=!1,E._startOnSingleClick=!1,E}return s=v,(f=[{key:"isDrawing",get:function(){return this._isDrawing}}])&&Rg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(Xa);function bi(r){return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},bi(r)}function Xf(r,s){(s==null||s>r.length)&&(s=r.length);for(var f=0,h=new Array(s);f<s;f++)h[f]=r[f];return h}function Dg(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,Zf(h.key),h)}}function ll(r,s){return ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},ll(r,s)}function wi(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function gs(r){return gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},gs(r)}function io(r,s,f){return(s=Zf(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function Zf(r){var s=function(f,h){if(bi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(bi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return bi(s)==="symbol"?s:String(s)}al.identifier="polygon",al.supports=function(r){var s,f=r.selector("SvgSelector");if(f)return(s=f.value)===null||s===void 0?void 0:s.match(/^<svg.*<polygon/g)};var kg=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&ll(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=gs(h);if(u){var _=gs(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(bi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(E)}(this,y)});function v(y,m,_){var E;return function(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}(this,v),io(wi(E=b.call(this)),"listTools",function(){return E._registered.map(function(O){return O.identifier})}),io(wi(E),"registerTool",function(O){var D=O.identifier;E.listTools().includes(D)&&E.unregisterTool(D),E._registered.unshift(O)}),io(wi(E),"unregisterTool",function(O){return E._registered=E._registered.filter(function(D){return D.identifier!==O})}),io(wi(E),"setCurrent",function(O){E._current&&E._current.destroy();var D=typeof O=="string"||O instanceof String?E._registered.find(function(z){return z.identifier===O}):O;E._current=new D(E._g,E._config,E._env),E._current.on("startSelection",function(z){return E.emit("startSelection",z)}),E._current.on("complete",function(z){return E.emit("complete",z)}),E._current.on("cancel",function(z){return E.emit("cancel",z)})}),io(wi(E),"forAnnotation",function(O){var D,z,q=function(de){if(Array.isArray(de))return de}(z=O.targets)||function(de){if(typeof Symbol<"u"&&de[Symbol.iterator]!=null||de["@@iterator"]!=null)return Array.from(de)}(z)||function(de,ge){if(de){if(typeof de=="string")return Xf(de,ge);var we=Object.prototype.toString.call(de).slice(8,-1);return we==="Object"&&de.constructor&&(we=de.constructor.name),we==="Map"||we==="Set"?Array.from(de):we==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(we)?Xf(de,ge):void 0}}(z)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),K=q[0],oe=(q.slice(1),(D=K.renderedVia)===null||D===void 0?void 0:D.name),xe=oe?E._registered.find(function(de){return de.identifier===oe}):E._registered.find(function(de){return de.supports(O)});return xe?new xe(E._g,E._config,E._env):null}),E._g=y,E._config=m,E._env=_,E._registered=[ds,al],E.setCurrent(ds),E}return s=v,(f=[{key:"current",get:function(){return this._current}}])&&Dg(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(e()),Mg={FragmentSelector:Va,SvgSelector:If},jg={FragmentSelector:function(r,s){var f=fr(r,s);return f.w*f.h},SvgSelector:function(r){var s,f,h,u=Mr(r),b=u.nodeName.toLowerCase();if(b==="polygon")return s=u.getAttribute("points").trim().split(" ").map(function(v){return v.split(",").map(function(y){return parseFloat(y.trim())})}),ps(s);if(b==="circle")return(f=u.getAttribute("r"))*f*Math.PI;if(b==="ellipse")return(h=u).getAttribute("rx")*h.getAttribute("ry")*Math.PI;if(b=="path")return Eg(u);if(b=="line")return 0;throw"Unsupported SVG shape type: ".concat(b)}},Yf=function(r){var s=r.targets[0];if(s)return Array.isArray(s.selector)?s.selector[0]:s.selector},ul=function(r,s){return Mg[Yf(r).type](r,s)},Kf=function(r,s){return jg[Yf(r).type](r,s)};function oo(r){return oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},oo(r)}function Jf(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,(u=function(b,v){if(oo(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(oo(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h.key),oo(u)==="symbol"?u:String(u)),h)}var u}function Ig(r,s,f){return s&&Jf(r.prototype,s),f&&Jf(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}var Lg=Ig(function r(s){(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,r);var f=document.createElementNS(wt,"svg");f.setAttribute("class","a9s-osd-crosshair-container");var h=document.createElementNS(wt,"g");h.setAttribute("class","a9s-crosshair"),f.appendChild(h);var u=document.createElementNS(wt,"line"),b=document.createElementNS(wt,"line");h.appendChild(u),h.appendChild(b),s.parentElement.appendChild(f);var v=function(y){var m=y.offsetX,_=y.offsetY,E=s.parentElement.offsetWidth,O=s.parentElement.offsetHeight;u.setAttribute("x1",0),u.setAttribute("y1",_),u.setAttribute("x2",E),u.setAttribute("y2",_),b.setAttribute("x1",m),b.setAttribute("y1",0),b.setAttribute("x2",m),b.setAttribute("y2",O)};s.addEventListener("pointermove",v),s.parentElement.addEventListener("pointermove",v)}),Ng=ct(7072),Bg=ct.n(Ng);function so(r){return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},so(r)}function Qf(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function ys(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?Qf(Object(f),!0).forEach(function(h){Nr(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):Qf(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function $f(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,eh(h.key),h)}}function Hg(r,s,f){return s&&$f(r.prototype,s),f&&$f(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}function Nr(r,s,f){return(s=eh(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function eh(r){var s=function(f,h){if(so(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(so(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return so(s)==="symbol"?s:String(s)}var cl=function(r,s){if(r.targets[0].selector.type==="FragmentSelector"){var f=fr(r,s),h=f.x,u=f.y;return{minX:h,minY:u,maxX:h+f.w,maxY:u+f.h}}var b=ul(r,s),v=document.createElementNS(wt,"svg");v.style.position="absolute",v.style.opacity=0,v.style.top=0,v.style.left=0,v.appendChild(b),document.body.appendChild(v);var y=b.getBBox(),m=y.x,_=y.y,E=y.width,O=y.height;return document.body.removeChild(v),{minX:m,minY:_,maxX:m+E,maxY:_+O}},Fg=Hg(function r(s){var f=this;(function(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,r),Nr(this,"clear",function(){return f.spatial_index.clear()}),Nr(this,"getAnnotationAt",function(h,u,b){var v=b?5/b:5,y=f.spatial_index.search({minX:h-v,minY:u-v,maxX:h+v,maxY:u+v}).map(function(m){return m.annotation}).filter(function(m){var _=function(E){var O,D=E.targets[0];return Array.isArray(D.selector)?D.selector[0].type:(O=D.selector)===null||O===void 0?void 0:O.type}(m);if(_==="FragmentSelector")return!0;if(_==="SvgSelector")return function(E,O,D,z){var q=Mr(D),K=q.nodeName.toLowerCase(),oe=[E,O];if(K==="polygon"){var xe=Array.from(q.points).map(function(rt){return[rt.x,rt.y]});return el(oe,xe)}if(K==="circle"){var de=q.getAttribute("cx"),ge=q.getAttribute("cy"),we=q.getAttribute("r");return function(rt,kt,Tt,Ut){var un=rt[0]-kt,vn=rt[1]-Tt;return Math.sqrt(un*un+vn*vn)<=Ut}(oe,de,ge,we)}if(K==="ellipse"){var De=q.getAttribute("cx"),Pe=q.getAttribute("cy"),He=q.getAttribute("rx"),tt=q.getAttribute("ry");return function(rt,kt,Tt,Ut,un,vn){var cn=Math.cos(0),nn=Math.sin(0),yt=rt[0]-kt,Vt=rt[1]-Tt,sn=cn*yt+nn*Vt,Gt=nn*yt-cn*Vt;return sn*sn/(Ut*Ut)+Gt*Gt/(un*un)<=1}(oe,De,Pe,He,tt)}if(K==="path")return kf(q).find(function(rt){return el(oe,rt)});if(K==="line"){var At=parseInt(q.getAttribute("x1")),st=parseInt(q.getAttribute("y1")),ht=parseInt(q.getAttribute("x2")),Bt=parseInt(q.getAttribute("y2"));return function(rt,kt,Tt,Ut,un,vn){var cn=rt[0],nn=rt[1],yt=Ut-kt,Vt=un-Tt,sn=Math.sqrt(yt*yt+Vt*Vt);return Math.abs((cn-kt)*Vt-(nn-Tt)*yt)/sn<=vn}(oe,At,st,ht,Bt,z)}throw"Unsupported SVG shape type: ".concat(K)}(h,u,m,v);throw"Unsupported selector type: ".concat(_)});if(y.length>0)return y.sort(function(m,_){return Kf(m,f.env.image)-Kf(_,f.env.image)}),y[0]}),Nr(this,"getAnnotationsIntersecting",function(h){var u=h.minX,b=u?h:cl(h,f.env.image),v=f.spatial_index.search(b).map(function(y){return y.annotation});return u?v:v.filter(function(y){return!y.isEqual(h)})}),Nr(this,"insert",function(h){(Array.isArray(h)?h:[h]).forEach(function(u){f.spatial_index.insert(ys(ys({},cl(u,f.env.image)),{},{annotation:u}))})}),Nr(this,"getBounds",function(h){return f.getBounds(h,f.env.image)}),Nr(this,"remove",function(h){var u=ys(ys({},cl(h,f.env.image)),{},{annotation:h});f.spatial_index.remove(u,function(b,v){return b.annotation.id===v.annotation.id})}),this.env=s,s.store=this,this.spatial_index=new(Bg())}),th=function(r,s){var f=(Fa(s,".a9s-annotation")?s:s.closest(".a9s-annotation")).querySelector(".a9s-outer").getBoundingClientRect(),h=r.drawer.canvas,u=h.getBoundingClientRect(),b=h.width/u.width,v=h.height/u.height,y=f.x-u.x,m=f.y-u.y,_=f.width,E=f.height,O=document.createElement("CANVAS"),D=O.getContext("2d");O.width=_,O.height=E,D.drawImage(h,y*b,m*v,_*b,E*v,0,0,_,E);var z=r.viewport.viewerElementToImageCoordinates(new Zn.default.Point(y,m)),q=r.viewport.viewportToImageZoom(r.viewport.getZoom());return{snippet:O,transform:function(K){return[z.x+K[0]/b/q,z.y+K[1]/v/q]}}};function Si(r){return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Si(r)}function nh(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function rh(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,ah(h.key),h)}}function ih(r,s,f){return s&&rh(r.prototype,s),f&&rh(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}function oh(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&fl(r,s)}function fl(r,s){return fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},fl(r,s)}function sh(r){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,h=vs(r);if(s){var u=vs(this).constructor;f=Reflect.construct(h,arguments,u)}else f=h.apply(this,arguments);return function(b,v){if(v&&(Si(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vt(b)}(this,f)}}function vt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function vs(r){return vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},vs(r)}function St(r,s,f){return(s=ah(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function ah(r){var s=function(f,h){if(Si(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(Si(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return Si(s)==="symbol"?s:String(s)}var zg=Ga(),lh=function(r){oh(f,r);var s=sh(f);function f(h){var u;nh(this,f),St(vt(u=s.call(this)),"_getShapeAt",function(v){var y=function(O){var D=u.svg.createSVGPoint();if(window.TouchEvent&&O instanceof TouchEvent){var z=u.svg.getBoundingClientRect(),q=O.touches[0],K=q.clientX-z.x,oe=q.clientY-z.y,xe=u.svg.getBoundingClientRect(),de=xe.left,ge=xe.top;return D.x=K+de,D.y=oe+ge,D.matrixTransform(u.g.getScreenCTM().inverse())}return D.x=O.offsetX,D.y=O.offsetY,D.matrixTransform(u.g.getCTM().inverse())}(v),m=y.x,_=y.y,E=u.store.getAnnotationAt(m,_,u.currentScale());if(E)return u.findShape(E)}),St(vt(u),"_initDrawingTools",function(v){var y,m=!1,_=!1,E=!1;u.tools=new kg(u.g,u.config,u.env),u.tools.on("complete",function(z){_=!1,u.onDrawingComplete(z)}),u.mouseTracker=new Zn.default.MouseTracker({element:u.svg,preProcessEventHandler:function(z){u.mouseTracker.enabled||(z.preventDefault=!1,z.preventGesture=!0),u.selectedShape&&z.eventType==="wheel"&&(z.preventDefault=!1,u.viewer.canvas.dispatchEvent(new z.originalEvent.constructor(z.eventType,z.originalEvent)))},pressHandler:function(z){u.tools.current.isDrawing||(u.tools.current.start(z.originalEvent,u.drawOnSingleClick&&!u.hoveredShape),v||u.scaleTool(u.tools.current))},moveHandler:function(z){if(u.tools.current.isDrawing){var q=u.tools.current.getSVGPoint(z.originalEvent),K=q.x,oe=q.y;_||z.originalEvent.stopPropagation(),u.tools.current.onMouseMove(K,oe,z.originalEvent),m||(u.emit("startSelection",{x:K,y:oe}),m=!0),!E&&u.tools.current.onDragStart&&(u.tools.current.onDragStart(K,oe,z.originalEvent),E=!0)}},releaseHandler:function(z){if(u.tools.current.isDrawing){var q=u.tools.current.getSVGPoint(z.originalEvent),K=q.x,oe=q.y;m&&(u.emit("endSelection",{x:K,y:oe}),_=!0),u.tools.current.onMouseUp(K,oe,z.originalEvent),E&&u.tools.current.onDragEnd&&u.tools.current.onDragEnd()}m=!1,E=!1}});var O=u.config.hotkey?u.config.hotkey.key?u.config.hotkey.key.toLowerCase():u.config.hotkey.toLowerCase():"shift",D=(y=u.config.hotkey)===null||y===void 0?void 0:y.inverted;u.mouseTracker.enabled=D,u.onKeyDown&&document.removeEventListener("keydown",u.onKeyDown),u.onKeyUp&&document.removeEventListener("keydown",u.onKeyDown),u.onKeyDown=function(z){if(z.key.toLowerCase()===O&&!u.selectedShape){var q=!u.readOnly&&!D;u.mouseTracker.enabled=q,u.tools.current.enabled=q}},u.onKeyUp=function(z){z.key.toLowerCase()!==O||u.tools.current.isDrawing||(u.mouseTracker.enabled=D,u.tools.current.enabled=D,_=!1)},document.addEventListener("keydown",u.onKeyDown),document.addEventListener("keyup",u.onKeyUp)}),St(vt(u),"_initMouseEvents",function(){u.svg.addEventListener("mousemove",function(y){var m;if(!((m=u.tools)!==null&&m!==void 0&&m.current.isDrawing||y.target.closest(".a9s-annotation.editable.selected"))){var _,E=u._getShapeAt(y);if((E==null?void 0:E.annotation)!==((_=u.hoveredShape)===null||_===void 0?void 0:_.annotation)){if(u.hoveredShape){var O=u.hoveredShape.element||u.hoveredShape;ts(O,"hover"),u.emit("mouseLeaveAnnotation",u.hoveredShape.annotation,u.hoveredShape)}E&&(Yn(E,"hover"),u.emit("mouseEnterAnnotation",E.annotation,E))}u.hoveredShape=E}}),u.svg.parentElement.addEventListener("mouseleave",function(){u.hoveredShape&&(ts(u.hoveredShape,"hover"),u.emit("mouseLeaveAnnotation",u.hoveredShape.annotation,u.hoveredShape),u.hoveredShape=null)});var v=null;u.viewer.addHandler("canvas-press",function(){return v=new Date().getTime()}),u.viewer.addHandler("canvas-click",function(y){var m,_=y.originalEvent;if(!((m=u.tools.current)!==null&&m!==void 0&&m.isDrawing||u.disableSelect)&&new Date().getTime()-v<250){var E=_.target.closest(".a9s-annotation.editable.selected")?u.selectedShape:u._getShapeAt(_);E?(y.preventDefaultAction=!0,u.selectShape(E)):E||(u.deselect(),u.emit("select",{}))}u.disableSelect&&u.hoveredShape&&u.emit("clickAnnotation",u.hoveredShape.annotation,u.hoveredShape)})}),St(vt(u),"_lazy",function(v){if(u.viewer.world.getItemAt(0))v();else{var y=function m(){v(),u.viewer.removeHandler("open",m),u.viewer.world.removeHandler("add-item",m)};u.viewer.addHandler("open",y),u.viewer.world.addHandler("add-item",y)}}),St(vt(u),"_refreshNonScalingAnnotations",function(){var v=u.currentScale();Array.from(u.svg.querySelectorAll(".a9s-non-scaling")).forEach(function(y){return y.setAttribute("transform","scale(".concat(1/v,")"))})}),St(vt(u),"addAnnotation",function(v,y){var m=y||u.g,_=ul(v,u.env.image);return Yn(_,"a9s-annotation"),_.setAttribute("data-id",v.id),_.annotation=v,m.appendChild(_),cs(_,v,u.formatters),u.scaleFormatterElements(_),_}),St(vt(u),"addDrawingTool",function(v){return u.tools.registerTool(v)}),St(vt(u),"addOrUpdateAnnotation",function(v,y){var m,_=(m=u.selectedShape)===null||m===void 0?void 0:m.annotation;(_===v||_!=null&&_.isSelection||_==y)&&u.deselect(),y&&u.removeAnnotation(v),u.removeAnnotation(v);var E=u.addAnnotation(v);Fa(E,"a9s-non-scaling")&&E.setAttribute("transform","scale(".concat(1/u.currentScale(),")")),u.store.insert(v)}),St(vt(u),"currentScale",function(){var v=u.viewer.viewport.getContainerSize().x;return u.viewer.viewport.getZoom(!0)*v/u.viewer.world.getContentFactor()}),St(vt(u),"deselect",function(){var v;if((v=u.tools)===null||v===void 0||v.current.stop(),u.selectedShape){var y=u.selectedShape.annotation;if(u.selectedShape.destroy){if(u.selectedShape.mouseTracker.destroy(),u.selectedShape.destroy(),!y.isSelection){var m=u.addAnnotation(y);Fa(m,"a9s-non-scaling")&&m.setAttribute("transform","scale(".concat(1/u.currentScale(),")"))}}else ts(u.selectedShape,"selected");u.selectedShape=null}}),St(vt(u),"destroy",function(){u.deselect(),u.svg.parentNode.removeChild(u.svg)}),St(vt(u),"findShape",function(v){var y=v!=null&&v.id?v.id:v;return u.g.querySelector('.a9s-annotation[data-id="'.concat(y,'"]'))}),St(vt(u),"_fit",function(v,y,m){var _=u.findShape(v);if(_){var E=!!y&&(typeof y=="boolean"?y:y.immediately),O=(y==null?void 0:y.padding)||0,D=u.viewer.container.getBoundingClientRect(),z=Math.min(2*O/D.width,2*O/D.height),q=_.getBBox(),K=q.x,oe=q.y,xe=q.width,de=q.height,ge=K-z*xe,we=oe-z*de,De=xe+2*z*xe,Pe=de+2*z*de,He=u.viewer.viewport.imageToViewportRectangle(ge,we,De,Pe);u.viewer.viewport[m](He,E)}}),St(vt(u),"fitBounds",function(v,y){return u._fit(v,y,"fitBounds")}),St(vt(u),"fitBoundsWithConstraints",function(v,y){return u._fit(v,y,"fitBoundsWithConstraints")}),St(vt(u),"getAnnotations",function(){return Array.from(u.g.querySelectorAll(".a9s-annotation")).map(function(v){return v.annotation})}),St(vt(u),"getAnnotationsIntersecting",function(v){var y=v.id?v:u.findShape(v).annotation;return u.store.getAnnotationsIntersecting(y)}),St(vt(u),"getImageSnippetById",function(v){var y=u.findShape(v);if(y)return th(u.viewer,y)}),St(vt(u),"getSelectedImageSnippet",function(){if(u.selectedShape){var v,y=(v=u.selectedShape.element)!==null&&v!==void 0?v:u.selectedShape;return th(u.viewer,y)}}),St(vt(u),"init",function(v){u.deselect(),Array.from(u.g.querySelectorAll(".a9s-annotation")).forEach(function(y){return u.g.removeChild(y)}),u.store.clear(),u._lazy(function(){console.time("Took"),console.log("Drawing..."),u.loaded||(u.g.style.display="none"),v.forEach(function(y){return u.addAnnotation(y)}),console.log("Indexing..."),u.store.insert(v),console.timeEnd("Took"),u.resize()})}),St(vt(u),"listDrawingTools",function(){return u.tools.listTools()}),St(vt(u),"overrideId",function(v,y){var m=u.findShape(v);m.setAttribute("data-id",y);var _=m.annotation,E=_.clone({id:y});return m.annotation=E,u.store.remove(_),u.store.insert(E),E}),St(vt(u),"panTo",function(v,y){var m=u.findShape(v);if(m){var _=m.getBoundingClientRect(),E=_.top,O=_.left,D=_.width,z=_.height,q=O+D/2+window.scrollX,K=E+z/2+window.scrollY,oe=u.viewer.viewport.windowToViewportCoordinates(new Zn.default.Point(q,K));u.viewer.viewport.panTo(oe,y)}}),St(vt(u),"removeAnnotation",function(v){var y,m=v.type?v.id:v;((y=u.selectedShape)===null||y===void 0?void 0:y.annotation.id)===m&&u.deselect();var _=u.findShape(v);if(_){var E,O=_.annotation;((E=u.selectedShape)===null||E===void 0?void 0:E.annotation)===O&&u.deselect(),_.parentNode.removeChild(_),u.store.remove(O)}}),St(vt(u),"removeDrawingTool",function(v){var y;return(y=u.tools)===null||y===void 0?void 0:y.unregisterTool(v)}),St(vt(u),"scaleFormatterElements",function(v){var y=1/u.currentScale();if(v){var m=v.querySelector(".a9s-annotation:not(.a9s-non-scaling) .a9s-formatter-el");m&&m.firstChild.setAttribute("transform","scale(".concat(y,")"))}else Array.from(u.g.querySelectorAll(".a9s-annotation:not(.a9s-non-scaling) .a9s-formatter-el")).forEach(function(_){return _.firstChild.setAttribute("transform","scale(".concat(y,")"))})}),St(vt(u),"scaleTool",function(v){if(v){var y=1/u.currentScale();v.scale=y,v.onScaleChanged&&v.onScaleChanged(y)}}),St(vt(u),"selectAnnotation",function(v,y){u.selectedShape&&u.deselect();var m=u.findShape(v);if(m){u.selectShape(m,y);var _=u.selectedShape.element?u.selectedShape.element:u.selectedShape;return{annotation:m.annotation,element:_}}u.deselect()}),St(vt(u),"selectShape",function(v,y){var m;if(y||v.annotation.isSelection||u.emit("clickAnnotation",v.annotation,v),((m=u.selectedShape)===null||m===void 0?void 0:m.annotation)!==v.annotation){u.selectedShape&&u.selectedShape.annotation!==v.annotation&&u.deselect();var _=v.annotation;if(u.readOnly||_.readOnly||u.headless)u.selectedShape=v,Yn(v,"selected"),y||u.emit("select",{annotation:_,element:v,skipEvent:y});else{var E=u.tools.forAnnotation(_);if(E){setTimeout(function(){v.parentNode.removeChild(v),y||u.emit("select",{annotation:_,element:u.selectedShape.element})},1),u.selectedShape=E.createEditableShape(_,u.formatters),u.scaleTool(u.selectedShape),u.scaleFormatterElements(u.selectedShape.element),u.selectedShape.element.annotation=_;var O=new Zn.default.MouseTracker({element:u.svg,preProcessEventHandler:function(D){D.stopPropagation=!0,D.preventDefault=!1,D.preventGesture=!0}}).setTracking(!1);u.selectedShape.element.addEventListener("mouseenter",function(){u.hoveredShape=u.selectedShape,O.setTracking(!0)}),u.selectedShape.element.addEventListener("mouseleave",function(){u.hoveredShape=null,O.setTracking(!1)}),u.selectedShape.mouseTracker=O,u.selectedShape.on("update",function(D){return u.emit("updateTarget",u.selectedShape.element,D)})}else u.selectedShape=v,y||u.emit("select",{annotation:_,element:u.selectedShape})}}}),St(vt(u),"setDrawingEnabled",function(v){if(u.mouseTracker){var y=v&&!u.readOnly;u.mouseTracker.enabled=y,u.mouseTracker.setTracking(y),u.tools.current&&(u.tools.current.enabled=y)}}),St(vt(u),"setDrawingTool",function(v){var y;u.tools&&((y=u.tools.current)===null||y===void 0||y.stop(),u.tools.setCurrent(v))}),St(vt(u),"setVisible",function(v){v?u.svg.style.display=null:(u.deselect(),u.svg.style.display="none")}),St(vt(u),"stopDrawing",function(){var v;(v=u.tools)!==null&&v!==void 0&&v.current&&(u.tools.current.isDrawing&&u.tools.current.stop(),u.mouseTracker.enabled=!1,u.tools.current.enabled=!1)}),u.viewer=h.viewer,u.config=h.config,u.env=h.env,u.readOnly=h.config.readOnly,u.headless=h.config.headless,h.config.formatter?u.formatters=[h.config.formatter]:h.config.formatters&&(u.formatters=Array.isArray(h.config.formatters)?h.config.formatters:[h.config.formatters]),u.disableSelect=h.config.disableSelect,u.drawOnSingleClick=h.config.drawOnSingleClick,u.svg=document.createElementNS(wt,"svg"),zg?(u.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),function(v){var y=null,m=function(E,O){return new MouseEvent(E,{screenX:O.screenX,screenY:O.screenY,clientX:O.clientX,clientY:O.clientY,pageX:O.pageX,pageY:O.pageY,bubbles:!0})},_=function(E){var O=E.changedTouches[0],D=m(yg[E.type],O);O.target.dispatchEvent(D),E.preventDefault(),E.type!=="touchstart"&&E.type!=="touchmove"||(y&&clearTimeout(y),y=setTimeout(function(){var z=m("dblclick",O);O.target.dispatchEvent(z)},800)),E.type==="touchend"&&y&&clearTimeout(y)};v.addEventListener("touchstart",_,!0),v.addEventListener("touchmove",_,!0),v.addEventListener("touchend",_,!0),v.addEventListener("touchcancel",_,!0)}(u.svg)):u.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),u.g=document.createElementNS(wt,"g"),u.svg.appendChild(u.g),u.viewer.canvas.appendChild(u.svg),u.viewer.addHandler("animation",function(){return u.resize()}),u.viewer.addHandler("rotate",function(){return u.resize()}),u.viewer.addHandler("resize",function(){return u.resize()}),u.viewer.addHandler("flip",function(){return u.resize()}),u.loaded=!1;var b=function(){var v=u.viewer.world.getItemAt(0).source.dimensions,y=v.x,m=v.y,_=u.viewer.world.getItemAt(0).source["@id"]||new URL(u.viewer.world.getItemAt(0).source.url,document.baseURI).href;u.env.image={src:_,naturalWidth:y,naturalHeight:m},h.config.crosshair&&(u.crosshair||(u.crosshair=new Lg(u.svg),Yn(u.svg,"no-cursor"))),u.loaded||u.emit("load",_),u.loaded=!0,u.g.style.display="inline",u.resize()};return u.viewer.addHandler("open",b),u.viewer.world.addHandler("add-item",b),u.viewer.world.getItemAt(0)&&b(),u.store=new Fg(u.env),u.selectedShape=null,u.hoveredShape=null,u._initMouseEvents(),u}return ih(f,[{key:"resize",value:function(){var h,u=this.viewer.viewport.getFlip(),b=this.viewer.viewport.pixelFromPoint(new Zn.default.Point(0,0),!0);u&&(b.x=this.viewer.viewport._containerInnerSize.x-b.x);var v=this.currentScale(),y=u?-v:v,m=this.viewer.viewport.getRotation();this.g.setAttribute("transform","translate(".concat(b.x,", ").concat(b.y,") scale(").concat(y,", ").concat(v,") rotate(").concat(m,")")),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),(h=this.tools)!==null&&h!==void 0&&h.current&&this.scaleTool(this.tools.current)}}]),f}(e()),Ug=function(r){oh(f,r);var s=sh(f);function f(h){var u;return nh(this,f),St(vt(u=s.call(this,h)),"onDrawingComplete",function(b){var v;u.mouseTracker.enabled=(v=u.config.hotkey)===null||v===void 0?void 0:v.inverted,u.selectShape(b),u.emit("createSelection",b.annotation)}),u._initDrawingTools(),u}return ih(f)}(lh);function ao(r){return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ao(r)}function uh(r,s){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(r);s&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),f.push.apply(f,h)}return f}function bs(r){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?uh(Object(f),!0).forEach(function(h){Vg(r,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):uh(Object(f)).forEach(function(h){Object.defineProperty(r,h,Object.getOwnPropertyDescriptor(f,h))})}return r}function Vg(r,s,f){return(s=function(h){var u=function(b,v){if(ao(b)!=="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var m=y.call(b,"string");if(ao(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(h);return ao(u)==="symbol"?u:String(u)}(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}var hl=function(r){var s=r.viewport.viewportToImageRectangle(r.viewport.getBounds(!0)),f=r.viewport.getContainerSize().x;return{extent:s,scale:r.viewport.getZoom(!0)*f/r.world.getContentFactor()}},ch=function(r,s){var f=hl(r),h=f.extent,u=f.scale,b=s.selector,v=cr.create({target:s});if(b.type==="SvgSelector"){var y=Mr(v),m=y.nodeName.toLowerCase(),_=null;if(m==="polygon")_=Wg(y,h,u);else if(m==="circle")_=Gg(y,h,u);else if(m==="ellipse")_=qg(y,h,u);else{if(m!=="path")throw"Unsupported SVG shape type: ".concat(m);_=Xg(y,h,u)}var E=_.outerHTML||new XMLSerializer().serializeToString(_);return E=E.replace(' xmlns="'.concat(wt,'"'),""),bs(bs({},s),{},{selector:{type:"SvgSelector",value:"<svg>".concat(E,"</svg>")}})}if(b.type==="FragmentSelector"){var O=fr(v),D=O.x,z=O.y,q=O.w,K=O.h,oe=h.x+D/u,xe=h.y+z/u,de=q/u,ge=K/u;return q===0&&K===0?bs(bs({},ai(oe,xe,de,ge)),{},{renderedVia:{name:"point"}}):ai(oe,xe,de,ge)}throw"Unsupported selector type: ".concat(b.type)},Wg=function(r,s,f){var h=Array.from(r.points).map(function(u){return s.x+u.x/f+","+(s.y+u.y/f)}).join(" ");return r.setAttribute("points",h),r},Gg=function(r,s,f){var h=parseFloat(r.getAttribute("cx")),u=parseFloat(r.getAttribute("cy")),b=parseFloat(r.getAttribute("r"));return r.setAttribute("cx",s.x+h/f),r.setAttribute("cy",s.y+u/f),r.setAttribute("r",b/f),r},qg=function(r,s,f){var h=parseFloat(r.getAttribute("cx")),u=parseFloat(r.getAttribute("cy")),b=parseFloat(r.getAttribute("rx")),v=parseFloat(r.getAttribute("ry"));return r.setAttribute("cx",s.x+h/f),r.setAttribute("cy",s.y+u/f),r.setAttribute("rx",b/f),r.setAttribute("ry",v/f),r},Xg=function(r,s,f){var h=r.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(function(u){return u.trim()}).map(function(u){var b=u.substring(0,1);if(b.toLowerCase()==="z")return b;var v=u.substring(1).split(" ").map(function(m){return parseFloat(m.trim())}),y=b===b.toUpperCase();return b+" "+(y?s.x+v[0]/f:v[0]/f)+" "+(y?s.y+v[1]/f:v[1]/f)}).join(" ");return r.setAttribute("d",h),r},fh=function(r,s){var f=hl(r),h=f.extent,u=f.scale,b=s.selector("FragmentSelector");if(s.selector("SvgSelector")){var v=Mr(s),y=v.nodeName.toLowerCase(),m=null;if(y==="polygon")m=Zg(v,h,u);else if(y==="circle")m=Yg(v,h,u);else if(y==="ellipse")m=Kg(v,h,u);else{if(y!=="path")throw"Unsupported SVG shape type: ".concat(y);m=Jg(v,h,u)}var _=m.outerHTML||new XMLSerializer().serializeToString(m);_=_.replace(' xmlns="'.concat(wt,'"'),"");var E={selector:{type:"SvgSelector",value:"<svg>".concat(_,"</svg>")}};return s.clone({target:E})}if(b){var O=fr(s),D=O.x,z=O.y,q=O.w,K=O.h,oe=(D-h.x)*u,xe=(z-h.y)*u,de=ai(oe,xe,q*u,K*u);return s.clone({target:de})}},Zg=function(r,s,f){var h=Array.from(r.points).map(function(u){return f*(u.x-s.x)+","+f*(u.y-s.y)}).join(" ");return r.setAttribute("points",h),r},Yg=function(r,s,f){var h=r.getAttribute("cx"),u=r.getAttribute("cy"),b=r.getAttribute("r");return r.setAttribute("cx",f*(h-s.x)),r.setAttribute("cy",f*(u-s.y)),r.setAttribute("r",b*f),r},Kg=function(r,s,f){var h=r.getAttribute("cx"),u=r.getAttribute("cy"),b=r.getAttribute("rx"),v=r.getAttribute("ry");return r.setAttribute("cx",f*(h-s.x)),r.setAttribute("cy",f*(u-s.y)),r.setAttribute("rx",b*f),r.setAttribute("ry",v*f),r},Jg=function(r,s,f){var h=r.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(function(u){return u.trim()}).map(function(u){var b=u.substring(0,1);if(b.toLowerCase()==="z")return b;var v=u.substring(1).split(" ").filter(function(m){return m}).map(function(m){return parseFloat(m.trim())}),y=b===b.toUpperCase();return b+" "+(y?f*(v[0]-s.x):f*v[0])+" "+(y?f*(v[1]-s.y):f*v[1])}).join(" ");return r.setAttribute("d",h),r},hh=function(r,s){var f,h,u=hl(r),b=u.extent,v=u.scale,y=(h=s.annotation.targets[0])?Array.isArray(h.selector)?h.selector[0].type:(f=h.selector)===null||f===void 0?void 0:f.type:null;if(y==="FragmentSelector")Qg(s,b,v);else{if(y!=="SvgSelector")throw"Unsupported selector type type: ".concat(y);$g(s,b,v)}var m=s.querySelector(".a9s-formatter-el");if(m){var _=s.querySelector(".a9s-inner").getBBox(),E=_.x,O=_.y;m.setAttribute("x",E),m.setAttribute("y",O)}},Qg=function(r,s,f){var h=fr(r.annotation),u=h.x,b=h.y,v=h.w,y=h.h,m=r.querySelector(".a9s-outer"),_=r.querySelector(".a9s-inner"),E=f*(u-s.x),O=f*(b-s.y);[m,_].forEach(v===0&&y===0?function(D){D.setAttribute("cx",E),D.setAttribute("cy",O)}:function(D){D.setAttribute("x",E),D.setAttribute("y",O),D.setAttribute("width",v*f),D.setAttribute("height",y*f)})},$g=function(r,s,f){var h=Mr(r.annotation),u=h.nodeName.toLowerCase();if(u==="polygon")ey(r,h,s,f);else if(u==="circle")ty(r,h,s,f);else if(u==="ellipse")ny(r,h,s,f);else{if(u!=="path")throw"Unsupported SVG shape type: ".concat(u);ry(r,h,s,f)}},ey=function(r,s,f,h){var u=Array.from(s.points).map(function(b){return h*(b.x-f.x)+","+h*(b.y-f.y)}).join(" ");r.querySelector(".a9s-outer").setAttribute("points",u),r.querySelector(".a9s-inner").setAttribute("points",u)},ty=function(r,s,f,h){var u=h*(s.getAttribute("cx")-f.x),b=h*(s.getAttribute("cy")-f.y),v=h*s.getAttribute("r"),y=r.querySelector(".a9s-outer");y.setAttribute("cx",u),y.setAttribute("cy",b),y.setAttribute("r",v);var m=r.querySelector(".a9s-inner");m.setAttribute("cx",u),m.setAttribute("cy",b),m.setAttribute("r",v)},ny=function(r,s,f,h){var u=h*(s.getAttribute("cx")-f.x),b=h*(s.getAttribute("cy")-f.y),v=h*s.getAttribute("rx"),y=h*s.getAttribute("ry"),m=r.querySelector(".a9s-outer");m.setAttribute("cx",u),m.setAttribute("cy",b),m.setAttribute("rx",v),m.setAttribute("ry",y);var _=r.querySelector(".a9s-inner");_.setAttribute("cx",u),_.setAttribute("cy",b),_.setAttribute("rx",v),_.setAttribute("ry",y)},ry=function(r,s,f,h){var u=s.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(function(b){return b.trim()}).map(function(b){var v=b.substring(0,1);if(v.toLowerCase()==="z")return v;var y=b.substring(1).split(" ").filter(function(_){return _}).map(function(_){return parseFloat(_.trim())}),m=v===v.toUpperCase();return v+" "+(m?h*(y[0]-f.x):h*y[0])+" "+(m?h*(y[1]-f.y):h*y[1])}).join(" ");r.querySelector(".a9s-inner").setAttribute("d",u),r.querySelector(".a9s-outer").setAttribute("d",u)};function _i(r){return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_i(r)}function iy(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,dh(h.key),h)}}function dl(r,s){return dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},dl(r,s)}function Qn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ws(r){return ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ws(r)}function dr(r,s,f){return(s=dh(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function dh(r){var s=function(f,h){if(_i(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(_i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return _i(s)==="symbol"?s:String(s)}var oy=Ga(),sy=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&dl(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=ws(h);if(u){var _=ws(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(_i(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(E)}(this,y)});function v(y){var m;return function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}(this,v),dr(Qn(m=b.call(this,y)),"_fit",function(_,E,O){var D=!!E&&(typeof E=="boolean"?E:E.immediately),z=(E==null?void 0:E.padding)||0,q=m.findShape(_);if(q){var K=m.viewer.container.getBoundingClientRect(),oe=q.getBoundingClientRect(),xe=oe.x-K.x-z,de=oe.y-K.y-z,ge=oe.width+2*z,we=oe.height+2*z,De=m.viewer.viewport.viewerElementToViewportRectangle(new Zn.default.Rect(xe,de,ge,we));m.viewer.viewport[O](De,D)}}),dr(Qn(m),"_getShapeAt",function(_){var E=m.viewer.viewport.viewerElementToViewportCoordinates(function(K){if(oy){var oe=m.svg.getBoundingClientRect(),xe=K.clientX-oe.x,de=K.clientY-oe.y;return new Zn.default.Point(xe,de)}return new Zn.default.Point(K.offsetX,K.offsetY)}(_)),O=m.viewer.viewport.viewportToImageCoordinates(E.x,E.y),D=O.x,z=O.y,q=m.store.getAnnotationAt(D,z,m.currentScale());if(q)return m.findShape(q)}),dr(Qn(m),"_refreshNonScalingAnnotations",function(){}),dr(Qn(m),"addAnnotation",function(_,E){var O=E||m.g,D=ul(_,m.env.image);return Yn(D,"a9s-annotation"),D.setAttribute("data-id",_.id),D.annotation=_,hh(m.viewer,D),O.appendChild(D),cs(D,_,m.formatters),D}),dr(Qn(m),"addOrUpdateAnnotation",function(_,E){var O,D=(O=m.selectedShape)===null||O===void 0?void 0:O.annotation;(D===_||D!=null&&D.isSelection||D==E)&&m.deselect(),E&&m.removeAnnotation(_),m.removeAnnotation(_),m.addAnnotation(_),m.store.insert(_)}),dr(Qn(m),"deselect",function(){var _;if((_=m.tools)===null||_===void 0||_.current.stop(),m.selectedShape){var E=m.selectedShape.annotation;m.selectedShape.destroy?(m.selectedShape.mouseTracker.destroy(),m.selectedShape.destroy(),E.isSelection||m.addAnnotation(E)):ts(m.selectedShape,"selected"),m.selectedShape=null}}),dr(Qn(m),"onDrawingComplete",function(_){var E=_.annotation.clone({target:ch(m.viewer,_.annotation.target)});_.annotation=E,m.selectShape(_),m.emit("createSelection",_.annotation),m.mouseTracker.enabled=!1}),dr(Qn(m),"selectShape",function(_,E){var O;if(E||_.annotation.isSelection||m.emit("clickAnnotation",_.annotation,_),((O=m.selectedShape)===null||O===void 0?void 0:O.annotation)!==_.annotation){m.selectedShape&&m.selectedShape.annotation!==_.annotation&&m.deselect(!0);var D=_.annotation;if(m.readOnly||D.readOnly||m.headless)m.selectedShape=_,Yn(_,"selected"),E||m.emit("select",{annotation:D,element:_,skipEvent:E});else{setTimeout(function(){_.parentNode.removeChild(_),E||m.emit("select",{annotation:D,element:m.selectedShape.element})},1);var z=m.tools.forAnnotation(D);m.selectedShape=z.createEditableShape(D),m.selectedShape.element.annotation=D;var q=fh(m.viewer,D);m.selectedShape.updateState(q);var K=new Zn.default.MouseTracker({element:m.svg,preProcessEventHandler:function(oe){oe.stopPropagation=!0,oe.preventDefault=!1,oe.preventGesture=!0}}).setTracking(!1);m.selectedShape.element.addEventListener("mouseenter",function(){m.hoveredShape=m.selectedShape,K.setTracking(!0)}),m.selectedShape.element.addEventListener("mouseleave",function(){m.hoveredShape=null,K.setTracking(!1)}),m.selectedShape.mouseTracker=K,m.selectedShape.on("update",function(oe){var xe=ch(m.viewer,oe);m.selectedShape.element.annotation=m.selectedShape.annotation.clone({target:xe}),m.emit("updateTarget",m.selectedShape.element,xe)})}}}),m._initDrawingTools(!0),m}return s=v,(f=[{key:"resize",value:function(){var y=this;if(this.store&&(Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach(function(_){return hh(y.viewer,_)}),this.selectedShape))if(this.selectedShape.element){var m=fh(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState(m),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}])&&iy(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(lh);function xi(r){return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xi(r)}function ay(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,ph(h.key),h)}}function pl(r,s){return pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},pl(r,s)}function mt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ss(r){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ss(r)}function gt(r,s,f){return(s=ph(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function ph(r){var s=function(f,h){if(xi(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(xi(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return xi(s)==="symbol"?s:String(s)}var ly=function(r){(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&pl(y,m)})(v,r);var s,f,h,u,b=(h=v,u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var y,m=Ss(h);if(u){var _=Ss(this).constructor;y=Reflect.construct(m,arguments,_)}else y=m.apply(this,arguments);return function(E,O){if(O&&(xi(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mt(E)}(this,y)});function v(y){var m;return function(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}(this,v),gt(mt(m=b.call(this,y)),"clearState",function(_){return m.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},_)}),gt(mt(m),"forwardEvent",function(_,E){m.annotationLayer.on(_,function(O,D){m.props[E](O.clone(),D)})}),gt(mt(m),"onKeyUp",function(_){if(_.which===27){m.annotationLayer.stopDrawing();var E=m.state.selectedAnnotation;E&&(m.cancelSelected(),m.props.onCancelSelected(E))}else if(_.which===46&&!m.props.config.disableDeleteKey){var O=m.state.selectedAnnotation;O&&(O.isSelection?m.onCancelAnnotation(O):m.onDeleteAnnotation(O))}}),gt(mt(m),"handleStartSelect",function(_){return m.props.onSelectionStarted(_)}),gt(mt(m),"handleEndSelect",function(_){return m.props.onSelectionEnded(_)}),gt(mt(m),"handleSelect",function(_,E){m.state.editorDisabled?m.onHeadlessSelect(_,E):m.onNormalSelect(_,E)}),gt(mt(m),"onNormalSelect",function(_,E){var O=_.annotation,D=_.element;if(O){var z=function(){m.setState({selectedAnnotation:O,selectedDOMElement:D,modifiedTarget:null},function(){E||(O.isSelection?m.props.onSelectionCreated(O.clone()):m.props.onAnnotationSelected(O.clone(),D))})},q=m.state.selectedAnnotation;q&&!q.isEqual(O)?m.clearState(function(){m.props.onCancelSelected(q),z()}):z()}else{var K=m.state.selectedAnnotation;K?m.clearState(function(){return m.props.onCancelSelected(K)}):m.clearState()}}),gt(mt(m),"onHeadlessSelect",function(_,E){m.saveSelected().then(function(){m.onNormalSelect(_,E)})}),gt(mt(m),"handleUpdateTarget",function(_,E){m.setState({selectedDOMElement:_,modifiedTarget:E});var O=JSON.parse(JSON.stringify(E));m.props.onSelectionTargetChanged(O)}),gt(mt(m),"handleViewportChange",function(_){return m.setState({selectedDOMElement:_})}),gt(mt(m),"overrideAnnotationId",function(_){return function(E){var O=_.id;m.state.selectedAnnotation?m.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},function(){m.annotationLayer.overrideId(O,E)}):m.annotationLayer.overrideId(O,E)}}),gt(mt(m),"onCreateOrUpdateAnnotation",function(_,E){return function(O,D){var z=O.isSelection?O.toAnnotation():O;z=m.state.modifiedTarget?z.clone({target:m.state.modifiedTarget}):z.clone(),m.clearState(function(){m.annotationLayer.addOrUpdateAnnotation(z,D),D?m.props[_](z,D.clone()):m.props[_](z,m.overrideAnnotationId(z)),E&&E()})}}),gt(mt(m),"onDeleteAnnotation",function(_){m.clearState(),m.annotationLayer.removeAnnotation(_),m.props.onAnnotationDeleted(_)}),gt(mt(m),"onCancelAnnotation",function(_,E){m.state.editorDisabled||m.annotationLayer.deselect(),m.props.onCancelSelected(_),m.clearState(E)}),gt(mt(m),"addAnnotation",function(_){var E;_.id===((E=m.state.selectedAnnotation)===null||E===void 0?void 0:E.id)&&(m.annotationLayer.deselect(),m.clearState()),m.annotationLayer.addOrUpdateAnnotation(_.clone())}),gt(mt(m),"addDrawingTool",function(_){return m.annotationLayer.addDrawingTool(_)}),gt(mt(m),"cancelSelected",function(){return new Promise(function(_){m.annotationLayer.deselect(),m.state.selectedAnnotation?m.clearState(_):_()})}),gt(mt(m),"fitBounds",function(_,E){return m.annotationLayer.fitBounds(_,E)}),gt(mt(m),"fitBoundsWithConstraints",function(_,E){return m.annotationLayer.fitBoundsWithConstraints(_,E)}),gt(mt(m),"getAnnotationById",function(_){var E;return(E=m.annotationLayer.findShape(_))===null||E===void 0?void 0:E.annotation}),gt(mt(m),"getAnnotations",function(){return m.annotationLayer.getAnnotations().map(function(_){return _.clone()})}),gt(mt(m),"getAnnotationsIntersecting",function(_){return m.annotationLayer.getAnnotationsIntersecting(_)}),gt(mt(m),"getImageSnippetById",function(_){return m.annotationLayer.getImageSnippetById(_)}),gt(mt(m),"getSelected",function(){var _;if(m.state.selectedAnnotation)return m.state.editorDisabled?m.state.selectedAnnotation:(_=m._editor.current)===null||_===void 0?void 0:_.getCurrentAnnotation()}),gt(mt(m),"getSelectedImageSnippet",function(){return m.annotationLayer.getSelectedImageSnippet()}),gt(mt(m),"listDrawingTools",function(){return m.annotationLayer.listDrawingTools()}),gt(mt(m),"panTo",function(_,E){return m.annotationLayer.panTo(_,E)}),gt(mt(m),"removeAnnotation",function(_){return m.annotationLayer.removeAnnotation(_)}),gt(mt(m),"removeDrawingTool",function(_){return m.annotationLayer.removeDrawingTool(_)}),gt(mt(m),"saveSelected",function(){return new Promise(function(_){var E=m.state.selectedAnnotation;if(E)if(m._editor.current)m._editor.current.onOk(),_();else if(E.isSelection)E.bodies.length>0||m.props.config.allowEmpty?m.onCreateOrUpdateAnnotation("onAnnotationCreated",_)(E):(m.annotationLayer.deselect(),_());else{var O=m.state,D=O.beforeHeadlessModify,z=O.modifiedTarget;D?m.onCreateOrUpdateAnnotation("onAnnotationUpdated",_)(E,D):z?m.onCreateOrUpdateAnnotation("onAnnotationUpdated",_)(E,E):m.onCancelAnnotation(E,_)}else _()})}),gt(mt(m),"selectAnnotation",function(_){var E=m.annotationLayer.selectAnnotation(_,!0);if(E)return m.handleSelect(E,!0),E.annotation.clone();m.clearState()}),gt(mt(m),"setAnnotations",function(_){return m.annotationLayer.init(_.map(function(E){return E.clone()}))}),gt(mt(m),"setDrawingEnabled",function(_){return m.annotationLayer.setDrawingEnabled(_)}),gt(mt(m),"setDrawingTool",function(_){return m.annotationLayer.setDrawingTool(_)}),gt(mt(m),"setVisible",function(_){m.annotationLayer.setVisible(_),_||m.clearState()}),gt(mt(m),"updateSelected",function(_,E){return new Promise(function(O){m.state.selectedAnnotation&&(E?m.state.selectedAnnotation.isSelection?m.onCreateOrUpdateAnnotation("onAnnotationCreated",O)(_):m.onCreateOrUpdateAnnotation("onAnnotationUpdated",O)(_,m.state.selectedAnnotation):m.setState({selectedAnnotation:_,beforeHeadlessModify:m.state.beforeHeadlessModify||m.state.selectedAnnotation},O))})}),m.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:y.config.readOnly,editorDisabled:y.config.disableEditor,widgets:y.config.widgets,beforeHeadlessModify:null},m._editor=t.default.createRef(),m}return s=v,(f=[{key:"componentDidMount",value:function(){this.annotationLayer=this.props.config.gigapixelMode?new sy(this.props):new Ug(this.props),this.annotationLayer.on("load",this.props.onLoad),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("endSelection",this.handleEndSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("clickAnnotation","onClickAnnotation"),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.onKeyUp)}},{key:"disableEditor",get:function(){return this.state.editorDisabled},set:function(y){this.setState({editorDisabled:y})}},{key:"disableSelect",get:function(){return this.annotationLayer.disableSelect},set:function(y){this.annotationLayer.disableSelect=y}},{key:"formatters",get:function(){return this.annotationLayer.formatters},set:function(y){this.annotationLayer.formatters=y}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(y){this.annotationLayer.readOnly=y,this.setState({readOnly:y})}},{key:"widgets",get:function(){return this.state.widgets},set:function(y){this.setState({widgets:y})}},{key:"render",value:function(){var y,m=this.state.selectedAnnotation&&!this.state.editorDisabled,_=this.state.readOnly||((y=this.state.selectedAnnotation)===null||y===void 0?void 0:y.readOnly);return m&&t.default.createElement(ag,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:_,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}])&&ay(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),v}(t.Component),ml=0;function lo(r){return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},lo(r)}function uy(r,s){for(var f=0;f<s.length;f++){var h=s[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(r,mh(h.key),h)}}function ut(r,s,f){return(s=mh(s))in r?Object.defineProperty(r,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[s]=f,r}function mh(r){var s=function(f,h){if(lo(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var b=u.call(f,"string");if(lo(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(r);return lo(s)==="symbol"?s:String(s)}var cy=function(){function r(h,u){var b=this;(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,r),ut(this,"handleAnnotationCreated",function(y,m){return b._emitter.emit("createAnnotation",y.underlying,m)}),ut(this,"handleAnnotationDeleted",function(y){return b._emitter.emit("deleteAnnotation",y.underlying)}),ut(this,"handleAnnotationSelected",function(y,m){return b._emitter.emit("selectAnnotation",y.underlying,m)}),ut(this,"handleAnnotationUpdated",function(y,m){return b._emitter.emit("updateAnnotation",y.underlying,m.underlying)}),ut(this,"handleCancelSelected",function(y){return b._emitter.emit("cancelSelected",y.underlying)}),ut(this,"handleClickAnnotation",function(y,m){return b._emitter.emit("clickAnnotation",y.underlying,m)}),ut(this,"handleLoad",function(y){return b._emitter.emit("load",y)}),ut(this,"handleSelectionCreated",function(y){return b._emitter.emit("createSelection",y.underlying)}),ut(this,"handleSelectionStarted",function(y){return b._emitter.emit("startSelection",y)}),ut(this,"handleSelectionEnded",function(y){return b._emitter.emit("endSelection",y)}),ut(this,"handleSelectionTargetChanged",function(y){return b._emitter.emit("changeSelectionTarget",y)}),ut(this,"handleMouseEnterAnnotation",function(y,m){return b._emitter.emit("mouseEnterAnnotation",y.underlying,m)}),ut(this,"handleMouseLeaveAnnotation",function(y,m){return b._emitter.emit("mouseLeaveAnnotation",y.underlying,m)}),ut(this,"_wrap",function(y){return(y==null?void 0:y.type)==="Annotation"?new cr(y):y}),ut(this,"addAnnotation",function(y){return b._app.current.addAnnotation(new cr(y))}),ut(this,"addDrawingTool",function(y){return b._app.current.addDrawingTool(y)}),ut(this,"cancelSelected",function(){return b._app.current.cancelSelected()}),ut(this,"clearAnnotations",function(){return b.setAnnotations([])}),ut(this,"clearAuthInfo",function(){return b._env.user=null}),ut(this,"destroy",function(){return t.default.unmountComponentAtNode(b.appContainerEl)}),ut(this,"fitBounds",function(y,m){return b._app.current.fitBounds(b._wrap(y),m)}),ut(this,"fitBoundsWithConstraints",function(y,m){return b._app.current.fitBoundsWithConstraints(b._wrap(y),m)}),ut(this,"getAnnotationById",function(y){var m=b._app.current.getAnnotationById(y);return m==null?void 0:m.underlying}),ut(this,"getAnnotations",function(){return b._app.current.getAnnotations().map(function(y){return y.underlying})}),ut(this,"getAnnotationsIntersecting",function(y){return b._app.current.getAnnotationsIntersecting(b._wrap(y))}),ut(this,"getImageSnippetById",function(y){return b._app.current.getImageSnippetById(y)}),ut(this,"getSelected",function(){var y=b._app.current.getSelected();return y==null?void 0:y.underlying}),ut(this,"getSelectedImageSnippet",function(){return b._app.current.getSelectedImageSnippet()}),ut(this,"listDrawingTools",function(){return b._app.current.listDrawingTools()}),ut(this,"loadAnnotations",function(y){return fetch(y).then(function(m){return m.json()}).then(function(m){return b.setAnnotations(m),m})}),ut(this,"off",function(y,m){return b._emitter.off(y,m)}),ut(this,"on",function(y,m){return b._emitter.on(y,m)}),ut(this,"once",function(y,m){return b._emitter.once(y,m)}),ut(this,"panTo",function(y,m){return b._app.current.panTo(b._wrap(y),m)}),ut(this,"removeAnnotation",function(y){return b._app.current.removeAnnotation(b._wrap(y))}),ut(this,"removeDrawingTool",function(y){return b._app.current.removeDrawingTool(y)}),ut(this,"saveSelected",function(){return b._app.current.saveSelected()}),ut(this,"selectAnnotation",function(y){var m=b._app.current.selectAnnotation(b._wrap(y));return m==null?void 0:m.underlying}),ut(this,"setAnnotations",function(y){var m=(y||[]).map(function(_){return new cr(_)});b._app.current.setAnnotations(m)}),ut(this,"setAuthInfo",function(y){return b._env.user=y}),ut(this,"setDrawingEnabled",function(y){return b._app.current.setDrawingEnabled(y)}),ut(this,"setDrawingTool",function(y){return b._app.current.setDrawingTool(y)}),ut(this,"setServerTime",function(y){return b._env.setServerTime(y)}),ut(this,"setVisible",function(y){return b._app.current.setVisible(y)}),ut(this,"updateSelected",function(y,m){var _=null;y.type==="Annotation"?_=new cr(y):y.type==="Selection"&&(_=new Ua(y.target,y.body)),_&&b._app.current.updateSelected(_,m)});var v=u||{};this._app=t.default.createRef(),this._emitter=new(e()),this._env={setServerTime:function(y){var m=Date.now();ml=y-m},getCurrentTimeAdjusted:function(){return new Date(Date.now()+ml).toISOString()},toClientTime:function(y){return Date.parse(y)-ml}},this._element=h.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),function(y,m){if(y){var _=y==="auto"?window.navigator.userLanguage||window.navigator.language:y,E=_.split("-")[0].toLowerCase(),O=[_,E].find(function(D){return It.includes(D)});O||console.warn("Unsupported locale '".concat(_,"'. Falling back to default en.")),Lt.init(O,m)}else Lt.init(null,m)}(v.locale,v.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),t.default.render(t.default.createElement(ly,{ref:this._app,viewer:h,wrapperEl:this._element,config:v,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionEnded:this.handleSelectionEnded,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onLoad:this.handleLoad,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}var s,f;return s=r,(f=[{key:"disableEditor",get:function(){return this._app.current.disableEditor},set:function(h){this._app.current.disableEditor=h}},{key:"disableSelect",get:function(){return this._app.current.disableSelect},set:function(h){this._app.current.disableSelect=h}},{key:"formatters",get:function(){return this._app.current.formatters||[]},set:function(h){if(h){var u=Array.isArray(h)?h:[h];this._app.current.formatters=u}else this._app.current.formatters=null}},{key:"readOnly",get:function(){return this._app.current.readOnly},set:function(h){this._app.current.readOnly=h}},{key:"widgets",get:function(){return this._app.current.widgets},set:function(h){this._app.current.widgets=h}}])&&uy(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),r}();const fy=function(r,s){return new cy(r,s)}})();var ew=Lp.Z;const Ol={hasIntersectionXYWH(t,o){const e=t[0],n=t[1],i=t[2],a=t[3],d=o[0],l=o[1],c=o[2],p=o[3];return Math.max(e,d)<=Math.min(e+i,d+c)&&Math.max(n,l)<=Math.min(n+a,l+p)},getXYWHFromTarget(t){const o=t.selector.value;let e=[0,0,0,0];return o.replace(/^xywh=pixel:([\d\.]+),([\d\.]+),([\d\.]+),([\d\.]+)$/,(n,...i)=>{e=i.slice(0,4).map(a=>parseFloat(a))}),e}};function tw(t){const o=document.createElement("div");return o.style.fontSize="12px",t.annotation.bodies.filter(e=>{(e.purpose=="commenting"||e.purpose=="replying"||!e.purpose)&&o.insertAdjacentHTML("beforeend",`<p>${e.value}</p>`)}),o}function Np(t,o){const e=document.createElement("div");e.style.cssText=`
    display:flex;
    flex-direction:row;
  `;const[n,i]=[t,o].map(l=>{const c=document.createElement("div");return c.innerText=l.label,l.labelCSS?c.style.cssText=l.labelCSS:c.classList.add("iiwidget-label-elm"),c}),[a,d]=[t,o].map(l=>{const c=document.createElement("div");return c.innerText=l.value,c.classList.add("iiwidget-input-elm"),c});return e.append(n,a,i,d),{container:e,input1:a,input2:d}}function nw(t){return function(e){const n=e.annotation.underlying,i=document.createElement("div");i.className="r6o-widget comment editable";const a=e.annotation?e.annotation.bodies.find(w=>w.purpose=="tagging"):null,d=!!a||n._type=="tagging",l=d?a.value:"",c=!!e.annotation&&e.annotation.bodies.some(w=>w.purpose=="describing")||n._type=="describing",p=d?a._bango||l.split("-")[0]:"",g=d?a._bango_eda||(/.+?\-(.+)/.test(l)?RegExp.$1:""):"";if(d||!c&&t.is_taggingmode&&n._type!="ocrtext"){n._type!="tagging"&&e.onSetProperty("_type","tagging");const w=function(X,te){return{type:"TextualBody",motivation:"commenting",purpose:"tagging",value:X+(te?"-"+te:""),_bango:X,_bango_eda:te}},S=function(){const X=A.value,te=M.value;e.onUpdateBody(a,w(X,te))};d||e.onAppendBody(w(p,g));const C=document.createElement("div");C.innerText="文書番号",C.style.cssText=`
        background-color:#666;
        color:#fff;
      `;const T=`
      width:80px;
      display:flex;
      justify-content:center;
      align-items:center;`,P=Np({label:"号:",labelCSS:T,value:p,onChange:S},{label:"枝:",labelCSS:T,value:g,onChange:S}),A=P.input1,M=P.input2,V=P.container;i.append(C,V)}else n._type||e.onSetProperty("_type","describing"),i.style.display="none";return i}}function Rs(t,o){return t=t||"見出し語",function(n){const i=document.createElement("div"),a=t,d=new RegExp(`^${a}: ([\\s\\S]*)$`),l=n.annotation.underlying,c=n.annotation?n.annotation.bodies.find(w=>w.purpose=="describing"&&d.test(w.value)):null,p=c&&d.exec(c.value)?RegExp.$1:"",g=!!n.annotation&&n.annotation.bodies.some(w=>w.purpose=="tagging");if(i.className="r6o-widget comment editable ii-comment",i.style.cssText=`
      display:flex;
      flex-direction:row;
    `,g||l._type=="ocrtext")return i.style.display="none",i;{const w=document.createElement("div");w.innerText=a,w.classList.add("iiwidget-label-elm");const S=document.createElement("div");S.innerText=p,S.classList.add("iiwidget-input-elm");const C=document.createElement("div");C.classList.add("iiwidget-searcher-elm");const T=document.createElement("button");return T.setAttribute("type","button"),T.innerHTML="🔍&#xFE0E;",T.title="索引型で検索: "+p,T.addEventListener("click",P=>{const A=p,M="https://wwwap.hi.u-tokyo.ac.jp/ships/w30/search",V=`?keyword=${A}&book=井伊家史料&searchtarget=索引型&expand=true&type=2&page=1&itemsperpage=200&sortby=title_word roll_page&sortdesc=false&sortitem=見出し語：昇順`,X=M+encodeURI(V);window.open(X)}),C.append(T),i.append(w,S,C),i}}}function Bp(t,o=function(n,i,a){},e){return t=t||["番号","枝番"],function(i){const a=!!i.annotation&&i.annotation.bodies.some(S=>S.purpose=="tagging"),d=i.annotation.underlying;if(a||d._type=="ocrtext"){const S=document.createElement("div");return S.style.display="none",S}const l=t.map(S=>new RegExp(`^${S}: ([\\s\\S]*)`));let c=["",""];i.annotation&&i.annotation.bodies.forEach(S=>{S.purpose=="describing"&&l.forEach((C,T)=>{C.test(S.value)&&(c[T]=RegExp.$1)})});const p=t.map((S,C)=>({label:S,value:c[C]})),w=Np(...p).container;return w.className="r6o-widget comment editable ii-comment",w}}function rw(t){return Bp(["番号","枝番"],function(n,i,a){if(!a[0]&&!a[1]){const d=n.annotation.target;if(!d)return;const l=Ol.getXYWHFromTarget(d),c=t.currentAnnotations,p=c.length;for(let g=0;g<p;g++){const w=c[g],S=w.body.length?w.body.find(C=>C.purpose=="tagging"):"";if(S){const C=Ol.getXYWHFromTarget(w.target);if(Ol.hasIntersectionXYWH(l,C)){const T=S._bango||S.value.split("-")[0],P=S._bango_eda||(/.+?\-(.+)/.test(S.value)?RegExp.$1:"");return[T,P]}}}}})}function iw(t){return Bp(["巻","頁"],function(n,i,a){if(!a[0]&&!a[1]&&!t.is_taggingmode){const d=parseInt(t.currentPage,10)+"";return[t.meta.volume,d]}})}function ow(t){const o=document.createElement("div");return o.classList.add("iiwidget-links-container"),t.annotation.bodies.filter(n=>n.purpose=="linking").forEach(n=>{if(n){const i=n.value,a=document.createElement("a");a.href=i,a.target="_blank",i.match(/^https\:\/\/wwwap\.hi\.u\-tokyo\.ac\.jp\/ships\/w30/)?a.innerText="近世史編纂支援DBへ":i.match(/^https\:\/\/wwwap\.hi\.u\-tokyo\.ac\.jp\/ships\/w03/)?a.innerText="維新史料綱要DBの関連項目を表示":i.match(/^https\:\/\/wwwap\.hi\.u\-tokyo\.ac\.jp\/ships\/w33/)?a.innerText="近世編年DBの関連項目を表示":a.innerText=i.slice(0,30);const d=document.createElement("div");d.append("🔗",a),d.style.fontSize="small",o.append(d)}}),o}function sw(t){return[nw(t),Rs("見出し語"),Rs("原文表記"),Rs("肩書き"),Rs("メモ"),rw(t),iw(t),ow,tw].map(o=>({widget:o,force:"plainjs"}))}function aw(t){return t.replace(/</g,"&lt;").replace(/>/g,"&lt;").replace(/&/g,"&amp;")}function lw(t){return function(o){const e=o.underlying;let n="";const i=o.bodies.find(d=>d.purpose=="tagging"&&(n=d.value)&&!0)||e._type=="tagging";if(e._type=="ocrtext")return{className:"ii-annotation-ocrtext",style:"stroke: #B0C5A4"};if(i){const d=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return d.setAttribute("width","100px"),d.setAttribute("height","1px"),d.innerHTML=`
      <div xmlns="http://www.w3.org/1999/xhtml" class="a9s-shape-label-wrapper">
        <div class="a9s-shape-label">
          ${aw(n)}
        </div>
      </div>
      `,{element:d,className:"ii-annotation-tagging",style:"stroke: blue"}}else return{className:"ii-annotation-box",style:"stroke: red"}}}const uw={hasIntersectionXYWH(t,o){const e=t[0],n=t[1],i=t[2],a=t[3],d=o[0],l=o[1],c=o[2],p=o[3];return Math.max(e,d)<=Math.min(e+i,d+c)&&Math.max(n,l)<=Math.min(n+a,l+p)},getXYWHFromTarget(t){const o=t.selector.value;let e=[0,0,0,0];return o.replace(/^xywh=pixel:([\d\.]+),([\d\.]+),([\d\.]+),([\d\.]+)$/,(n,...i)=>{e=i.slice(0,4).map(a=>parseFloat(a))}),e}},cw=["見出し語","読み","原文表記","肩書き","メモ","巻","頁","番号","枝番","備考"],Hp={};cw.forEach((t,o)=>Hp[t]=o);function fw({annotations:t=[],bookid:o="",strict:e=!1,iiifserver:n="http://localhost:5173/",iiifprefix:i="iiif/"}){if(!o)return;const a=Hi.list.find(S=>S.bookid==o),d=n+i,l=a.imageUrl.server+a.imageUrl.prefix+encodeURIComponent(a.identifier)+a.imageUrl.suffix,c=t.filter(S=>(S._type=="describing"||!S._type&&!e&&S.body.some(C=>C.purpose=="describing"))&&(S._bookid==o||!S._bookid&&!e&&(S._identifier==a.identifier||!S._identifier&&new RegExp(`^${l}`).test(S.target.source))));if(c.length<1)return;const p={},g=a.pages.map((S,C)=>{p[S]=C;const T=d+o+"/canvas/"+C;return{type:"Canvas",id:T,label:{none:[S]},width:a.width,height:a.height,items:[{type:"AnnotationPage",id:T+"/page",items:[{type:"Annotation",id:T+"/page/imageanno",motivation:"painting",target:T,body:{type:"Image",width:a.width,height:a.height,id:l+S+".jpg"}}]}],annotations:[{type:"AnnotationPage",id:T+"/annos",items:[]}]}});return c.forEach(S=>{const C=S._page||(e?"":new RegExp(`^${l}(.+)${a.imageUrl.extension}$`).exec(S.target.source)?RegExp.$1:"");if(!C)return;const T=p[C];if(typeof T!="number")return;const P=d+o+"/canvas/"+T,A=g[T].annotations[0].items.length;g[T].annotations[0].items.push({type:"Annotation",id:P+"/annos/"+A,motivation:"commenting",target:P+"#xywh="+uw.getXYWHFromTarget(S.target).join(","),body:S.body.filter(M=>M.purpose=="describing"||M.purpose=="linking").map(M=>({type:"TextualBody",purpose:M.purpose,value:M.value})).sort((M,V)=>{const[X,te]=[M,V].map(re=>Hp[/^(.+?): /.test(re.value)?RegExp.$1:""]+1||9999);return X-te})})}),{"@context":"http://iiif.io/api/presentation/3/context.json",type:"Manifest",id:d+o+"/manifest.json",label:{ja:[a.title]},items:g}}const hw={class:"popmenuwrapper"},dw={class:"popmenuopener"},pw={__name:"popmenu",props:{right:{type:Boolean,default:!1}},setup(t){const o=Hd(!1);return document.addEventListener("click",e=>{e.target.closest(".popmenuwrapper")||(o.value=!1)}),(e,n)=>(Un(),_r("div",hw,[pt("label",dw,[jl(pt("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=i=>o.value=i),style:{display:"none"}},null,512),[[C0,o.value]]),ea("… ")]),jl(pt("menu",{class:ko(["popmenu",{right:t.right}])},[Cv(e.$slots,"default")],2),[[h0,o.value]])]))}},mw=ia(pw,[["__scopeId","data-v-3ee44ec2"]]),gw={components:{popmenu:mw},data(){return{is_taggingmode:!1,is_annotating:!1,is_internal_routing:!1,is_sidepane_shown:!1,currentPage:"",viewer:null,anno:null,metalist:Hi}},computed:{nextPage(){const t=this.meta.pages,o=t.indexOf(this.currentPage)+1;return o!=0&&o<t.length?t[o]:""},prevPage(){const t=this.meta.pages,o=t.indexOf(this.currentPage)-1;return o>=0?t[o]:""},bookid(){return this.$route.params.bookid},routerpage(){return this.$route.params.page},meta(){const t=this.bookid,o=Hi.list.find(e=>e.bookid==t);return this.currentPage||(this.currentPage=o.pages[0]),o},annotations(){return this.$store.state.annotations},jsonUrlRoot(){return this.meta.jsonUrl.server+this.meta.jsonUrl.prefix+this.meta.identifier+this.meta.jsonUrl.suffix},imageUrlBase(){return this.meta.imageUrl.server+this.meta.imageUrl.prefix},imageUrlRoot(){return this.imageUrlBase+this.meta.identifier+this.meta.imageUrl.suffix},currentImageUrl(){return this.imageUrlRoot+this.currentPage+this.meta.imageUrl.extension},currentPageUrl(){return this.jsonUrlRoot+this.currentPage+this.meta.jsonUrl.extension},currentAnnotations(){return this.annotations.filter(t=>new RegExp("^"+this.currentImageUrl).test(t.target.source))}},methods:{exportAnnotationToJSON(){if(this.annotations.length<=0)return;const t=new Blob([JSON.stringify(this.annotations)],{type:"application/json"}),o=document.createElement("a");o.download=`annotation-${Date.now()}.json`,o.href=URL.createObjectURL(t),o.click(),URL.revokeObjectURL(t)},generateManifest(){return this.annotations.length<=0?void 0:fw({annotations:this.annotations,bookid:this.bookid,iiifserver:"https://c-kikuchi.github.io/",iiifprefix:"iiif/"})},exportManifest(){const t=this.generateManifest();if(!t)return;const o=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),e=document.createElement("a");e.download=`manifest-${Date.now()}.json`,e.href=URL.createObjectURL(o),e.click(),URL.revokeObjectURL(o)},openManifest(){const t=this.generateManifest();if(!t)return;const o=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});window.open(URL.createObjectURL(o))},async loadAnnotationFromJSON(t){const e=await t.target.files[0].text(),n=JSON.parse(e);n.length>0&&(this.$store.commit("addAnnotationByList",n),this.setPage())},async openViewer(){const t=this.currentPageUrl,o=await fetch(t).then(n=>n.json()),e=o.data?o.data:o;this.viewer.open(e)},setPage(){this.openViewer(),this.is_internal_routing=!0,this.$router.replace({path:`/viewer/${this.bookid}/${this.currentPage}`}),this.anno.setAnnotations(this.currentAnnotations)},gotoPage(t){this.currentPage=t,this.setPage()},getIdentifierFromAnnotation(t){return new RegExp(`^${this.imageUrlBase}(.+?)${this.meta.imageUrl.suffix}`).test(t.target.source)?RegExp.$1:""},getPageFromAnnotation(t){return new RegExp(`^${this.imageUrlRoot}(.+?)${this.meta.imageUrl.extension}`).test(t.target.source)?RegExp.$1:""},insertIdentifierAndPage(t){t._identifier||(t._identifier=this.meta.identifier),t._page||(t._page=this.currentPage),t._bookid||(t._bookid=this.meta.bookid),new RegExp(`^${this.meta.imageUrlBase}`).test(t.target.source)||(t.target.source=this.currentImageUrl)},addAnnotation(t){this.insertIdentifierAndPage(t),this.$store.commit("addAnnotation",t)},updateAnnotation(t,o){this.insertIdentifierAndPage(t),this.$store.commit("updateAnnotation",{annotation:t,previous:o})},deleteAnnotation(t){this.$store.commit("deleteAnnotation",t)},startAnnotationMode(){this.is_annotating&&this.anno.setDrawingEnabled(!0)},startTagAnnotationMode(){this.is_taggingmode&&this.anno.setDrawingEnabled(!0)},getPageDimension(){const t=this.viewer.source.dimensions;console.log("dimensions |",t.x,t.y)},async demo_openDefault(){const t=await fetch("/iike/default.json").then(o=>o.json());app.$store.commit("setAnnotations",t),this.setPage(),console.log("default loaded")}},watch:{$route(t,o){if(this.is_internal_routing){this.is_internal_routing=!1;return}t.params.page!=o.params.page&&(this.currentPage=t.params.page),t.params.bookid!=o.params.bookid&&(this.currentPage=t.params.page||this.meta.pages[0]),this.setPage()}},async mounted(){const t=this,o={get is_taggingmode(){return t.is_taggingmode},get currentAnnotations(){return t.currentAnnotations},get meta(){return t.meta},get currentPage(){return t.currentPage}};this.routerpage&&(this.currentPage=this.routerpage),this.viewer=Ip({element:this.$refs.osd_elm,zoomInButton:this.$refs.zoominbutton,zoomOutButton:this.$refs.zoomoutbutton,homeButton:this.$refs.homebutton,fullPageButton:this.$refs.fullpagebutton,toolbar:this.$refs.toolbar_elm});const e=ew(this.viewer,{widgets:sw(o),formatter:lw()});e.readOnly=!0,e.on("createSelection",n=>{console.log(n)}),e.on("createAnnotation",n=>{this.addAnnotation(n),this.is_annotating=!1,this.is_taggingmode=!1}),e.on("updateAnnotation",(n,i)=>{this.updateAnnotation(n,i)}),e.on("deleteAnnotation",n=>{this.deleteAnnotation(n),console.log("delete annotation")}),e.on("cancelSelected",()=>{this.is_annotating=!1,this.is_taggingmode=!1}),this.anno=e,this.setPage(),window.app=this}},yw={class:"ii-root"},vw={class:"ii-main-pane"},bw={class:"ii-header"},ww={style:{float:"left"}},Sw=pt("strong",null,"<Home",-1),_w={style:{"text-align":"center","font-size":"large"}},xw={ref:"toolbar_elm",class:"ii-toolbar"},Ew={class:"ii-toolbar-controls"},Tw={class:"ii-zoom-control"},Pw={ref:"zoominbutton",title:"zoom in"},Ow={ref:"zoomoutbutton",title:"zoom out"},Cw={ref:"homebutton",title:"reset zoom"},Aw={ref:"fullpagebutton",title:"full screen"},Rw={class:"ii-page-control"},Dw=["disabled"],kw=["disabled"],Mw={class:"ii-image-viewer",ref:"osd_elm"};function jw(t,o,e,n,i,a){const d=lv("RouterLink");return Un(),_r("main",yw,[pt("div",vw,[pt("div",bw,[pt("div",ww,[ln(d,{to:"/"},{default:uu(()=>[Sw]),_:1})]),pt("h1",_w,zr(a.meta.title),1)]),pt("div",xw,[pt("div",Ew,[pt("div",Tw,[pt("button",Pw,"+",512),pt("button",Ow,"-",512),pt("button",Cw,"🏠︎",512),pt("button",Aw,"⛶",512)]),pt("div",Rw,[pt("button",{disabled:!this.nextPage,onClick:o[0]||(o[0]=l=>{this.currentPage=this.nextPage,a.setPage()})},"next",8,Dw),jl(pt("select",{"onUpdate:modelValue":o[1]||(o[1]=l=>i.currentPage=l),onChange:o[2]||(o[2]=l=>a.setPage())},[(Un(!0),_r(hn,null,tp(a.meta.pages,l=>(Un(),_r("option",null,zr(l),1))),256))],544),[[A0,i.currentPage]]),pt("button",{disabled:!this.prevPage,onClick:o[3]||(o[3]=l=>{this.currentPage=this.prevPage,a.setPage()})},"prev",8,kw)])])],512),pt("div",Mw,null,512),pt("div",null,[pt("div",null,[pt("button",{onClick:o[4]||(o[4]=(...l)=>a.exportAnnotationToJSON&&a.exportAnnotationToJSON(...l))},"Export JSON"),pt("button",{onClick:o[5]||(o[5]=(...l)=>a.exportManifest&&a.exportManifest(...l))},"Export Manifest"),pt("button",{onClick:o[6]||(o[6]=(...l)=>a.openManifest&&a.openManifest(...l))},"Show Manifest"),pt("input",{type:"file",onChange:o[7]||(o[7]=(...l)=>a.loadAnnotationFromJSON&&a.loadAnnotationFromJSON(...l))},null,32),pt("button",{onClick:o[8]||(o[8]=(...l)=>a.demo_openDefault&&a.demo_openDefault(...l))},"(DEMO)load demo json")])]),pt("div",null,[pt("div",null,"Annotations: "+zr(this.annotations.length)+" (in this page: "+zr(this.currentAnnotations.length)+")",1)])]),pt("div",{class:ko(["ii-side-pane",{show:i.is_sidepane_shown}])},null,2)])}const Iw=ia(gw,[["render",jw]]),Lw={computed:{bookid(){return this.$route.params.bookid},currentMeta(){const t=this.bookid;return Hi.list.find(o=>o.bookid==t)}},beforeRouteUpdate(t,o,e){console.log(t,o);const n=t.params.bookid;Hi.list.findIndex(i=>i.bookid==n)!=-1?e():(console.log("!"),e(!1))}};function Nw(t,o,e,n,i,a){return Un(),_r(hn,null,[pt("div",null,"bookid: "+zr(a.bookid),1),pt("div",null,[pt("pre",null,zr(JSON.stringify(a.currentMeta,null,2)),1)])],64)}const Bw=ia(Lw,[["render",Nw]]),Hw=Ub({history:bb("/iike"),routes:[{path:"/",name:"home",component:Yb},{path:"/viewer/:bookid/:page?",name:"viewer",component:Iw,beforeEnter(t,o,e){e()}},{path:"/meta/:bookid",name:"meta",component:Bw}]});/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Fw="store";function Ui(t,o){Object.keys(t).forEach(function(e){return o(t[e],e)})}function zw(t){return t!==null&&typeof t=="object"}function Uw(t){return t&&typeof t.then=="function"}function Vw(t,o){return function(){return t(o)}}function Fp(t,o,e){return o.indexOf(t)<0&&(e&&e.prepend?o.unshift(t):o.push(t)),function(){var n=o.indexOf(t);n>-1&&o.splice(n,1)}}function zp(t,o){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var e=t.state;oa(t,e,[],t._modules.root,!0),gu(t,e,o)}function gu(t,o,e){var n=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};Ui(i,function(d,l){a[l]=Vw(d,t),Object.defineProperty(t.getters,l,{get:function(){return a[l]()},enumerable:!0})}),t._state=jo({data:o}),t.strict&&Zw(t),n&&e&&t._withCommit(function(){n.data=null})}function oa(t,o,e,n,i){var a=!e.length,d=t._modules.getNamespace(e);if(n.namespaced&&(t._modulesNamespaceMap[d],t._modulesNamespaceMap[d]=n),!a&&!i){var l=yu(o,e.slice(0,-1)),c=e[e.length-1];t._withCommit(function(){l[c]=n.state})}var p=n.context=Ww(t,d,e);n.forEachMutation(function(g,w){var S=d+w;Gw(t,S,g,p)}),n.forEachAction(function(g,w){var S=g.root?w:d+w,C=g.handler||g;qw(t,S,C,p)}),n.forEachGetter(function(g,w){var S=d+w;Xw(t,S,g,p)}),n.forEachChild(function(g,w){oa(t,o,e.concat(w),g,i)})}function Ww(t,o,e){var n=o==="",i={dispatch:n?t.dispatch:function(a,d,l){var c=Ws(a,d,l),p=c.payload,g=c.options,w=c.type;return(!g||!g.root)&&(w=o+w),t.dispatch(w,p)},commit:n?t.commit:function(a,d,l){var c=Ws(a,d,l),p=c.payload,g=c.options,w=c.type;(!g||!g.root)&&(w=o+w),t.commit(w,p,g)}};return Object.defineProperties(i,{getters:{get:n?function(){return t.getters}:function(){return Up(t,o)}},state:{get:function(){return yu(t.state,e)}}}),i}function Up(t,o){if(!t._makeLocalGettersCache[o]){var e={},n=o.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,n)===o){var a=i.slice(n);Object.defineProperty(e,a,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[o]=e}return t._makeLocalGettersCache[o]}function Gw(t,o,e,n){var i=t._mutations[o]||(t._mutations[o]=[]);i.push(function(d){e.call(t,n.state,d)})}function qw(t,o,e,n){var i=t._actions[o]||(t._actions[o]=[]);i.push(function(d){var l=e.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},d);return Uw(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):l})}function Xw(t,o,e,n){t._wrappedGetters[o]||(t._wrappedGetters[o]=function(a){return e(n.state,n.getters,a.state,a.getters)})}function Zw(t){ki(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function yu(t,o){return o.reduce(function(e,n){return e[n]},t)}function Ws(t,o,e){return zw(t)&&t.type&&(e=o,o=t,t=t.type),{type:t,payload:o,options:e}}var Yw="vuex bindings",pd="vuex:mutations",Cl="vuex:actions",Pi="vuex",Kw=0;function Jw(t,o){U0({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Yw]},function(e){e.addTimelineLayer({id:pd,label:"Vuex Mutations",color:md}),e.addTimelineLayer({id:Cl,label:"Vuex Actions",color:md}),e.addInspector({id:Pi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),e.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===Pi)if(n.filter){var i=[];qp(i,o._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[Gp(o._modules.root,"")]}),e.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===Pi){var i=n.nodeId;Up(o,i),n.state=eS(nS(o._modules,i),i==="root"?o.getters:o._makeLocalGettersCache,i)}}),e.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===Pi){var i=n.nodeId,a=n.path;i!=="root"&&(a=i.split("/").filter(Boolean).concat(a)),o._withCommit(function(){n.set(o._state.data,a,n.state.value)})}}),o.subscribe(function(n,i){var a={};n.payload&&(a.payload=n.payload),a.state=i,e.notifyComponentUpdate(),e.sendInspectorTree(Pi),e.sendInspectorState(Pi),e.addTimelineEvent({layerId:pd,event:{time:Date.now(),title:n.type,data:a}})}),o.subscribeAction({before:function(n,i){var a={};n.payload&&(a.payload=n.payload),n._id=Kw++,n._time=Date.now(),a.state=i,e.addTimelineEvent({layerId:Cl,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:a}})},after:function(n,i){var a={},d=Date.now()-n._time;a.duration={_custom:{type:"duration",display:d+"ms",tooltip:"Action duration",value:d}},n.payload&&(a.payload=n.payload),a.state=i,e.addTimelineEvent({layerId:Cl,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:a}})}})})}var md=8702998,Qw=6710886,$w=16777215,Vp={label:"namespaced",textColor:$w,backgroundColor:Qw};function Wp(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function Gp(t,o){return{id:o||"root",label:Wp(o),tags:t.namespaced?[Vp]:[],children:Object.keys(t._children).map(function(e){return Gp(t._children[e],o+e+"/")})}}function qp(t,o,e,n){n.includes(e)&&t.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:o.namespaced?[Vp]:[]}),Object.keys(o._children).forEach(function(i){qp(t,o._children[i],e,n+i+"/")})}function eS(t,o,e){o=e==="root"?o:o[e];var n=Object.keys(o),i={state:Object.keys(t.state).map(function(d){return{key:d,editable:!0,value:t.state[d]}})};if(n.length){var a=tS(o);i.getters=Object.keys(a).map(function(d){return{key:d.endsWith("/")?Wp(d):d,editable:!1,value:Gl(function(){return a[d]})}})}return i}function tS(t){var o={};return Object.keys(t).forEach(function(e){var n=e.split("/");if(n.length>1){var i=o,a=n.pop();n.forEach(function(d){i[d]||(i[d]={_custom:{value:{},display:d,tooltip:"Module",abstract:!0}}),i=i[d]._custom.value}),i[a]=Gl(function(){return t[e]})}else o[e]=Gl(function(){return t[e]})}),o}function nS(t,o){var e=o.split("/").filter(function(n){return n});return e.reduce(function(n,i,a){var d=n[i];if(!d)throw new Error('Missing module "'+i+'" for path "'+o+'".');return a===e.length-1?d:d._children},o==="root"?t:t.root._children)}function Gl(t){try{return t()}catch(o){return o}}var Mn=function(o,e){this.runtime=e,this._children=Object.create(null),this._rawModule=o;var n=o.state;this.state=(typeof n=="function"?n():n)||{}},Xp={namespaced:{configurable:!0}};Xp.namespaced.get=function(){return!!this._rawModule.namespaced};Mn.prototype.addChild=function(o,e){this._children[o]=e};Mn.prototype.removeChild=function(o){delete this._children[o]};Mn.prototype.getChild=function(o){return this._children[o]};Mn.prototype.hasChild=function(o){return o in this._children};Mn.prototype.update=function(o){this._rawModule.namespaced=o.namespaced,o.actions&&(this._rawModule.actions=o.actions),o.mutations&&(this._rawModule.mutations=o.mutations),o.getters&&(this._rawModule.getters=o.getters)};Mn.prototype.forEachChild=function(o){Ui(this._children,o)};Mn.prototype.forEachGetter=function(o){this._rawModule.getters&&Ui(this._rawModule.getters,o)};Mn.prototype.forEachAction=function(o){this._rawModule.actions&&Ui(this._rawModule.actions,o)};Mn.prototype.forEachMutation=function(o){this._rawModule.mutations&&Ui(this._rawModule.mutations,o)};Object.defineProperties(Mn.prototype,Xp);var Xr=function(o){this.register([],o,!1)};Xr.prototype.get=function(o){return o.reduce(function(e,n){return e.getChild(n)},this.root)};Xr.prototype.getNamespace=function(o){var e=this.root;return o.reduce(function(n,i){return e=e.getChild(i),n+(e.namespaced?i+"/":"")},"")};Xr.prototype.update=function(o){Zp([],this.root,o)};Xr.prototype.register=function(o,e,n){var i=this;n===void 0&&(n=!0);var a=new Mn(e,n);if(o.length===0)this.root=a;else{var d=this.get(o.slice(0,-1));d.addChild(o[o.length-1],a)}e.modules&&Ui(e.modules,function(l,c){i.register(o.concat(c),l,n)})};Xr.prototype.unregister=function(o){var e=this.get(o.slice(0,-1)),n=o[o.length-1],i=e.getChild(n);i&&i.runtime&&e.removeChild(n)};Xr.prototype.isRegistered=function(o){var e=this.get(o.slice(0,-1)),n=o[o.length-1];return e?e.hasChild(n):!1};function Zp(t,o,e){if(o.update(e),e.modules)for(var n in e.modules){if(!o.getChild(n))return;Zp(t.concat(n),o.getChild(n),e.modules[n])}}function rS(t){return new mn(t)}var mn=function(o){var e=this;o===void 0&&(o={});var n=o.plugins;n===void 0&&(n=[]);var i=o.strict;i===void 0&&(i=!1);var a=o.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Xr(o),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=a;var d=this,l=this,c=l.dispatch,p=l.commit;this.dispatch=function(S,C){return c.call(d,S,C)},this.commit=function(S,C,T){return p.call(d,S,C,T)},this.strict=i;var g=this._modules.root.state;oa(this,g,[],this._modules.root),gu(this,g),n.forEach(function(w){return w(e)})},vu={state:{configurable:!0}};mn.prototype.install=function(o,e){o.provide(e||Fw,this),o.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&Jw(o,this)};vu.state.get=function(){return this._state.data};vu.state.set=function(t){};mn.prototype.commit=function(o,e,n){var i=this,a=Ws(o,e,n),d=a.type,l=a.payload,c={type:d,payload:l},p=this._mutations[d];p&&(this._withCommit(function(){p.forEach(function(w){w(l)})}),this._subscribers.slice().forEach(function(g){return g(c,i.state)}))};mn.prototype.dispatch=function(o,e){var n=this,i=Ws(o,e),a=i.type,d=i.payload,l={type:a,payload:d},c=this._actions[a];if(c){try{this._actionSubscribers.slice().filter(function(g){return g.before}).forEach(function(g){return g.before(l,n.state)})}catch{}var p=c.length>1?Promise.all(c.map(function(g){return g(d)})):c[0](d);return new Promise(function(g,w){p.then(function(S){try{n._actionSubscribers.filter(function(C){return C.after}).forEach(function(C){return C.after(l,n.state)})}catch{}g(S)},function(S){try{n._actionSubscribers.filter(function(C){return C.error}).forEach(function(C){return C.error(l,n.state,S)})}catch{}w(S)})})}};mn.prototype.subscribe=function(o,e){return Fp(o,this._subscribers,e)};mn.prototype.subscribeAction=function(o,e){var n=typeof o=="function"?{before:o}:o;return Fp(n,this._actionSubscribers,e)};mn.prototype.watch=function(o,e,n){var i=this;return ki(function(){return o(i.state,i.getters)},e,Object.assign({},n))};mn.prototype.replaceState=function(o){var e=this;this._withCommit(function(){e._state.data=o})};mn.prototype.registerModule=function(o,e,n){n===void 0&&(n={}),typeof o=="string"&&(o=[o]),this._modules.register(o,e),oa(this,this.state,o,this._modules.get(o),n.preserveState),gu(this,this.state)};mn.prototype.unregisterModule=function(o){var e=this;typeof o=="string"&&(o=[o]),this._modules.unregister(o),this._withCommit(function(){var n=yu(e.state,o.slice(0,-1));delete n[o[o.length-1]]}),zp(this)};mn.prototype.hasModule=function(o){return typeof o=="string"&&(o=[o]),this._modules.isRegistered(o)};mn.prototype.hotUpdate=function(o){this._modules.update(o),zp(this,!0)};mn.prototype._withCommit=function(o){var e=this._committing;this._committing=!0,o(),this._committing=e};Object.defineProperties(mn.prototype,vu);const iS=rS({state(){return{annotations:[],annotations_IDSet:new Set}},mutations:{addAnnotation(t,o){t.annotations.push(o),t.annotations_IDSet.add(o.id)},updateAnnotation(t,o){const{annotation:e,previous:n}=o,i=t.annotations.findIndex(a=>a.id==n.id);t.annotations[i]=e},deleteAnnotation(t,o){const e=t.annotations.findIndex(n=>n.id==o.id);t.annotations.splice(e,1)},addAnnotationByList(t,o){t.annotations.push(...o),o.forEach(e=>{t.annotations_IDSet.add(e.id)})},setAnnotations(t,o){const e=[];o.forEach(n=>{t.annotations_IDSet.has(n.id)||(t.annotations_IDSet.add(n.id),e.push(n))}),t.annotations.push(...e)}}}),bu=k0(Gb);bu.use(Hw);bu.use(iS);bu.mount("#app");
